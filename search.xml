<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Deep-Learning</title>
      <link href="/2024/07/20/Deep-Learning/"/>
      <url>/2024/07/20/Deep-Learning/</url>
      
        <content type="html"><![CDATA[<p>Learning note for the course <ahref="https://www.coursera.org/specializations/deep-learning">DeepLearning Specialization</a></p><span id="more"></span><h1 id="neural-networks-and-deep-learning">Neural Networks and DeepLearning</h1><h2 id="introduction-to-deep-learning">Introduction to DeepLearning</h2><p>Neural network:</p><p>有一个输入x，经过一些神经元后计算得到结果y。所以线性回归是一个神经元的神经网络。</p><p>复杂模型如预测房价的时候可以有多个神经元</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024081012845398%E2%80%AFPM.png"alt="image-2024081012845398 PM" /><figcaption aria-hidden="true">image-2024081012845398 PM</figcaption></figure><p>Structured Data：如存在数据库里的数据</p><p>Unstructured Data： 如图片，音频，视频</p><p>要想提升预测的准确性，要不就使用更多数据，要不就使用更大的神经网络模型。</p><h2 id="logistic-regression-as-a-neural-network">Logistic Regression asa Neural Network</h2><h3 id="notations">Notations</h3><p>例：给一个二元分类问题：分辨图片里是不是猫</p><p><strong>General comments:</strong></p><ul><li>superscript <span class="math inline">\((i)\)</span> will denote the<span class="math inline">\(i^{\text{th}}\)</span> training examplewhile superscript <span class="math inline">\([l]\)</span> will denotethe <span class="math inline">\(l^{\text{th}}\)</span> layer</li></ul><p><strong>Sizes:</strong></p><ul><li><p><span class="math inline">\(m\)</span>: number of examples in thedataset</p></li><li><p><span class="math inline">\(n_x\)</span>: input size</p></li><li><p><span class="math inline">\(n_y\)</span>: output size (or numberof classes)</p></li><li><p><span class="math inline">\(n_h^{[l]}\)</span>: number of hiddenunits of the <span class="math inline">\(l^{\text{th}}\)</span>layer</p><p>In a for loop, it is possible to denote <spanclass="math inline">\(n_x = n_h^{[0]}\)</span> and <spanclass="math inline">\(n_y = n_h^{[\text{number of layers} +1]}\)</span>.</p></li><li><p><span class="math inline">\(L\)</span>: number of layers in thenetwork.</p></li></ul><p><strong>Objects:</strong></p><ul><li><span class="math inline">\(X \in \mathbb{R}^{n_x \times m}\)</span>is the input matrix</li><li><span class="math inline">\(x^{(i)} \in \mathbb{R}^{n_x}\)</span> isthe <span class="math inline">\(i^{\text{th}}\)</span> examplerepresented as a column vector</li><li><span class="math inline">\(Y \in \mathbb{R}^{n_y \times m}\)</span>is the label matrix</li><li><span class="math inline">\(y^{(i)} \in \mathbb{R}^{n_y}\)</span> isthe output label for the <spanclass="math inline">\(i^{\text{th}}\)</span> example</li><li><span class="math inline">\(W^{[l]} \in \mathbb{R}^{\text{number ofunits in next layer} \times \text{number of units in the previouslayer}}\)</span> is the weight matrix, superscript <spanclass="math inline">\([l]\)</span> indicates the layer</li><li><span class="math inline">\(b^{[l]} \in \mathbb{R}^{\text{number ofunits in next layer}}\)</span> is the bias vector in the <spanclass="math inline">\(l^{\text{th}}\)</span> layer</li><li><span class="math inline">\(\hat{y} \in \mathbb{R}^{n_y}\)</span> isthe predicted output vector. It can also be denoted <spanclass="math inline">\(a^{[L]}\)</span> where <spanclass="math inline">\(L\)</span> is the number of layers in thenetwork.</li></ul><p><strong>Common forward propagation equation examples:</strong></p><ul><li><span class="math inline">\(a = g^{[l]}(W^{[l]}x^{(i)} + b_1) =g^{[l]}(z_1)\)</span> where <span class="math inline">\(g^{[l]}\)</span>denotes the <span class="math inline">\(l^{\text{th}}\)</span> layeractivation function</li><li><span class="math inline">\(\hat{y}^{(i)} = \text{softmax}(W_{hh} +b_2)\)</span></li></ul><p><strong>General Activation Formula:</strong></p><ul><li><p><span class="math inline">\(a_j^{[l]} = g^{[l]}\left(\sum_kw_{jk}^{[l]} a_k^{[l-1]} + b_j^{[l]}\right) =g^{[l]}(z_j^{[l]})\)</span></p></li><li><p><span class="math inline">\(J(x, W, b, y)\)</span> or <spanclass="math inline">\(J(\hat{y}, y)\)</span> denote the costfunction.</p></li></ul><p><strong>Examples of cost function:</strong></p><ul><li><span class="math inline">\(J_{\text{CE}}(\hat{y}, y) =-\sum_{i=0}^m y^{(i)} \log \hat{y}^{(i)}\)</span></li><li><span class="math inline">\(J_1(\hat{y}, y) = \sum_{i=0}^m | y^{(i)}- \hat{y}^{(i)} |\)</span></li></ul>]]></content>
      
      
      <categories>
          
          <category> MachineLearning </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Azure-learn</title>
      <link href="/2024/07/07/Azure-learn/"/>
      <url>/2024/07/07/Azure-learn/</url>
      
        <content type="html"><![CDATA[<p>AZ 900 note</p><span id="more"></span><h1 id="core-concepts-and-service">Core Concepts and Service</h1><h2 id="cloud-computing">Cloud Computing</h2><p>describe cloud concepts 20-25%</p><p>Three deployment models for cloud computing:</p><h3 id="public-cloud">Public cloud</h3><p>公有云通过公共互联网提供，任何人都能购买使用，按用量支付。</p><p>优点：</p><ul><li>按需消费</li><li>无需硬件投资</li><li>自动化快速配置</li><li>减少硬件维护</li></ul><h3 id="private-cloud">private cloud</h3><p>私有云是企业专有的计算资源，可以在组织办公地点也可以由第三方提供。</p><p>优点：</p><ul><li>有一些无法在公共云中复制的环境需要</li><li>无法轻易迁移的程序</li><li>数据主权和安全</li><li>法规认证</li></ul><h3 id="hybrid-cloud">hybrid cloud</h3><p>部分私有部分公有</p><h2 id="cloud-computing-types">Cloud computing types</h2><h3 id="image-2024070824049880-pm"><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024070824049880%E2%80%AFPM.png"alt="image-2024070824049880 PM" /></h3><h3 id="saassoftware-as-a-service软件即服务"><strong>SaaS（Software as aService，软件即服务）</strong>：</h3><p>​ • <strong>定义</strong>：SaaS是一种通过互联网提供的软件服务模式。用户可以通过网络访问和使用软件，而不需要关心软件的安装、维护和管理。</p><p>​ • <strong>特点</strong>：</p><p>​ • 软件由服务提供商托管，用户通过浏览器或客户端访问。</p><p>​ • 用户不需要管理基础设施或平台，只需使用软件功能。</p><p>​ •适用于各种业务应用，如电子邮件、办公软件、客户关系管理（CRM）系统等。</p><p>​ • <strong>例子</strong>：Google Workspace（原 G Suite）、MicrosoftOffice 365、Salesforce。</p><h3id="iaasinfrastructure-as-a-service基础设施即服务"><strong>IaaS（Infrastructureas a Service，基础设施即服务）</strong>：</h3><p>​ • <strong>定义</strong>：IaaS提供计算基础设施，如虚拟化的计算资源、存储、网络等，用户可以根据需求灵活配置和使用。</p><p>​ • <strong>特点</strong>：</p><p>​ •提供虚拟机、存储空间、网络资源等基础设施，用户可以部署和管理自己的操作系统和应用程序。</p><p>​ • 用户需要管理操作系统、应用程序和数据，但不需要管理底层硬件。</p><p>​ • 适用于需要高度灵活性和控制力的企业和开发者。</p><p>​ • <strong>例子</strong>：Amazon Web Services（AWS）、MicrosoftAzure、Google Cloud Platform（GCP）。</p><h3 id="paasplatform-as-a-service平台即服务"><strong>PaaS（Platform as aService，平台即服务）</strong>：</h3><p>​ • <strong>定义</strong>：PaaS提供一个平台，包括操作系统、编程语言执行环境、数据库和 web服务器，用户可以在这个平台上开发、运行和管理应用程序。</p><p>​ • <strong>特点</strong>：</p><p>​ •提供完整的开发和部署环境，开发者可以专注于代码和应用程序，而不需要管理底层基础设施。</p><p>​ • 包括应用程序开发框架、中间件、数据库管理系统等。</p><p>​ • 适用于开发、测试和部署应用程序的开发者和企业。</p><p>​ • <strong>例子</strong>：Google App Engine、Heroku、Microsoft AzureApp Services。</p><p>总结来说，SaaS 是为最终用户提供的软件服务，IaaS是为需要基础设施的用户提供的服务，而 PaaS是为开发者提供的开发和部署平台。</p><h2 id="azure-cosmos-db">Azure Cosmos DB</h2><p>基于Azure SQL 的关系型数据库。</p><blockquote><p>关系型数据库：使用表来表示和存储数据</p><p><strong>主要特点：</strong></p><p>​ 1.<strong>表结构</strong>：数据存储在表中，每个表包含多行和多列。每一行代表一条记录，每一列代表一个字段。</p><p>​ 2. <strong>关系</strong>：表之间可以通过外键（foreignkeys）建立关系，从而实现数据的关联和查询。</p><p>​ 3. <strong>SQL（Structured QueryLanguage）</strong>：关系型数据库使用SQL作为其标准查询语言，用于执行数据的查询、插入、更新和删除操作。</p><p>​ 4. <strong>数据完整性</strong>：通过主键（primarykey）、外键和其他约束（constraints）来确保数据的一致性和完整性。</p><p>​ 5.<strong>事务支持</strong>：关系型数据库支持事务（transactions），保证一组操作的原子性、一致性、隔离性和持久性（ACID属性）。</p></blockquote><p>使用迁移工具可以方便地将本地SQL数据库迁移到Azure SQL里</p><p>所有用户每一个订阅都可以有一个免费SQL数据库，有免费的32G存储和100000秒vCore使用，这里vCore在使用时才会计时，不用的时候不计时，所以时间够用。sqluser/password1!</p><h2 id="azure-synapse-analytics">Azure Synapse Analytics</h2><p>用于处理大数据</p><h2 id="azure-blob-storage">Azure Blob storage</h2><p>storage service optimized for very large objects, such as video,audio, bitmaps.</p><h2 id="azure-compute">Azure compute</h2><h3 id="virtual-machines">Virtual Machines</h3><p>scale set 可以管理一组虚拟机来实现负载均衡。</p><h3 id="container-services">Container Services</h3><p>可以管理容器。使用kubernetes可以管理一个容器集群。</p><h3 id="azure-app-service">Azure App Service</h3><p>管理app</p><h3 id="azure-functions">Azure functions</h3><p>无服务器计算服务，只需要运行一些函数代码时使用。</p><h2 id="azure-storage">Azure Storage</h2><p>blob是非结构化存储方案，用于存储大量文件</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024070984825743%E2%80%AFPM.png"alt="image-2024070984825743 PM" /><figcaption aria-hidden="true">image-2024070984825743 PM</figcaption></figure><h2 id="azure-policy">Azure policy</h2><p>Azure Policy is a service in Azure that you use to create, assign,and manage policies. These policies enforce different rules and effectsover your resources, so those resources stay compliant with yourcorporate standards and service level agreements. You can use AzurePolicy to enforce policies that limit the regions available for resourcecreation.</p><h2 id="azure-ai">Azure AI</h2><h3 id="azure-machine-learning">Azure Machine Learning</h3><p>使用数据训练。</p><p>使用现有数据进行预测而不是预训练模型进行预测。重点在于使用以往数据来做事情。</p><h3 id="azure-cognitive-service">Azure Cognitive Service</h3><p>包含一些训练好的模型，可以直接进行预测。</p><p>语音转文字，语言识别，预测用户行为等，重点在于understand content andmeaning</p><h3 id="azure-bot-service">Azure Bot Service</h3><p>提供和人类交流的机器人如ChatBot，重点在于是一个virtual agent。</p><h2 id="azure-devops">Azure DevOps</h2><h3 id="azure-devops-services">Azure DevOps Services</h3><p>包含一系列软件开发流程相关的工具，如boards, repos, pipelines等。</p><h3 id="github">Github</h3><p>代码存储，运行，自动化。</p><h2 id="azure-serverless-technology">Azure Serverless technology</h2><h3 id="azure-functions-1">Azure functions</h3><p>更偏向代码，如果有现成代码就用这个</p><h3 id="azure-logic-apps">Azure Logic apps</h3><p>更偏向GUI界面</p><h2 id="azure-iot-service">Azure IOT Service</h2><h3 id="azure-iot-hub">Azure IoT Hub</h3><p>特点：<strong>acts as a central message point for bi-directionalcommunication between your IoT application and the devices itmanages</strong></p><p>链接IoT设备到hub管理</p><p>可以控制设备，还可以监控设备。</p><p>从设备到服务器发送信息</p><h3 id="iot-central">IoT Central</h3><p>特点：可以使用预设好的自定义用户界面userinterface来远程查看和控制所有设备</p><p>推送更新，批量管理</p><p>使用设备模板</p><h3 id="azure-sphere">Azure Sphere</h3><p>特点：安全性最高，控制全套安全设置</p><h2 id="azure-security">Azure Security</h2><h3 id="azure-security-center">Azure Security Center</h3><ol type="1"><li>监控所有服务的安全情况和设置</li><li>当有资源上线时自动申请权限</li><li>提供安全建议</li><li>监控资源并且识别漏洞</li><li>使用机器学习检测漏洞</li><li>In-time access control可以设置在特定时间允许流量进入</li></ol><h3 id="azure-sentinel">Azure Sentinel</h3><p>基于云的SIEM系统</p><ol type="1"><li>收集大数据</li><li>检测威胁</li><li>快速相应</li></ol><h3 id="azure-key-vault">Azure Key Vault</h3><p>密码管理器</p><h3 id="azure-dedicated-host">Azure Dedicated host</h3><p>为了符合法规要求，它要求某些组织成为唯一使用托管虚拟机的物理机的客户。</p><h2 id="network-security">Network Security</h2><p>Azure 网络由很多层layer来保护</p><p>Physical layer：保安</p><p>Perimeter layer：防DDoS攻击</p><p>Network layer：限制数据通信，通过限制访问权限来保护</p><p>Compute layer：系统更新，系统漏洞</p><p>Application layer：软件更新，软件漏洞</p><p>Azure DDoS protection：可以防护ddos攻击，通过识别攻击流量</p><p>Azure security group：可以进行内部防护</p><p>Azure服务推荐：</p><p>firewall可以提供外部防护</p><p>security group可以进行流量分层，主要是保护虚拟网络里的安全</p><h1 id="service-and-lifecycles">Service and Lifecycles</h1><p>包含40%考试内容</p><p>20-25%是identity,governance,privacy和compliance feature</p><p>10-15%是cost management, service level agreement</p><h2 id="identity-service">Identity Service</h2><p>Authentication 和 authorization的区别：</p><p>Authentication是确认用户身份</p><p>Authorization是给用户权限</p><h3 id="active-directory">Active Directory</h3><p>员工管理系统，可以让员工有权限登录各种资源</p><p>可以拒绝可疑登录（authentivation），提供单点登录（跳转到登录界面登录），SSO（用一个登录信息登录所有东西），Applicationmanagement（权限管理），device management（只有已知设备可以登录）</p><h3 id="single-sign-on">Single sign-on</h3><p>让用户登录一次就可以登录所有东西</p><h3 id="multifactor-authentication">Multifactor Authentication</h3><p>可以要求用户使用其他手段辅助登录如验证码或指纹</p><h2 id="cloud-governance-strategy">Cloud Governance Strategy</h2><h3 id="resource-lock">Resource lock</h3><p>防止资源被修改或删除</p><p>只有管理员可以解锁，要想修改必须先解锁</p><h3 id="resource-tag">Resource tag</h3><p>可以帮助管理资源</p><h3 id="azure-policy-1">Azure Policy</h3><p>帮助控制Azure资源合规性</p><h3 id="azure-blueprint">Azure blueprint</h3><h2 id="privacy-and-compliance">Privacy and compliance</h2><p>Microsoft Privacy Statement：提供微软所有服务的隐私声明</p><p>Online Services Terms：微软和用户的法律协议</p><h3 id="azure-government">Azure Government</h3><p>隔离的Azure服务，针对美国政府用户</p>]]></content>
      
      
      <categories>
          
          <category> Azure </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>GPU programming</title>
      <link href="/2024/07/02/GPU-programming/"/>
      <url>/2024/07/02/GPU-programming/</url>
      
        <content type="html"><![CDATA[<p>Note fromhttps://www.coursera.org/specializations/gpu-programming?myLearningTab=COMPLETED</p><span id="more"></span><h1 id="introduction-to-concurrent-programming">Introduction toconcurrent programming</h1><h2 id="core-principles-of-parallel-programming">Core Principles ofParallel Programming</h2><h3 id="并发编程可能出现的问题">并发编程可能出现的问题</h3><ul><li>Race Conditions<ul><li>线程实际运行顺序和期望顺序不一样，如想让线程1读，修改，写，然后线程2读，修改，写。但是可能2会读到1修改之前的数据。</li></ul></li><li>Resource Contention<ul><li>多个程序视图读写相同内存块</li></ul></li><li>线程死锁<ul><li>1需要A,A由2产生，2需要1产生的B</li></ul></li><li>Live Lock<ul><li>类似死锁，但是是两个进程一直在改变状态但没有进展。类似走廊两个人互相避开对方。</li></ul></li><li>资源没有有效利用<ul><li>线程太少会让CPU闲置，线程太多会花大量时间在切换线程。</li></ul></li></ul><h3 id="经典并发问题">经典并发问题</h3><p>哲学家就餐，生产者消费者问题</p><h3 id="并发解决思想">并发解决思想</h3><ul><li>Divide and conquer<ul><li>解决子问题并且合并他们来解决大问题</li></ul></li><li>Map reduce</li><li>Repository</li><li>Pipeline</li><li>Recursion<ul><li>在多个gpu的时候不建议用</li></ul></li></ul><p>​</p><h2 id="parallel-programming-patterns-of-python-3">Parallel ProgrammingPatterns of Python 3</h2><p>python3里实现并发编程的库：</p><ul><li>Threading libraries</li><li>Asyncio library</li><li>Multiprocessing library</li></ul><h3 id="asyncio使用">Asyncio使用</h3><p>Asyncio主要组件有以下几个：</p><ol type="1"><li>事件循环（Event Loop）：</li></ol><p>​ • 事件循环是 asyncio 的核心，用于调度和管理异步任务。</p><p>​ • 它负责监控和调度所有的异步任务、I/O操作、回调函数等。</p><ol start="2" type="1"><li>协程（Coroutines）：</li></ol><p>​ • 协程是可以在运行过程中暂停和恢复的函数，用于执行异步操作。</p><p>​ • 使用 async def 定义协程函数，使用 await调用其他协程或异步操作。</p><ol start="3" type="1"><li>任务（Tasks）：</li></ol><p>​ • 任务是由事件循环调度的协程，用于并发运行协程。</p><p>​ • 使用 asyncio.create_task 或 asyncio.ensure_future 创建任务。</p><p>协程是带async的函数，需要显式调度，如用await或asynic.run()启动。</p><p>任务是对协程的包装</p><p>基本使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">say_hello</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)  <span class="comment"># 模拟异步操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;World&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建并运行事件循环</span></span><br><span class="line">asyncio.run(say_hello())</span><br></pre></td></tr></table></figure><p>使用async定义异步函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">fetch_data</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Fetching data...&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">2</span>)  <span class="comment"># 模拟异步操作，如网络请求</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Data fetched&quot;</span>)</span><br></pre></td></tr></table></figure><p>函数中等待的步骤需要用await关键字</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C++_Notes</title>
      <link href="/2024/06/07/C-Notes/"/>
      <url>/2024/06/07/C-Notes/</url>
      
        <content type="html"><![CDATA[<p>C++笔记</p><span id="more"></span><h1 id="基础部分">基础部分</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt; //#是预处理(pre processing statement),会在编译之前执行。 include会paste a file to this place</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    string input;</span><br><span class="line">    cout &lt;&lt; &quot;Enter your input: &quot;;</span><br><span class="line">    cin &gt;&gt; input;</span><br><span class="line">    cout &lt;&lt; &quot;You entered: &quot; &lt;&lt; input &lt;&lt; endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="头文件">头文件</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CPP_STUDY_TEST_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CPP_STUDY_TEST_H</span></span><br><span class="line"><span class="comment">//这里ifdef用处是防止重复include 头文件</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//CPP_STUDY_TEST_H</span></span></span><br></pre></td></tr></table></figure><p>引用的时候双引号是从当前目录开始找，尖括号是从根目录开始找。</p><p><code>stdio.h</code>这种标准库是给c的，结尾是h。c++的标准库没有.h扩展。</p><h2 id="循环">循环</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">  <span class="comment">//上边这三个内容也可以用任何其他东西来替换</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制流语句：continue</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">  <span class="keyword">if</span>(i&gt;<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="keyword">continue</span>;<span class="comment">//continue会跳过下边的代码进入下一次循环</span></span><br><span class="line">  &#125;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line"><span class="comment">//       use break to stop the loop</span></span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line"><span class="comment">//       use return to exit the loop</span></span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="指针">指针</h1><p>一个指针就是一个内存地址。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//定义指针;</span></span><br><span class="line"><span class="keyword">int</span>* ptr = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="comment">//给指针赋值;</span></span><br><span class="line">ptr = &amp;x;<span class="comment">//这里&amp;是获得x的地址</span></span><br><span class="line"><span class="comment">//逆向获得指针的值</span></span><br><span class="line">*ptr=<span class="number">2</span></span><br></pre></td></tr></table></figure><p>这里指针的类型只是为了告诉编译器指针需要多大的内存空间，指针本身只是一串数字代表着内存地址。可以在clion的memoryview里查看当前指针对应的内存地址，可以直接输入指针名来查看。</p><blockquote><p>内存中一个字节(byte)包含8个位(bit)。一般来讲int是4个字节，也就是32位。在clion的内存视图中每一个数字都是16进制，每个十六进制可以表示四位，两个十六进制数字表示一个字节。A(十六进制) = 1010 (二进制)，3 (十六进制) = 0011(二进制)。所以一个int用八个十六进制来表示。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>* string = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">memset</span>(string, <span class="number">9</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>这里string是一个字符串指针，定义的时候占用了10个字节的空间。然后用memset给这十个字节都赋值9。</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024060822132538%E2%80%AFPM.png"alt="image-2024060822132538 PM" /><figcaption aria-hidden="true">image-2024060822132538 PM</figcaption></figure><h2 id="引用">引用</h2><p>引用可以引用一个存在的变量，相当于这个变量自身。操作引用等于操作变量。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">int</span>&amp; ref = a;</span><br><span class="line">    ref = <span class="number">2</span>;<span class="comment">//此时a=2</span></span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用处：如果另一个函数想修改这个变量值，可以在那个函数的输入变量使用引用以起到修改原始变量的作用</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">increment</span><span class="params">(<span class="keyword">int</span>&amp; value)</span> </span>&#123;</span><br><span class="line">    value++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">8</span>;</span><br><span class="line">    <span class="built_in">increment</span>(a);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意！引用一旦定义就不能再修改引用对象，如果再次让ref =b其实会把a的值设为b。而且</p><h2 id="和用法">*和&amp;用法</h2><p>两者放在类型后边就是声明一个这个类型的指针/引用</p><p>放在变量前边就是对变量进行一些操作（解地址/获取地址）</p><h3 id="section">*</h3><p>指针声明</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* ptr;</span><br></pre></td></tr></table></figure><p>访问指针指向的内容</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> value = *ptr</span><br></pre></td></tr></table></figure><h3 id="section-1">&amp;</h3><p>获取变量的地址（也就是到变量的指针）</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span>* ptr = &amp;x;</span><br></pre></td></tr></table></figure><p>引用声明</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>&amp; ref = x;</span><br></pre></td></tr></table></figure><h2 id="智能指针">智能指针</h2><p>可以自动调用delete的new指针，建议用智能指针取代new。</p><p>首先需要<code>#include&lt;memory&gt;</code>.</p><h3 id="unique_ptr">Unique_ptr</h3><p>用完之后会自动delete内存，不能用其他指针指向他或在类之间共享。独占所有权，不能复制，只能移动。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="keyword">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">std::unique_ptr&lt;<span class="keyword">int</span>&gt; ptr2 = std::<span class="built_in">move</span>(ptr1); <span class="comment">// ptr1 不再拥有对象</span></span><br></pre></td></tr></table></figure><h3 id="shared_ptr">Shared_ptr</h3><p>使用引用计数来追踪有多少指针还没有释放，全都释放后才会销毁。共享所有权，多个指针可以共享同一个对象，使用引用计数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;<span class="keyword">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">std::shared_ptr&lt;<span class="keyword">int</span>&gt; ptr2 = ptr1; <span class="comment">// ptr1 和 ptr2 共享所有权</span></span><br></pre></td></tr></table></figure><p>使用wear_ptr的时候不会增加计数。</p><h3 id="weak_ptr">Weak_ptr</h3><p>不增加引用计数，防止循环引用，配合shared_ptr使用。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;<span class="keyword">int</span>&gt; <span class="title">sharedPtr</span><span class="params">(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">std::weak_ptr&lt;<span class="keyword">int</span>&gt; weakPtr = sharedPtr;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">auto</span> tempPtr = weakPtr.<span class="built_in">lock</span>()) &#123;</span><br><span class="line">    <span class="comment">// 使用临时的 shared_ptr</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uniquePtrExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::unique_ptr&lt;<span class="keyword">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">    std::unique_ptr&lt;<span class="keyword">int</span>&gt; ptr2 = std::<span class="built_in">move</span>(ptr1); <span class="comment">// ptr1 不再拥有对象</span></span><br><span class="line">    <span class="keyword">if</span> (ptr1 == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;ptr1 is null&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; *ptr2 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sharedPtrExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;<span class="keyword">int</span>&gt; <span class="title">ptr1</span><span class="params">(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">    std::shared_ptr&lt;<span class="keyword">int</span>&gt; ptr2 = ptr1; <span class="comment">// ptr1 和 ptr2 共享所有权</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Reference count: &quot;</span> &lt;&lt; ptr1.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; *ptr1 &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; *ptr2 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">weakPtrExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;<span class="keyword">int</span>&gt; <span class="title">sharedPtr</span><span class="params">(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">    std::weak_ptr&lt;<span class="keyword">int</span>&gt; weakPtr = sharedPtr;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">auto</span> tempPtr = weakPtr.<span class="built_in">lock</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; *tempPtr &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="类">类</h1><p>定义类：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> speed;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> xa, <span class="keyword">int</span> ya)</span> </span>&#123;</span><br><span class="line">        x += xa * speed;</span><br><span class="line">        y += ya * speed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Player player;</span><br><span class="line">    player.x = <span class="number">5</span>;</span><br><span class="line">    player.y = <span class="number">5</span>;</span><br><span class="line">    player.speed = <span class="number">2</span>;</span><br><span class="line">    player.<span class="built_in">move</span>(<span class="number">1</span>, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>比较好的习惯是把变量设置为private，然后用getter、setter来设置。</p><h3 id="类与结构体的区别">类与结构体的区别</h3><p>默认的类成员是private的，而结构体是public的。</p><h2 id="static静态">static静态</h2><h3 id="类中的静态成员变量">类中的静态成员变量</h3><p>在类里声明的静态变量会在所有实例中都共享内存，也就是所有实例的这个变量都是一样的。</p><p>注意！类的静态成员变量必须在类外部单独定义一次才能完成声明并且分配内存。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> staticVar;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123; staticVar++; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> MyClass::staticVar = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj1, obj2;</span><br><span class="line">    obj1.<span class="built_in">increment</span>();</span><br><span class="line">    std::cout &lt;&lt; MyClass::staticVar &lt;&lt; std::endl;  <span class="comment">// 输出1</span></span><br><span class="line">    obj2.<span class="built_in">increment</span>();</span><br><span class="line">    std::cout &lt;&lt; MyClass::staticVar &lt;&lt; std::endl;  <span class="comment">// 输出2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数里的静态局部变量">函数里的静态局部变量</h3><p>会在函数内部保持值，只会在第一次调用时初始化</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    count++;</span><br><span class="line">    std::cout &lt;&lt; count &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">myFunction</span>();  <span class="comment">// 输出1</span></span><br><span class="line">    <span class="built_in">myFunction</span>();  <span class="comment">// 输出2</span></span><br><span class="line">    <span class="built_in">myFunction</span>();  <span class="comment">// 输出3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="类里的静态成员函数">类里的静态成员函数</h3><p>可以通过类名直接调用，不需要创建实例。但是不能访问非静态成员，只能访问静态成员变量和函数。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Static function&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass::<span class="built_in">staticFunction</span>();  <span class="comment">// 直接通过类名调用</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>适用于某些不需要访问实例数据的功能，如全局计数器。</p><h3 id="文件中的静态变量或函数">文件中的静态变量或函数</h3><p>如果文件A中有一个static成员变量或函数，那么这个东西的作用域会被限制在这个文件内，这样就可以隐藏实现细节并且防止多个命名冲突。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file1.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hiddenFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;This is a hidden function&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callHiddenFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">hiddenFunction</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// file2.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">callHiddenFunction</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">callHiddenFunction</span>(); <span class="comment">// 输出 &quot;This is a hidden function&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="可见性">可见性</h2><p>有三种可见性修饰符：private, public和protected。</p><p>类A里private变量只能在类A里使用，外部不能使用，A的派生类也不能使用。</p><p>类A的protected可以在A和A的派生类里使用，外部不能使用。</p><h2 id="构造函数">构造函数</h2><p>在实例化类的时候会自动执行的函数。</p><p>用于初始化类的成员变量，分配内存，保证实例创建时是有效的。</p><p>支持重载构造函数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> a,b;</span><br><span class="line">    <span class="built_in">MyClass</span>() &#123;</span><br><span class="line">        a = <span class="number">0</span>;</span><br><span class="line">        b = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> y) &#123;<span class="comment">//这里可以重载</span></span><br><span class="line">        a = x;</span><br><span class="line">        b = y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="built_in">log</span>(<span class="string">&quot;Hello from MyClass&quot;</span>);</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">    obj.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="析构函数">析构函数</h2><p>在销毁对象的时候会运行的函数。如果是直接生成在栈内存里的实例，不使用的时候会调用。如果是new的那就会在delete的时候调用。</p><blockquote><p>堆内存和栈内存区别：</p><p>栈内存由编译器管理分配，存着局部变量。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">void</span> <span class="title">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">int</span> stackVar = <span class="number">10</span>;  <span class="comment">// 分配在栈上</span></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure><p>堆内存由程序员用new，delete管理，存所有需要的内存。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">void</span> <span class="title">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">int</span>* heapVar = <span class="keyword">new</span> <span class="built_in"><span class="keyword">int</span></span>(<span class="number">10</span>);  <span class="comment">// 分配在堆上</span></span><br><span class="line">   <span class="comment">// 使用 heapVar</span></span><br><span class="line">   <span class="keyword">delete</span> heapVar;  <span class="comment">// 释放堆内存</span></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure></blockquote><p>用于清理内存。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"><span class="attr">public</span>:</span><br><span class="line">    int* data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="function"><span class="title">MyClass</span>(<span class="params">int size</span>)</span> &#123;</span><br><span class="line">        data = <span class="keyword">new</span> int[size];</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 析构函数</span></span><br><span class="line">    ~<span class="function"><span class="title">MyClass</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Destructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int <span class="function"><span class="title">main</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    MyClass obj(<span class="number">10</span>);  <span class="comment">// 创建对象时调用构造函数</span></span><br><span class="line">    <span class="comment">// 对象超出作用域时自动调用析构函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建并初始化对象">创建并初始化对象</h2><p>可以直接使用类名作为类型来创建新变量</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Entity e = <span class="built_in">Entity</span>(<span class="string">&quot;Cherno&quot;</span>);</span><br></pre></td></tr></table></figure><p>这样就把变量直接创建到栈（stack)里了，但是当前上下文运行完会自动清除</p><p>或者使用new来新建变量，这样就会创建到堆(heap)里</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Entity* e = <span class="keyword">new</span> <span class="built_in">Entity</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="comment">//do sth</span></span><br><span class="line"><span class="keyword">delete</span> e;<span class="comment">//需要释放内存</span></span><br></pre></td></tr></table></figure><p>如果没有特殊需求推荐直接在栈上新建。</p><p>如果使用<code>new int[50]</code>声明就需要用<code>delete[] e</code>来删除</p><h2 id="继承">继承</h2><p>有一个旧类，可以指定一个新类来继承旧的这个。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span>* data;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="keyword">int</span> size) &#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="keyword">int</span>[size];</span><br><span class="line">        a = <span class="number">5</span>;</span><br><span class="line">        b = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">log</span>(<span class="string">&quot;Hello from MyClass&quot;</span>);</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDerivedClass</span> :</span> <span class="keyword">public</span> MyClass &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">    <span class="built_in">MyDerivedClass</span>(<span class="keyword">int</span> size) : <span class="built_in">MyClass</span>(size) &#123;<span class="comment">//调用父类的构造函数</span></span><br><span class="line">        c = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">log</span>(<span class="string">&quot;Hello from MyDerivedClass&quot;</span>);</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; b &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="虚函数">虚函数</h2><p>虚函数是用于实现多态的成员函数，它允许派生类重写基类中的函数，以保证在调用这个函数的时候执行的是调用函数那个对象对应的函数而不是指针的函数版本。</p><p>需要在基类中用virtual声明，并且最好在重写的时候用override关键字。</p><p>运行时多态：在通过基类的指针或引用调用虚函数的时候实际执行的是派生类的函数版本。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base class&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Derived class&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Base* basePtr;</span><br><span class="line">    Derived derivedObj;</span><br><span class="line"></span><br><span class="line">    basePtr = &amp;derivedObj;</span><br><span class="line">    basePtr-&gt;<span class="built_in">show</span>();  <span class="comment">// 输出 &quot;Derived class&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="纯虚函数">纯虚函数</h3><p>可以在基类中定义一个没有实现的函数，然后在子类里实现。子类必须在实现纯虚函数之后才能被实例化。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printable</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Entity</span> :</span> <span class="keyword">public</span> Printable &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Entity&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> :</span> <span class="keyword">public</span> Printable &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Player&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(Printable* obj)</span> </span>&#123;</span><br><span class="line">    obj-&gt;<span class="built_in">print</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Entity* e = <span class="keyword">new</span> <span class="built_in">Entity</span>();</span><br><span class="line">    Player* p = <span class="keyword">new</span> <span class="built_in">Player</span>();</span><br><span class="line">    <span class="built_in">print</span>(e);<span class="comment">//输出 “Entity”</span></span><br><span class="line">    <span class="built_in">print</span>(p);<span class="comment">//输出 “Player”</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="数据类型">数据类型</h1><h2 id="enum枚举">Enum枚举</h2><p>enum是自定义的数据类型，可以把一组变量打包变成一个类型，如：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Day</span> &#123;</span> Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday &#125;;</span><br><span class="line">Day today = Monday;</span><br></pre></td></tr></table></figure><p>如果不指定整数值的话默认第一个是0，后边的递增，也可以指定值</p><h2 id="数组">数组</h2><p>定义数组用中括号，中括号是用于数组和指针的下表运算符以访问元素，指针ptr加中括号<code>ptr[i]=*(ptr+i)</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">int</span>* b = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">int</span>* p = a;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Enter a number: &quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Enter another number: &quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; b[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">log</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;a[&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;] = &quot;</span> &lt;&lt; a[i] &lt;&lt; endl;      <span class="comment">// 打印数组 a 中的第 i 个元素</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p[&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;] = &quot;</span> &lt;&lt; p[i] &lt;&lt; endl;      <span class="comment">// 打印指针 p 当前指向的元素</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;b[&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;] = &quot;</span> &lt;&lt; b[i] &lt;&lt; endl;      <span class="comment">// 打印数组 b 中的第 i 个元素</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] b;  <span class="comment">// 正确释放内存</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="静态数组">静态数组</h3><p>大小在编译时确定</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">5</span>];             <span class="comment">// 未初始化，元素值不确定</span></span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>&#125;;    <span class="comment">// 部分初始化，未指定的元素为 0</span></span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;  <span class="comment">// 大小由初始化列表确定</span></span><br></pre></td></tr></table></figure><h3 id="动态数组">动态数组</h3><p>使用new来分配数组长度</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br></pre></td></tr></table></figure><h3 id="函数使用数组传参">函数使用数组传参</h3><p>传递指向数组首元素的指针，数组名就是指向首元素的指针</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size)</span></span>;</span><br><span class="line"><span class="built_in">func</span>(arr, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><h2 id="字符串">字符串</h2><h3 id="定义字符串">定义字符串</h3><p>字符串的终止是内存中的0，当读到0的时候系统会知道字符串结束。在字符串中体现为<code>\0</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str[] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="keyword">char</span>* str2 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">strcpy</span>(str2,<span class="string">&quot;hello&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="字符串操作函数">字符串操作函数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> str1[<span class="number">20</span>] = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">char</span> str2[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">strcpy</span>(str2, str1);  <span class="comment">// 复制字符串</span></span><br><span class="line"><span class="keyword">int</span> len = <span class="built_in">strlen</span>(str1);  <span class="comment">// 获取字符串长度</span></span><br></pre></td></tr></table></figure><h3 id="使用string库">使用string库</h3><p>需要引入string标准库</p><p>推荐使用string 而不是char*</p><h3 id="字符串函数传参">字符串函数传参</h3><p>使用<code>const string&amp; a</code>来传参，这样使用的时候可以直接用字符串名。如果用<code>const string*</code>的话输入需要是一个指针，默认string类型得到的是一个实例。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string* <span class="title">concat</span><span class="params">(<span class="keyword">const</span> string&amp; a, <span class="keyword">const</span> string&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">string</span>(a + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string message = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    string* a = <span class="built_in">concat</span>(message, message);</span><br><span class="line">    <span class="built_in">log</span>(*a);</span><br><span class="line">    <span class="keyword">delete</span> a;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="const的用法">const的用法</h2><h3 id="常量">常量</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="指针-1">指针</h3><p>如果是指向常量的指针，那么就不能修改指针的内容，但是可以修改指针的指向。</p><p>如果是常量指针，那么就可以修改当前指向的内容，但是不能修改指向。</p><p>如果是指向常量的常量指针，那么都不能修改。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>* a = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"></span><br><span class="line">*a = <span class="number">2</span>;<span class="comment">//error</span></span><br><span class="line">a = ptr;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* <span class="keyword">const</span> a = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">*a = <span class="number">2</span>;</span><br><span class="line">a = ptr;<span class="comment">//error</span></span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>* <span class="keyword">const</span> ptr = &amp;x;</span><br><span class="line">*ptr = <span class="number">20</span>;  <span class="comment">// 错误</span></span><br><span class="line">ptr = &amp;y;  <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure><h3 id="类-1">类</h3><p>常量成员函数不能修改类的成员变量的值。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Entity</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> x;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用处是当有其他函数要用const输入时需要有const声明</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> Entity&amp; e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  cout &lt;&lt; e.<span class="built_in">getX</span>() &lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假如我想用const函数修改类的变量，可以通过设置变量为mutable来实现（<code>mutable int var</code>)可以用来调试时设置一个变量来追踪函数运行过多少次，不想去掉const的时候就可以添加mutable实现。</p><h2 id="隐式转换">隐式转换</h2><p>在定义实例的时候可以直接如下定义： <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Entity e = <span class="number">12</span>;</span><br><span class="line">Entity e1 = <span class="string">&quot;Cherno&quot;</span>;</span><br></pre></td></tr></table></figure></p><p>这样12会隐式转换( implicit conversions)成Entity类型。如果不想让构造函数接受隐式转换就需要在函数前加一个explicit.</p><h2 id="set">Set</h2><p>定义和初始化set</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="keyword">int</span>&gt; mySet;</span><br><span class="line">mySet.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>查看是否在set中</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(mySet.<span class="built_in">count</span>(<span class="number">1</span>))&#123;</span><br><span class="line">  <span class="comment">//在</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>遍历set元素</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">int</span>&amp; element : mySet)&#123;</span><br><span class="line">  cout &lt;&lt; element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>删除元素</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mySet.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><h2 id="map">Map</h2><p>定义和初始化</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>, string&gt; myMap = &#123;&#123;<span class="number">1</span>, <span class="string">&quot;one&quot;</span>&#125;, &#123;<span class="number">2</span>, <span class="string">&quot;two&quot;</span>&#125;, &#123;<span class="number">3</span>, <span class="string">&quot;three&quot;</span>&#125;&#125;;</span><br></pre></td></tr></table></figure><p>插入</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>, string&gt; myMap;</span><br><span class="line">myMap[<span class="number">1</span>] = <span class="string">&quot;one&quot;</span>;</span><br><span class="line">myMap[<span class="number">2</span>] = <span class="string">&quot;two&quot;</span>;</span><br><span class="line">myMap[<span class="number">3</span>] = <span class="string">&quot;three&quot;</span>;</span><br></pre></td></tr></table></figure><p>查询元素</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; myMap[<span class="number">1</span>] &lt;&lt; endl;  <span class="comment">// 输出 &quot;one&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> it = myMap.<span class="built_in">find</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (it != myMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    cout &lt;&lt; it-&gt;second &lt;&lt; endl;  <span class="comment">// 输出 &quot;two&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>遍历</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pair : myMap) &#123;</span><br><span class="line">    cout &lt;&lt; pair.first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; pair.second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者使用迭代器</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> it = myMap.<span class="built_in">begin</span>(); it != myMap.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">    cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>删除</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myMap.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="操作与运算">操作与运算</h1><h2 id="运算符重载">运算符重载</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector2</span> &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">float</span> x, y;</span><br><span class="line">    <span class="built_in">Vector2</span>(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span><br><span class="line">        : <span class="built_in">x</span>(x), <span class="built_in">y</span>(y) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Vector2 <span class="keyword">operator</span>+(<span class="keyword">const</span> Vector2&amp; left, <span class="keyword">const</span> Vector2&amp; right) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector2</span>(left.x + right.x, left.y + right.y);</span><br><span class="line">&#125;</span><br><span class="line">Vector2 <span class="keyword">operator</span>*(<span class="keyword">const</span> Vector2&amp; left, <span class="keyword">const</span> Vector2&amp; right) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector2</span>(left.x * right.x, left.y * right.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Vector2&amp; left, <span class="keyword">const</span> Vector2&amp; right) &#123;</span><br><span class="line">    <span class="keyword">return</span> left.x == right.x &amp;&amp; left.y == right.y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>!=(<span class="keyword">const</span> Vector2&amp; left, <span class="keyword">const</span> Vector2&amp; right) &#123;</span><br><span class="line">    <span class="keyword">return</span> !(left == right);</span><br><span class="line">&#125;</span><br><span class="line">ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;stream, <span class="keyword">const</span> Vector2&amp; vector) &#123;</span><br><span class="line">    stream &lt;&lt; vector.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; vector.y;</span><br><span class="line">    <span class="keyword">return</span> stream;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Vector2 <span class="title">position</span><span class="params">(<span class="number">4.0f</span>, <span class="number">4.0f</span>)</span></span>;</span><br><span class="line">    <span class="function">Vector2 <span class="title">speed</span><span class="params">(<span class="number">0.5f</span>, <span class="number">1.5f</span>)</span></span>;</span><br><span class="line">    <span class="function">Vector2 <span class="title">powerup</span><span class="params">(<span class="number">1.1f</span>, <span class="number">1.1f</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    Vector2 result = position + speed * powerup;</span><br><span class="line">    cout &lt;&lt; result &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; (position == result) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; (position != result) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-note</title>
      <link href="/2024/04/26/React-note/"/>
      <url>/2024/04/26/React-note/</url>
      
        <content type="html"><![CDATA[<p>Learning note for React</p><p>代码片段在https://codesandbox.io/dashboard/sandboxes/?workspace=21c09ad6-4546-46a4-8740-fa5a1f9e3798</p><span id="more"></span><h2 id="新建react项目">新建React项目</h2><p>有index.html,里边要有一个div的id是root</p><p>新建index.js并且使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">&quot;react&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ReactDOM = <span class="built_in">require</span>(<span class="string">&quot;react-dom&quot;</span>);</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Created by &#123;name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Copyright &#123;year&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>就可以在root元素里渲染一个div元素，render函数第一个输入只能是一个element，所以需要用div包裹。</p><p>要想给元素添加class需要使用<code>className=“”</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> imglink = <span class="string">&quot;https://picsum.photos/200&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> content = (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&quot;qwe&quot;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;imglink&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;imglink</span> + &quot;?<span class="attr">grayscale</span>&quot;&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>要想添加inline-styling需要使用<code>style=&#123;&#123;color:"red"&#125;&#125;</code></p><p>还可以使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> customStyle = &#123;</span><br><span class="line">  <span class="attr">color</span>:<span class="string">&quot;red&quot;</span>,</span><br><span class="line">  <span class="attr">fontSize</span>:<span class="string">&quot;20px&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">style=&#123;customStyle&#125;</span><br></pre></td></tr></table></figure><h3 id="使用app.jsx规范代码格式">使用app.jsx规范代码格式</h3><p>一般来讲新建一个app.jsx文件来管理内容，而index.js里只引用app的函数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.jsx</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">app</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> app;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">&quot;react&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ReactDOM = <span class="built_in">require</span>(<span class="string">&quot;react-dom&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> app <span class="keyword">from</span> <span class="string">&quot;./App.jsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(app(), <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用react dev tool 可以查看当前网页树状图</p><h2 id="react-module">React module</h2><p>单文件使用component: <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Heading</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Heading</span>&gt;</span><span class="tag">&lt;/<span class="name">Heading</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>注意component必须用大写字母开头.</p><p>如果在另一个文件中定义module，另一个文件需定义成.jsx文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Heading</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Heading</span><br><span class="line"></span><br><span class="line"><span class="comment">//import Heading from &quot;./Heading&quot; in the index.js</span></span><br></pre></td></tr></table></figure><p>一般来讲在index中只有一个app组件，然后新建一个叫app的文件来包含所有其他东西</p><h2 id="es6相关">ES6相关</h2><h3 id="export">export</h3><p>如果只export一个东西就使用<code>export default x</code>,但是如果想要暴露多个变量或函数就需要用大括号包起来，例如<code>export &#123;x1,x2,x3&#125;</code>. 一个文件只能使用一次default,但是可以用很多次大括号export</p><p>在imoprt的时候如果使用<code>import x from "./a.js"</code>就是引入默认的输出</p><p>如果使用<code>import * as x from './a.js'</code>就是引入所有东西，之后可以使用a.a1来使用</p><h3 id="mapfilterreduce">Map/filter/reduce</h3><p>Map可以通过loop一个数组的全部元素来获得一个新数组</p><p>Filter可以使用某种条件来过滤数组里所有内容</p><p>Reduce可以累计数组元素并且返回一个值</p><p>find可以找到数组里第一个符合条件的内容</p><p>findindex可以找到第一个index</p><p>es6里用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">3</span>, <span class="number">56</span>, <span class="number">2</span>, <span class="number">48</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//Map -Create a new array by doing something with each item in an array.</span></span><br><span class="line"><span class="keyword">var</span> newNumbers = numbers.map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newNumbers);</span><br><span class="line"><span class="comment">//Filter - Create a new array by keeping the items that return true.</span></span><br><span class="line"><span class="keyword">var</span> numberfilter = numbers.filter(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x &gt; <span class="number">6</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(numberfilter);</span><br><span class="line"><span class="comment">//Reduce - Accumulate a value by doing something to each item in an array.</span></span><br><span class="line"><span class="keyword">var</span> numberreduce = numbers.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">accu, curr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accu + curr;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(numberreduce);</span><br><span class="line"><span class="comment">//Find - find the first item that matches from an array.</span></span><br><span class="line"><span class="keyword">var</span> num1 = numbers.find(<span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(num1);</span><br><span class="line"><span class="comment">//FindIndex - find the index of the first item that matches.</span></span><br><span class="line"><span class="keyword">var</span> index = numbers.findIndex(<span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(index);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="arrow-function">Arrow function</h3><p>箭头函数用于需要用匿名函数的地方，可以用来省略function定义名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">3</span>, <span class="number">56</span>, <span class="number">2</span>, <span class="number">48</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//Map -Create a new array by doing something with each item in an array.</span></span><br><span class="line"><span class="keyword">var</span> newNumbers = numbers.map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newNumbers = numbers.map(<span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> newNumbers = numbers.map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="react-prop">React Prop</h2><p>可以把一段重复的HTML封装到一个函数里，然后通过传参的方式来复用，只是这里传参是从properties的位置传参。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Card</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;props.img&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;avatar_img&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;props.tel&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;props.email&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>My Contacts<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Card</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">name</span>=<span class="string">&quot;Beyonce&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">img</span>=<span class="string">&quot;https://blackhistorywall.files.wordpress.com/2010/02/picture-device-independent-bitmap-119.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">tel</span>=<span class="string">&quot;+123 456 789&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">email</span>=<span class="string">&quot;b@beyonce.com&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Card</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">name</span>=<span class="string">&quot;Jack Bauer&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">img</span>=<span class="string">&quot;https://pbs.twimg.com/profile_images/625247595825246208/X3XLea04_400x400.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">tel</span>=<span class="string">&quot;+7387384587&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">email</span>=<span class="string">&quot;jack@nowhere.com&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="react-map">React map</h2>假如x是一个数组，在React<div><p>里使用x.map(func)可以实现遍历x数组里每一个元素i，将i传入func中执行然后获得返回值。</p><p>这里map返回的元素需要有一个prop叫做key，它不能直接被访问到并且他的值需要是唯一的。</p><p>正确用法是复用刚刚新建的封装好的函数中，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Entry</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;term&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;emoji&quot;</span> <span class="attr">role</span>=<span class="string">&quot;img&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Tense Biceps&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          &#123;content.emoji&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;content.name&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;content.meaning&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createEntry</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Entry</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">key</span>=<span class="string">&#123;content.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">emoji</span>=<span class="string">&#123;content.emoji&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">name</span>=<span class="string">&#123;content.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">meaning</span>=<span class="string">&#123;content.meaning&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="react-conditional-rendering">React conditional rendering</h2><p>可以根据变量值的不同来渲染不一样的组件</p><p>利用三元运算符实现</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#123;var1 ? <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> : <span class="tag">&lt;<span class="name">h1</span>&gt;</span>World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也可以用null表示什么都不渲染</p><p>如果使用React的and运算符&amp;&amp;可以实现相同的效果，只有左边是true的时候才会运行运算符右边的代码</p><h2 id="react-state">React State</h2><p>用户界面会根据变量值的变化而变化。</p><p>如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isDone = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;isDone?</span> <span class="attr">style1:null</span>&#125;&gt;</span> Buy milk <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>但是如果动态修改变量的值渲染不会跟着改变，需要使用hooks。使用useState来保存和更新需要变化的变量。usestate返回两个内容，第一个是变量，第二个是setstate函数来设置变量值。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">increase</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setCount(count + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">decrease</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setCount(count - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;decrease&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increase&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><ahref="https://codesandbox.io/p/sandbox/usestate-hook-practice-forked-trrlvh?file=%2Fsrc%2Findex.js">简单应用</a></p><h2 id="react-handle-event-事件管理">React handle Event 事件管理</h2><p>如mouseover，mouseout之类的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [headingText, setHeadingText] = useState(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [isMousedOver, setMouseOver] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setHeadingText(<span class="string">&quot;Submitted&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleMouseOver</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setMouseOver(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleMouseOut</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setMouseOver(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;headingText&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;What&#x27;s your name?&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">backgroundColor:</span> <span class="attr">isMousedOver</span> ? &quot;<span class="attr">black</span>&quot; <span class="attr">:</span> &quot;<span class="attr">white</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onMouseOver</span>=<span class="string">&#123;handleMouseOver&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onMouseOut</span>=<span class="string">&#123;handleMouseOut&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      &gt;</span></span></span><br><span class="line"><span class="xml">        Submit</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python-leetcode-note</title>
      <link href="/2024/03/18/python-leetcode-note/"/>
      <url>/2024/03/18/python-leetcode-note/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="python-使用字典">Python 使用字典</h2><p>使用{}创建的时候如果尝试访问字典中不存在的键就会抛出异常</p><p>使用defaultdict创建的时候可以传入一个类型，假如访问到不存在的键就会初始化一个这个类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">dd = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">dd[<span class="string">&#x27;key&#x27;</span>].append(<span class="string">&#x27;value&#x27;</span>)  <span class="comment"># 不需要先检查&#x27;key&#x27;是否存在</span></span><br><span class="line"><span class="built_in">print</span>(dd[<span class="string">&#x27;key&#x27;</span>])  <span class="comment"># 输出：[&#x27;value&#x27;]</span></span><br></pre></td></tr></table></figure><h2 id="对字典内容进行排序">对字典内容进行排序</h2><p>对键排序：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&#x27;apple&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;banana&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;orange&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据字典的键进行排序</span></span><br><span class="line">sorted_keys = <span class="built_in">sorted</span>(my_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印排序后的键</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> sorted_keys:</span><br><span class="line">    <span class="built_in">print</span>(key, my_dict[key])</span><br></pre></td></tr></table></figure><p>使用参数进行排序：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&#x27;apple&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;banana&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;orange&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据字典的值进行排序</span></span><br><span class="line">sorted_items = <span class="built_in">sorted</span>(my_dict.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印排序后的键值对</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> sorted_items:</span><br><span class="line">    <span class="built_in">print</span>(key, value)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>PeerShare-Proj</title>
      <link href="/2024/03/01/PeerShare-Proj/"/>
      <url>/2024/03/01/PeerShare-Proj/</url>
      
        <content type="html"><![CDATA[<p>A note for the PeerShare project.</p><span id="more"></span><h2 id="使用gun">使用gun</h2><p>gun是一个图表型数据库，首先需要新建数据库链接：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db = GUN([<span class="string">&#x27;http://localhost:8765/gun&#x27;</span>, <span class="string">&#x27;https://gun-manhattan.herokuapp.com/gun&#x27;</span>]);</span><br><span class="line"><span class="comment">//var db = GUN(); default node</span></span><br></pre></td></tr></table></figure><p>然后链接到一个结点</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> expenses = db.get(<span class="string">&#x27;expensestest&#x27;</span>);</span><br></pre></td></tr></table></figure><p>要想保存一个数据到这个结点下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expenses.set(expense)</span><br></pre></td></tr></table></figure><p>读取数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">expenses.map().on(<span class="function"><span class="keyword">function</span>(<span class="params">data, key</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;selected_option:&quot;</span>+data.selected_option)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;input_value:&quot;</span>+data.input_value)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>群晖扩容Basic</title>
      <link href="/2024/02/10/%E7%BE%A4%E6%99%96%E6%89%A9%E5%AE%B9Basic/"/>
      <url>/2024/02/10/%E7%BE%A4%E6%99%96%E6%89%A9%E5%AE%B9Basic/</url>
      
        <content type="html"><![CDATA[<p>扩容单块硬盘的Basic存储池记录。</p><span id="more"></span><h2 id="升级raid1">升级Raid1</h2><p>先把要更换的盘插进群晖后开机，然后进存储管理器选择要升级的Basic，更改Raid类型改成Raid1.</p><h2 id="降级basic">降级Basic</h2><p>关机后把所有其他盘都拔出，只剩要更换的新盘放到刚刚旧盘的盘位里,然后开机。</p><p>用SSH链接到群晖，登录管理员账号后先使用<code>cat /proc/mdstat</code>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024021041829465%E2%80%AFPM.png"alt="image-2024021041829465 PM" /><figcaption aria-hidden="true">image-2024021041829465 PM</figcaption></figure><p>然后输入命令<code>mdadm --grow --raid-devices=1 --force /dev/md3</code>.</p><h2 id="恢复存储空间">恢复存储空间</h2><p>把所有盘都插回去，然后进存储管理器的总览，选修复，他就会自动修复，修复好后去存储空间选择刚刚这个，他显示可以扩容，扩容即可。</p>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 群晖 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/01/29/appro%20algorithm/"/>
      <url>/2024/01/29/appro%20algorithm/</url>
      
        <content type="html"><![CDATA[<h1 id="section"></h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SvelteKit-learn</title>
      <link href="/2024/01/20/SvelteKit-learn/"/>
      <url>/2024/01/20/SvelteKit-learn/</url>
      
        <content type="html"><![CDATA[<p>Personal SvelteKit learning note</p><p>Including Svelte and SvelteKit</p><span id="more"></span><h1 id="basic-svelte">Basic Svelte</h1><h2 id="introduction">Introduction</h2><p>Svelte 可以用来制作小的JS模块，并且通过组合这些组件来构建应用。</p><p>组件是可重复使用的代码块，包含HTML，CSS和JS并且一个组件就是一个.svelte文件。</p><h3 id="简单的添加数据并使用">简单的添加数据并使用：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">let</span> src = <span class="string">&#x27;/image.gif&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;Rick Astley&#x27;</span>;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">img</span> &#123;<span class="attr">src</span>&#125; <span class="attr">alt</span>=<span class="string">&quot;&#123;name&#125; dances.&quot;</span> /&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="添加样式">添加样式：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;This is a paragraph.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-tag">p</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="attribute">color</span>: goldenrod;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="attribute">font-family</span>: <span class="string">&#x27;Comic Sans MS&#x27;</span>, cursive;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="attribute">font-size</span>: <span class="number">2em</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>前后顺序并不影响。</p><h3 id="引用另一个组件的内容">引用另一个组件的内容：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> Nested <span class="keyword">from</span> <span class="string">&quot;./Nested.svelte&quot;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Nested</span>/&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-tag">p</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="attribute">color</span>: goldenrod;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="attribute">font-family</span>: <span class="string">&#x27;Comic Sans MS&#x27;</span>, cursive;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="attribute">font-size</span>: <span class="number">2em</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>引用的组件并不会套用当前组件的css，组件名需要首字母大写。</p><h3 id="string里插入html片段">string里插入html片段</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> string = <span class="string">`this string contains some &lt;strong&gt;HTML!!!&lt;/strong&gt;`</span>;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;@html string&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在使用string变量名的时候添加{<span class="citation"data-cites="html">@html</span> xxx}即可</p><h3 id="button点击事件">button点击事件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> count = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">count += <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">on:click</span>=<span class="string">&#123;increment&#125;</span>&gt;</span></span><br><span class="line">Clicked &#123;count&#125;</span><br><span class="line">&#123;count === 1 ? &#x27;time&#x27; : &#x27;times&#x27;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>首先用button标签新建一个按钮，在on监听click事件并绑定给一个函数。</p><h3 id="可变变量">可变变量</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> count = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">$: doubled = count * <span class="number">2</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">count += <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">on:click</span>=<span class="string">&#123;increment&#125;</span>&gt;</span></span><br><span class="line">Clicked &#123;count&#125;</span><br><span class="line">&#123;count === 1 ? &#x27;time&#x27; : &#x27;times&#x27;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125; doubled is &#123;doubled&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>加这个修饰符可以让他实时计算变量值并更新。这个修饰符里也可以包裹很多其他东西比如if语句，就会实时判断。这个里边的更新只会在这个变量被更改或赋值的时候执行，但是数组操作并不是赋值所以不会触发，所以需要赋值给他自己。</p><h2 id="props">Props</h2><h3 id="components之间传值">components之间传值</h3><p>首先在需要接收输入的组件里把变量设置为<code>export let x</code></p><p>然后在另一个组件里用<code>&lt;Nested x=&#123;42&#125; /&gt;</code>.</p><p>也可以在定义变量的时候设置默认值。</p><h2 id="logic">Logic</h2><h3 id="ifelse">If/Else</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">count += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">on:click</span>=<span class="string">&#123;increment&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">Clicked &#123;count&#125;</span></span><br><span class="line"><span class="xml">&#123;count === 1 ? &#x27;time&#x27; : &#x27;times&#x27;&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;#<span class="keyword">if</span> count &gt; <span class="number">10</span>&#125;</span><br><span class="line">&lt;p&gt;&#123;count&#125; is greater than <span class="number">10</span>&lt;/p&gt;</span><br><span class="line">&#123;:<span class="keyword">else</span>&#125;</span><br><span class="line">&lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">&#123;/<span class="keyword">if</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="each">Each</h3><p>可以遍历数组并且循环添加元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">const colors = [&#x27;red&#x27;, &#x27;orange&#x27;, &#x27;yellow&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;, &#x27;indigo&#x27;, &#x27;violet&#x27;];</span><br><span class="line">let selected = colors[0];</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1 style=&quot;color: &#123;selected&#125;&quot;&gt;Pick a colour&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">&#123;#each colors as color&#125;</span><br><span class="line">&lt;button</span><br><span class="line">aria-current=&#123;selected === color&#125;</span><br><span class="line">aria-label=color</span><br><span class="line">style=&quot;background: &#123;color&#125;&quot;</span><br><span class="line">on:click=&#123;() =&gt; selected = color&#125;</span><br><span class="line">&gt;&lt;/button&gt;</span><br><span class="line">&#123;/each&#125;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">&#123;#each colors as color, i&#125;</span><br><span class="line">&lt;button</span><br><span class="line">aria-current=&#123;selected === color&#125;</span><br><span class="line">aria-label=&#123;color&#125;</span><br><span class="line">style=&quot;background: &#123;color&#125;&quot;</span><br><span class="line">on:click=&#123;() =&gt; selected = color&#125;</span><br><span class="line">&gt;&#123;i + 1&#125;&lt;/button&gt;</span><br><span class="line">&#123;/each&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>也可以用第二个参数获得当前index</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sveltekit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Optimal-Shortest-Path-in-Simple-Polygon</title>
      <link href="/2023/12/02/Optimal-Shortest-Path-in-Simple-Polygon/"/>
      <url>/2023/12/02/Optimal-Shortest-Path-in-Simple-Polygon/</url>
      
        <content type="html"><![CDATA[<p>Let P be a simple polygon with n sides and this report will give amethod to preprocess the polygon so that given two query points p and qinside P, the length of the shortest path inside the polygon from p to qcan be found in time O(log n).</p><span id="more"></span><h3 id="introduction">1. Introduction</h3><p>The algorithm's aim is to solve the Euclidean shortest path problemand focuses on a simple one: moving a point inside a simple polygon inthe plane.</p><p>All the related algorithms are based on a triangulation of thepolygon, the previous algorithms pre-select a fixed source point, so oneof the points is fixed. When it comes to the situation neither endpointof the path is predetermined, they will need linear time to find theshortest path. This new algorithm can find the shortest path between anytwo points. It needs <strong>linear time to build</strong> and<strong>do the query to find the length in logarithmic time</strong>.Also, it needs <strong>time proportional to the number of turns to getthe path itself. </strong></p><p>The idea is to go through some subpolygons, each of them containinginformation about the shortest paths inside it. When we query, we gatherthis information to find the shortest path from source todestination.</p><h3 id="the-balanced-hierarchical-decomposition-of-p">2. The balancedhierarchical decomposition of P</h3><p>First, we need to split the main polygon P into subpolygons. There'sa polygon cutting theorem as follows:</p><p><strong>any simple polygon of at least 4 vertices has a diagonal thatdivides it into two subpolygons with roughly equal size</strong></p><p>If we apply it recursively then we have a triangulation of P. Then wecan use a binary tree S to denote the split, each layer stands for asplit stage, root means the first split's diagonal, children of root sstands for the diagonals of these two subpolygons. These subpolygons arecalled <strong>cell</strong> and they are very important.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/s5i8dCP.png"alt="s5i8dCP" /><figcaption aria-hidden="true">s5i8dCP</figcaption></figure><p>Some Notation:</p><ul><li>d: diagonal</li><li><span class="math inline">\(P_d\)</span>: the diagonal d cuts <spanclass="math inline">\(P_d\)</span> into two cells</li><li>S: binary split tree</li><li><span class="math inline">\(L(d)\)</span>: depth of d in S, e.g.l(d1) = 0, l(d2) = 1.</li><li>H(d): height of d in S, e.g. H(d2) = L(d7) - L(d2) = 2</li></ul><p>Cells not associated with a diagonal are those small triangles afterthe split. They have a depth of 1 greater than the depth of its boundingdiagonal. e.g. triangle IHG has a depth of 4.</p><p>In order to refer to diagonal pairs the shortest path passes throughwe need <strong>the factor graph <spanclass="math inline">\(S^*\)</span></strong>. It's defined as follows: weget <span class="math inline">\(S^*\)</span> from S by adding edgesconnecting each d to all diagonals bounding <spanclass="math inline">\(P_d\)</span>. Following is <spanclass="math inline">\(S^*\)</span> from the previous tree.<imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/uzOTVXZ.png"alt="uzOTVXZ" /></p><p>edge of <span class="math inline">\(S^*\)</span> represents a pair ofdiagonals of the cell's bounding.</p><p><strong>Lemma1: The size of the factor graph <spanclass="math inline">\(S^*\)</span> is <spanclass="math inline">\(O(n)\)</span> </strong></p><p>We can get S and <span class="math inline">\(S^*\)</span> in<strong>O(nloglogn) + O(n)</strong> time.</p><h3 id="shortest-paths-and-the-polygon-decomposition">3. Shortest pathsand the polygon decomposition</h3><p>This section analyzes the sequence of diagonals crossed by theshortest path in P, which is the sequence of cells.</p><p>This sequence can be discovered quickly once we know the trianglescontaining the two endpoints. Then using the pre-computed informationinside each adjacent pair of diagonals we can find the path.</p><p>To begin with, we have two points p and q in P which are startingpoint and ending point. Then the path from p to q crosses severaldiagonals, we call them <strong>separating for p and q</strong>.Following are some properties of separatings:</p><ul><li>To pass a separating the shortest path needs to pass all separatingson the side of q first.</li><li>Adjacent separating have different depths</li><li>Between two separatings with the same depth, there's one with lesserdepth.</li></ul><p>Then we need to define a subsequence of separatings. First we have<strong>principal separating diagonal <span class="math inline">\(\hatd\)</span></strong> which is the lowest common ancestor in S of all theseparating diagonals, e.g.d2 is principal if p is in IHG and q is inAKF. Also we define the separating diagonals nearest p and q also to beprincipal diagonals and we call them $d_p $ and <spanclass="math inline">\(d_q\)</span> .</p><p>Then we have <strong><span class="math inline">\(D_p\)</span> to be asubsequence of the separating diagonals between <spanclass="math inline">\(d_p\)</span> and <span class="math inline">\(\hatd\)</span>. </strong> e.g. d5 and d7 are two new principal diagonals.The <strong>principal diagonals are then just those in <spanclass="math inline">\(D_p\)</span> together with those in <spanclass="math inline">\(D_q\)</span></strong>.</p><blockquote><p>Scan through this sequence from <spanclass="math inline">\(d_p\)</span> to <span class="math inline">\(\hatd\)</span> and keep track of the minimum depth seen so far.</p><p>During the scan, discard all diagonals with depth greater than thecurrent minimum.</p><p>The remaining diagonals are of strictly increasing depth (by thelacuna property) and form <span class="math inline">\(D_p\)</span>.</p><p>The sequence <span class="math inline">\(D_p\)</span>, is definedsymmetrically, proceeding from <span class="math inline">\(d_p\)</span>to <span class="math inline">\(\hat d\)</span>. The principal diagonalsare then just those in <span class="math inline">\(D_p\)</span> togetherwith those in <span class="math inline">\(D_p\)</span>.</p><p>make d2 to be <span class="math inline">\(\hat d\)</span> and d5 tobe <span class="math inline">\(d_p\)</span> and d7 to be <spanclass="math inline">\(d_q\)</span>.</p><p>Then <span class="math inline">\(D_p\)</span> is d5-d2, <spanclass="math inline">\(D_q\)</span> is d7-d4-d2.</p></blockquote><p><strong>The calculation of <span class="math inline">\(D_p\)</span>can be done in log time</strong>: we can scan in the tree S from <spanclass="math inline">\(d_p\)</span> to <span class="math inline">\(\hatd\)</span> and check all nodes(diagonals in P) and see if they arebetween <span class="math inline">\(\hat d\)</span> and <spanclass="math inline">\(d_p\)</span> in P(This can be done in constanttime).If it's between then it belongs to <spanclass="math inline">\(D_p\)</span>.</p><p><strong>Conclusion</strong>: We can get a sequence of separatings inO(logn) time and the "concatenation" of the shortest path from p to qlies in.</p><h3 id="hourglass-and-shortest-paths">4. Hourglass and ShortestPaths</h3><h4 id="introduction-to-hourglass">Introduction to Hourglass</h4><p>We need to use an hourglass structure to represent the shortest pathsbetween two diagonals.</p><p>Each hourglass is associated with an edge of the factor graph becausean edge has two nodes( two separate diagonals) and can form anhourglass.</p><p><strong>funnel</strong>: a funnel represents the shortest path from asource s to two endpoints of an edge or a diagonal. Let <spanclass="math inline">\(p_1,p_2\)</span> be two endpoints of a diagonaland s be the source, then from s to endpoints' shortest path have ashared edge, then at some point, they will separate. We call this pointA <strong>apex of the funnel</strong>. Each of the funnel paths is<em>inward convex</em>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-20230914105328713%20PM-4724817.png"alt="image-20230914105328713 PM" /><figcaption aria-hidden="true">image-20230914105328713 PM</figcaption></figure><p>New Notation:</p><ul><li><span class="math inline">\(\pi(p,q)\)</span>: the shortest pathinside P that connects points p and q.</li><li>Hourglass: let <span class="math inline">\(\overline {AB}\)</span>and <span class="math inline">\(\overline {CD}\)</span> be two diagonalsof P and BACD is the subsequence of vertex, then the union of the twopaths <span class="math inline">\(\pi(A,C)\)</span> and <spanclass="math inline">\(\pi(B,D)\)</span> is the <em>hourglass</em> of<span class="math inline">\(\bar {AB}\)</span> and <spanclass="math inline">\(\bar {CD}\)</span>.</li><li>String: If the paths share any vertices, then the hourglass isessentially two funnels joined by a polygonal path between their apexes.We call this shortest path between the apexes <em>string</em>.</li></ul><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/Image%202.jpeg"alt="Image 2" /><figcaption aria-hidden="true">Image 2</figcaption></figure><p>If we know the path from s to a/p1/p2 then we can use the funnel todetermine the length of <span class="math inline">\(\pi(s,q)\)</span>for every q on d. There's only one tangent v from q to the funnel, so wecan use the path <span class="math inline">\(\pi(s,a\)</span>) + (a,v) +tangent(v,q) as the shortest path <spanclass="math inline">\(\pi(s,q)\)</span>.</p><p>As the funnel is from a fixed source, we need to get the shortestpath from one diagonal to another diagonal, so we introduce a newstructure hourglass. It's represented by two diagonals AB and CD. Theunion of two paths <span class="math inline">\(\pi(A,C)\)</span> and<span class="math inline">\(\pi(B,D)\)</span> is the hourglass of AB andCD. If the paths share any vertices then it's a <strong>closedhourglass</strong>, or else there's a segment with one endpoint on ABand the other on CD that avoids the polygon, it's an <strong>openhourglass</strong>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-20230915122055515%20AM-4730059.png"alt="image-20230915122055515 AM" /><figcaption aria-hidden="true">image-20230915122055515 AM</figcaption></figure><p>If we want to find the point's shortest path from AB to CD, if it'sclosed then it's just two funnels and one string. If it's open thenthere will be 2 cases:</p><ol type="1"><li>p,q are visible: pq is the shortest path</li><li>p,q aren't visible, there will be 2 cases<ol type="1"><li>P,q are on one side with A, C: the shortest path is $ tangent(p,(A,C) )+ $tangents in <span class="math inline">\(\pi(A,C) +tangent(q,\pi(A,C))\)</span></li><li>p,q are far away: the shortest path is <spanclass="math inline">\(tangent(p,\pi(A,C))+\)</span> the portions of thehourglass chains needed to connect the tangents <spanclass="math inline">\(+ tangent(q,\pi(B,C))\)</span>.</li></ol></li></ol><p>Hourglasss are very suitable for concat. However, there are severaldifferent cases:</p><ol type="1"><li><p>Both hourglasses are closed: (d1,d2),(d2,d3),(d1,d3)are allclosed, then the shortest path uses two funnels d1,d3 and old stringaugmenting shortest path <spanclass="math inline">\(\pi(a,a&#39;)\)</span>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-20230917104655314%20PM-4983621.png"alt="image-20230917104655314 PM" /><figcaption aria-hidden="true">image-20230917104655314 PM</figcaption></figure></li><li><p>One hourglass is closed and the other is open, we define theclosed one is <span class="math inline">\((d_1,d_2)\)</span> and theopen one is <span class="math inline">\((d_2,d_3)\)</span>. Then we havea point a as the funnel of <span class="math inline">\(d_2\)</span>.First, we find the apex a' in the funnel (a,<spanclass="math inline">\(d_3\)</span>). Second, we get shortest path infunnel <span class="math inline">\((a,d_1)\)</span>. Third, we add theshortest path with <span class="math inline">\(\pi(a,a&#39;)\)</span>and get the final shortest path.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-20230917104818897%20PM-4983713.png"alt="image-20230917104818897 PM" /><figcaption aria-hidden="true">image-20230917104818897 PM</figcaption></figure></li><li><p>If both are open, then the four common tangents that touch onechain from each hourglass determine the result.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-20230917111151764%20PM.png"alt="image-20230917111151764 PM" /><figcaption aria-hidden="true">image-20230917111151764 PM</figcaption></figure></li></ol><p>Now we can only find shortest paths from diagonals of hourglasses,but it's easy to extend to all points inside the hourglass. Suppose wehave p and q which we want to find the shortest path then we can maketangents from p,q to the nearest diagonals <spanclass="math inline">\(d_p\)</span> and <spanclass="math inline">\(d_q\)</span>. Or we can see p,q as two smalldiagonals, and we just contact them with <spanclass="math inline">\(d_p,d_q\)</span> and get 3 hourglasses, and theyare a single closed hourglass and we can get the shortest path between pand q.</p><h4 id="specifications-and-use">4.1 Specifications and Use</h4><p>This subsection shows a data structure that allows efficientrepresentation and manipulation of hourglass. It also specifies theoperation the structure must support and the allowable space and timecomplexities of each(operations).</p><p>New Notation:</p><ul><li><span class="math inline">\(H(d_1,d_2)\)</span> : the hourglassbetween <span class="math inline">\(d_1\)</span> and <spanclass="math inline">\(d_2\)</span>.</li></ul><h5 id="operation1-concatenation">Operation1: Concatenation</h5><p>The concatenation is finding common tangents between pairs of convexpolygonal chains or between points (degenerate convex chain). So we havethe following requirements:</p><ol type="1"><li>If the tangent from one point to the hourglass <spanclass="math inline">\(H(d_1,d_2)\)</span> and <spanclass="math inline">\(H(d_2,d_3)\)</span> can be found in <spanclass="math inline">\(t_1,t_2\)</span>, then the common tangent of thetwo hourglasses can be found in time<spanclass="math inline">\(O(t_1+t_2)\)</span>.</li><li>If the tangent from one point to the hourglass <spanclass="math inline">\(H(d_1,d_2)\)</span> and <spanclass="math inline">\(H(d_2,d_3)\)</span> can be found in <spanclass="math inline">\(t_1,t_2\)</span>, then the hourglass <spanclass="math inline">\(H(d_1,d_3)\)</span> can be constructed in <spanclass="math inline">\(O(t_1+t_2)\)</span> time <strong>and additionalspace</strong>, and the original two hourglasses are unaltered byconcatenation.</li></ol><p>The following two requirements help the query operation and make itfaster.</p><ol start="3" type="1"><li>If the tangent from one point to the hourglass <spanclass="math inline">\(H(d_1,d_2)\)</span> and <spanclass="math inline">\(H(d_2,d_3)\)</span> can be found in <spanclass="math inline">\(t_1,t_2\)</span>, then tangents to <spanclass="math inline">\(H(d_1,d_3)\)</span> can be found in time max<spanclass="math inline">\((t_1,t_2) + C\)</span>. For some constant C.</li><li>if tangents from a point to <spanclass="math inline">\(H(d_1,d_2)\)</span> can be found in time t, thelength of the shortest path between d1 and d2 can be found in O(t)time.The path itself can be found in O(t+m) time and m is the number ofturns in the path.</li></ol><p>Then we can save some hourglasses and concat them to find thenecessary hourglass to find the shortest path.</p><p>Previously we built a tree while doing triangulation and addingdiagonals of depth k at time k(one layer at a time). Now we can<strong>do it backwards</strong>:</p><ol type="1"><li>Delete a diagonal with the greatest depth in S</li><li>merge two adjacent cells of the diagonal and create a new cell</li><li>Construct an hourglass between the pair of diagonals.</li></ol><p>After all diagonals are removed we <strong>have hourglassescorresponding to all the edges in <spanclass="math inline">\(S^*\)</span></strong>.</p><p>During this construction, there's an inductive invariant: before thediagonal of depth k is deleted, all hourglassed in cells with depthgreater than k have been computed. The hourglasses built have specialproperties, and we can use them to prove the linear time and spacebound. As the procedure combines hourglasses layer by layer, so the timeis logarithmic(with a connection of the height of the triangulationtree), and the time could be linear(one by one following the chain). Toexpress this log bound we need a new notion:</p><p>New Notation:</p><ul><li><span class="math inline">\(\lambda(d_1,d_2)\)</span>: if twodiagonals <span class="math inline">\(d_1\)</span> and <spanclass="math inline">\(d_2\)</span> are linked in <spanclass="math inline">\(S^*\)</span> and they lie on the boundary of acell, then <span class="math inline">\(\lambda(d_1,d_2)\)</span> is thelog of the size of the cell.</li></ul><p><strong>Lemma 2</strong>: If <span class="math inline">\(d_1\)</span>and <span class="math inline">\(d_2\)</span> are linked by an edge inthe factor graph, it's possible to find the tangents through a point tothe hourglass <span class="math inline">\(H(d_1,d_2)\)</span> in time<span class="math inline">\(O(\lambda(d_1,d_2))\)</span>.</p><p>Using this Lemma we are going to prove the linearity of theconstruction.</p><p>We can constructe one hourglass obtained by concatenating twohourglasses across diagonal d in time and space proportional to thelogarithm of the size of <span class="math inline">\(P_d\)</span>, andthis quantity is proportional to h(d). The height is less than theheight of two diagonals of the new hourglass, make one of the newdiagonal to be d', there are O(h(d')) edges in <spanclass="math inline">\(S^*\)</span> joining d to lower diagonals, thehourglasses corresponding to these edges can be built in <spanclass="math inline">\(O((h(d&#39;))^2)\)</span> time and space.</p><p><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/imgtest1.png"alt="imgtest1" />Overall the construction takes time and spaceproportional to O(n). After build these hourglasses they can answershortest path queries in <span class="math inline">\(O(log^2n)\)</span>time:</p><p>Between p and q there are O(log n) hourglasses and we can concat theminto a single long hourglass using O(log n) concatenations. Fromprevious we know each concatenation takes O(log n) time so it's <spanclass="math inline">\(O(log^2n)\)</span> time. Finally, we can view pand q as diagonals and concatenate <span class="math inline">\(H(p,d_p),H(d_p,d_q),H(d_q,q)\)</span> to get H(p,q) in O(log n) additional time,this hourglass is a string and it's the shortest path from p to q. Asit's a string we can get the length of the path, and the path itself canbe extracted in additional time by the forth requirement.</p><h4 id="the-chain-data-structure">4.2 The Chain Data Structure</h4><p>Convex polygonal chains are the basic constituents of hourglasses, itrepresents ordered convex chains by binary trees. We need to buildhourglasss from chains, so chains need to satisfy some analogousconditions. A chain is the convex hull of its subchains.</p><p>First, each chain is a shortest path inside P, if the chain hasendpoints A and B then the chain is <spanclass="math inline">\(\pi(A,B)\)</span>. Then the chain is convex andcannot spiral. Also, the chain is equal to its own convex hull minus thesegment <span class="math inline">\(\bar {AB}\)</span>.</p><p>there are two types of the chain: a trivial chain and a derivedchain.</p><p>Trivial chain: a single polygon edge</p><p>Derived chain: the convex hull of two subchains, each of them maycontribute no edges to the shortest path.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/derived%20and%20trivial.png"alt="derived and trivial" /><figcaption aria-hidden="true">derived and trivial</figcaption></figure><figure><img data-src="Optimal-Shortest-Path-in-Simple-Polygon/chains%20example.png"alt="chains example" /><figcaption aria-hidden="true">chains example</figcaption></figure><p>the derived chain contains the outer common tangent of two subchains,and sometimes there are no tangents. A tangent edge may consist of asingle point, we need to ensure there are not too many null edges in anychain. If a null edge in <span class="math inline">\(\pi(A, B)\)</span>or <span class="math inline">\(\pi(B, C)\)</span> coincides with oneendpoint of the outer common tangent of <spanclass="math inline">\(\pi(A, B)\)</span> and <spanclass="math inline">\(\pi(B, C)\)</span>, we do not include the nulledge in the derived chain <span class="math inline">\(\pi(A,C)\)</span>. As a result, no chain contains adjacent null edges. This isillustrated in the following figure. Here at vertex D, there's a nulledge from <span class="math inline">\(\pi(A, B)\)</span> and also onefrom <span class="math inline">\(\pi(B,C)\)</span>. After concatenation,these two null edges no longer exist in the new chain <spanclass="math inline">\(\pi(A,C)\)</span>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/null%20edge.png"alt="null edge" /><figcaption aria-hidden="true">null edge</figcaption></figure><p>Also, no chain should have adjacent collinear edges, if a commontangent is collinear with an edge then we can extend the tangent edge todelete the collinear dege.</p><p>The chain supports two important operations: tangent-finding andconstructing a chain from its subchains. <strong>The chain datastructure can be denoted with a binary tree: you can use a leaf node torepresent a trivial chain, and use a node that contains the commontangent of the subchains and pointers to the nodes to represent aderived chain.</strong> So we can build the tree based on a chain likein the next figure.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/chain%20and%20tree.png"alt="chain and tree" /><figcaption aria-hidden="true">chain and tree</figcaption></figure><p>To do the tangent-finding, first, we are given a chain <spanclass="math inline">\(\pi(A,C)\)</span> and a point X outside the convexhull. <strong>The task is to find the two tangents from X to thechain.</strong> We can look at the edge stored in node v whichrepresents <span class="math inline">\(\pi(A,C)\)</span> to find eachtangent, and then in constant time, we can determine which subchain thetangent touches, and then find the tangent by recursively searching inthe subchain's tree. <strong>This search takes time proportional to theheight of the tree v.</strong></p><p>Another query is to find the inner and outer common tangents of twochains. neither chain is contained in the convex hull of the other.Using the techniques of Overmars and van Leeuwen,<strong>the tangentscan be found in time proportional to the sum of the heights of the treesrepresent <span class="math inline">\(\pi(A,B)\)</span> <spanclass="math inline">\(\pi(C,D)\)</span></strong>.</p><p>When we use chain data structure in hourglass we only need to computeone tangent at a time, so we need to modify the tangent-findingalgorithm a bit for that. We need to specify which tangent we wantbecause there are two tangents for one chain. We can define left andright for each chain by taking the convex side to be up.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/Untitled-7302661.png"alt="Untitled" /><figcaption aria-hidden="true">Untitled</figcaption></figure><p>We have two chain conditions analogueue to the hourglasscondition:</p><p>C1: If the lines passing through a given query point and tangent tochains <span class="math inline">\(\pi(A, B)\)</span> and <spanclass="math inline">\(\pi(C, D)\)</span> can be found in times <spanclass="math inline">\(t_1\)</span>, and <spanclass="math inline">\(t_2\)</span>, the common tangents of the twochains can be found in time O(t1+t2).</p><p>To illustrate this condition a bit more clear, we can refer to thefollowing figure. Given the assumtion the two tangents from a querypoint to two chains can be found in <spanclass="math inline">\(t_1\)</span> and <spanclass="math inline">\(t_2\)</span>, we know in any 1 call we can findtwo tangents in <span class="math inline">\(t_1 + t_2\)</span> time. Inmost of the time these two tangents are not common tangents like greenlines in the figure, but after O(1) calls we can find a situation wherethe two tangents are common tangents like the red lines in the figure.So we can find the common tangents in time <spanclass="math inline">\(O(t_1 + t_2)\)</span>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/condition2.png"alt="condition2" /><figcaption aria-hidden="true">condition2</figcaption></figure><p>C3:Suppose chain <span class="math inline">\(\pi(A, C)\)</span> isbuilt from subchains <span class="math inline">\(\pi(A, B)\)</span> and<span class="math inline">\(\pi(B, C)\)</span>. If tangents from a pointto chains <span class="math inline">\(\pi(A, B)\)</span> and<spanclass="math inline">\(\pi(B, C)\)</span> can be found in times t1 andt2, tangents to their combined chain <span class="math inline">\(\pi(A,C)\)</span> can be found in time max(t1,t2) + <constant>.</p><p>Also, condition 4 requires computing the length of the path inhourglasses, so we need to store chain lengths in the chain datastructure. Consider the following figure, in this chain the noderepresenting <span class="math inline">\(\pi(A,E)\)</span> stores thelength of AB,BD and DE. The sum of these lengths is the length ofAE.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023101474210889%E2%80%AFPM.png"alt="image-2023101474210889 PM" /><figcaption aria-hidden="true">image-2023101474210889 PM</figcaption></figure><p>new notations:</p><p>If node v represents the chain of fig 9.</p><ul><li>v.tan : the tangent edge BD</li><li>v.llen: length of <span class="math inline">\(\pi(A,B)\)</span></li><li>v.rlen: length of <span class="math inline">\(\pi(C,E)\)</span></li><li>v.tlen: length of BD</li><li>v.len: length of <span class="math inline">\(\pi(A,E)\)</span> andit's the sum of llen, rlen and tlen. If v is just a single edge, thenllen = rlen = 0. Len = tlen</li></ul><p>The following lemma helps us fill in the length fields of v:</p><p><strong>lemma3:</strong> Let v be the root of the tree representingthe chain <span class="math inline">\(\pi(A, E)\)</span> of Fig. 9. Letu be a node in the tree whose edge u. tan appears in <spanclass="math inline">\(\pi(A, E)\)</span>, and let X be the rightendpoint of u. tan. The length of the chain <spanclass="math inline">\(\pi(A, X)\)</span> can be determined by looking atthe lengths stored at the nodes along the path from v to u in thetree.</p><p><em>Proof.</em> The proof is based on classification discussion andkeep in mind that each node saves len, llen, rlen and tlen.</p><p>If u = v, then u.tan = <spanclass="math inline">\(\overline{BD}\)</span>. The length of <spanclass="math inline">\(\pi(A,X)\)</span> is just v.llen + u.tlen.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/proof%20figure1.png"alt="proof figure1" /><figcaption aria-hidden="true">proof figure1</figcaption></figure><p>If u is in the left subtree of v, then only edges from the subchain<span class="math inline">\(\pi(A,B)\)</span> contribute to <spanclass="math inline">\(\pi(A,X)\)</span>. By induction we can find thelength of <span class="math inline">\(\pi(A,X)\)</span> by looking atthe lengths stored along the path from the left child of v down to u. Inthis example from v to u we can get node <spanclass="math inline">\(t_2\)</span>, and the length of <spanclass="math inline">\(\pi(A,X)\)</span> is <spanclass="math inline">\(t_2.llen + t_2.tlen + u.len\)</span>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/proof%20example2.png"alt="proof example2" /><figcaption aria-hidden="true">proof example2</figcaption></figure><p>If u is in the right subtree of v, then <spanclass="math inline">\(\pi(A,X)\)</span> consists of <spanclass="math inline">\(\pi(A,B),\overline{BD}\)</span> and some prefix of<span class="math inline">\(\pi(D,E)\)</span>. Thus the length of <spanclass="math inline">\(\pi(A,X)\)</span> is v.llen + v.tlen + the lengthof <span class="math inline">\(\pi(D,X)\)</span>. This last term is thesame as the length of <span class="math inline">\(\pi(C,X)\)</span> -the length of <span class="math inline">\(\pi(C,D)\)</span>. If t is theright child of v, the node associated with <spanclass="math inline">\(\pi(C,E)\)</span>, then the length of <spanclass="math inline">\(\pi(A,X)\)</span> is v.len - t.len + the length of<span class="math inline">\(\pi(C,X)\)</span>. By induction we can findthe length of <span class="math inline">\(\pi(C,X)\)</span> by lookingat the nodes on the path from t to u.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/proof%20image3.png"alt="proof image3" /><figcaption aria-hidden="true">proof image3</figcaption></figure><p>To fill in the length fields of v we need to compute v.llen andv.rlen. Using lemma3 we can know that we can get v.llen by looking atthe nodes along the path from a point u in the tree representing theleft subchain up to the root of the left subtree. this can be computedin time proportional to the height of v. Also we can find v.rlen in asimilar manner. This completes our discussion of the length fields.</p><p>We still need to satisfy another requirement which is "given a chaindata structure, we must be able to retrieve the edges of the chain inthe constant time". It's very hard to retrieve the edges because thedata structure won't modify the corresponding structure of the left andright subchains, so we don't know the sequence of a path as we aregetting them from mid to each side.</p><p>Our solution uses a compact representation of the differences betweenthe chain and its left and right subchains. To be more specific,consider the node v that represents the chain before. Node v has twolists associated with it, a left and a right <em>edge retrievallist</em>. Each record r in a retrieval list has two pointers, one to anode in the left/right subtree and one to a record in another retrievallist, called the <em>partner</em> of r. So we define record as <spanclass="math inline">\(record := (node pointer,partnerpointer)\)</span>.The right retrieval list is analogous to the left retrieval list.</p><p>First we need to explain what's the node pointers. Let w be the leftchild of v, and let u be the node in the subtree rooted at w whose edgeu.tan appears in <span class="math inline">\(\pi(A,E)\)</span> and isincident to B. The records in v's left retrieval list point to the nodeson the path from w to u, inclusive, whose associated edges belong to<span class="math inline">\(\pi(A,E)\)</span>. The retrieval list keepsthe nodes in the same order as the path from w to u. This is the nodepointers of the left retrieval list and the right retrieval list aredefined analogously. I'll explain it in detail.</p><p>We will start with left retrieval list, from the figure we can getthe left retrieval list as [(w,-),(x,-),(u,-)].</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/leftretrieval.png"alt="leftretrieval" /><figcaption aria-hidden="true">leftretrieval</figcaption></figure><p>Also there's right retrieval list as[(w,-),(y,-),(u,-)].</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/rightretrival.png"alt="rightretrival" /><figcaption aria-hidden="true">rightretrival</figcaption></figure><p>Then there are some lemma shows some feature of retrieval lists, andthey will also enable us to specify the <em>partner</em> fields of listrecords.</p><p><strong>Lemma 4</strong> Let s and t be two nodes pointed to byconsecutive records in the left retrieval list of v. Then these twonodes are in an ancestor/descendant relationship. If s is the ancestor,then t is in the right subtree of s, and some record in the rightretrieval list of s points to t. Analogous claims hold for records inthe right retrieval list of v.</p><p>Now we can specify the <em>partner</em> fields of retrieval listrecords. Each record has its own field, the first record's field isnull. Let r and $r$ be two consecutive records in v's left retrievallist that point to nodes s and t, and s is an ancestor of t. Then the<em>partner</em> field of <span class="math inline">\(r\prime\)</span>points to the record in the right retrieval list of s that points to t.The partner fields of records in the right retrieval list are definedanalogously.</p><p>With the previous example we can update the two lists as: leftretrieval list[]</p><p>Then the following two lemmas show we can get the edges of a chainwith the edge retrieval lists in constant time apiece.</p><p><strong>Lemma5</strong> Let r be a record in the left retrieval listof v, and let s be the node it points to. Using the part of theretrieval list r heads, we can retrieve all the edges of v’s chainstrictly between s.tan and v.tan in left-to-right order and in constanttime per edge. A similar claim holds for right retrieval lists.</p><p><strong>Lemma6</strong> Using v’s left edge retrieval list, we canreport all the edges of v’s chain that are to the left of v. tan. Weproduce the edges in left-to-right order and at constant cost per edge.A similar claim holds for v’s right retrieval list.</p><p>Using the retrieval list we can get the edges of a chain in constanttime apiece. Also we found the list of a node v is bounded by the heightof v, and we will show there's another way to get the retrieval listefficiently.</p><p>Let u be the node in v’s left subtree such that u.tan is adjacent tov.tan in v’s chain. The left retrieval list of v points to nodes on thepath from v to u. To construct the retrieval list, we must be able totell which nodes on the path have edges in v’s chain. Our approach isbased on comparing pairs of diagonals or polygon edges using the hidingtest described below: Let t be a node in the tree rooted at v. If t.tandoes not appear in v's chain, there's some edge <spanclass="math inline">\(\overline{ab}\)</span> in v's chain such thatt.tan is contained in the pocket defined by <spanclass="math inline">\(\overline{ab}\)</span> and the polygon boundarybetween a and b. We say that <spanclass="math inline">\(\overline{ab}\)</span> hides t.tan.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023110453746869%E2%80%AFPM.png"alt="image-2023110453746869 PM" /><figcaption aria-hidden="true">image-2023110453746869 PM</figcaption></figure><p>We can test whether one edge hides another by comparing the indicesof their endpoints, assuming all the endpoints are polygonvertices.Suppose that the edge connecting vertices i and l belongs tov’s chain, and i is left of l on the chain.</p><ul><li>If i &lt; l, the polygon vertices are numbered consecutively alongthe boundary of the pocket cut off by <spanclass="math inline">\(\overline{il}\)</span>. In this case, an edge<span class="math inline">\(\overline{jk}\)</span> is hidden by <spanclass="math inline">\(\overline{il}\)</span> if and only if <spanclass="math inline">\(\overline{jk} \neq \overline{il}\)</span> and bothintegers j and k lie in the interval [i,l].</li><li>If i &gt; l, an edge <spanclass="math inline">\(\overline{jk}\)</span> is hidden by <spanclass="math inline">\(\overline{il}\)</span> if and only if <spanclass="math inline">\(\overline{jk} \neq \overline{il}\)</span> and bothj and k are outside the interval [l+1,i-1].</li></ul><p>However, when we are doing query, not all chain vertics are polygonvertices, some times query points p and q appear in some chains and theyare not polygon vertices, so we must assign them vertex numbers beforeusing the hiding test. Suppose that source point p lies in triangle $ $and that <span class="math inline">\(d_p\)</span> is diagonsl <spanclass="math inline">\(\overline{ik}\)</span>.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023110540530804%E2%80%AFPM.png"alt="image-2023110540530804 PM" /><figcaption aria-hidden="true">image-2023110540530804 PM</figcaption></figure><p>We constract the hourglass from p to q by pretending p is a polygonvertex, we assign to p the vertex number j. Then it gives a consistentcounterclockwise numbering to the vertices of the unshaded subpolygonand allow us to test hiding as described above.</p><p>The following lemma shows how to use the hiding test to constructretrieval lists.</p><p>Lemma 7. Let u be the node in the left subtree of v such that u. tanis adjacent to v. tan in v’s chain, and let t be a descendant of v onthe path from v to u. Let s be the lowest proper ancestor of t such thats. tan appears in v’s chain. Either t. tan is hidden by s. tan or by v.tan, or it appears in v’s chain.</p><p>Using this lemma to determine which nodes on the path from v to uhave edges in v's chain, we can go from v to u and test each one.Suppose t is the current node and s is its lowest proper ancestor suchthat s.tan appears in v's chain. If t.tan is not hidden by s.tan orv.tan, then it appears in v's chain.</p><p>Until now we have all the elements of the chain data structure:</p><ol type="1"><li>A chain is represented by the root node of a binary tree.</li><li>Each node has two edge retrieval lists to help report the edges ofthe chain. With retrieval lists, each node uses storage proportional tothe height of the tree.</li><li>We can construct a chain's tree from its subchain's trees in timeproportional to the height of the new tree, which is proportional to thesum of the heights of the subtrees.</li><li>The new chain's data structure does not modify any of the oldchain's data structures.</li></ol><p>With these facts, we can establish the following analoguerequirements:</p><p>(C2) If tangents from a point to chains <spanclass="math inline">\(\pi(A, B)\)</span> and <spanclass="math inline">\(\pi(B, C)\)</span> can be found in times t1 andt2, the data structure for the combined chain <spanclass="math inline">\(\pi(A, C)\)</span> can be built in O(t1 + t2) timeand additional space. Furthermore, the data structures for the originaltwo chains are unaltered by the construction.</p><p>(C4) The length of a chain can be found in constant time. The edgesequence of the chain can be extracted in constant time per edge.</p><h4 id="string-data-structure">String data structure</h4><p>This subsection uses the chains of the preceding subsection toimplement the hourglass data structure. As the hourglass data structuresatisfies the requirements enunciated at the beginning of this section,it can be used to answer shortest-path queries efficiently. Thehourglass data structure contains two main components chains andstrings. In the preceding subsection we described the chain datastructure, and this subsection we begin with a discussion ofstrings.</p><p>If we were concerned only with the lengths of shortest paths and notwith the paths themselves, we could represent strings by their lengthsalone. However, we need additional structures to represent the edges ofa string. As there are two types of strings, fundamental and derived, weneed two types of representation. Fundamental strings are formed whenthe concatenation of two hourglasses collapses the multiple pathsrepresented by funnels or open hourglasses into a single path. Thefollowing figure are some examples of fundamental strings.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023110564024921%E2%80%AFPM.png"alt="image-2023110564024921 PM" /><figcaption aria-hidden="true">image-2023110564024921 PM</figcaption></figure><p>A derived string is produced when a choled hourglass is concatenatedwith another hourglass. The following figure is an example of derivedstring.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/derived%20example.png"alt="derived example" /><figcaption aria-hidden="true">derived example</figcaption></figure><p>The chains that appear in strings are obtained by truncatinghourglass chains. We can represent truncated chains using the previousdata structure. To clip off the right end of a chain, we simply create anew chain in which the old chain is the left subchain, the rightsubchain is null, and the tangent edge is the new chain's rightendpoint. As discussed before, we cannot put one null edge next toanother, so any chain has at most one more null edge than it hasnon-null edges.</p><p>From the definition we know a derived string when fully expanded is asequence of fundamental strings. The data structure for a derived stringis represented by an internal node whose children are its constituentstrings. The tree has two or three children per node. We construct thederived string trees so that the non-empty fundamental strings that makeup a derived string can be extracted in constant time. Whenconcatenation would cause us to include an empty string in a derivedstring, we drop that string. We also rule out nodes in the treerepresentation of derived strings that have only one child.</p><p>So, when two hourglasses are concatenated and the resulting string isjust the string belonging to one of the two, we set the new hourglass topoint to the old string, rather than creating a new derived string nodewith only one child. This strategy means that the internal nodes of aderived string tree have at least two children.</p><p>Traversing the tree takes time proportional to the number of leaveswhich is non-empty fundamental strings. Since the edges of eachfundamental string can be extracted in constant time per edge, the edgesof any string can be extracted within thesame time bound. This concludesour discussion of the string data structure.</p><h4 id="hourglass-data-structure-implementation">hourglass datastructure: Implementation</h4><p>With these given data structure we can build our hourglass now. Anhourglass is built of at most four convex chains and one string. Thehourglass data structure has pointers to these live components. If anyof the parts is missing, as when the hourglass is open, thecorresponding pointer is null. To concatenate two hourglasses, we findthe relevant common tangents of their chains, build the appropriatechains and strings, and set the pointer fields of a new hourglassstructure. Each new chain is either an old chain or a convex hull of twoold chains, possibly with an end clipped off as described above. The newstring, if any, is either a fundamental string or a derived string thatpoints to one new fundamental string and one or two old strings.</p><p>We can conclude from the preceding discussion that the hourglass datastructure meets its specification. Each hourglass and string record usesa constant number of chains, and each concatenation requires a constantnumber of chain operations. Because chains satisfy conditions (Cl)-(C4),the hourglasses built from them satisfy requirements (l)-(4).</p><h3 id="improved-query-time-bounds">5. Improved Query Time bounds</h3><p>From discussion above we can do shortest path queries in <spanclass="math inline">\(O(log^2 n)\)</span> time bound. This section shoshow to reduce that to O(log n) time.</p><p>We can observe that if many shortest path queries are answered,hourglasses corresponding to edges high up in the factor graph are usedmany times; furthermore, the cost of concatenating them is the majorcontribution to query time. If we could find a way to bypass most of thecomputation high up in <span class="math inline">\(S^*\)</span> then wecan reduce the query cost.</p><p>To find the shortest path from p to q there are four main steps:</p><ol type="1"><li>Locate the points in the triangulation</li><li>find the subsequences <span class="math inline">\(D_p\)</span> and<span class="math inline">\(D_q\)</span> of the separatingdiagonals</li><li>find the hourglass between <span class="math inline">\(d_p\)</span>and <span class="math inline">\(d_q\)</span></li><li>Concatenate <span class="math inline">\(H(p,d_P)\)</span> and <spanclass="math inline">\(H(d_q,q)\)</span> with <spanclass="math inline">\(H(d_p,d_q)\)</span>.</li></ol><p>In these steps only step 3 takes more than logarithmic time. To speedup step 3 we can precompute some intermediate results it uses. As thedecomposition tree S is balanced, there are only <spanclass="math inline">\(O(n/log^2n)\)</span> nodes in S with at least$alog^2n $ descendants. Here a is a parameter that can be adjusted toincrease the amont of preprocessing to decrease the query time. Let theset of these upper nodes to be U and then modify the factor graph <spanclass="math inline">\(S^*\)</span> by adding some edges which connects Uwith their ancestors. Each node of U has O((log n) ancestors, so themodification adds O(n/log n)edges to <spanclass="math inline">\(S^*\)</span>.</p><p>The hourglasses corresponding to the additional edges can be computedin O(log n) time apiece as the data structures representing them havelog height.(Each node d in U must be linked to all its ancestors in S.Linking to the ancestors in order along the path from d to the root of Sgives the claimed bounds.)And overall the additional hourglasses takelinear time and space to construct.</p><p>These additional hourglasses provide the necessary bypass sructuresto make <span class="math inline">\(O(log^2 n)\)</span> into O(log n)time. Let p and q be the query points. In log time we can find thesubsequences <span class="math inline">\(D_p\)</span> and <spanclass="math inline">\(D_q\)</span> of the separating diagonals. Thediagonal <span class="math inline">\(\hat d\)</span> is the lowestcommon ancestor in S of <span class="math inline">\(d_p\)</span> and<span class="math inline">\(d_q\)</span>. If <spanclass="math inline">\(\hat d\)</span> is not in U, then the cellsbetween <span class="math inline">\(d_p\)</span> and <spanclass="math inline">\(d_q\)</span> have <spanclass="math inline">\(O(log^2 n)\)</span> edges altogether as they arecontained in <span class="math inline">\(P_{\hat d}\)</span>. There areonly <span class="math inline">\(O(log(log^2 n))\)</span> hourglassesneed to be concatenated in order to produce <spanclass="math inline">\(H(d_p,d_q)\)</span>, and each concatenation takesO(loglogn) time, so step 3 takes <span class="math inline">\(O((loglogn)^2)\)</span> time, which is dominated by the time of the othersteps.</p><p>If <span class="math inline">\(\hat d\)</span> is in U let <spanclass="math inline">\(d_p^-\)</span> be the highest diagonal in D thatis not in U, and let <span class="math inline">\(d_p^+\)</span> be thenext higher diagonal in <span class="math inline">\(D_p\)</span> (thesuccessor of <span class="math inline">\(d_p^-\)</span> in <spanclass="math inline">\(D_p\)</span>). Define <spanclass="math inline">\(d_q^-\)</span> and <spanclass="math inline">\(d_q^+\)</span> similarly as the following figureshows.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-20231107115052760%E2%80%AFPM.png"alt="image-20231107115052760 PM" /><figcaption aria-hidden="true">image-20231107115052760 PM</figcaption></figure><p>As discussed before, when <span class="math inline">\(\hat d \notinU\)</span> we can find <span class="math inline">\(H(d_p,d_p^-)\)</span>and <span class="math inline">\(H(d_q^-,d_q)\)</span> in <spanclass="math inline">\(O((loglogn)^2)\)</span> time. The hourglasses<span class="math inline">\(H(d_p^-,d_p^+)\)</span> and <spanclass="math inline">\(H(d_q^-,d_q^+)\)</span> correspond to edges of<span class="math inline">\(S^*\)</span> and been precomputed. Since<span class="math inline">\(\hat d\)</span> is an ancestor in S of <spanclass="math inline">\(d_p^+\)</span> and <spanclass="math inline">\(d_q^+\)</span>, and all three diagonals are in U,so the hourglasses <span class="math inline">\(H(d_P^+,\hat d)\)</span>and <span class="math inline">\(H(\hat d,d_q^+\)</span>)also alreadyexist, so we can just concate these six hourglasses and get <spanclass="math inline">\(H(d_p,d_q)\)</span> in logarithmic time, so thelength from p to q can be found in O(log n) time.</p><p>We have the final theorem as follows:</p><p>THEOREM 1. There is a linear space data structure for storing asimple polygon P of size n so that given any two points inside P, thelength of the shortest path joining them can be computed in O(log n)time. The actual path can be extracted in additional time proportionalto the number of turns along it. Furthermore, this shortest path querystructure for P can be computed in linear time once a triangulation of Pis available.</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ShortestPath </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node-study</title>
      <link href="/2023/11/24/node-study/"/>
      <url>/2023/11/24/node-study/</url>
      
        <content type="html"><![CDATA[<p>Intro of node</p><span id="more"></span><h1 id="install-use">Install&amp;&amp; Use</h1><p>Use nvm to manage the node version</p><p>Use <code>node index.js</code> to run single script</p><h1 id="node-file-system">Node file system</h1><p>Use <code>fs.writeFile(file,data)</code> to write to a file andfs.readFile()` to read from a file. need to require fs first.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&#x27;This is a test message\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// write data into test.txt without deleting the existing data</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;test.txt&#x27;</span>, data, &#123; <span class="attr">flag</span>: <span class="string">&#x27;a+&#x27;</span> &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Successfully write data into test.txt&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// read data from test.txt</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="npm">NPM</h1><p>use <code>npm init</code> to init a npm project</p><p>When using the functions in the package normally it needs to use<code>var xxx =  require("xxxxx")</code>. But using ECMAScript Moduleswe can use <code>import xxx from "xxxxx"</code>. You need to add<code>"type": "module",</code> in package.json file in order to useimport.</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Neural-Networks</title>
      <link href="/2023/11/21/Neural-Networks/"/>
      <url>/2023/11/21/Neural-Networks/</url>
      
        <content type="html"><![CDATA[<p>A note for the Coursera course "Advanced Learning Algorithms"</p><span id="more"></span><h1 id="neural-networks-intuition">Neural networks intuition</h1><h2 id="neural-networks-model">Neural networks model</h2><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023112164650789%E2%80%AFPM.png"alt="image-2023112164650789 PM" /><figcaption aria-hidden="true">image-2023112164650789 PM</figcaption></figure><p>右上角的角标代表他在哪一层，右下角的角标代表一层layer里的每一个神经元里包含的两个参数。除了输出层其他的都叫hiddenlayer. Layer3 有三个neuran. g()叫做激活函数(activationfunction).他现在是一个sigmoid function</p><blockquote><p>Sigmoid function: <span class="math inline">\(S(x) =\frac{1}{1+e^{-x}}\)</span></p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/sigmoid%20function.png"alt="sigmoid function" /><figcaption aria-hidden="true">sigmoid function</figcaption></figure></blockquote><h2 id="forward-propagation正向传播">Forward propagation(正向传播)</h2><p>Use a 3-layer neural network to do handwritten digit recognition.Each layer is a dense layer.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023112170609225%E2%80%AFPM.png"alt="image-2023112170609225 PM" /><figcaption aria-hidden="true">image-2023112170609225 PM</figcaption></figure><p>这里x以一个列距阵的形式输入，求完内积之后会得到一个数，然后再加b.所以a1是一个25个内容的列矩阵。</p><h2 id="use-tensorflow-to-implement">Use TensorFlow to implement</h2><p><code>x = np.array([[1],[2],[3]])</code>列向量</p><p>Define alayer:<code>layer_1 = Dense(units=3,activation='sigmoid')</code></p><p>Get the result from layer:<code>a1 = layer_1(x)</code></p><p>Use the Sequential function to let TensorFlow build a model for you:<code>model = Sequential([layer_1,layer_2])</code></p><p>Then use <code>model.fit(x,y)</code> to train the model</p><p>Use <code>model.predict(x_new)</code> to predict</p><p>Define a model:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">model = Sequential(</span><br><span class="line">    [               </span><br><span class="line">        tf.keras.Input(shape=(<span class="number">400</span>,)),    <span class="comment">#specify input size</span></span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">25</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>),</span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">15</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>),</span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">1</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">    ], name = <span class="string">&quot;my_model&quot;</span> </span><br><span class="line">)   </span><br></pre></td></tr></table></figure><p>Use a loss function:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.conpile(loss=BinaryCrossentropy())</span><br></pre></td></tr></table></figure><p>After fitting make a prediction:</p><p>The input to <code>predict</code> is an array so the single exampleis reshaped to be two dimensional.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">prediction = model.predict(X[<span class="number">0</span>].reshape(<span class="number">1</span>,<span class="number">400</span>))  <span class="comment"># a zero</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot; predicting a zero: <span class="subst">&#123;prediction&#125;</span>&quot;</span>)</span><br><span class="line">prediction = model.predict(X[<span class="number">500</span>].reshape(<span class="number">1</span>,<span class="number">400</span>))  <span class="comment"># a one</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot; predicting a one:  <span class="subst">&#123;prediction&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>要想减小计算误差可以添加</p><p><code>model.conpile(loss=BinaryCrossentropy(from_logitc = true))</code></p><p>这可以让TensorFlow自动优化浮点数计算</p><h2 id="vectorisation">Vectorisation</h2><p>Originally the calculation can be done in a for loop, but by usingvector maltiplication it can be much more easier.</p><p>This image is the for loop code, it needs to get each parameter ofthe neurons and multiply and plus number b.</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2023121334422692%E2%80%AFPM.png"alt="image-2023121334422692 PM" /><figcaption aria-hidden="true">image-2023121334422692 PM</figcaption></figure><p>The code for this dense function:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_dense</span>(<span class="params">a_in, W, b, g</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Computes dense layer</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      a_in (ndarray (n, )) : Data, 1 example </span></span><br><span class="line"><span class="string">      W    (ndarray (n,j)) : Weight matrix, n features per unit, j units</span></span><br><span class="line"><span class="string">      b    (ndarray (j, )) : bias vector, j units  </span></span><br><span class="line"><span class="string">      g    activation function (e.g. sigmoid, relu..)</span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">      a_out (ndarray (j,))  : j units</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    units = W.shape[<span class="number">1</span>]</span><br><span class="line">    a_out = np.zeros(units)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(units):</span><br><span class="line">        w = W[:,j]</span><br><span class="line">        z = np.dot(w,a_in) + b[j]</span><br><span class="line">        a_out[j] = g(z)</span><br><span class="line">    <span class="keyword">return</span>(a_out)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>The following img is vectorized implementation:</p><p><img data-src="https://raw.githubusercontent.com/1982606762/picgo/master/image-20231213123737601%E2%80%AFPM.png" alt="image-20231213123737601 PM" style="zoom:33%;" /></p><p>Code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_dense_v</span>(<span class="params">A_in, W, b, g</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Computes dense layer</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      A_in (ndarray (m,n)) : Data, m examples, n features each</span></span><br><span class="line"><span class="string">      W    (ndarray (n,j)) : Weight matrix, n features per unit, j units</span></span><br><span class="line"><span class="string">      b    (ndarray (1,j)) : bias vector, j units  </span></span><br><span class="line"><span class="string">      g    activation function (e.g. sigmoid, relu..)</span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">      A_out (tf.Tensor or ndarray (m,j)) : m examples, j units</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    Z = np.matmul(A_in,W) + b</span><br><span class="line">    A_out = g(Z)</span><br><span class="line">    <span class="keyword">return</span>(A_out)</span><br></pre></td></tr></table></figure><h3 id="matrix-multiplication">matrix multiplication</h3><p>点乘是简单乘，绝大多数都是点乘.</p><p><span class="math inline">\(\mathbf{XW}\)</span> is a matrix-matrixoperation with dimensions <spanclass="math inline">\((m,j_1)(j_1,j_2)\)</span> which results in amatrix with dimension <span class="math inline">\((m,j_2)\)</span>. Tothat, we add a vector <span class="math inline">\(\mathbf{b}\)</span>with dimension <span class="math inline">\((1,j_2)\)</span>. <spanclass="math inline">\(\mathbf{b}\)</span> must be expanded to be a <spanclass="math inline">\((m,j_2)\)</span> matrix for this element-wiseoperation to make sense. This expansion is accomplished for you by NumPybroadcasting.</p><h1 id="neural-network-training">Neural network training</h1><ol type="1"><li><p>Create the model</p><p>Define how many layers and how many units in each layer and theiractivation function</p></li><li><p>Select loss and cost functions</p><p>Select a loss function such as <code>BinaryCrossentropy()</code> fromkeras.losses</p></li><li><p>Train the model using gradient descent</p><p>repeat <span class="math display">\[\begin{align*}w_j^{[l]} &amp;= w_j^{[l]} - \alpha \frac{\partial}{\partial w_j}J(\hat{w}, b) \\b_j^{[l]} &amp;= b_j^{[l]} - \alpha \frac{\partial}{\partial b_j}J(\hat{w}, b)\end{align*}\]</span></p></li></ol><p>​ tensorflow can do it for you, you can just use<code>model.fit(X,y,epochs=100)</code></p><h2 id="activation-functions">Activation Functions</h2><h3 id="sigmoid">Sigmoid</h3><p>Better used on the binary classification problem</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/fbbb9b2c-c2f4-43ed-92f6-1c635dece716.jpg"alt="fbbb9b2c-c2f4-43ed-92f6-1c635dece716" /><figcaptionaria-hidden="true">fbbb9b2c-c2f4-43ed-92f6-1c635dece716</figcaption></figure><p>The sigmoid activation function is defined as:</p><p><span class="math display">\[ S(x) = \frac{1}{1 + e^{-x}}\]</span></p><p>where: - ( S(x) ) is the output of the sigmoid function, - ( e ) isthe base of the natural logarithm, - ( x ) is the input to thefunction.</p><h3 id="relu">ReLU</h3><p>Better used on the regression problem</p><p>The ReLU (Rectified Linear Unit) activation function is definedas:</p><p><span class="math display">\[ g(z) = \max(0, z) \]</span></p><p>where: - ( g(z) ) is the output of the ReLU function, - ( z ) is theinput to the function.</p><h3 id="linear-function">Linear function</h3><p>Better used on the regression problem</p><p><span class="math inline">\(g(z) = z\)</span></p><h3 id="what-if-we-dont-use-activation-function">What if we don't useactivation function?</h3><p>It will be the same as linear regression</p><h2 id="multiclass-classification">Multiclass Classification</h2><h3 id="softmax-algorithm">Softmax algorithm</h3><p>For original logistic regression using sigmoid output can be denotedas <span class="math display">\[ a_1 = g(z) = \frac{1}{1+e^{-z}} = P(y =1|x) \]</span></p><p>Softmax allows to have multiple options being predicted with formulaas <span class="math display">\[a_1 = \frac{e^{z_1}}{e^{z_1} + e^{z_2} + e^{z_3} + e^{z_4}} = P(y = 1|x)\]</span> a是y成为某一个结果的概率</p><p>It in general can be denoted as: $$ z_j = _j + b_j j = 1, , N\</p><p>a_j = = P(y = j|x) $$</p><h3 id="cost-function-for-softmax">Cost function for softmax</h3><p><span class="math display">\[a_1 = \frac{e^{z_1}}{e^{z_1} + e^{z_2} + \dots + e^{z_N}} = P(y =1|\mathbf{x})\]</span> <span class="math display">\[\vdots\]</span> <span class="math display">\[a_N = \frac{e^{z_N}}{e^{z_1} + e^{z_2} + \dots + e^{z_N}} = P(y =N|\mathbf{x})\]</span> <span class="math display">\[\text{loss}(a_1, \dots, a_N, y) =\begin{cases}-\log a_1 &amp; \text{if } y = 1 \\-\log a_2 &amp; \text{if } y = 2 \\\vdots \\-\log a_N &amp; \text{if } y = N\end{cases}\]</span></p><h3 id="how-to-add-softmax-into-neural-network">How to add Softmax intoneural network</h3><p>Change the last output layer from 1 unit to multiple units and let itwork as softmax algorithm.</p><h3 id="multi-label-classification">Multi-label classification</h3><p>在这种问题里y可以是一个数组，例如识别一张图片中有没有三种不一样的物体，y就会输出三个数</p><p>Solution 1 is to treat it as 3 separate different problems and build3 neural networks.</p><p>Solution2 is to build one neural network with three outputs, so a[3]has three elements.</p><h2 id="optimization-algorithm">optimization algorithm</h2><h3 id="adam-algorithm">Adam Algorithm</h3><p>Adaptive Moment estimation</p><p>If w or b keeps moving in same direction it will increase <spanclass="math inline">\(\alpha\)</span>.</p><p>If w or b keeps oscillating it will reduce <spanclass="math inline">\(\alpha\)</span>.</p><p>要想使用需要如下代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">compile</span>(optimizer=tf.keras.optimizera.Adam(learning_rate=le-<span class="number">3</span>),lost=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure><h2 id="complex-model-example">Complex model example</h2><p>Below, compose a three-layer model:</p><ul><li>Dense layer with 120 units, relu activation</li><li>Dense layer with 40 units, relu activation</li><li>Dense layer with 6 units and a linear activation (not softmax)Compile using</li><li>loss with <code>SparseCategoricalCrossentropy</code>, remember touse <code>from_logits=True</code></li><li>Adam optimizer with learning rate of 0.01.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># UNQ_C3</span></span><br><span class="line"><span class="comment"># GRADED CELL: model</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.getLogger(<span class="string">&quot;tensorflow&quot;</span>).setLevel(logging.ERROR)</span><br><span class="line"></span><br><span class="line">tf.random.set_seed(<span class="number">1234</span>)</span><br><span class="line">model = Sequential(</span><br><span class="line">    [</span><br><span class="line">        <span class="comment">### START CODE HERE ### </span></span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">120</span>,activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">40</span>,activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">6</span>,activation=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">### END CODE HERE ### </span></span><br><span class="line"></span><br><span class="line">    ], name=<span class="string">&quot;Complex&quot;</span></span><br><span class="line">)</span><br><span class="line">model.<span class="built_in">compile</span>(</span><br><span class="line">    <span class="comment">### START CODE HERE ### </span></span><br><span class="line">    loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=<span class="literal">True</span>),</span><br><span class="line">    optimizer=tf.keras.optimizers.Adam(learning_rate=<span class="number">0.01</span>)</span><br><span class="line">    <span class="comment">### END CODE HERE ### </span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Reconstruct your complex model, but this time include regularization.Below, compose a three-layer model:</p><ul><li>Dense layer with 120 units, relu activation,<code>kernel_regularizer=tf.keras.regularizers.l2(0.1)</code></li><li>Dense layer with 40 units, relu activation,<code>kernel_regularizer=tf.keras.regularizers.l2(0.1)</code></li><li>Dense layer with 6 units and a linear activation. Compile using</li><li>loss with <code>SparseCategoricalCrossentropy</code>, remember touse <code>from_logits=True</code></li><li>Adam optimizer with learning rate of 0.01.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># UNQ_C5</span></span><br><span class="line"><span class="comment"># GRADED CELL: model_r</span></span><br><span class="line"></span><br><span class="line">tf.random.set_seed(<span class="number">1234</span>)</span><br><span class="line">model_r = Sequential(</span><br><span class="line">    [</span><br><span class="line">        <span class="comment">### START CODE HERE ###         </span></span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">120</span>,activation=<span class="string">&#x27;relu&#x27;</span>,kernel_regularizer=tf.keras.regularizers.l2(<span class="number">0.1</span>)),</span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">40</span>,activation=<span class="string">&#x27;relu&#x27;</span>,kernel_regularizer=tf.keras.regularizers.l2(<span class="number">0.1</span>)),</span><br><span class="line">        tf.keras.layers.Dense(units=<span class="number">6</span>,activation=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">### START CODE HERE ### </span></span><br><span class="line">    ], name= <span class="literal">None</span></span><br><span class="line">)</span><br><span class="line">model_r.<span class="built_in">compile</span>(</span><br><span class="line">    <span class="comment">### START CODE HERE ### </span></span><br><span class="line">    loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=<span class="literal">True</span>),</span><br><span class="line">    optimizer=tf.keras.optimizers.Adam(learning_rate=<span class="number">0.01</span>)</span><br><span class="line">    <span class="comment">### START CODE HERE ### </span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="evaluating-a-model">Evaluating a model</h1><h2 id="bias-and-variance">Bias and variance</h2><p>Calculate <span class="math inline">\(J_{train}\)</span> and <spanclass="math inline">\(J_{CV}\)</span>and see what's the result.</p><p>CV means cross-validation</p><p>If both are high it means bias is high, if train is low and cv ishigh it means variance is high.</p><h3 id="regularization-and-biasvariance">Regularization andbias/variance</h3><p><span class="math inline">\(J(\hat{w},b) = \frac{1}{2m}\sum_{i=1}^{m} \left( f_{\hat{w},b}(x^{(i)}) - y^{(i)} \right)^2 +\frac{\lambda}{2m} \sum_{j=1}^{n} w_j^2\)</span></p><p>成本函数中有lambda用于控制正则化(Regularization)过程的参数。lambda大的时候正则化效果强，模型会有highbias. lambda小的时候模型会过拟合导致high variance.</p><p>如何选择合适的lambda？</p><p>从0开始试，然后试0.01,0.02……逐渐增加。计算所有的Jcv，选择最小的那个对应的lambda。</p><h3 id="baseline-level-of-performance">Baseline level ofperformance</h3><p>给一些例子来帮助判断数字是高还是低</p><p>假如人类的误差是10.6%，训练集误差是10.8%，交叉验证集误差是14.8%那么训练集误差可视为很低，但是交叉验证集误差高，代表可能是方差很高</p><p>如果训练集的误差也很高说明可能是high bias</p><h3 id="learning-curve">Learning curve</h3><p>画一条曲线显示误差随着训练集增加的变化。训练集误差和验证集误差趋势如下图。</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024011842639798%E2%80%AFPM.png"alt="image-2024011842639798 PM" /><figcaption aria-hidden="true">image-2024011842639798 PM</figcaption></figure><p>如果模型有high bias,那么增加数据量不会对模型有帮助。</p><p>如果有highvariance，增加数据量会提高Jtrain并且接近人类水平并且降低Jcv。</p><h3 id="example-reciple">Example reciple</h3><p>如果在训练集效果不好-》使用更大的网络。如果训练集效果好，验证集效果不好-》更多数据。目标是验证集效果好</p><h1 id="decision-tree-model">Decision tree model</h1><h2 id="decision-tree">Decision tree</h2><p>用于当特征是离散值的时候，例如耳朵形状，脸大小等。</p><p>最上边是root node，中间的是decision node，下边的是leaf node</p><p>构建决策树：</p><ol type="1"><li>从根节点出发把训练集分成两部分</li><li>左右分别选择特征来分离数据</li><li>当结束条件触发的时候结束</li><li>把结果按照标签构建叶子结点，即决策的结果</li></ol><p>问题：</p><p>什么时候结束？</p><ul><li>当一个节点结果全都是一个标签的数据</li><li>当深度触发最大值</li><li>当纯净值足够大</li><li>当某个节点的结果数量太少</li></ul><h2 id="measure-of-impurity">measure of impurity</h2><p>使用嫡函数(entropy function)来表示纯净性。</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/image-2024012884947964%E2%80%AFPM.png"alt="image-2024012884947964 PM" /><figcaption aria-hidden="true">image-2024012884947964 PM</figcaption></figure><p>这里的p1是指是一种类型的比例,纵坐标是嫡的数据。</p><p><span class="math inline">\(p_0 = 1 - p_1\)</span></p><p><span class="math inline">\(H(p_1) = -p_1log_2(p_1) - (1 - p_1)log_2(1 - p_1)\)</span></p><h2 id="choosing-a-split">Choosing a split</h2><p>如何选择使用哪个属性来做分隔，需要使用information gain方法。</p><p>xxxxxxxxxxx</p><h2 id="use-one-hot-encoding-to-code-features">Use one-hot encoding tocode features</h2><p>如果一个feature可以接受k个不一样的赋值那么就创建k个二进制数来代表这个feature。</p><p>这样就可以吧多个特征变成一串01数</p><h2 id="使用连续变量">使用连续变量</h2><p>可以画一条线，高于这个值的都是1，低于这个值的都是0</p><p>这条线的选址通常是使用Information gain来获取最佳的取值</p>]]></content>
      
      
      <categories>
          
          <category> MachineLearning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> neural-network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DADIU_Proj</title>
      <link href="/2023/10/18/DADIU-Proj/"/>
      <url>/2023/10/18/DADIU-Proj/</url>
      
        <content type="html"><![CDATA[<p>Problems and Learnings during the DADIU project.</p><span id="more"></span><p>The game is called "I inherited a castle" and this is the <ahref="https://dadiu.itch.io/i-inherited-a-castle">link</a>.</p><h1 id="make-an-interactive-object">Make an interactive object</h1><h3id="add-a-trigger-area-so-when-players-step-on-it-they-can-interact-with-some-game-objects">Adda trigger Area so when players step on it they can interact with somegame objects</h3><h3 id="add-the-object-to-interact">add the object to interact</h3><h3 id="make-a-script-to-do-the-interact">Make a script to do theinteract</h3><p>use "onTriggerEnter" to check if a player is in the area, and use an"inputAction" to bind an input method, then define an interact functionto define what will be triggered after the input starts, and also needto bind that onenable. The code are as follows:</p><p>The "require component" means it needs to have a collider componenton this object.</p><p>"ontriggerenter" needs two objects both have a collider and one ofthem is a trigger. If it's set to trigger then it cannot collide anymore.</p><p>To add an event in inspector we need to use "UnityEvent" and to runit we need to use <code>event?.Invoke()</code>.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.Events;</span><br><span class="line">using UnityEngine.InputSystem;</span><br><span class="line"></span><br><span class="line">namespace LivingMansion._Scripts.Interact</span><br><span class="line">&#123;</span><br><span class="line">    [RequireComponent(typeof(Collider))]</span><br><span class="line">    public class InteractTrigger : MonoBehaviour</span><br><span class="line">    &#123;</span><br><span class="line">        [SerializeField] private InputAction action = new();</span><br><span class="line">        public UnityEvent interactEvent;</span><br><span class="line">        private bool canInteract = false;</span><br><span class="line"></span><br><span class="line">        private void OnEnable()</span><br><span class="line">        &#123;</span><br><span class="line">            action.Enable();</span><br><span class="line">            action.started += Interact;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void OnDisable()</span><br><span class="line">        &#123;</span><br><span class="line">            action.Disable();</span><br><span class="line">            action.started -= Interact;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        private void Interact( InputAction.CallbackContext context)</span><br><span class="line">        &#123;</span><br><span class="line">            </span><br><span class="line">            if (canInteract)</span><br><span class="line">            &#123;</span><br><span class="line">                interactEvent?.Invoke();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        private void OnTriggerEnter(Collider other)</span><br><span class="line">        &#123;</span><br><span class="line">            canInteract = true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void OnTriggerExit(Collider other)</span><br><span class="line">        &#123;</span><br><span class="line">            canInteract = false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="add-interactive-ui">Add interactive UI</h3><p>Add a canvas with a text on it, and deactivate it. And write anotherscript that on trigger enter invoke an event to activate the canvas.</p><h1 id="open-a-door-slowly">Open a door slowly</h1><h3 id="add-a-door-object">Add a door object</h3><p>In order to make it rotate from one side of the door we need to add adoor hinge which is an empty parent to the actual door. make the parentto be on the side of the door and apply the opendoor script on it.</p><p>Here I use a slerp to do the rotation and it's based on the "isOpen"variable.</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OpenDoor</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> openAngle = <span class="number">90f</span>; </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> openSpeed = <span class="number">2f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> isOpen = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> Quaternion initialRotation;</span><br><span class="line">    <span class="keyword">private</span> Quaternion targetRotation;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> finishRotation = <span class="literal">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Store the initial rotation of the door.</span></span><br><span class="line">        initialRotation = transform.rotation;</span><br><span class="line">        targetRotation = Quaternion.Euler(transform.eulerAngles + <span class="keyword">new</span> Vector3(<span class="number">0</span>, openAngle, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FixedUpdate</span>(<span class="params"></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        finishRotation = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// Rotate the door towards the target rotation.</span></span><br><span class="line">        transform.rotation = Quaternion.Slerp(transform.rotation, </span><br><span class="line">            isOpen ? targetRotation : initialRotation, Time.fixedDeltaTime * openSpeed);</span><br><span class="line">        finishRotation = <span class="literal">true</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ToggleDoor</span>(<span class="params"></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (finishRotation)</span><br><span class="line">        &#123;</span><br><span class="line">            isOpen = !isOpen;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="implement-wwise-sound-into-the-project">Implement wwise soundinto the project</h1><p>It needs to have an AKBank component in the scene to manage thesound, also it needs to have an AkGameobj to calculate the distance fromplayer to the object. Then to play a sound you need a script whichreceive a wwise event using <code>public AK.Wwise.Event sound;</code>and then trigger the sound with<code>sound.Post(gameObject);</code>.</p><h3 id="implement-sound-effects-to-footsteps-of-the-player">Implementsound effects to footsteps of the player</h3><p>To make it sounds differently on different surfaces, we need to havea script to do the switch like follows: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">namespace LivingMansion._Scripts.Footsteps</span><br><span class="line">&#123;</span><br><span class="line">    public class FootstepsMaterialSwitcher : MonoBehaviour</span><br><span class="line">    &#123;</span><br><span class="line">        private RaycastHit hit;</span><br><span class="line">        private string currentMaterial;</span><br><span class="line">        private string previousMaterial = &quot;Default&quot;;</span><br><span class="line">        private void FixedUpdate()</span><br><span class="line">        &#123;</span><br><span class="line">            if (Physics.Raycast(transform.position,-transform.up, out RaycastHit hit,2f))</span><br><span class="line">            &#123;</span><br><span class="line">                </span><br><span class="line">                if (hit.collider.TryGetComponent(out FootstepsMaterialSound sound))</span><br><span class="line">                &#123;</span><br><span class="line">                    currentMaterial = sound.materialName;</span><br><span class="line">                    if(currentMaterial != previousMaterial)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Debug.Log(&quot;Material: &quot; + currentMaterial);</span><br><span class="line">                        previousMaterial = currentMaterial;</span><br><span class="line">                        AkSoundEngine.SetSwitch(&quot;Material&quot;, currentMaterial, gameObject);</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Here FootstepMaterialSound is a class which have a string calledmaterialName. It uses raycasting to detect the surface under the playerand send a switch to wwise engine whenever the material changes.</p><h1 id="implement-timed-interaction-object">Implement timed interactionobject</h1><p>Effect: after interacting with an object(like press e) a series ofdifferent events will be triggered and each of them can have a waittime, which will make it wait for x seconds to invoke.</p><p>Implement:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.Events;</span><br><span class="line">using UnityEngine.InputSystem;</span><br><span class="line"></span><br><span class="line">[Serializable]</span><br><span class="line">class CustomAction</span><br><span class="line">&#123;</span><br><span class="line">    public string actionName;</span><br><span class="line">    public int waitTime;</span><br><span class="line">    public UnityEvent action;</span><br><span class="line">&#125;</span><br><span class="line">public class TimedInteractionObject : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField] private InputAction action = new();</span><br><span class="line">    [SerializeField] private CustomAction[] customActions;</span><br><span class="line">    private int runningCoroutineCount = 0;</span><br><span class="line">    private void OnEnable()</span><br><span class="line">    &#123;</span><br><span class="line">        action.Enable();</span><br><span class="line">        action.started += Interact;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void OnDisable()</span><br><span class="line">    &#123;</span><br><span class="line">        action.Disable();</span><br><span class="line">        action.started -= Interact;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void Interact(InputAction.CallbackContext ctx)</span><br><span class="line">    &#123;</span><br><span class="line">        if (runningCoroutineCount != 0)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(&quot;Already running coroutines: &quot;+runningCoroutineCount);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        foreach (var customAction in customActions)</span><br><span class="line">        &#123;</span><br><span class="line">            StartCoroutine(InteractWithWaitTimeCoroutine(customAction));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private IEnumerator InteractWithWaitTimeCoroutine(CustomAction customAction)</span><br><span class="line">    &#123;</span><br><span class="line">        runningCoroutineCount++;</span><br><span class="line">        yield return new WaitForSeconds(customAction.waitTime);</span><br><span class="line">        customAction.action?.Invoke();</span><br><span class="line">        runningCoroutineCount--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In this code, I defined a class "CustomAction" to store actions thedesigner may need to add, which contains a string, wait time and theaction needed. Then Use InputAction to let them define the action neededto trigger. On enable it will listen to the action and then do theInteract function.</p><p>The interact function needs the parameter to receive the actionactivity, and then for each action, it will create a new coroutine towait for some seconds and run the action.</p><p>To prevent the player from interacting multiple times while theactions are running, I use a variable to count the running coroutines,when it begins it +=1, and when it's done it will subtract 1.</p><h1 id="implement-puzzle-winning-manager">Implement puzzle-winningmanager</h1><p>Effect: In the game, there are different puzzles to be solved. I wantto implement a manager that checks conditions to be met and thentriggers some events.</p><p>Implement:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[Serializable]</span><br><span class="line">public class RotationData</span><br><span class="line">&#123;</span><br><span class="line">    public string ConditionName;</span><br><span class="line">    public GameObject RoomSectionGameObject;</span><br><span class="line">    public RotationObject PaintingGameObject;</span><br><span class="line">    public Vector3 DesiredRotationForRoomSection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public RotationData(GameObject obj, Vector3 angles)</span><br><span class="line">    &#123;</span><br><span class="line">        RoomSectionGameObject = obj;</span><br><span class="line">        DesiredRotationForRoomSection = angles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[Serializable]</span><br><span class="line">public class SerializableEvent</span><br><span class="line">&#123;</span><br><span class="line">    public string eventName;</span><br><span class="line">    public UnityEngine.Events.UnityEvent unityEvent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class PuzzleWinningManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [HideInInspector]</span><br><span class="line">    public string comment;</span><br><span class="line"></span><br><span class="line">    public string puzzleName;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private List&lt;RotationData&gt; ConditionsToBeMet;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private List&lt;SerializableEvent&gt; ActionsWhenPuzzleIsSolved = new List&lt;SerializableEvent&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public void AreAllRotationsEqual()</span><br><span class="line">    &#123;</span><br><span class="line">        StartCoroutine(CheckRotations());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private IEnumerator CheckRotations()</span><br><span class="line">    &#123;</span><br><span class="line">        // This could be checked only once in Awake or in AreAllRotationsEqual</span><br><span class="line">        CheckThatAllImportantFieldsAreFilled();</span><br><span class="line"></span><br><span class="line">        bool allCorrect = true;</span><br><span class="line">        foreach (var rotationData in ConditionsToBeMet)</span><br><span class="line">        &#123;</span><br><span class="line">            // rotationData.PaintingGameObject.GetComponent&lt;RotationPainting&gt;() could be fetched </span><br><span class="line">            bool isRotating = rotationData.PaintingGameObject.GetComponent&lt;RotationObject&gt;().rotating;</span><br><span class="line">            if (isRotating)</span><br><span class="line">            &#123;</span><br><span class="line">                float waitTime = 10.0f; //max waiting time is 10s</span><br><span class="line">                float timer = 0.0f;</span><br><span class="line"></span><br><span class="line">                while (isRotating &amp;&amp; timer &lt; waitTime)</span><br><span class="line">                &#123;</span><br><span class="line">                    // Doesn&#x27;t need to be checked every frame necessarily </span><br><span class="line">                    // https://docs.unity3d.com/ScriptReference/WaitForSeconds.html</span><br><span class="line">                    yield return null;</span><br><span class="line">                    timer += Time.deltaTime;</span><br><span class="line">                    isRotating = rotationData.PaintingGameObject.GetComponent&lt;RotationObject&gt;().rotating;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (isRotating)</span><br><span class="line">                &#123;</span><br><span class="line">                    Debug.Log(&quot;Rotation took too long.&quot;);</span><br><span class="line">                    yield break; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // Check if the angle is correct</span><br><span class="line">            Quaternion currentRotation = rotationData.RoomSectionGameObject.transform.rotation;</span><br><span class="line">            Vector3 currentRotationAngles = currentRotation.eulerAngles;</span><br><span class="line"></span><br><span class="line">            if (currentRotationAngles != rotationData.DesiredRotationForRoomSection)</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.Log(rotationData.RoomSectionGameObject.name + &quot; Section should be &quot; + rotationData.DesiredRotationForRoomSection + &quot; and it&#x27;s currently &quot; + currentRotationAngles);</span><br><span class="line">                allCorrect = false;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.Log(rotationData.RoomSectionGameObject.name + &quot; is correct&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (allCorrect)</span><br><span class="line">        &#123;</span><br><span class="line">            //All the conditions are met and run the actions</span><br><span class="line">            Debug.Log(&quot;The Puzzle: &#x27;&quot; + puzzleName + &quot;&#x27; is Correct!&quot;);</span><br><span class="line">            foreach (var eventAction in ActionsWhenPuzzleIsSolved)</span><br><span class="line">            &#123;</span><br><span class="line">                eventAction.unityEvent.Invoke();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void CheckThatAllImportantFieldsAreFilled()</span><br><span class="line">    &#123;</span><br><span class="line">        string fieldNameBeingChecked;</span><br><span class="line"></span><br><span class="line">        foreach (var rotationData in ConditionsToBeMet)</span><br><span class="line">        &#123;</span><br><span class="line">            if (rotationData.PaintingGameObject == null)</span><br><span class="line">            &#123;</span><br><span class="line">                fieldNameBeingChecked = &quot;Painting GameObject&quot;;</span><br><span class="line">                Debug.LogWarning(&quot;ERROR: You have not attached a: &quot; + fieldNameBeingChecked.Color(&quot;yellow&quot;) + &quot; for the Condition: &quot; + rotationData.ConditionName.Color(&quot;yellow&quot;));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (rotationData.RoomSectionGameObject == null) </span><br><span class="line">            &#123;</span><br><span class="line">                fieldNameBeingChecked = &quot;Room Section GameObject&quot;;</span><br><span class="line">                Debug.LogWarning(&quot;ERROR: You have not attached a: &quot; + fieldNameBeingChecked.Color(&quot;yellow&quot;) + &quot; for the Condition: &quot; + rotationData.ConditionName.Color(&quot;yellow&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static class StringExtension</span><br><span class="line">&#123;</span><br><span class="line">    // This is an extension method so we can modify strings in the editor (fx in the debug console).</span><br><span class="line">    // The first parameter takes the &quot;this&quot; modifier</span><br><span class="line">    // and specifies the type for which the method is defined.</span><br><span class="line">    </span><br><span class="line">    public static string Bold(this string str) =&gt; &quot;&lt;b&gt;&quot; + str + &quot;&lt;/b&gt;&quot;;</span><br><span class="line">    public static string Color(this string str, string clr) =&gt; string.Format(&quot;&lt;color=&#123;0&#125;&gt;&#123;1&#125;&lt;/color&gt;&quot;, clr, str);</span><br><span class="line">    public static string Italic(this string str) =&gt; &quot;&lt;i&gt;&quot; + str + &quot;&lt;/i&gt;&quot;;</span><br><span class="line">    public static string Size(this string str, int size) =&gt; string.Format(&quot;&lt;size=&#123;0&#125;&gt;&#123;1&#125;&lt;/size&gt;&quot;, size, str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here I first defined two different classes for designers to fill in,they can change the name and actions they want. Then in the main class,I make a function to check are all the conditions are met. It's acoroutine because the event will last for some time. For each rotation,it will wait for max 10 seconds, and then check if the rotating angle iscorrect. If all is correct it will invoke the actions one by one.</p><p>Also, there's a function to check if all important fields are filledso that if not it will give a debug log about the error.</p><h1 id="implement-timeline-feature">Implement timeline feature</h1><p>Need a trigger, a director and a camera</p><h2 id="trigger">Trigger</h2><p>only add a trigger script. In this script add a<code>public PlayableDirector timelineDirector</code> and use theon-trigger enter function, if the other object is a player then use<code>timelineDirector.Play()</code> and then deactivate the object.</p><h2 id="director">Director</h2><p>The director game object needs two components, one is "PlayableDirector" to make the timeline work and the other one is "SignalReceiver" to disable player input while doing the timeline.</p><h3 id="make-a-playable-timeline">Make a playable timeline</h3><p>First, create a timeline file, and open it. Inside add a newcinemachine track. Then add a virtual cinemachine camera in the scene,and place it in some place. Then drag the new camera in the track, setthe ease in and ease out duration and it's done</p><h3 id="add-signal-receiver">Add signal receiver</h3><p>create two new signals and assign them to the timeline at the correcttime, and then set them with reactions to enable and disable playerinput.</p><h1 id="implement-in-game-menu">Implement in-game menu</h1><h2 id="switch-between-fullscreen-and-windowed">Switch betweenfullscreen and windowed</h2><p>Use <code>Screen.fullScreenMode</code> . Set this property to one ofthe values in FullScreenMode to change the display mode of yourapplication.</p><blockquote><p>fullScreenWindow:</p><p>All platforms. Sets your application window to the full-screen nativedisplay resolution, covering the whole screen. This full-screen mode isalso known as 'borderless full screen'. Unity renders your applicationat the resolution set by a script, or the native display resolution ifno resolution is set, and scales your application to fill the window.Unity adds black bars ('letterboxing') to the rendered output to matchthe display aspect ratio, to prevent content stretching. The operatingsystem's overlay UI, such as input method editor (IME) window, displayson top of the full-screen window.</p><p>ExclusiveFullScreen:</p><p>Windows platforms only. Sets your application so it has solefull-screen use of a display. Unlike FullScreenMode.FullScreenWindow,this mode changes the operating system resolution of the display tomatch the application's chosen resolution. On platforms other thanWindows, this mode falls back to FullScreenMode.FullScreenWindow.</p><p>Windowed:</p><p>Desktop platforms only. Sets your application to a standard, movablewindow that's not full screen. The size of the window depends on yourapplication's resolution.</p></blockquote><h1 id="implement-footstep-sound-on-different-surfaces">Implementfootstep sound on different surfaces</h1><p>First need to attach either a tag or an enum type to all the surfacesto show the material of the surface.</p><p>Then use raycasting to detect what kind of material you are steppingon. In the following code, I use a variable to track current materialand then when the ray cast detects the material change it will send asignal to the wwise engine to change the footstep sound.</p><p>As the model of the character has a centre at its feet, sometimes theray cast may start below the surface, so I need to add an offset to thesource point of the ray cast.</p><p>The hard point for this task is to first ray cast correctly when thegravity of the player changes, which means the player will no longerwalk on the ground but instead walk on the wall or even on the ceiling.In this case, the ray cast needs to have the offset based on the currentgravity. I</p><p>Then</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using LivingMansion._Scripts.Player;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">namespace LivingMansion._Scripts.Footsteps</span><br><span class="line">&#123;</span><br><span class="line">    public class FootstepsMaterialSwitcher : MonoBehaviour</span><br><span class="line">    &#123;</span><br><span class="line">        private string previousMaterial = &quot;&quot;;</span><br><span class="line">        public AK.Wwise.Event MyEvent;</span><br><span class="line">        private Player.Player player;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        private void Start()</span><br><span class="line">        &#123;</span><br><span class="line">            //Set default as Wood</span><br><span class="line">            AkSoundEngine.SetSwitch(&quot;Material&quot;, &quot;Wood&quot;, gameObject);</span><br><span class="line">            previousMaterial = &quot;Wood&quot;;</span><br><span class="line">            player = FindObjectOfType&lt;Player.Player&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void PlayFootstepSound()</span><br><span class="line">        &#123;</span><br><span class="line">            MyEvent.Post(gameObject);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void FixedUpdate()</span><br><span class="line">        &#123;</span><br><span class="line">            //based on the current gravity direction, raycast downwards to find the material</span><br><span class="line">            //need to add an offset</span><br><span class="line">            Vector3 offest = -player.customCharacter.Gravity.normalized;</span><br><span class="line">            Vector3 newpos = transform.position + offest;</span><br><span class="line">            RaycastHit[] hits = Physics.RaycastAll(newpos, -transform.up, 10f);</span><br><span class="line">            System.Array.Sort(hits, (x, y) =&gt; x.distance.CompareTo(y.distance));</span><br><span class="line">            // Debug.DrawRay(newpos, -transform.up * 10f, Color.red, 1f);</span><br><span class="line"></span><br><span class="line">            foreach (RaycastHit hit in hits)</span><br><span class="line">            &#123;</span><br><span class="line">                if (hit.collider != null &amp;&amp; hit.collider.TryGetComponent(out FootstepsMaterialSound sound))</span><br><span class="line">                &#123;</span><br><span class="line">                    string currentMaterial = sound.materialName.ToString();</span><br><span class="line">                    // Debug.Log(currentMaterial);   </span><br><span class="line">                    if (currentMaterial != previousMaterial)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Debug.Log(&quot;Material: &quot; + currentMaterial);</span><br><span class="line">                        previousMaterial = currentMaterial;</span><br><span class="line">                        AkSoundEngine.SetSwitch(&quot;Material&quot;, currentMaterial, gameObject);</span><br><span class="line">                    &#125;</span><br><span class="line">                    // Only consider the first encountered material</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="make-cube-appear-and-disappear-effect">Make cube appear anddisappear effect</h1><p>First, make a appear script, this needs to be done using a coroutineto prevent block main game.</p><p>Then do it in a separate function to be called somewere.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">private IEnumerator ScaleDownAndDeactivate(GameObject obj, GameObject connectedSoundObject)</span><br><span class="line">&#123;</span><br><span class="line">    CubeDisappearSound.Post(gameObject);</span><br><span class="line">    connectedSoundObject.SetActive(false);</span><br><span class="line">    Vector3 originalScale = obj.transform.localScale;</span><br><span class="line">    float currentTime = 0;</span><br><span class="line"></span><br><span class="line">    while (currentTime &lt; 0.7f)</span><br><span class="line">    &#123;</span><br><span class="line">        // Scale down the object over time</span><br><span class="line">        obj.transform.localScale = Vector3.Lerp(originalScale, Vector3.zero, currentTime / 0.7f);</span><br><span class="line">        currentTime += Time.deltaTime;</span><br><span class="line">        yield return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Deactivate the object</span><br><span class="line">    obj.SetActive(false);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MakeCubeDisappear</span>(<span class="params"></span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            GameObject obj = gameObject.transform.GetChild(<span class="number">3</span>).gameObject;</span><br><span class="line">            GameObject connectedSoundObject = gameObject.transform.GetChild(<span class="number">1</span>).gameObject;</span><br><span class="line">            StartCoroutine(ScaleDownAndDeactivate(obj, connectedSoundObject));</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> unity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Asset-Test</title>
      <link href="/2023/09/15/Asset-Test/"/>
      <url>/2023/09/15/Asset-Test/</url>
      
        <content type="html"><![CDATA[<p>Hexo Asset image test</p><span id="more"></span><h3 id="asset-img">Asset img:</h3><img data-src="/2023/09/15/Asset-Test/img1.jpg" class="" title="img test"><h3 id="asset-path">Asset path:</h3>/2023/09/15/Asset-Test/img1.jpg<h3 id="asset-link">Asset link:</h3><a href="/2023/09/15/Asset-Test/img1.jpg" title="img test">img test</a><h3 id="hexo-renderer-marked-plugin">hexo-renderer-marked Plugin:</h3><p><img data-src="img1.jpg" /></p><p>Original:</p><p><img data-src="Asset-Test/img1.jpg" /></p><p>Github repo img:</p><figure><imgsrc="https://raw.githubusercontent.com/1982606762/picgo/master/test2"alt="test2" /><figcaption aria-hidden="true">test2</figcaption></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>unity-note</title>
      <link href="/2023/04/21/unity-note/"/>
      <url>/2023/04/21/unity-note/</url>
      
        <content type="html"><![CDATA[<p>Unity learning note</p><span id="more"></span><h1 id="basic">Basic</h1><p>按option可以调整观察视角，按qwer可以切换当前工具</p><p>先选中camera后按cmd+shift+f可以让camera自动调整到当前画面</p><p>选中某个元素后按f可以focus这个元素</p><h2 id="设置terrain快捷键">设置Terrain快捷键</h2><p>按住Shift可以lower terrain，使用[]可以调整画笔大小</p><h2 id="start-and-update">Start and update</h2><p>start是运行脚本的时候只执行一次，而update是每一帧都执行一次</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(x,y,z)会给物品位置加一个增量</span><br></pre></td></tr></table></figure><h2 id="variables">Variables</h2><p>和c++类似</p><h2 id="using-serializefield">Using SerializeField</h2><p>新建material可以给物品添加材质</p><p>在变量前加<code>[SerializeField]</code>就可以让他在物品的inspector里手动设置</p><h2 id="input.getaxis">Input.GetAxis</h2><p>从菜单栏的Edit-projectsettings里可以看到所有用户输入所对应的键位。</p><p>在代码中使用<code>Input.GetAxis("Horizontal");</code>可以获得用户输入</p><h2 id="time-deltatime">Time DeltaTime</h2><p>为了让游戏在不同性能的电脑上效果一样就需要使用<code>Time.deltaTime</code>,然后乘一个movespeed就可以</p><h2 id="cinemachine">Cinemachine</h2><ol type="1"><li>安装cinemachine包</li><li>给主摄像机的components添加cinemachine brain component</li><li>添加一个虚拟摄像机Virtual camera</li><li>在这个虚拟摄像机的设置中把body设置成framingtransposer,在上边的follow里选择跟踪某个物体</li><li>在下边的body里有一个camera distance可以设置摄像机的远近</li></ol><h2 id="basic-collision">Basic collision</h2><p>每个物体都可以设置box collider，可以和物体大小一样也可以大小不同来实现不一样的效果。</p><p>给玩家添加rigidbodycomponent之后他就有了物理属性，可以碰撞。通过添加constrain可以控制旋转等</p><p>给墙体附加一个c#脚本，脚本里写一个OnCollisionEnter函数可以检测碰撞消息。</p><p>使用<code>GetComponent&lt;MeshRenderer&gt;().material.color = Color.red;</code>可以在碰撞的时候变颜色</p><h2 id="time">Time</h2><p>Time.time是当前的游戏时间</p><p>Time.Delta time是从上一帧开始经过的时间量。</p><h2 id="tag">Tag</h2><p>在右侧inspector里可以定义某个element的tag</p><p>代码中使用以下代码可以获得tag值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private void OnCollisionEnter(Collision other) &#123;</span><br><span class="line">        Color currentColor = GetComponent&lt;MeshRenderer&gt;().material.color;</span><br><span class="line">        if (other.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            ChangeColor(currentColor);</span><br><span class="line">        &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="spin">Spin</h2><p>通过transform.rotate(x,y,z)可以让物体在三个方向上旋转</p><h1 id="boost-course">Boost course</h1><h2 id="addrelativeforce">AddRelativeForce</h2><p>使用rigidbody的addrelativeforce可以给他添加坐标轴方向的力，参数可以用(1,1,1)或者Vector3.up等同于(0,1,0)</p><h2 id="实现帧速率independent">实现帧速率independent</h2><p>在做变化的时候乘一个变量再乘Time.deltaTime</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rigidbody.AddRelativeForce(Vector3.up * thrustspeed * Time.deltaTime);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="调整世界重力">调整世界重力</h2><p>在edit-》project settings-》 physics里调</p><h2 id="添加drag">添加drag</h2><p>drag是rigidbody移动时影响对象的空气阻力大小</p><h2 id="unity-audio-system">unity audio system</h2><p>需要三个东西，audio listener，audio source和audio file。</p><p>audio listenser一般附加在main camera上</p><p>audio source是产生声音的部件</p><p>打开loop可以循环播放</p><p>如果没有声音可以去project setting里看audio的设置</p><h2 id="switch语句">switch语句</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">switch()</span><br><span class="line">&#123;</span><br><span class="line">  case a:</span><br><span class="line">    a();</span><br><span class="line">    break;</span><br><span class="line">  default:</span><br><span class="line">    d();</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="监测物体碰撞">监测物体碰撞</h2><p>写一个函数，输入一个Collision类型的变量other，然后就可以获得这个碰撞的一些信息</p><ul><li>Other.gameObject.tag是这个碰撞的对方物体的tag的string</li><li></li></ul><h2 id="切换scene">切换Scene</h2><p>添加scene：File -&gt; Build Settings-&gt; add open scenes</p><p>代码中需要使用SceneManager类,导入的是UnityEngine.SceneManagement命名空间</p><p>获取当前Scene的index：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SceneManager.GetActiveScene().buildIndex</span><br></pre></td></tr></table></figure><p>切换Scene：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SceneManager.LoadScene()</span><br></pre></td></tr></table></figure><h2 id="延迟函数生效">延迟函数生效</h2><p>使用invoke("methodname", delayInSeconds)</p><h1 id="unity-essentials">Unity Essentials</h1><h2 id="apply-texture-image-on-a-material">Apply texture image on amaterial</h2><p>点Albedo左边的小圆圈可以选择当前导入的各种材质图片</p><h2 id="physic-material">Physic material</h2><p>应用后可以让物体拥有弹性，新建Physicmaterial后修改Bounciness参数可以添加弹性。这个材质会应用在物体的Collider属性上。</p><h2 id="prefab-variant">Prefab Variant</h2><p>修改一个prefab的个体后拖进prefab文件夹他会提示你是否创建新的prefabvariant，这是大prefab的一个小分支。修改他会修改所有这个variant控制的instance，但是不会修改其他root控制的</p><figure><img data-src="unity-note.assets/NllzOFx.png" alt="NllzOFx" /><figcaption aria-hidden="true">NllzOFx</figcaption></figure><figure><img data-src="https://i.imgur.com/NllzOFx.png"alt="image-2023081013401807 AM" /><figcaption aria-hidden="true">image-2023081013401807 AM</figcaption></figure><h2 id="assets">Assets</h2><p>从https://assetstore.unity.com/zh?category=3d&amp;orderBy=4&amp;page=3&amp;reverse=true可以获得现有的资源</p><p>然后在window-》package manager可以下载导入</p><h2 id="d音效">3D音效</h2><p>要实现根据人的位置所改变的音效需要调整音效的SpatialBlend到1，还需要设置一个Audio listener在主角身上</p><h2 id="d中z轴是z-index">2D中z轴是z-index</h2><h2 id="d实现球下落到平面上">2D实现球下落到平面上</h2><p>给球添加rigidbody让他有重力可以下落，然后为了让球落到平面上停止需要给球和平面各添加对应的2Dcollider。</p><h2 id="发布游戏到unity-play">发布游戏到unity play</h2><p>切记要安装WebGL Publisher Package！！</p><h1 id="project1-player-control">Project1 Player Control</h1><h2 id="rigidbody-与-collider">Rigidbody 与 Collider</h2><p>Rigidbody是用于实现物理模拟的组件，它可以附加到对象上以获得物理引擎控制，并且获得一些属性例如重力</p><p>Collider是用于定义游戏对象的物理形状来进行碰撞检测，它只用于定义边界</p><h2 id="camera-follow-player">Camera Follow Player</h2><p>给camera写一个脚本，定义一个player变量，然后让camera的坐标等于player的坐标加一个offset即可</p><h2 id="lateupdate">LateUpdate</h2><p>他会在Update执行之后执行，从而确保执行顺序是Update-LateUpdate-Update</p><h2 id="获得用户输入">获得用户输入</h2><p>从edit-project settings里找到inputs</p><p>代码里新定义一个float类型变量x，获取方法是<code>x = Input.GetAxis("inputs里的名称")</code></p><p>要获得按下某个键就用Input.GetKeyDown(KeyCode.Space))</p><h2 id="移动player">移动player</h2><p><code>transform.Translate(Vector3.right * horizontalInput * Time.deltaTime * speed)</code></p><p>或者使用transform.position = new Vector3(24,0,0)直接重定位目标</p><p>使用transform.position.x获得位置信息</p><h2 id="从prefab中生成新object">从prefab中生成新object</h2><p>使用instantiate方法可以以一个prefab作为模板生成新的object</p><p><code>Instantiate(projectilePrefab, transform.position, projectilePrefab.transform.rotation);</code></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> GameObject enemyPrefab;</span><br><span class="line"></span><br><span class="line">Instantiate(enemyPrefab, <span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">6</span>), enemyPrefab.transform.rotation);</span><br></pre></td></tr></table></figure><h2 id="删除object">删除object</h2><p>直接使用<code>Destroy(gameObject)</code>删除</p><h2 id="生成随机数">生成随机数</h2><p>有两种，range和randomRange</p><p>range里写整数是左闭右开，写浮点数是左右都闭的。</p><p><code>int position = Random.Range(-20,20)</code></p><h2 id="定时执行任务">定时执行任务</h2><p>使用InvokeRepeating可以定时执行函数，这个要写到start里</p><h1 id="project2">Project2</h1><h2id="获得物体的component如rigidbody">获得物体的component（如rigidbody）</h2><p>使用<code>GetComponent&lt;Rigidbody&gt;()</code>方法赋值给某个变量</p><h2id="使用addforce给物体施加外力让他跳起来">使用addforce给物体施加外力（让他跳起来）</h2><p>addforce接收两个参数，第一个是施加的力的矢量，即力的大小和方向。</p><p>mode: 表示施加力的模式，它是一个枚举类型，包括以下选项：</p><ul><li><code>Force</code>:施加一个持续的力，会根据刚体的质量产生加速度。</li><li><code>Impulse</code>: 施加一个瞬间的冲量，类似于一次性的力。</li><li><code>VelocityChange</code>: 直接改变刚体的速度，而不考虑质量。</li><li><code>Acceleration</code>:施加一个持续的加速度，会受到质量的影响。</li></ul><h2 id="防止左脚踩右脚">防止左脚踩右脚：</h2><p>设置一个bool变量，当起跳的时候设置成false，当检测到碰撞的时候变成true。</p><h2 id="背景循环使用">背景循环使用</h2><p>先设置一个起始坐标，在start里让他等于现在的位置，然后如果背景往左走了x，就让他归位。</p><p>让他更加连贯可以设置当背景往左走x/2的时候归位。</p><h2 id="碰撞到障碍物后停止">碰撞到障碍物后停止</h2><p>首先需要给地面和障碍物加tag，然后在玩家运动脚本中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (collision.gameObject.CompareTag(&quot;Obstacle&quot;))&#123;</span><br><span class="line">  gameOver = true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在需要停止的运动脚本中定义一个<code>private PlayerController playerScript</code>变量，在start里给他用<code>GameObject.Find("Player").GetComponent&lt;PlayerController&gt;()</code>赋值为脚本，然后就可以直接调用这个脚本里的gameOver变量了。</p><h2 id="编辑动画效果">编辑动画效果</h2><p>首先在animationcomponent中双击controller可以进入动画效果编辑界面，每个状态都对应一个动画效果，并且状态间还可以互相切换。</p><p>跳跃动作可以使用<code>SetTrigger("Jump_trig")</code>来触发。</p><h2 id="添加粒子特效">添加粒子特效</h2><p>首先把粒子效果添加进player作为子元素，然后在player脚本中新建粒子特效变量<code>public ParticleSystem explosionParticle</code>.</p><p>在需要效果的地方使用<code>explosionParticle.Play()</code></p><h2 id="添加音效">添加音效</h2><h1 id="project-4">Project 4</h1><h2 id="让摄像机聚焦到一点">让摄像机聚焦到一点</h2><p>设置一个空object，让相机成为这个object的子元素，这样旋转或者移动object可以调整相机</p><h2id="设置player向某个object方向前进">设置player向某个object方向前进</h2><p>获取到物体之后使用<code>focalpoint.transform.forward</code>获得focalpoint的前方向</p><h2 id="使用physics-material">使用Physics Material</h2><p>物理材质可以调整物体的摩擦力和弹性，apply后会在colider的material中出现</p><h2 id="使用coroutine来设置独立沙漏">使用coroutine来设置独立沙漏</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">StartCoroutine(PowerupCountdown());</span><br><span class="line"><span class="function">IEnumerator <span class="title">PowerupCountdown</span>(<span class="params"></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">7</span></span>)</span>;</span><br><span class="line">        powered = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="project-5">Project 5</h1><h2 id="设置鼠标点击效果">设置鼠标点击效果</h2><p>用OnMouseDown()检测鼠标点击到Collider就会触发</p><p>同样还有一些其他函数检测其他鼠标操作</p><h2 id="让物体旋转">让物体旋转</h2><p>使用AddTorque可以让物体旋转，传入四个参数，xyz和这个力触发的方式。</p><p><code>targetRb.AddTorque(RandomTorque(), RandomTorque(), RandomTorque(), ForceMode.Impulse);</code></p><h2 id="添加界面上的文字">添加界面上的文字</h2><p>添加一个TextMeshPro，可以调整中心点。</p><p>要想修改文字内容，需要先声明一个TextMeshProUGUI类型变量，然后在需要改的地方使用ScoreText.text= ""就可以修改。</p><h2 id="调用另一个文件中的函数">调用另一个文件中的函数</h2><p>首先两个文件都需要应用于object上，被调用的脚本所在物体需要有一个tag，然后在调用的那个脚本中声明变量，找到被调脚本，然后调用函数。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">private</span> Manager m;</span><br><span class="line">  m = GameObject.FindGameObjectWithTag(<span class="string">&quot;Manager&quot;</span>).GetComponent&lt;Manager&gt;();</span><br><span class="line">m.updateScore(<span class="number">-5</span>);</span><br></pre></td></tr></table></figure><h2 id="添加按钮">添加按钮</h2><p>在UI-button里添加</p><p>要想给他添加效果可以在inspactor里有一个onclicklist，添加一个object作为新项，然后在右边的function里选想触发的函数。</p><p>要想在代码里定义这个变量就需要先使用UnityEngine.UI命名空间，然后再定义变量。</p><h2 id="重新加载当前scene">重新加载当前Scene</h2><p>使用<code>SceneManager.LoadScene(SceneManager.GetActiveScene().name);</code></p><h1 id="oop">OOP</h1><p>在C#中，有多种访问修饰符，用于控制类的成员（字段、方法、属性等）的访问权限。以下是C#中常用的访问修饰符：</p><ol type="1"><li><p><strong>public（公共）</strong>：这是最开放的访问修饰符，允许成员在任何地方都可以访问，包括类的外部。</p></li><li><p><strong>private（私有）</strong>：私有成员只能在声明它们的类的内部访问。这用于隐藏类的内部实现细节。</p></li><li><p><strong>protected（受保护）</strong>：受保护成员可以在声明它们的类以及派生类中访问，但不能在类的外部访问。</p></li><li><p><strong>internal（内部）</strong>：内部成员可以在同一个程序集（assembly）中的任何类中访问，但不能在程序集之外的类中访问。</p></li><li><p><strong>protectedinternal（受保护的内部）</strong>：这是protected和internal的组合，允许在同一程序集中的类和派生类中访问。</p></li><li><p><strong>private protected（私有受保护）</strong>：这是C#7.2引入的，表示成员可以在同一程序集中的派生类中访问，但不能在程序集之外的类中访问。</p></li></ol><p>使用 [SerializeField]可以让private类型的变量在inspector中被修改。</p><p>可以单独给某一个public变量设置权限，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static MainManager Instance &#123; get; &#125; // add getter to the end of the line</span><br></pre></td></tr></table></figure><p>这样就会设置严格的read-only，所以还需要加一个private set;</p><p>还可以在这里设置getter和settervalidation来对变量取值进行限制，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">set</span><br><span class="line">&#123;</span><br><span class="line">    if (value &lt; 0.0f)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.LogError(&quot;You can&#x27;t set a negative production speed!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            m_ProductionSpeed = value; // original setter now in if/else statement</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="dadiu-notes">DADIU Notes</h1><h2 id="attributes">Attributes</h2><p>使用attributes可以自定义inspector</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NewBehaviourScript</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Header(<span class="meta-string">&quot;q&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> cubeName;</span><br><span class="line">    [<span class="meta">Range(0, 10)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> asas;</span><br><span class="line">    [<span class="meta">Min(2.0f)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> ssss;</span><br><span class="line">    [<span class="meta">Space(10)</span>]<span class="comment">//Add space in inspector</span></span><br><span class="line">    [<span class="meta">Min(2.0f)</span>]<span class="comment">//This var&#x27;s min value will be 2.0f</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> sssss;</span><br><span class="line">    <span class="keyword">public</span> test2 cubeClassTest;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">System.Serializable</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">test2</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Header(<span class="meta-string">&quot;w&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> string1;</span><br><span class="line">    [<span class="meta">Range(0, 10)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> asas;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure><img data-src="https://i.imgur.com/sVwS1BE.png"alt="image-20230911105525002 AM" /><figcaption aria-hidden="true">image-20230911105525002 AM</figcaption></figure>]]></content>
      
      
      
        <tags>
            
            <tag> unity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CG_note</title>
      <link href="/2023/04/19/CG-note/"/>
      <url>/2023/04/19/CG-note/</url>
      
        <content type="html"><![CDATA[<p>A personal note in reading the book "Computational GeometryAlgorithms and Applications 3rd Edition"</p><span id="more"></span><h1 id="computational-geometry">1. Computational Geometry</h1><h2 id="convex-hulls">Convex Hulls</h2><p>问题：给定一个点的set，如何求最大的Convex Hull</p><p>A subset <span class="math inline">\(S\)</span> of the plane iscalled convex if and only if for any pair of points <spanclass="math inline">\(p, q \in S\)</span> the line segment <spanclass="math inline">\(\overline{p q}\)</span> is completely contained in<span class="math inline">\(S\)</span>. The convex hull <spanclass="math inline">\(\operatorname{eH}(S)\)</span> of a set <spanclass="math inline">\(S\)</span> is the smallest convex set thatcontains <span class="math inline">\(S\)</span>. To be more precise, itis the intersection of all convex sets that contain <spanclass="math inline">\(S\)</span>.</p><figure><img data-src="https://i.imgur.com/COGIsyY.png"alt="image-20230407114241044 AM" /><figcaption aria-hidden="true">image-20230407114241044 AM</figcaption></figure><p>可以想象用橡皮筋箍住的最外圈是一个convex hull of P</p><p>如何表示输入输出？</p><p>可以顺时针方向列出所有多边形的点：</p><figure><img data-src="https://i.imgur.com/TFKqpg9.png"alt="image-20230407114630549 AM" /><figcaption aria-hidden="true">image-20230407114630549 AM</figcaption></figure><p>edge of a convex hull pq:</p><p>我们画一条经过pq两点的直线，假如多边形在直线的一侧，那么所有点都在这一侧，那么pq就是一条边</p><p>慢convexHull算法：</p><figure><img data-src="https://i.imgur.com/9sMJGcC.png"alt="image-20230407124506613 PM" /><figcaption aria-hidden="true">image-20230407124506613 PM</figcaption></figure><figure><img data-src="https://i.imgur.com/BWxGDU8.png"alt="image-20230407124520501 PM" /><figcaption aria-hidden="true">image-20230407124520501 PM</figcaption></figure><p>遍历每个点对pq，对于每个不等于pq的点r，假如所有的点都在pq的右边那么pq就是一条边并加到E里。（为什么是在右边是因为最终返回的多边形是顺时针方向的，所以所有的edge的边的右边都对应多边形的内部）</p><p>对于这个算法有两点关键：</p><ol type="1"><li><p>第五行我们如何判断r在pq的左边？</p><p>本书假定有一种方法可以在constanttime实现判断，并且有一些库函数已经实现了这个。但是这一步会影响算法的总效率和正确率</p></li><li><p>最后一步如何实现？可以通过随机选一条边e1，把他的origin作为多边形的起点，找到以他的终点为origin的下一条边，移出E并加入L，以此类推。</p></li></ol><p>这个算法要使用<span class="math inline">\(O(n^3)\)</span>时间</p><p>特殊情况：</p><ol type="1"><li>如果pq线上有别的点怎么办？</li></ol><p>修改pq定义，如果所有点都在pq左边或者在开放直线pq上就是一条edge</p><ol start="2" type="1"><li>由于float精度问题会导致判断点在线的左边错误，从而让算法返回多余的边或少返回边</li></ol><p>总结：简单算法时间长，不够健壮</p><p>增长算法：首先通过x轴坐标排序，获得一个列表。之后通过这个列表拿到upperhull 也就是最左边到最右边的上边的点， 然后再拿到lowerhull，也就是下半部分的顺时针方向边缘。</p><h1 id="line-segment-intersectionmap-overlay">Line SegmentIntersection(map overlay)</h1><p>问题：给出一系列线段s找这些线段的所有交点</p><p>用遍历所有线段的方法时间复杂度是<spanclass="math inline">\(O(n^2)\)</span></p><p>Output-sensitive algorithm:运行时间和输出规模有关的算法。也可以叫做intersection-sensitive，因为在这个问题中交点的数量决定输出规模</p><p>如何优化？</p><p>思路：两条线段要想相交首先需要离得近，所以我们只需要判断离得近的线段就够。首先我们定义y-interval是线段在y轴上的正交投影，因此任意两条线段若他们的y-interval不重叠(overlap)，就可以得到他们离得很远，从而不可能有交点。因此我们只需要判断那些y-interval有overlap的对即可。</p><figure><img data-src="https://i.imgur.com/X63HBaI.png"alt="image-20230409124223109 AM" /><figcaption aria-hidden="true">image-20230409124223109 AM</figcaption></figure><p>具体做法是取一根直线上下扫描，同时相交的线段就是有overlap的线段，这个方法叫做planesweep algorithm.线叫sweep line,线的status是与这条线相交的那一组线段。在线上下滑动的过程中status也在变化，但不是连续的。只有在遇到特殊点的时候才会变，在这个情况下是线段的顶点。</p><h1 id="polygon-triangulation">Polygon Triangulation</h1><p>问题：有一个多边形的艺术馆需要安装摄像机，每个摄像机都是固定的，在一个艺术馆中需要多少个摄像机才能看守整个场馆？</p><figure><img data-src="https://i.imgur.com/Pitvbxf.png"alt="image-2023041495810993 AM" /><figcaption aria-hidden="true">image-2023041495810993 AM</figcaption></figure><p>这取决于场馆的复杂程度，因此我们需要获得多边形的顶点数n来计算。但是就算两个多边形有同样数量的顶点，复杂程度也不一样，因此我们需要找到任何情况下都适用的最小摄像机数。但是这个问题是NPhard的</p><p>要想解决这个问题可以通过分解多边形，因此需要把多边形分解成多个三角形，通过画对角线的方式</p><figure><img data-src="https://i.imgur.com/zFL8Pe1.png"alt="image-20230414110347161 AM" /><figcaption aria-hidden="true">image-20230414110347161 AM</figcaption></figure><p>是否一个多边形可以被triangulated？</p><p><strong>Theorem</strong>：每个简单多边形都能被triangulated并且n个顶点可以分出n-2个三角形</p><p>证明：</p><p>使用数学归纳法。</p><p>n=3的时候多边形就是三角形</p><p>n&gt;3的时候假设定理对于m&lt;n都成立，</p><p>首先需要证明多边形P中存在diagonal。让v是最左边的点，u和w是挨着v的两个点，假如三角形uvw中没有其他顶点那么uw就是一条对角线，假如uvw中有顶点，让离uw最远的点叫做v’，我们可以知道线段vv‘上没有其他的顶点，（因为v'是最远的点，如果vv’上有点x的话x就会变成最远的点）所以vv'是对角线。因此P中有对角线。</p><figure><img data-src="https://i.imgur.com/hBpymI1.png"alt="image-2023041431416250 PM" /><figcaption aria-hidden="true">image-2023041431416250 PM</figcaption></figure><p>对角线把P分割成<span class="math inline">\(P_1\)</span>和<spanclass="math inline">\(P_2\)</span>，设<spanclass="math inline">\(P_1\)</span>有<spanclass="math inline">\(m_1\)</span>个顶点，<spanclass="math inline">\(P_2\)</span>有<spanclass="math inline">\(m_2\)</span>个顶点，那么<spanclass="math inline">\(m_1\)</span>和<spanclass="math inline">\(m_2\)</span>都&lt;n,根据假设可得<spanclass="math inline">\(P_1\)</span>和<spanclass="math inline">\(P_2\)</span>都能被triangulated.因此这两个图形都转换之后合并可得P也是triangulated，即证明n=n的时候成立。</p><p>还需要证明多边形P的triangulation有n-2个三角形。由于m1,m2 &lt;n,所以P1可以被分成m1-2个三角形，P2被分为m2-2个，同时m1+m2 =n+2.因此加起来就是n-2.</p><p>因此得证。</p><p>现在我们需要找一个P的点集，让每个三角形都至少对应点集里的一个点，然后把摄像机放到选出来的点上。要想获得这样的点集，我们可以应用三色定理，从而得到点集中有n/3个点。</p><p><strong>Theorem</strong>:有n个点的多边形需要n/3个摄像机来足够监控。</p><h2 id="把多边形分解成单调的">把多边形分解成单调的</h2><p>给定一个有n个点的简单多边形（内部没有洞）我们已经知道它可以被三角化by找一条对角线，triangulate两个小polygon。但是这个步骤要花三次方时间。如果多边形是一个convexpolygon的话只要选一个点然后向所有其他点连线，只需O(n)，但是把多边形分解成convex也很困难，所以我们要把多边形分解成y-monotonepieces就可以很简单。</p><p>一个monotone的多边形是指在某一个方向上的直线只能与这个多边形有两个交点。或者说，如果我们沿着左边（或右边）的边界链从最上面的顶点走到最下面的顶点，那么我们总是向下或水平移动，从不向上移动。</p><figure><img data-src="https://i.imgur.com/tx1MZSN.png" alt="y-monotone polygon" /><figcaption aria-hidden="true">y-monotone polygon</figcaption></figure><p>我们需要先把多边形分解成y-monotone的，可以做以下步骤：我们可以将一个多边形分割成如下的单调片段。想象一下，从P的最上面的顶点沿着左边边界最下面的顶点。我们行走的方向由下往上或由上往下转换的顶点称为转折顶点。</p><figure><img data-src="https://i.imgur.com/hLFbcFn.png" alt="turn vertex" /><figcaption aria-hidden="true">turn vertex</figcaption></figure><p>要想分解就需要解决掉所有转折点。假如有先向上再向下的点，并且多边形内部在这个点的上方，那么就需要从这个点向上引一条对角线来划分多边形，假如有先向下再向上的点就需要向下引对角线。因此我们需要定义各种点的类型，如下图：</p><figure><img data-src="https://i.imgur.com/rQMZOFE.png" alt="vertices types" /><figcaption aria-hidden="true">vertices types</figcaption></figure><p>我们需要去除split 和 merge vertex</p><p>去除split点：</p><p>首先需要对多边形的顶点按照y轴坐标进行排序，然后用一条水平直线(sweepline)从上到下进行扫描。要想去除split点<spanclass="math inline">\(v_i\)</span>就需要添加一条对角线来拆分，但是我们需要连到哪个点呢？很自然的选择是离<spanclass="math inline">\(v_i\)</span>最近的某个点，因为这样就可以连接线段而不穿过另一条多边形的边。定义<spanclass="math inline">\(e_j\)</span>是<spanclass="math inline">\(v_i左手的边\)</span>,<spanclass="math inline">\(e_k是右手的边\)</span>.这样我们就可以连接到这两条边中间的某个点。如果没有这个点那么就可以连接到<spanclass="math inline">\(e_j的上顶点或e_k的上顶点\)</span>。我们把这样的点叫做<spanclass="math inline">\(helper(e_j)\)</span>。</p><figure><img data-src="https://i.imgur.com/kKXaFyG.png"alt="image-2023041842830252 PM" /><figcaption aria-hidden="true">image-2023041842830252 PM</figcaption></figure><p>现在我们知道了如何消除split点：连接到它左边边的helper点。如何消除merge点？</p><p>假如vi是一个merge点，那么我们把他看做是<spanclass="math inline">\(e_j\)</span>的helper，然后把他和<spanclass="math inline">\(e_j和e_k之间\)</span>最高的点连起来即可。</p><p>我们使用doubly-connected-edge list来表示一个多边形P</p><p>要handle不同点的时候需要精确一些，在应对以下情况时需要额外考虑：</p><ul><li>在处理split点和更换mergevertex为helper的时候检查是否需要添加对角线</li><li>更新状态数据结构的值</li></ul><h2 id="时间分析">时间分析</h2><p>构造优先队列要用O(n),初始化状态树用O(1),检索和更新平衡二叉树用O(logn)，因此一共使用O(nlogn)时间</p><h2 id="triangulating-a-monotone-polygon">Triangulating a MonotonePolygon</h2><p>假设我们获取到严格y-monotone的多边形P，也就是所有点都是分上下的，没有平行的边，这样就很容易实现triangulation。</p><ul><li>我们需要同时处理两个boundary chain上的点，按y轴坐标排序。</li><li>建一个栈，（栈里放着所有已经处理过但还可以再连线的点。）</li><li>当遇到一个点的时候我们从这个点到栈里的点尽可能多的连线并分隔出三角，</li><li>那些被处理但是没被分隔的点就是在还需三角化的多边形的边界上。</li></ul><p>遇到的新点<spanclass="math inline">\(v_j\)</span>只有两种可能：一种是和栈前边的这些点在一边，另一种的不在一边。</p><p>不在一边的时候：</p><p><spanclass="math inline">\(v_j\)</span>可以向现在栈里除了栈底的其他所有点都连线（栈底的点已经和<spanclass="math inline">\(v_j\)</span>在连着了，因为是y坐标排序，并且<spanclass="math inline">\(v_j\)</span>是第一个另一边的点，所以一定是和这边的第一个点连着），因此需要全部出栈，连线分隔三角后把y坐标最低的那个点和<spanclass="math inline">\(v_j\)</span>入栈，因为这两个点还是待三角化的多边形的边上。</p><figure><img data-src="https://i.imgur.com/xuVGVFt.png"alt="image-2023041925244713 PM" /><figcaption aria-hidden="true">image-2023041925244713 PM</figcaption></figure><p>在一边的时候：</p><p>现在不能简单的向所有栈里的点连线，因为有可能无法连对角线。做法是先出栈第一个点，也就是当前和<spanclass="math inline">\(v_j\)</span>相连的那个点。然后一直出栈并连线直到遇到某个点不能连线的时候就停，并且把上一个出栈的点入栈，然后再入栈<spanclass="math inline">\(v_j\)</span>，因为这两个点是最新的边界的点。</p><figure><img data-src="https://i.imgur.com/ZwbI2mz.png"alt="image-2023041925552819 PM" /><figcaption aria-hidden="true">image-2023041925552819 PM</figcaption></figure><p>算法如下：</p><figure><img data-src="https://i.imgur.com/CVbtXd8.png"alt="image-2023041924742698 PM" /><figcaption aria-hidden="true">image-2023041924742698 PM</figcaption></figure><p>if内解释：</p><ul><li>假如不在一边就全部出栈，然后除了第一个点其他点全部连线，然后入栈两个点</li><li>假如在一边就出栈一个，然后只要能连线就出栈并连线，把最后一个出栈的入栈并且入栈<spanclass="math inline">\(v_j\)</span></li></ul><h2 id="时间复杂度">时间复杂度</h2><p>前两部是O(n)+O(1)，for循环是n-3次，每次最多入栈2个点，这就是2n-6。因为pop不能超过push次数，所以整体是O(n)</p><p><strong>Theorem</strong> A simple polygon with n vertices can betriangulated in O(nlogn) time with an algorithm that uses O(n)storage.</p><h1 id="manufacturing-with-molds">Manufacturing with Molds</h1><p>有很多地方都要用到模具，这章要讨论能否在不破坏模具的前提下把物品取出来。</p>]]></content>
      
      
      <categories>
          
          <category> UCPH </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SIP_note</title>
      <link href="/2023/04/06/SIP-note/"/>
      <url>/2023/04/06/SIP-note/</url>
      
        <content type="html"><![CDATA[<p>A brief note for the class Signal and Image Processing includes mostof the class.</p><span id="more"></span><h1 id="signal-and-image-processing-notes">Signal and Image Processingnotes</h1><h2 id="intro">Intro</h2><p>We are dealing with signals, an image can also be considered a kindof signal.</p><h3 id="image-and-signal-basics-and-terminology">Image and signal basicsand terminology</h3><p>a digital image is an n-dimensional array of quantities, if n = 2then it's a pixel.</p><p>The resolution is given by the number of pixels in the imagearray</p><h3 id="color-and-spectral-measurements">Color and spectralmeasurements</h3><p>color can be represented in RGB(Red Greed Blue) and HSV(HueSaturation Value)</p><p>Convert RGB to gray scale: Gray = 0.299R + 0.587G + 0.114B</p><h2id="pixel-wise-operations-intensity-transformations-image-formation-and-the-convolution-integral">Pixel-wiseOperations, Intensity Transformations, Image Formation, and theConvolution Integral</h2><h3 id="image-basics">Image basics</h3><p>JPEG: unsigned 8-bit int(lossy)</p><p>PNG: 1,2,4,8,16 bit unsigned int</p><p>TIFF: 1-32 bit unsigned int</p><h3 id="basic-pixel-wise-operations">Basic pixel-wise operations</h3><p>Adding or subtracting a constant: J(r,c) = I(r,c)+C</p><p>Multiplication or division by a constant: J(r,c) = C*I(r,c)</p><p>Adding or subtracting images (pixel-wise): J(r, c) = I A (r, c) + I B(r, c)</p><p>Multiplication or division of images (pixel-wise): J(r, c) = I A (r,c)⋅ I B (r, c)</p><p><strong>Be careful to handle over- and underflow! Usually, clip thevalues to the quantization range.</strong></p><h3 id="pixel-wise-intensity-transforms">Pixel-wise intensitytransforms</h3><p>The Dynamic range is the actual range of intensity values [I min, Imax] present in the image.</p><p>We can change the dynamic range of an image by applying functions onintensity values.</p><h4 id="logarithmic-transform-of-intensities">Logarithmic transform ofintensities:</h4><p><span class="math inline">\(\begin{aligned} &amp; J(x, y)=c \ln\left[1+\left(e^\alpha-1\right) I(x, y)\right]\alpha&gt;0\end{aligned}\)</span></p><p>用于查看图片暗处的细节，原理是把暗处intensity拉伸，同时亮处的intensity不怎么变</p><h4 id="exponential-transform-of-intensities">Exponential transform ofintensities：</h4><p><span class="math inline">\(\begin{aligned} J(x, y) &amp;=c\left[(1+\alpha)^{I(x, y)}-1\right]\alpha &gt;0.\end{aligned}\)</span></p><p>用于查看亮处细节，原理同上</p><h4 id="power-law-gamma-transform">Power-law (Gamma) transform</h4><p><span class="math inline">\(J(x, y)=c[I(x, y)]^\gamma\)</span></p><p>可以对动态范围做调整</p><figure><img data-src="https://i.imgur.com/7cKLkeh.png"alt="image-20230405123311371 PM" /><figcaption aria-hidden="true">image-20230405123311371 PM</figcaption></figure><h4 id="bit-plane-slicing">bit-plane slicing</h4><p>把图片每个像素点分解成8层后做逻辑和操作获得八张图片</p><p>例如10010110,每层都拿一个对应的数，如第八层拿第一个1，以此类推。这种情况下第八层是最significant的，因为它可以表达出图片的大致轮廓，只需要通过这个图片就能大概知道原图的形状。</p><figure><img data-src="https://i.imgur.com/UWbKimM.png"alt="image-20230405124017052 PM" /><figcaption aria-hidden="true">image-20230405124017052 PM</figcaption></figure><p>为了节省空间可以只取前几层的图片做叠加。</p><h3 id="a-mathematical-model-of-image-formation-camera">A MathematicalModel of Image Formation (Camera)</h3><p>照相机可以视为对进入的光源做PSF变化再加噪音后返回一张图片</p><p>PSF使用convolution对图片进行操作</p><p>有多种不同的PSF构造方式</p><h2 id="filtering">filtering</h2><p>可以通过应用多种不同的滤镜来处理图片。</p><p>输入一个图片，经过处理（卷积）后输出处理后的图片，基于neighborhood</p><p>有linear和non-linear两种</p><p>linear是可以写出具体kernel的，但是两种都是shift invariant。</p><h3 id="linear-filtering">Linear filtering</h3><p>Applying the linear filter to the image f is done by convolution:<span class="math display">\[g(x, y)=\{f * h\}(x, y)=\iint_{-\infty}^{\infty} f\left(x^{\prime},y^{\prime}\right) h\left(x-x^{\prime}, y-y^{\prime}\right) d x^{\prime}d y^{\prime}\]</span> In discrete filtering,we compute a new value for a tragetpixel, we need to define a filter center for the target pixel.Normallyit's the center if the window size is odd.</p><h3 id="some-common-linear-filters">Some common linear filters</h3><h4 id="mean-filter">Mean filter</h4><p><span class="math display">\[\boldsymbol{h}_N=\frac{1}{N}[1, \cdots, 1]\]</span></p><h3 id="边界处理">边界处理</h3><ul><li>Pad the border 用数字填充，通常是0.缺点是卷积后的图片边界比较暗</li><li>Symmetric mirroring 使用另一边的镜像填充</li><li>Periodic boundary 把图像看做周期性的</li><li>Leave border pixels unchanged 直接复制边缘</li><li>Filter only inside the image and crop away the border只做能处理的边界，但是会让图片变小</li></ul><h4 id="linear-separable-filters">Linear separable filters</h4><p>A linear filter is linear separable, if it can be decomposed into alinear filter along the x-axis and another along the y-axis. <spanclass="math display">\[f * \boldsymbol{h}_{N \times N}=f *\frac{1}{N^2}\left[\begin{array}{ccc}1 &amp; \cdots &amp; 1 \\\vdots &amp; \ddots &amp; \vdots \\1 &amp; \ldots &amp; 1\end{array}\right]=f * \frac{1}{N}[1, \cdots, 1] *\frac{1}{N}\left[\begin{array}{c}1 \\\vdots \\1\end{array}\right]\]</span>即一个2D的kernel可以表示为两个1D的矩阵乘法的结果，可以让计算更快</p><h4 id="filtering-multi-channel-images">Filtering multi-channelimages</h4><p>对RGB分别应用filter有可能会让颜色泄露出来，需要知道与对HSV的V应用结果不一样</p><h4 id="discrete-gaussian-filter">Discrete Gaussian filter</h4><p>由高斯方程得到的一个线性可分的filter，特点是中心权重大</p><p>参数有sigma和kernelsize</p><h4 id="derivative-filter">Derivative filter</h4><p>对图片求导，由于图片是离散的所以取一个近似，即</p><p><span class="math inline">\(\frac{\partial f}{\partial x} \approxf(x+1, y)-f(x, y)\)</span></p><p><span class="math inline">\(\frac{\partial f}{\partial y} \approxf(x, y+1)-f(x, y)\)</span></p><p>对应的卷积核：</p><p>[1 -1]</p><p><span class="math inline">\(\left[\begin{array}{c}1 \\-1\end{array}\right]\)</span></p><p>还有多种其他的卷积核：</p><figure><img data-src="https://i.imgur.com/y9WB0KY.png"alt="image-2023021913252907 PM" /><figcaption aria-hidden="true">image-2023021913252907 PM</figcaption></figure><p>可用于边界检测</p><p>噪声对于求导卷积影响很大</p><h3 id="non-linear-filtering">Non-linear filtering</h3><h4 id="median-filter">median filter</h4><p>rank filter的一种特殊情况，每次先排序然后取中位数</p><h2 id="fourier-transform">Fourier Transform</h2><p>Power spectrum是由音波图经过傅里叶变换得来的，表达的是声音的frequency perspective</p><p>图片经过傅里叶变化也可以得到一个图,这个图显示了图片的频率，经过shift后中心的点是高频</p><p>图片经过傅里叶变化后可以通过遮盖特定部分来去除那一块频率的噪音，做法是给那一块加一个黑块。</p><p>高斯的傅里叶还是高斯</p><h2 id="intensity-thresholding-and-intensity-histograms">intensitythresholding and intensity histograms</h2><h3 id="intensity-thresholding">Intensity Thresholding</h3><p>Simple thresholding formula: <span class="math inline">\(J(x, y)=\begin{cases}1 &amp; , \text { if } I(x, y)&gt;\tau \\ 0 &amp; , \text {Otherwise }\end{cases}\)</span></p><p>可以得到一个binary image</p><p>也可以在颜色通道上进行Thresholding</p><h3 id="intensity-histograms">Intensity Histograms</h3><p>Intensity histogram: Count the number of pixels having a specificintensity level</p><p><span class="math inline">\(H_I(v)=\#\{(x, y), \quad I(x, y)=v\},\quad v \in[0, L-1]\)</span></p><p>可以使用Histogram做thresholding，只保留某些intensity值</p><h3 id="histogram-matching">Histogram Matching</h3><p>把一幅曝光不好的图像做HistogramMatching到另一副图像上可以调整亮度</p><h3 id="histogram-equalization">Histogram equalization</h3><p>可以让图像的histogram分布均匀</p><p>也可以应用在色彩通道</p><h2id="mathematical-morphology-distance-transform-and-connected-components">Mathematicalmorphology, distance transform, and connected components</h2><h3 id="mathematical-morphology">Mathematical morphology</h3><p>图像形态学，主要操作包括膨胀与腐蚀</p><p>Dilation: <span class="math inline">\(X \oplus B=\{p \in \Omega \midp=x+\mathrm{b}, \mathrm{x} \in X\)</span> and <spanclass="math inline">\(\mathrm{b} \in B\}\)</span></p><p>把b绕着X转一圈后扩大X的面积，可用于去除中心的空洞</p><p>Erosion: <span class="math inline">\(X \ominus B=\{p \in \Omega \midp+\mathrm{b} \in X\)</span> for all <spanclass="math inline">\(\mathrm{b} \in B\}\)</span></p><p>把b在<spanclass="math inline">\(\Omega\)</span>遍历一遍，删掉所有不能覆盖的部分</p><p>Opening: <span class="math inline">\(X \ominus B \oplusB\)</span></p><p>Closing: <span class="math inline">\((X \oplus B) \ominusB\)</span></p><p>还可以用于边缘检测</p><figure><img data-src="https://i.imgur.com/1P3I6me.png"alt="image-2023040530508959 PM" /><figcaption aria-hidden="true">image-2023040530508959 PM</figcaption></figure><p>参考链接：<ahref="https://blog.csdn.net/cutemypig/article/details/107575375?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168069897816800180664562%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168069897816800180664562&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-107575375-null-null.142%5Ev81%5Ewechat,201%5Ev4%5Eadd_ask,239%5Ev2%5Einsert_chatgpt&amp;utm_term=%E5%9B%BE%E7%89%87%E5%BD%A2%E6%80%81%E5%AD%A6&amp;spm=1018.2226.3001.4187">链接</a></p><h2 id="image-restoration-and-deconvolution">Image Restoration andDeconvolution</h2><h3 id="laplacian-image-sharpening">Laplacian image sharpening</h3><p>拉普拉斯算子在图像中变化明显的地方很容易检测到。</p><p>用原图减图片的二阶导可以实现image sharpening</p><p>但是缺点是如果原图有噪音这个操作会增加噪音，因为求导操作会增大噪音</p><h3 id="models-of-image-degradation">Models of image degradation</h3><h3 id="deconvolution-without-and-with-noise">Deconvolution without andwith noise</h3><p>图像形成过程：f(x,y) * h(x,y) + n(x,y) = g(x,y)</p><p>图像还原过程： g(x,y) use h(x,y) = <span class="math inline">\(\hatf(x,y)\)</span></p><p>Wiener filter可以用来还原带噪音的图像。</p><p><span class="math display">\[\frac{1}{H^{\prime}(u, v)}=\frac{1}{H(u,v)} \frac{|H(u, v)|^2}{|H(u, v)|^2+S_n(u, v) / S_f(u, v)}\]</span></p><p>Where <span class="math inline">\(S_n(u, v)=|N(u, v)|^2, S_f(u,v)=|F(u, v)|^2\)</span> are the power spectra of the noise and theoriginal image.</p><h2 id="transformations">transformations</h2><h3 id="motivation">Motivation</h3><p>Object shape can be a curve that represents the outline fo the objectboundary</p><p>我们会获得各种图片，需要对图片进行一些变化以符合要求，如旋转，拉伸等</p><h3 id="transformations-of-points-and-intensities">Transformations ofpoints and intensities:</h3><h4 id="homogeneous-coordinates">homogeneous coordinates</h4><p>A 2D point <span class="math inline">\((x, y)\)</span> has, for any<span class="math inline">\(w \neq 0\)</span>, a homogeneous coordinaterepresentation <span class="math inline">\([w x, w y,w]^{\top}\)</span>.</p><h3 id="image-warps-transformation-of-intensities">Image warps(transformation of intensities)</h3><p>有多种转换方式</p><h2 id="features">Features</h2><h3 id="intensity-edges">Intensity edges</h3><p>Use local maxima of gradient magnitude to detecte edge</p><p>Canny edge detector: use thresholding and analysis of connectivity todetect</p><h2 id="scalespace">scalespace</h2><h3 id="image-pyramids">Image Pyramids</h3><p>Discrete scale</p><h3 id="linear-scale-space-theory">Linear scale space theory</h3><p>Continouos scale</p><h3 id="multi-scale-feature-detection">Multi-scale featuredetection</h3><h2 id="segmentation">segmentation</h2><h3 id="intensity-based">intensity based</h3><p>使用threshold</p><p>或把图片拆分成多个高斯曲线的叠加</p><h3 id="edge-based">edge based</h3><h3 id="region-based">Region based</h3><p>region growing</p><h3 id="energy-minimization">Energy minimization</h3><p>minimize this formula: <span class="math display">\[E(f)=\sum_{p \in \mathcal{P}} D_p\left(f_p\right)+\sum_{p, q \in\mathcal{N}} V_{p, q}\left(f_p, f_q\right)\]</span></p><h3 id="chan-vese">Chan-Vese</h3><p>minimize this formula to be 0 <span class="math display">\[\begin{aligned}F_1(C)+F_2(C)= &amp; \int_{\text {inside }(C)}\left|u_0(x,y)-c_1\right|^2 d x d y \\&amp; +\int_{\text {outside }(C)}\left|u_0(x, y)-c_2\right|^2 d x d y\end{aligned}\]</span></p><h3 id="hough-transform">Hough transform</h3><p>将原图中<span class="math inline">\(\rho_{\circ}=x \cdot \cos\theta_{\circ}+y \cdot \sin \theta_{\circ}\)</span> 转化成关于<spanclass="math inline">\(\theta,\rho\)</span> 的坐标系</p><ol type="1"><li><p>Chose range and discretization of ρ and θ.</p><ol type="a"><li>θ in [0, 180] degrees</li><li>ρ in [-d, d] where d is the length of the edge image’sdiagonal.</li></ol></li><li><p>Create accumulator 2D array (Hough Space) and initialize tozero.</p></li><li><p>For every edge pixel, loop through θ range, calculatecorresponding ρ, and increment the accumulator at thesecoordinates.</p></li><li><p>Lines correspond to accumulator values larger than a certainthreshold.</p></li></ol><p>可以用来检测直线</p><h3 id="supervised-machine-learning-for-image-segmentation">Supervisedmachine learning for image segmentation</h3><h2 id="texture">Texture</h2><p>can be used to identify regions containing distinct textures</p><p>Use filter banks</p><h2 id="shape-models-and-procrustes-alignment">Shape models andprocrustes alignment</h2><h3 id="procrustes-alignment">Procrustes alignment</h3><ol type="1"><li>Translational alignment</li><li>Scaling alignment</li><li>Rotational alignment</li></ol><p>Translational alignment: subtracting the sample mean</p><p>Scaling: S = sI <span class="math display">\[s=\frac{\sum_{i=1}^N \overrightarrow{x&#39;}_i^T\overrightarrow{\mathbf{x}_i}}{\sum_{i=1}^N\overrightarrow{\mathbf{x}}_i^T \overrightarrow{\mathbf{x}_i}}\]</span> 其中<span class="math inline">\(x&#39;\)</span>是target</p><p>rotation: <span class="math display">\[\mathbf{H}=\mathbf{V}^T \mathbf{R}=\mathbf{I} \quad \Rightarrow \quad\mathbf{R}=\mathbf{V} \mathbf{U}^T\]</span> where <span class="math inline">\(\mathbf{U}\)</span> and<span class="math inline">\(\mathbf{V}\)</span> are obtained from theSVD of <span class="math inline">\(\mathbf{X Y} \mathbf{Y}^T\)</span> -ie from <span class="math inline">\(\mathbf{X Y}^T=\mathbf{U SV}^T\)</span>.</p>]]></content>
      
      
      <categories>
          
          <category> UCPH </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ImageProcessing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>auto-upload-gdrive</title>
      <link href="/2023/02/24/auto-upload-gdrive/"/>
      <url>/2023/02/24/auto-upload-gdrive/</url>
      
        <content type="html"><![CDATA[<p>Develop a system that can add a torrent on the website, aftercompleting the download it will automatically upload the file to mygoogle drive while showing the upload log to the website so that I cansee the procedure of uploading.</p><ul><li>install Qbittorrent command-line version</li><li>Setup after-download-script</li><li>Show real-time log on the website</li></ul><span id="more"></span><h1 id="install-qbittorrent-nox">Install Qbittorrent-nox</h1><p>In Ubuntu, it's called qBittorrent-nox.</p><h2 id="install-qbittorrent-nox-1">Install qBittorrent-nox</h2><p>Add the qBittorrent repository:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository -y ppa:qbittorrent-team/qbittorrent-stable</span><br></pre></td></tr></table></figure><p>Install qBittorrent-nox:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y qbittorrent-nox</span><br></pre></td></tr></table></figure><p>After installation, we can check the qBittorrent-nox version:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent-nox --version</span><br></pre></td></tr></table></figure><h2 id="run-qbittorrent-nox-as-a-service">Run qBittorrent-nox as aservice</h2><p>In order to run qBittorrent-nox as a service we need to configuresystemd. Create a systemd unit file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/systemd/system/qbittorrent-nox.service</span><br></pre></td></tr></table></figure><p>Add the following content to the file:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=qBittorrent client</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/bin/qbittorrent-nox --webui-port=8080</span><br><span class="line">Restart=always</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>You can change the web interface port if you want.</p><p>Start qBittorrent-nox service:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service qbittorrent-nox start</span><br></pre></td></tr></table></figure><p>You can run the following command to make sure that theqBittorrent-nox service is running:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service qbittorrent-nox status</span><br></pre></td></tr></table></figure><p>Also, you can stop or restart the service:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service qbittorrent-nox stop</span><br><span class="line">sudo service qbittorrent-nox restart</span><br></pre></td></tr></table></figure><p>To enable qBittorrent-nox to start on boot, run the followingcommand:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable qbittorrent-nox</span><br></pre></td></tr></table></figure><h2 id="testing-qbittorrent-nox">Testing qBittorrent-nox</h2><p>Open a browser and enter the URL address<code>http://&lt;IP_ADDRESS&gt;:8080</code>, where<code>&lt;IP_ADDRESS&gt;</code> is the IP address of your machine. Youcan log in to the web UI with the default username (<code>admin</code>)and password (<code>adminadmin</code>).</p><h1 id="setup-after-download-script">Setup after-download-script</h1><blockquote><p>qbt now doesn't give shell environment by default, you'll either needto specify full path <code>/usr/bin/rm</code> or invoke the shell byyourself <code>/usr/bin/sh -c &lt;command&gt;</code>.</p></blockquote><p>So we need to add <code>/bin/bash  /Torrent.bash "%N" "%F"</code> inexternal program field</p><p>And create a bash file with content as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#echo &quot;$1&quot; &gt;&gt; /root/1.txt</span></span><br><span class="line">rclone copy <span class="variable">$2</span> gdrive1:美剧/<span class="variable">$1</span> -P &gt;&gt; /root/qbitdown/<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p>Of course, you can add whatever you want into the bash file, I'm justshowing my own configuration.</p><h1 id="show-real-time-log-on-the-website">Show real-time log on thewebsite</h1><p>First, we need to add some blocks to the HTML file:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;log-title&quot;</span>&gt;</span>update log<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;log-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">updateLogs</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 创建XMLHttpRequest对象</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 设置请求的URL和HTTP方法</span></span></span><br><span class="line"><span class="javascript">          xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/api/logs&#x27;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 注册请求完成的回调函数</span></span></span><br><span class="line"><span class="javascript">          xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">                  <span class="comment">// 将响应的JSON格式数据解析为JavaScript对象</span></span></span><br><span class="line"><span class="javascript">                  <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(xhr.responseText);</span></span><br><span class="line"><span class="javascript">                  <span class="comment">// 获取日志内容并插入到页面中</span></span></span><br><span class="line"><span class="javascript">                  <span class="keyword">var</span> logContainer = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;log-container&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">var</span> logs = data.logs;</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">var</span> logHtml = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; logs.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">                      logHtml += <span class="string">&#x27;&lt;p&gt;&#x27;</span> + logs[i] + <span class="string">&#x27;&lt;/p&gt;&#x27;</span>;</span></span><br><span class="line"><span class="javascript">                  &#125;</span></span><br><span class="line"><span class="javascript">                  logContainer.innerHTML = logHtml;</span></span><br><span class="line"><span class="javascript">              &#125;</span></span><br><span class="line"><span class="javascript">          &#125;;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 发送请求</span></span></span><br><span class="line"><span class="javascript">          xhr.send();</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          updateLogs();</span></span><br><span class="line"><span class="javascript">          <span class="built_in">setInterval</span>(updateLogs, <span class="number">1000</span>); <span class="comment">// 1秒钟更新一次</span></span></span><br><span class="line"><span class="javascript">      &#125;;</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Then we need to add a new router in the flask code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/api/logs&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_logs</span>():</span></span><br><span class="line">    output = subprocess.check_output([<span class="string">&#x27;tail&#x27;</span>, <span class="string">&#x27;-n&#x27;</span>, <span class="string">&#x27;50&#x27;</span>, <span class="string">&#x27;/root/qbitdown/log&#x27;</span>])</span><br><span class="line">    logs = output.decode(<span class="string">&#x27;utf-8&#x27;</span>, <span class="string">&#x27;ignore&#x27;</span>).split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;logs&#x27;</span>: logs&#125;)</span><br></pre></td></tr></table></figure><p>The 'ignore' can prevent the system being crashed because of somedecoding error...Which is very important</p><h1 id="reference">reference</h1><p>https://lindevs.com/install-qbittorrent-nox-on-ubuntu</p><p>https://github.com/qbittorrent/qBittorrent/issues/11042</p><p>https://www.reddit.com/r/unRAID/comments/lhilzu/comment/ipckgr1/</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rclone </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>upload-to-Gdrive</title>
      <link href="/2023/02/06/upload-to-Gdrive/"/>
      <url>/2023/02/06/upload-to-Gdrive/</url>
      
        <content type="html"><![CDATA[<p>rclone is a tool to enable you to sync files on the command line withseveral online storage platforms.</p><ul><li>install rclone</li><li>Bind with google account</li><li>Upload files to the drive</li></ul><span id="more"></span><h1 id="install-rclone">Install rclone</h1><p>To install rclone on Linux/macOS/BSD systems, run:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -v ; curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure><p><a href="https://rclone.org/downloads/">official link</a></p><h1 id="bind-with-google-account">Bind with google account</h1><p>first, create a google service account.<ahref="https://rclone.org/drive/#:~:text=1.%20Create%20a%20service%20account%20for%20example.com">link</a></p><p><a href="https://rclone.org/drive/">Then configure rclone</a></p><h1 id="upload-files-to-the-drive">Upload files to the drive</h1><p>Upload silently:</p><p><code>rclone copy &lt;sourcepath&gt; &lt;remotename&gt;:&lt;remotepath&gt; -P &gt;&gt; log.txt</code></p><p>Check the log file:</p><p><code>tail --lines=8 log.txt &amp;&amp; echo "\n"</code></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rclone </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>deploy flask with nginx on ubuntu</title>
      <link href="/2023/02/05/deploy-flask-with-nginx-on-ubuntu/"/>
      <url>/2023/02/05/deploy-flask-with-nginx-on-ubuntu/</url>
      
        <content type="html"><![CDATA[<ul><li>Configure nginx</li><li>configure flask app</li></ul><span id="more"></span><h1 id="configure-nginx">Configure nginx</h1><p>First, install nginx using <code>apt-get install nginx</code>.</p><p>修改/etc/nginx/sites-enabled/default，改文件名成xxx.com后修改内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">listen 80;</span><br><span class="line">server_name stock.joticia.cn;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">proxy_pass http://0.0.0.0:5000/;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /stock&#123;</span><br><span class="line">proxy_pass http://0.0.0.0:5000/stock;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用软连接把文件连接到sites-available里</p><h1 id="configure-flask-app">Configure flask app</h1><p>In app.py need to use <code>app.run(host='0.0.0.0')</code> so allaccess can be done through ip:5000</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> flask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>upload-ssh-key</title>
      <link href="/2023/02/05/upload-ssh-key/"/>
      <url>/2023/02/05/upload-ssh-key/</url>
      
        <content type="html"><![CDATA[<ul><li>Generate ssh file</li><li>upload it to the server</li></ul><span id="more"></span><h1 id="generate-ssh-file">Generate ssh file</h1><p>To log in to a server with ssh keys you need to first generate a keyfile using <code>ssh-keygen</code> and get two files id_rsa andid_rsa.pub. The .pub file is a public key, you need to put it into.ssh/authorized_keys file.</p><h1 id="upload-it-to-the-server">Upload it to the server</h1><p>You can paste it yourself or use<code>ssh-copy-id -i key_file user@host</code> to upload itautomatically.</p><p>Or you can do it manually:</p><ol type="1"><li>login to your server and go to ~/.ssh dir</li><li><code>vi authorized_keys</code></li><li>Paste the content of id_rsa.pub into it</li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine-Learning-A-Final-Report</title>
      <link href="/2023/01/30/Machine-Learning-A-Final-Report/"/>
      <url>/2023/01/30/Machine-Learning-A-Final-Report/</url>
      
        <content type="html"><![CDATA[<ol type="1"><li>The Basic Assumptions (5 points)</li><li>Weighted Neighbors (15 points)</li><li>The Impact of Dependence (20 points)</li><li>Sleep Well (30 points)</li><li>Thanks for the Fish (15 points)</li><li>Clustering (15 points)</li></ol><span id="more"></span><h1 id="the-basic-assumptions-5-points">1 The Basic Assumptions (5points)</h1><ol type="1"><li>Two basic assumptions are:<ol type="1"><li>The samples in S are i.i.d.</li><li>The new samples come from the same distribution as the samples inS</li></ol></li><li><ol type="1"><li>If samples are not i.i.d. it means they are associated with eachother, then in extreme situation all of the samples in S are associated,the train effect is the same as there're only one example.</li><li>If new samples doesn't come from the same distribution, then thetrain result model cannot be applied to it, because the new samples haveno connection with train data, there's no sense to use the model topredict those new samples.</li></ol></li></ol><h1 id="the-impact-of-dependence-20-points">3 The Impact of Dependence(20 points)</h1><ol type="1"><li><p>As the data in subset S' are taken from each subset, so they areindependent,and according to Theorem3.2 (Machine Learning Lecture NotesYevgeny Seldin) we have <spanclass="math inline">\(\mathbb{P}\left(\exists h \in \mathcal{H}: L(h)\geq \hat{L}(h, S)+\sqrt{\frac{\ln \frac{M}{\delta}}{2 n}}\right) \leq\delta\)</span>.</p><p>So with probability at least $ 1-$ for all <spanclass="math inline">\(h \in \mathcal{H}\)</span> we have</p><p><span class="math inline">\(L(h) \leq \hat{L}(h, S)+\sqrt{\frac{\ln\frac{M}{\delta}}{2 n}}\)</span>.</p></li><li><p>As we got the bound in the first question, it's target was S' =<span class="math inline">\(\left\{\left(X_1, Y_1\right),\left(X_{r+1},Y_{r+1}\right),\left(X_{2 r+1}, Y_{2 r+1}\right),\ldots\right\}\)</span></p><p>Now we imagine <span class="math inline">\(S_2 = \left\{\left(X_2,Y_2\right),\left(X_{r+2}, Y_{r+2}\right),\left(X_{2 r+2}, Y_{2r+2}\right), \ldots\right\}\)</span></p><p>Untile <span class="math inline">\(S_j = \left\{\left(X_j,Y_j\right),\left(X_{r+j}, Y_{r+j}\right),\left(X_{2 r+j}, Y_{2r+j}\right), \ldots\right\}\)</span></p><p>each of them has a bound <span class="math inline">\(L(h) \leq\hat{L}(h, S)+\sqrt{\frac{\ln \frac{M}{\delta}}{2 n}}\)</span>, so wesum them together and form a <span class="math inline">\(S = S_1 + S_2+...S_j\)</span>.</p><p>And to this S we have the bound <span class="math inline">\(L(h) \leq\hat{L}(h, S)+\sqrt{\frac{\ln \frac{M}{\delta}}{2 n}}\)</span>.</p></li></ol><h1 id="sleep-well-30-points">4 Sleep Well (30 points)</h1><h2 id="data-understanding-and-preprocessing">4.1 Data understanding andpreprocessing</h2><p>I used numpy to load the data file,then use Counter to count thenumber of each class and divide it by the lenth, then print it out andgot the following result:</p><blockquote><p>Class: 0.0 frequency: 0.5208753410034397</p><p>Class: 1.0 frequency: 0.09551061558533981</p><p>Class: 2.0 frequency: 0.25272802751749496</p><p>Class: 3.0 frequency: 0.04693986478472305</p><p>Class: 4.0 frequency: 0.08394615110900248</p></blockquote><h2 id="principal-component-analysis">4.2 Principal componentanalysis</h2><p>I used PCA from sklearn to do the PCA work,it uses fit to do thecalculate work with Xtrain value and the eigenvalue is it'sexplained_variance_ / sum of eigenvalues. following is the plot and it'sy axis is scaled by log.</p><figure><img data-src="https://i.imgur.com/ZBtBHCt.png"alt="image-2022103124653275 PM" /><figcaption aria-hidden="true">image-2022103124653275 PM</figcaption></figure><p>Then I sum the explained_variance which is the information eacheigenvalue holds untile it is greater than 0.9 and print it, and got itneeds 5 components to reach 90% variance.</p><p>Then I used pca.transform to project the data on the principalcomponents and take the first two to plot this:</p><figure><img data-src="https://i.imgur.com/ub1pttZ.png"alt="image-20221030122108004 AM" /><figcaption aria-hidden="true">image-20221030122108004 AM</figcaption></figure><h2 id="clustering">4.3 Clustering</h2><p>I used KMeans from sklearn and specify n_clusters = 5 to perform5-means clustering. Following is the plot. We can see the centers are inthe class points and they are in each classes field, but it doesn'tperform very well. Maybe it's because the data are all stacktogether</p><figure><img data-src="https://i.imgur.com/SMkBWH8.png"alt="image-20221030122612558 AM" /><figcaption aria-hidden="true">image-20221030122612558 AM</figcaption></figure><h2 id="classification">4.4 Classification</h2><h3 id="logistic-regression">logistic regression</h3><p>I used L2 regularization which changes the loss function tothis:<span class="math inline">\(\frac{1}{N}\sum_{i=1}^N(\hat{Y}-Y)^2+\lambda \sum_{i=1}^N \theta_i^2\)</span> , itwill keep all the characteristic value but reduce the magnitude of it.Itwill prevent the model being overfit.</p><p>Following is the cost output:</p><blockquote><p>Train loss: 0.14950776894793025</p><p>Test loss: 0.09920149629523056</p></blockquote><h3 id="random-forests">Random forests</h3><p>I used RandomForest from sklearn and set the n_estimators to 50,100and 200.Random forests training and test loss are as follows:</p><blockquote><p>Train loss for 50 trees: 0.00029652473016249557</p><p>Test loss for 50 trees: 0.1122940795626214</p><p>Train loss for 100 trees: 0.0</p><p>Test loss for 100 trees: 0.10970433781742321</p><p>Train loss for 200 trees: 0.0</p><p>Test loss for 200 trees: 0.11107114596072225</p></blockquote><h3 id="knn">knn</h3><p>I used KNeighbors from sklearn to setup a KNN model and usedGridSearchCV to look for the best k grid by grid in a range of 1-30 with5 folds, so it will search in 5*29=145 fits and get the best k.Aftersearching here's the result:</p><blockquote><p>Fitting 5 folds for each of 29 candidates, totalling 145 fits</p><p>Best K: 26</p><p>Train loss: 0.14135333886846163</p><p>Test loss: 0.10164736349902885</p></blockquote><h1 id="thanks-for-the-fish-15-points">5 Thanks for the Fish (15points)</h1><p>First I used numpy to load the data, and I used The pseudo inverse tosolve the question.</p><p>For pseudo inverse I first added a colomn of 1 to the input matrix,then use the fomula $ w^* = (X<sup>TX)</sup>-1X^Ty$ to calculate theparameters. Then I got b as 1105.41535282 and w1 as 44.73450994, w2 as-36.8333.</p><p>MSE:79709.30475880645</p><p>biased sample variance:1193588.0208333333</p><h1 id="clustering-15-points">6 Clustering (15 points)</h1><ol type="1"><li><p>if k = 1 ,then after choosen a point randomly by k-means++ andcalculate the center with k-means I got the center as (-0.5,0)</p></li><li><p>It will choose from these 6 points with probobally for each as1/6 for the first point</p></li><li><p>As A is chosen to be <span class="math inline">\(c_1\)</span>then we can get <span class="math inline">\(D((-6,2),c_1)\)</span> =<span class="math inline">\(\sqrt{173}\)</span>, <spanclass="math inline">\(D((-6,-2),c_1) = \sqrt{173}\)</span>, <spanclass="math inline">\(D((0,2),c_1) = \sqrt{53}\)</span>,<spanclass="math inline">\(D((0,-2),c_1) = \sqrt{53}\)</span>,<spanclass="math inline">\(D((2,0),c_1) = 5\)</span>.</p><p>Then we calculate<spanclass="math inline">\(c_2=\left\{\begin{array}{lll}(-6,2) &amp; \text {w.p. } &amp; \frac{173}{477} \\ (-6,-2) &amp; \text { w.p. } &amp;\frac{173}{477} \\ (0,2) &amp; \text { w.p. } &amp; \frac{53}{477}\\(0,-2) &amp; \text { w.p. } &amp; \frac{53}{477} \\ (2,0) &amp; \text {w.p. } &amp; \frac{25}{477} \end{array}\right.\)</span></p></li></ol><p>​ And then we use roulette wheel selection to select one from these 5points as <span class="math inline">\(c_2\)</span></p><ol start="4" type="1"><li><p>As A is <span class="math inline">\(c_1\)</span> and F is <spanclass="math inline">\(c_2\)</span>,when calculating D we select C,D,E tobe with F and B with A as they are the nearest center.Then we can get<span class="math inline">\(D((-6,-2),c_2) = 4\)</span>,<spanclass="math inline">\(D((0,2),c_2) = 6\)</span>,<spanclass="math inline">\(D((0,-2),c_2) = \sqrt{52}\)</span>,<spanclass="math inline">\(D((2,0),c_1) = 5\)</span>.</p><p>Then we can calculate <spanclass="math inline">\(c_3=\left\{\begin{array}\\ (-6,-2) &amp; \text {w.p. } &amp; \frac{16}{129} \\ (0,2) &amp; \text { w.p. } &amp;\frac{36}{129}\\ (0,-2) &amp; \text { w.p. } &amp; \frac{52}{129} \\(2,0) &amp; \text { w.p. } &amp; \frac{25}{129}\end{array}\right.\)</span></p><p>And then we use roulette wheel selection to select one from these 4points as <span class="math inline">\(c_3\)</span>.</p></li><li><p>we can calculate the loss as <span class="math inline">\(16+8+8 =32\)</span></p></li><li><p>First we get 3 clusters which is {A},{F,E},{B,C,D}.</p><p>Then we calculate each center of these 3 clusters andgot(7,0),(-6,0),(2/3,0).</p><p>Then we get 3 clusters which is {A},{F,E},{B,C,D} with there newcentering.</p><p>Then we calculate each center and found it converges, and theclustering is done.</p><p>The loss is 4+4+16/9+40/9+40/9=56/3</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> UCPH </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Advanced-Programing-FinalReport</title>
      <link href="/2023/01/30/Advanced-Programing-FinalReport/"/>
      <url>/2023/01/30/Advanced-Programing-FinalReport/</url>
      
        <content type="html"><![CDATA[<ul><li>Question 1: APPY: A simple parser generator</li><li>Question 2: Stock Exchange</li><li>Appendix</li></ul><span id="more"></span><h1 id="question-1-appy-a-simple-parser-generator">Question 1: APPY: Asimple parser generator</h1><h2 id="question-1.1-the-parser-module">Question 1.1: The Parsermodule</h2><h3 id="design">Design</h3><p>I first get rid of Left recursion and got the whole grammer asfollows:</p><blockquote><p>Spec ::= preamble ERules.</p><p>ERules ::= ERule | ERule ERules.</p><p>ERule ::= LHS "::=" Alts ".".</p><p>LHS ::= name OptType | "_".</p><p>OptType ::= | "{:" htext "}".</p><p>Alts ::= Seq | Seq "|" Alts.</p><p>Seq ::= Simple | Simplez "{" htext "}".</p><p>Simplez ::= | Simple Simplez.</p><p>Simple ::= Simple0 | Simple0 "?" | Simple0 "*" | "!" Simple0.</p><p><em>-- Simple0 ::= Atom Simple0'.</em></p><p><em>Simple0' ::= | "{?" htext "}" Simple0</em></p><p>Atom ::= name | tokLit | "@" | charLit | "(" Alts ")".</p></blockquote><h3 id="implement">implement</h3><p>I implemented the parsers from top to bottom, just follow the grammarand write them.</p><p>First I implemented skipmore to skip spaces and comments, this partof the code I referenced from the 2021 exam sample code. Then I madetoken, symbol and schar from Parsernotes, using skipmore in the tokencan make it skip spaces and comments before any token.</p><p>In parseLhs I used isUpper to check the head of the LHS name, if it'sUpper then it's an RPlain, or it's an RToken. So I just wrote them fromparseErules to parseAtom. Then I made 4 small parsers to parse names(read a letter first and read a lot of letters,digit, andunderscores),tokit(begin with double-quotes and end with double-quotes,Ididn't implement double double-quotes because I'm not quite sure how tojudge if a double-quote is the ending of a TokLit or not),CharLit(beginwith a single-quote and read a printable char and end with asingle-quote),At(just return SAnyChar),parseHtext(read a lot ofprintable chars and end with '}', I didn't implement double '{'}'because I'm also not sure how to judge if it's an end or not).</p><p>Then, I implemented parsePreamble to read anything until it meets a'-', and read "---" and return what it just read.</p><p>While developing I found that some of my grammers may generateambiguous results, so I used the last result in parseSpec. It's not thebest way to handle it, but at least it can return the correct parsinganswer.</p><h3 id="test">Test</h3><p>I made 34 unit tests for the parser, some of the results is failedbecause I didn't implyment those part, such as complicated htext andtokLit with double-quotes inside.But the rest are all performing welland following is the test result:</p><figure><img data-src="https://i.imgur.com/QpDh4Bf.png"alt="image-2022111131827454 AM" /><figcaption aria-hidden="true">image-2022111131827454 AM</figcaption></figure><h2 id="question-1.2-the-transformer-module">Question 1.2: TheTransformer module</h2><p>I managed to implement a version of convert which can convert thetest sample eg into g, it uses patton matching to get the rhs, and thenI check the type of it, if it's ESimple then I will return a list withAUser "". If it's a ESeq I'll return the list generated by the helperfunction removeEsimple with Auser which is the second parameter ofESeq.If it's a EBar, I first check the two parameters of EBar, if theyare both ESeq I will return a list with two ESeq's convert result.Thissimple convert function can successfully convert the sample eg intog.</p><h1 id="question-2-stock-exchange">Question 2: Stock Exchange</h1><h2 id="question-2.1-the-erlst-module">Question 2.1: The erlstmodule</h2><h3 id="topics">Topics</h3><ul><li>I support the complete API</li><li>My trader can only process one Strategy at a time, so it needs to benot so slow.</li><li>I uses 2 processes, one is the main exchange, one is the Strategyspawned process. Main exchange uses gen_server APIs to receive messagesfrom user, Strategy send function result to main process through"!"</li><li>The data is shown below as the status</li><li>These parts are discussed in implement part</li></ul><h3 id="design-1">Design</h3><p>I read through the questions first and constructed the status of thesystem. As there's 3 main data sets we need to save, I added 3 listsrepresenting Accounts,Offers and Traders.Each Account has an account IDand a holding.</p><p>In designing account ID I found there're some functions that don'thave server Pid as input, but have just an Acct. So I think AccountIDneeds to contain it's server Pid, in that way it can get the serverwhich this account was opened in, so the accountID is {S,Id}.For the Idpart we need a unique id for each account, there's multiple ways to doit, including setting a user count in state or generate a random uniquenumber each time. I used the second one because I don’t want to addextra data in status which may result in the server running slow. I usederlang:now() to get the current time. I used erlang:localtime() firstbut during test I figured out that the minimum unit of time is secondsand if I call it several times by sequence erlang will do it in asecond, and their ID will be the same. So I used now( ) instead althoughit's been deprecated. I used lists: concat( )to concat ‘A' and 3 resultsmeaning it's an accountID. Also I used the same code in generatingOfferID and TraderID with initials of O and T.</p><p>In designing Offers as we need to store an accountID with the offerto do the money/ stock transfer later I added AccountID into the offertuple. Also we need to add AccountID into Trader to do the followingtrades.</p><p>As we need to return the number of trades I also add a number intothe status to count for it, I will discuss it later.</p><p>The following is the status I designed:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">State is [Num,Accounts, Offers, Traders]</span><br><span class="line">Num is the number of trades</span><br><span class="line">Accounts is [&#123;&#123;S,Id&#125;,&#123;isk,[&#123;stock,amount&#125;.....]&#125;&#125;....]</span><br><span class="line">*Offers is [&#123;OfferId,AccountId,&#123;stock,isk&#125;&#125;....]*</span><br><span class="line">*Traders is [&#123;TraderId,AccountId,Strategy&#125;....]*</span><br><span class="line">*Strategy = fun((Offer) -&gt; Decision)*</span><br></pre></td></tr></table></figure><h3 id="implement-1">implement</h3><p>I used gen_server for the whole system and reviewed my code fromassignment 6 to recall how to use APIs in gen_server.</p><h4 id="open_account">Open_account</h4><p>It will receive the server and new account's holding and make a callto the server. Server will first generate an ID and use a helperfunction checkHoldings(Holdings).This function will check the inputHolding if the ISK &gt;= 0. Then it will call another functioncheckStocks(). This function will check if each of the amounts &gt;=0.Then if checkHoldings return true we will reply it’s AcctID and also addthis item into State.If it’s false we will return {error,badHoldings} toshow it’s not a valid holding.</p><h4 id="make_offer">Make_offer</h4><p>I used a helper function check_Account_exist to run account_balancewith a given Id, and judge its result and return true or false. If it’sa valid Acct then we call the server with input Offer and Id from Acct.In server I first judge if the offer is a valid tuple, then if it’svalid we check if the offer’s price is valid.If all of these conditionsare met we generate an OfferID and add the new offer into the state.</p><h4 id="add_trader">Add_trader</h4><p>Then it comes the most complicated part of the server, thetrader.</p><p>The task asked me to execute the trade whenever 4 conditions are met.I think we can define a function to execute each tradeable trade. As the4 conditions may only be met when addoffer and addtrader is called, so Iput the function above into handle_call of make_offer andadd_trader.</p><p>My design of helper functions in doing this is as follows:</p><ul><li>check_offer_exists which will check if the offer list is empty.</li><li>run_strategy: run a strategy on a single offer. In this function Ispawned a new process and in this process it runs the strategy overoffer and sends back the result after the function gets the result torun_strategy process. And in the main time run_strategy receives theresult and returns it. In this part I didn’t implement</li></ul><blockquote><p>“If a trader has accepted and is able to execute a trade, the stockexchange should execute the trade without waiting for the decisions ofother—possibly slow—traders.”</p></blockquote><p>​ The reason of it is when I get the idea of doing it there's notenough time for me to change the whole structure, I think it maybe canbe solved by using lists:foreach for each Strategy to spawn a newprocess and send back the result, and the main process receive thefastest result and return it's traderID and result.</p><ul><li>Map_offer: use one trider run al offer, return a list of results theTrader made to each of the offers,which may looks like this:[accept,reject,accept.....]. this list is called Map_Res.Here eachresult is a tuple, it's look like{reject,Buyer,{OfferId,Seller,{Stock,Price}}}.With these info we canproceed to handle changing accounts.</li><li>Run_all_traders: use all traders to run all offer, each trader willreturn a list with result, so the function will return a list of resultlists, which may looks likethis:[[accept,reject],[reject,reject],[accept,accept]...],this list iscalled Map_Reses</li><li>Remove_offer: it will receive Map_Res and Offers, remove thoseoffers which is accept in Map_Res.</li><li>Transfer_stock(Map_Res,Accounts): I used a helper function with 3parameters in this part.As I remove offer based on Map_Res, sometimesMap_Res is accept, but the holdings of two side doesn't meet therequirement, so although the trade was not exec,the offer is also gotremoved. So this function will return new Map_Res and new Accounts.Inhelper function it has a new para NewMap_Res to collect each of newresults.In this function it will go through each Map_Res, if it's acceptit will check buyer's ISK and then seller's stock, then do the transferor do nothing to the Accounts list.</li><li>Run_all_Map_Res(Map_Reses,Accounts,Offers,Num):Recursive traversalMap_Reses and use above two functions to change Accounts and Offers.Also I changed the trade num by subtracting old Offers length with newOffers length and add the change to Original Num.Then it returns thefinal status after trading.</li></ul><h3 id="assessment">assessment</h3><ul><li><p>Completeness :I completed all the APIs</p></li><li><p>Correctness: I made 16 unit tests and 2 props and bothpassed(will discuss next)</p></li><li><p>Robustness: I made several robust upgrade to erlst after runningeqc and unit test,including fixed a bug that change_stock may return alist with {error,aaa}inside, fixed several functions may crush whenreceiving a tuple.Before these my erlst crushes a lot when running proptest but now it doesn't crush any more.However,because of time I didn'timplement the robust requirement, but I think both of them can beresolved with supervisor behavior.</p></li><li><p>Maintainability: I used a lot of helper functions in the codewhich makes it very easy to find bug and fix it. Also my code's neatlyarranged and each section has it's name, like <em>Trader helperfunctions</em>,<em>server API</em> and so on.</p></li></ul><h2 id="testing-erlst">2.2 Testing erlst</h2><h3 id="topic">Topic</h3><ul><li>I had implemented all required parts</li></ul><h3 id="design-2">Design</h3><p>I implemented the function mkstrategy with 4 possiblechoices:{buy_everything,buy_cheap,buy_only,both}and each of them canreturn a strategy function.in both function it will only return acceptwhen two functions generated by mkstrategy both return accept.</p><p>Then I implemented some other generators, stock_name can generate aname from[a,b,c,d,e,f], in stock_list,holdings and offer I used?SUCHTHAT to check if the price &gt; 0, this can make sure they cangenerate legal ISK and prices.</p><p>Then I implemented reliable_strategy generator. It used oneof togenerate a symbolic call from four choices regarding to four choices ofmkstrategy.</p><p>Then I implemented prop_value_preservation().This prop I need tocheck the whole amount of money and stock, I first added two accounts,and each of then make 4 offers and 4 traders.And then check the moneyand stock. I used two helper functions calc_Total_Money andcalc_Total_Stock to get current whole money and stock.Then I implementedprop_total_trades(), it also gen 2 accounts and each make 4 offers and 4traders.Then the number of make_offer calls is 8 and number of trades isthe number shutdown returns.</p><p>I also added 16 unit tests to test some aspects prop may not be ableto reach, like negative ISK, negative stock price or offer price and soon, and my erlst passed all the tests.</p><p>Following is the result of testing:</p><figure><img data-src="https://i.imgur.com/1SDfDey.png"alt="image-2022111124415659 AM" /><figcaption aria-hidden="true">image-2022111124415659 AM</figcaption></figure><h3 id="assessment-1">assessment</h3><ul><li><p>Completeness :I completed two props and some other helperfunctions</p></li><li><p>Correctness: I used the props to test my own erlst and foundseveral bugs in my system until all tests passed.</p></li></ul><h1 id="appendix">Appendix</h1><h2 id="parserimpl">ParserImpl</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Put yor parser implementation in this file</span></span><br><span class="line"><span class="keyword">module</span> ParserImpl <span class="keyword">where</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Definitions</span><br><span class="line"><span class="comment">-- import ReadP or Parsec</span></span><br><span class="line"><span class="keyword">import</span> Text.ParserCombinators.ReadP</span><br><span class="line"><span class="keyword">import</span> Control.Applicative ((&lt;|&gt;))</span><br><span class="line"><span class="keyword">import</span> Data.Char</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">Parser</span> a = <span class="type">ReadP</span> a</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">ParseError</span> = <span class="type">String</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Spec ::= preamble ERules.</span></span><br><span class="line"><span class="title">parseSpec</span> :: <span class="type">String</span> -&gt; <span class="type">EM</span> (<span class="type">String</span>, <span class="type">EGrammar</span>)</span><br><span class="line"><span class="title">parseSpec</span> str = <span class="keyword">case</span> readP_to_S (<span class="keyword">do</span></span><br><span class="line">  preamble &lt;- parsePreamble</span><br><span class="line">  eRules &lt;- parseErules</span><br><span class="line">  eof</span><br><span class="line">  return (preamble, eRules)) str <span class="keyword">of</span></span><br><span class="line">  [] -&gt; <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span></span><br><span class="line">  x -&gt; <span class="keyword">case</span> last x <span class="keyword">of</span></span><br><span class="line">    (x, <span class="string">&quot;&quot;</span>) -&gt; return x</span><br><span class="line">    _ -&gt; <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title">spec</span> :: <span class="type">Parser</span> (<span class="type">String</span>, <span class="type">EGrammar</span>)</span><br><span class="line"><span class="title">spec</span> = <span class="keyword">do</span></span><br><span class="line">    preamble &lt;- parsePreamble</span><br><span class="line">    eRules &lt;- parseErules</span><br><span class="line">    return (preamble, eRules)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ERules ::= ERule | ERule ERules.</span></span><br><span class="line"><span class="title">parseErules</span> :: <span class="type">Parser</span> [<span class="type">ERule</span>]</span><br><span class="line"><span class="title">parseErules</span> = <span class="keyword">do</span></span><br><span class="line">            skipmore        </span><br><span class="line">            e &lt;- parseErule</span><br><span class="line">            es &lt;- parseErules</span><br><span class="line">            return (e:es)</span><br><span class="line">        &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">            e &lt;- parseErule</span><br><span class="line">            return [e]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ERule :: LHS &quot;::=&quot; Alts &quot;.&quot;.</span></span><br><span class="line"><span class="title">parseErule</span> :: <span class="type">Parser</span> <span class="type">ERule</span></span><br><span class="line"><span class="title">parseErule</span> = <span class="keyword">do</span></span><br><span class="line">            (l1,l2,l3) &lt;- parseLhs</span><br><span class="line">            symbol <span class="string">&quot;::=&quot;</span></span><br><span class="line">            a &lt;- parseAlts</span><br><span class="line">            schar &#x27;.&#x27;</span><br><span class="line">            return ((l1,l2,l3),a)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LHS ::= name OptType | &quot;_&quot;.</span></span><br><span class="line"><span class="title">parseLhs</span> :: <span class="type">Parser</span> <span class="type">RLHS</span></span><br><span class="line"><span class="title">parseLhs</span> = <span class="keyword">do</span></span><br><span class="line">        skipmore</span><br><span class="line">        n &lt;- parseName</span><br><span class="line">        o &lt;- parseOptType</span><br><span class="line">        <span class="keyword">if</span> isUpper (head n)</span><br><span class="line">            <span class="keyword">then</span> return (n, <span class="type">RPlain</span>, o)</span><br><span class="line">            <span class="keyword">else</span> return (n, <span class="type">RToken</span>, o)</span><br><span class="line">    &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">        skipmore</span><br><span class="line">        symbol <span class="string">&quot;_&quot;</span></span><br><span class="line">        return (<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- OptType ::= | &quot;&#123;:&quot; htext &quot;&#125;&quot;.</span></span><br><span class="line"><span class="title">parseOptType</span> :: <span class="type">Parser</span> (<span class="type">Maybe</span> <span class="type">Type</span>)</span><br><span class="line"><span class="title">parseOptType</span> = <span class="keyword">do</span></span><br><span class="line">            schar &#x27;&#123;&#x27;</span><br><span class="line">            schar &#x27;:&#x27;</span><br><span class="line">            h &lt;- parseHtext</span><br><span class="line">            schar &#x27;&#125;&#x27;</span><br><span class="line">            return (<span class="type">Just</span> (<span class="type">AUser</span> h))</span><br><span class="line">        &lt;|&gt; return <span class="type">Nothing</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Alts ::= Seq | Seq &quot;|&quot; Alts.</span></span><br><span class="line"><span class="title">parseAlts</span> :: <span class="type">Parser</span> <span class="type">ERHS</span></span><br><span class="line"><span class="title">parseAlts</span> = <span class="keyword">do</span></span><br><span class="line">        skipmore</span><br><span class="line">        s &lt;- parseSeq</span><br><span class="line">        symbol <span class="string">&quot;|&quot;</span></span><br><span class="line">        <span class="type">EBar</span> s &lt;$&gt; parseAlts</span><br><span class="line">       &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">        skipmore</span><br><span class="line">        parseSeq</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Seq ::= Simple | Simplez &quot;&#123;&quot; htext &quot;&#125;&quot;.</span></span><br><span class="line"><span class="title">parseSeq</span> :: <span class="type">Parser</span> <span class="type">ERHS</span></span><br><span class="line"><span class="title">parseSeq</span> = <span class="keyword">do</span></span><br><span class="line">        s &lt;- parseSimplez</span><br><span class="line">        schar &#x27;&#123;&#x27;</span><br><span class="line">        h &lt;- parseHtext</span><br><span class="line">        schar &#x27;&#125;&#x27;</span><br><span class="line">        return (<span class="type">ESeq</span> s h)</span><br><span class="line">    &lt;|&gt; parseSimple</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Simplez ::= | Simple Simplez.</span></span><br><span class="line"><span class="title">parseSimplez</span> :: <span class="type">Parser</span> [<span class="type">ERHS</span>]</span><br><span class="line"><span class="title">parseSimplez</span> = <span class="keyword">do</span></span><br><span class="line">            s &lt;- parseSimple</span><br><span class="line">            ss &lt;- parseSimplez</span><br><span class="line">            return (s:ss)</span><br><span class="line">        &lt;|&gt; return []</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Simple ::= Simple0 | Simple0 &quot;?&quot; | Simple0 &quot;*&quot; | &quot;!&quot; Simple0.</span></span><br><span class="line"><span class="title">parseSimple</span> :: <span class="type">Parser</span> <span class="type">ERHS</span></span><br><span class="line"><span class="title">parseSimple</span> = <span class="keyword">do</span></span><br><span class="line">            s &lt;- parseSimple0</span><br><span class="line">            schar &#x27;?&#x27;</span><br><span class="line">            return (<span class="type">EOption</span> s)</span><br><span class="line">        &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">            s &lt;- parseSimple0</span><br><span class="line">            schar &#x27;*&#x27;</span><br><span class="line">            return (<span class="type">EMany</span> s)</span><br><span class="line">        &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">            schar &#x27;!&#x27;</span><br><span class="line">            <span class="type">ENot</span> &lt;$&gt; parseSimple0</span><br><span class="line">        &lt;|&gt; parseSimple0</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Simple0 ::= Atom Simple0&#x27;.</span></span><br><span class="line"><span class="title">parseSimple0</span> :: <span class="type">Parser</span> <span class="type">ERHS</span></span><br><span class="line"><span class="title">parseSimple0</span> = <span class="keyword">do</span></span><br><span class="line">            a &lt;- parseAtom</span><br><span class="line">            parseSimple0&#x27; a</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Simple0&#x27; ::= | &quot;&#123;?&quot; htext &quot;&#125;&quot; Simple0&#x27;.</span></span><br><span class="line"><span class="title">parseSimple0&#x27;</span> :: <span class="type">ERHS</span> -&gt; <span class="type">Parser</span> <span class="type">ERHS</span></span><br><span class="line"><span class="title">parseSimple0&#x27;</span> a = <span class="keyword">do</span></span><br><span class="line">                schar &#x27;&#123;&#x27;</span><br><span class="line">                schar &#x27;?&#x27;</span><br><span class="line">                h &lt;- parseHtext</span><br><span class="line">                schar &#x27;&#125;&#x27;</span><br><span class="line">                parseSimple0&#x27; (<span class="type">EPred</span> a h)</span><br><span class="line">            &lt;|&gt; return a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Atom ::= name | tokLit | &quot;@&quot; | charLit | &quot;(&quot; Alts &quot;)&quot;.</span></span><br><span class="line"><span class="title">parseAtom</span> :: <span class="type">Parser</span> <span class="type">ERHS</span></span><br><span class="line"><span class="title">parseAtom</span> = <span class="keyword">do</span></span><br><span class="line">        <span class="type">ESimple</span> . <span class="type">SNTerm</span> &lt;$&gt; parseName</span><br><span class="line">    &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">        <span class="type">ESimple</span> . <span class="type">SLit</span> &lt;$&gt; parseTokLit</span><br><span class="line">    &lt;|&gt; parseAt</span><br><span class="line">    &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">        <span class="type">ESimple</span> . <span class="type">SChar</span> &lt;$&gt; parseCharLit</span><br><span class="line">    &lt;|&gt; <span class="keyword">do</span></span><br><span class="line">        schar &#x27;(&#x27;</span><br><span class="line">        a &lt;- parseAlts</span><br><span class="line">        schar &#x27;)&#x27;</span><br><span class="line">        return a</span><br><span class="line"></span><br><span class="line"><span class="title">parseName</span> :: <span class="type">Parser</span> <span class="type">String</span></span><br><span class="line"><span class="title">parseName</span> = token(<span class="keyword">do</span></span><br><span class="line">        c &lt;- satisfy isLetter</span><br><span class="line">        cs &lt;- munch (\c -&gt; isLetter c || isDigit c || c == &#x27;_&#x27;)</span><br><span class="line">        return (c:cs))</span><br><span class="line"></span><br><span class="line"><span class="title">parseTokLit</span> :: <span class="type">Parser</span> <span class="type">String</span></span><br><span class="line"><span class="title">parseTokLit</span> = token(<span class="keyword">do</span></span><br><span class="line">        schar &#x27;<span class="string">&quot;&#x27;</span></span><br><span class="line"><span class="string">        cs &lt;- munch (\c -&gt; c /= &#x27;&quot;</span>&#x27;)</span><br><span class="line">        schar &#x27;<span class="string">&quot;&#x27;</span></span><br><span class="line"><span class="string">        return cs)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parseCharLit :: Parser Char</span></span><br><span class="line"><span class="string">parseCharLit = do</span></span><br><span class="line"><span class="string">            schar &#x27;\&#x27;&#x27;</span></span><br><span class="line"><span class="string">            c &lt;- satisfy isPrint</span></span><br><span class="line"><span class="string">            schar &#x27;\&#x27;&#x27;</span></span><br><span class="line"><span class="string">            return c</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parseAt :: Parser ERHS</span></span><br><span class="line"><span class="string">parseAt = do</span></span><br><span class="line"><span class="string">        schar &#x27;@&#x27;</span></span><br><span class="line"><span class="string">        return (ESimple SAnyChar)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parseHtext :: Parser String</span></span><br><span class="line"><span class="string">parseHtext = munch (\c -&gt; isPrint c  &amp;&amp; c /= &#x27;&#125;&#x27;)</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parsePreamble :: Parser String</span></span><br><span class="line"><span class="string">parsePreamble = do</span></span><br><span class="line"><span class="string">    p &lt;- munch (/= &#x27;-&#x27;)</span></span><br><span class="line"><span class="string">    symbol &quot;</span><span class="comment">---\n&quot;</span></span><br><span class="line">    return p</span><br><span class="line"></span><br><span class="line"><span class="comment">-- reference from the last haskell lecture code</span></span><br><span class="line"><span class="title">skipmore</span> :: <span class="type">Parser</span> ()</span><br><span class="line"><span class="title">skipmore</span> = <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">do</span> </span><br><span class="line">        skipSpaces;</span><br><span class="line">        optional (</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">                string <span class="string">&quot;--&quot;</span>;</span><br><span class="line">                endComment;</span><br><span class="line">                skipmore</span><br><span class="line">            )</span><br><span class="line"><span class="title">endComment</span> :: <span class="type">Parser</span> ()</span><br><span class="line"><span class="title">endComment</span> = <span class="keyword">do</span></span><br><span class="line">    char &#x27;\n&#x27;</span><br><span class="line">    return ()</span><br><span class="line">    &lt;++ <span class="keyword">do</span></span><br><span class="line">        get;</span><br><span class="line">        endComment</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">-- Reference from Parsernotes</span></span><br><span class="line"><span class="title">token</span> :: <span class="type">Parser</span> a -&gt; <span class="type">Parser</span> a</span><br><span class="line"><span class="title">token</span> p = skipmore &gt;&gt; p</span><br><span class="line"><span class="title">symbol</span> :: <span class="type">String</span> -&gt; <span class="type">Parser</span> <span class="type">String</span></span><br><span class="line"><span class="title">symbol</span> = token . string</span><br><span class="line"><span class="title">schar</span> :: <span class="type">Char</span> -&gt; <span class="type">Parser</span> <span class="type">Char</span></span><br><span class="line"><span class="title">schar</span> = token . char</span><br></pre></td></tr></table></figure><h2 id="transformerimpl">TransformerImpl</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Put yor transformer implementation in this file</span></span><br><span class="line"><span class="keyword">module</span> TransformerImpl <span class="keyword">where</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Definitions</span><br><span class="line"></span><br><span class="line"><span class="title">convert</span> :: <span class="type">EGrammar</span> -&gt; <span class="type">EM</span> <span class="type">Grammar</span></span><br><span class="line"><span class="title">convert</span> [] = <span class="type">Right</span> []</span><br><span class="line"><span class="title">convert</span> [(lhs, rhs)] = <span class="keyword">case</span> rhs <span class="keyword">of</span></span><br><span class="line">    <span class="type">EBar</span> r1 r2 -&gt; <span class="keyword">case</span> (r1, r2) <span class="keyword">of</span> </span><br><span class="line">        (<span class="type">ESeq</span> s1 u1, <span class="type">ESeq</span> s2 u2) -&gt; <span class="type">Right</span> [(lhs, [(removeEsimple s1, <span class="type">AUser</span> u1), (removeEsimple s2, <span class="type">AUser</span> u2)])];</span><br><span class="line">        _ -&gt; <span class="type">Left</span> <span class="string">&quot;Error&quot;</span></span><br><span class="line">    <span class="type">ESeq</span> s u -&gt; <span class="type">Right</span> [(lhs, [(removeEsimple s, <span class="type">AUser</span> u)])]      </span><br><span class="line">    <span class="type">ESimple</span> s -&gt; <span class="type">Right</span> [(lhs, [([s], <span class="type">AUser</span> <span class="string">&quot;&quot;</span>)])]</span><br><span class="line">    _ -&gt; <span class="type">Left</span> <span class="string">&quot;Error&quot;</span></span><br><span class="line"><span class="title">convert</span> ((lhs, rhs):xs) = </span><br><span class="line">    <span class="keyword">case</span> convert [(lhs, rhs)] <span class="keyword">of</span></span><br><span class="line">        <span class="type">Right</span> r -&gt; <span class="keyword">case</span> convert xs <span class="keyword">of</span></span><br><span class="line">            <span class="type">Right</span> rs -&gt; <span class="type">Right</span> (r ++ rs)</span><br><span class="line">            <span class="type">Left</span> e -&gt; <span class="type">Left</span> e</span><br><span class="line">        <span class="type">Left</span> e -&gt; <span class="type">Left</span> e    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="title">removeEsimple</span> :: [<span class="type">ERHS</span>] -&gt; [<span class="type">Simple</span>]</span><br><span class="line"><span class="title">removeEsimple</span> [] = []</span><br><span class="line"><span class="title">removeEsimple</span> (x:xs) = <span class="keyword">case</span> x <span class="keyword">of</span></span><br><span class="line">    <span class="type">ESimple</span> s -&gt; s : removeEsimple xs</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="title">lre</span> :: <span class="type">Grammar</span> -&gt; <span class="type">EM</span> <span class="type">Grammar</span></span><br><span class="line"><span class="title">lre</span> = undefined</span><br><span class="line"></span><br><span class="line"><span class="title">lfactor</span> :: <span class="type">Grammar</span> -&gt; <span class="type">EM</span> <span class="type">Grammar</span></span><br><span class="line"><span class="title">lfactor</span> = undefined</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="blackbox.hs">BlackBox.hs</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Sample black-box test suite. Feel free to adapt, or start from scratch.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Do NOT import from your ModImpl files here. These tests should work with</span></span><br><span class="line"><span class="comment">-- any implementation of the APpy APIs. Put any white-box tests in</span></span><br><span class="line"><span class="comment">-- suite1/WhiteBox.hs.</span></span><br><span class="line"><span class="keyword">import</span> Definitions</span><br><span class="line"><span class="keyword">import</span> Parser</span><br><span class="line"><span class="keyword">import</span> Transformer</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Test.Tasty</span><br><span class="line"><span class="keyword">import</span> Test.Tasty.HUnit</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> :: <span class="type">IO</span> ()</span><br><span class="line"><span class="title">main</span> = defaultMain $ localOption (mkTimeout <span class="number">1000000</span>) tests</span><br><span class="line"></span><br><span class="line"><span class="title">tests</span> = testGroup <span class="string">&quot;Smoke tests&quot;</span> [</span><br><span class="line">       testCase <span class="string">&quot;Parser&quot;</span> $ parseSpec str @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg),</span><br><span class="line">       testCase <span class="string">&quot;Test name1&quot;</span> $ parseSpec str1 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg2),</span><br><span class="line">       testCase <span class="string">&quot;Test name2&quot;</span> $ parseSpec str2 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg3),</span><br><span class="line">       testCase <span class="string">&quot;Test name3&quot;</span> $ parseSpec str3 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg4),</span><br><span class="line">       testCase <span class="string">&quot;Test name4&quot;</span> $ parseSpec str4 @?= <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span>,</span><br><span class="line">       testCase <span class="string">&quot;Test Comment1&quot;</span> $ parseSpec str5 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg5),</span><br><span class="line">       testCase <span class="string">&quot;Test Comment2&quot;</span> $ parseSpec str6 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg6),</span><br><span class="line">       testCase <span class="string">&quot;Test Comment3&quot;</span> $ parseSpec str7 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg7),</span><br><span class="line">       testCase <span class="string">&quot;Test tokLit1&quot;</span> $ parseSpec str8 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg8),</span><br><span class="line">       testCase <span class="string">&quot;Test tokLit2&quot;</span> $ parseSpec str9 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg9),</span><br><span class="line">       testCase <span class="string">&quot;Test tokLit3&quot;</span> $ parseSpec str10 @?= <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span>,</span><br><span class="line">       testCase <span class="string">&quot;Test CharLit1&quot;</span> $ parseSpec str11 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg11),</span><br><span class="line">       testCase <span class="string">&quot;Test CharLit2&quot;</span> $ parseSpec str12 @?= <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span>,</span><br><span class="line">       testCase <span class="string">&quot;Test CharLit3&quot;</span> $ parseSpec str13 @?= <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span>,</span><br><span class="line">       testCase <span class="string">&quot;Test Atom1&quot;</span> $ parseSpec str14 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg14),</span><br><span class="line">       testCase <span class="string">&quot;Test Atom2&quot;</span> $ parseSpec str15 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg15),</span><br><span class="line">       testCase <span class="string">&quot;Test Atom3&quot;</span> $ parseSpec str16 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg16),</span><br><span class="line">       testCase <span class="string">&quot;Test Simple01&quot;</span> $ parseSpec str17 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg17),</span><br><span class="line">       testCase <span class="string">&quot;Test Simple02&quot;</span> $ parseSpec str18 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg18),</span><br><span class="line">       testCase <span class="string">&quot;Test Simple03&quot;</span> $ parseSpec str19 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg19),</span><br><span class="line">       testCase <span class="string">&quot;Test Simple1&quot;</span> $ parseSpec str20 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg20),</span><br><span class="line">       testCase <span class="string">&quot;Test Simple2&quot;</span> $ parseSpec str21 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg21),</span><br><span class="line">       testCase <span class="string">&quot;Test Simple3&quot;</span> $ parseSpec str22 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg22),</span><br><span class="line">       testCase <span class="string">&quot;Test htext1&quot;</span> $ parseSpec str23 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg23),</span><br><span class="line">       testCase <span class="string">&quot;Test htext2&quot;</span> $ parseSpec str24 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg24),</span><br><span class="line">       testCase <span class="string">&quot;Test htext3&quot;</span> $ parseSpec str25 @?= <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span>,</span><br><span class="line">       testCase <span class="string">&quot;Test htext4&quot;</span> $ parseSpec str26 @?= <span class="type">Left</span> <span class="string">&quot;Parse error&quot;</span>,</span><br><span class="line">       testCase <span class="string">&quot;Test LHS1&quot;</span> $ parseSpec str27 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg27),</span><br><span class="line">       testCase <span class="string">&quot;Test LHS2&quot;</span> $ parseSpec str28 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg28),</span><br><span class="line">       testCase <span class="string">&quot;Test LHS3&quot;</span> $ parseSpec str29 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg29),</span><br><span class="line">       testCase <span class="string">&quot;Test Preamble1&quot;</span> $ parseSpec str30 @?= <span class="type">Right</span> (<span class="string">&quot;asdasdasd&quot;</span>, eg30),</span><br><span class="line">       testCase <span class="string">&quot;Test Preamble2&quot;</span> $ parseSpec str31 @?= <span class="type">Right</span> (<span class="string">&quot;a s d a s d a s d &quot;</span>, eg31),</span><br><span class="line">       testCase <span class="string">&quot;Test Preamble3&quot;</span> $ parseSpec str32 @?= <span class="type">Right</span> (<span class="string">&quot;a s d a s d a s d &quot;</span>, eg32),</span><br><span class="line">       testCase <span class="string">&quot;Test ERules1&quot;</span> $ parseSpec str33 @?= <span class="type">Right</span> (<span class="string">&quot;&quot;</span>, eg33),</span><br><span class="line">       testCase <span class="string">&quot;Test convert&quot;</span> $ convert eg @?= <span class="type">Right</span> g</span><br><span class="line">       ]</span><br><span class="line">       <span class="comment">-- convert eg @?= Right g] -- assumes that convert preserves input rule order</span></span><br><span class="line">       <span class="keyword">where</span></span><br><span class="line">       str = <span class="string">&quot;---\n S ::= S \&quot;a\&quot; &#123;_1+1&#125; | \&quot;b\&quot; &#123;0&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">EBar</span> (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;S&quot;</span>), <span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;_1+1&quot;</span>)</span><br><span class="line">                            (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;b&quot;</span>)] <span class="string">&quot;0&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test name1</span></span><br><span class="line">       str1 = <span class="string">&quot;---\n S ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg2 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test name2</span></span><br><span class="line">       str2 = <span class="string">&quot;---\n S ::= asdf1234.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg3 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;asdf1234&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test name3</span></span><br><span class="line">       str3 = <span class="string">&quot;---\n S ::= a________1.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg4 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a________1&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test name4</span></span><br><span class="line">       str4 = <span class="string">&quot;---\n S ::= 123.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       <span class="comment">-- Test Comment1</span></span><br><span class="line">       str5 = <span class="string">&quot;---\n S --ppp\n::= --ppp\nS \&quot;a\&quot; &#123;_1+1&#125; | \&quot;b\&quot; &#123;0&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg5 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">EBar</span> (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;S&quot;</span>), <span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;_1+1&quot;</span>)</span><br><span class="line">                            (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;b&quot;</span>)] <span class="string">&quot;0&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test Comment2</span></span><br><span class="line">       str6 = <span class="string">&quot;---\n S --ppp\n--ppp\n--ppp\n::= S \&quot;a\&quot; &#123;_1+1&#125; | \&quot;b\&quot; &#123;0&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg6 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">EBar</span> (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;S&quot;</span>), <span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;_1+1&quot;</span>)</span><br><span class="line">                            (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;b&quot;</span>)] <span class="string">&quot;0&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test Comment3</span></span><br><span class="line">       str7 = <span class="string">&quot;---\n S --ppp\n   --ppp\n   --ppp\n::= S \&quot;a\&quot; &#123;_1+1&#125; |  --aqqwe\n \&quot;b\&quot; &#123;0&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg7 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">EBar</span> (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;S&quot;</span>), <span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;_1+1&quot;</span>)</span><br><span class="line">                            (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;b&quot;</span>)] <span class="string">&quot;0&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test tokLit1</span></span><br><span class="line">       str8 = <span class="string">&quot;---\n S ::= \&quot;a\&quot;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg8 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;a&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test tokLit2</span></span><br><span class="line">       str9 = <span class="string">&quot;---\n S ::= \&quot;aa\&quot;a\&quot;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg9 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;aa\&quot;\&quot;a&quot;</span>)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test tokLit3</span></span><br><span class="line">       str10 = <span class="string">&quot;---\n S ::= \&quot;a\&quot; \&quot;\&quot;\&quot;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       <span class="comment">-- Test CharLit1</span></span><br><span class="line">       str11 = <span class="string">&quot;---\n S ::= \&#x27;a\&#x27;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg11 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESimple</span> (<span class="type">SChar</span> &#x27;a&#x27;)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test CharLit2</span></span><br><span class="line">       str12 = <span class="string">&quot;---\n S ::= \&#x27;a\&#x27; \&#x27;b\&#x27;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       <span class="comment">-- Test CharLit3</span></span><br><span class="line">       str13 = <span class="string">&quot;---\n S ::= \&#x27;a\&#x27;\&#x27;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       <span class="comment">-- Test Atom1</span></span><br><span class="line">       str14 = <span class="string">&quot;---\n S ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg14 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Atom2</span></span><br><span class="line">       str15 = <span class="string">&quot;---\n S ::= @.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg15 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESimple</span> <span class="type">SAnyChar</span>),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Atom3</span></span><br><span class="line">       str16 = <span class="string">&quot;---\n S ::= (a).\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg16 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Simple01</span></span><br><span class="line">       str17 = <span class="string">&quot;---\n S ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg17 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Simple02</span></span><br><span class="line">       str18 = <span class="string">&quot;---\n S ::= @&#123;?aaa&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg18 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">EPred</span> (<span class="type">ESimple</span> <span class="type">SAnyChar</span>) <span class="string">&quot;aaa&quot;</span>),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Simple03</span></span><br><span class="line">       str19 = <span class="string">&quot;---\n S ::= @&#123;? isNum &#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg19 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">EPred</span> (<span class="type">ESimple</span> <span class="type">SAnyChar</span>) <span class="string">&quot; isNum &quot;</span>),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Simple1</span></span><br><span class="line">       str20 = <span class="string">&quot;---\n S ::= a*.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg20 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">EMany</span> (<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>))),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Simple2</span></span><br><span class="line">       str21 = <span class="string">&quot;---\n S ::= a?.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg21 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">EOption</span> (<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>))),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Simple3</span></span><br><span class="line">       str22 = <span class="string">&quot;---\n S ::= !a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg22 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ENot</span> (<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>))),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test htext1</span></span><br><span class="line">       str23 = <span class="string">&quot;---\n S ::= a &#123;_1+1&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg23 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;_1+1&quot;</span>),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test htext2</span></span><br><span class="line">       str24 = <span class="string">&quot;---\n S ::= a &#123;&#123;_1+1&#125;&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg24 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;&#123;_1+1&#125;&quot;</span>),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test htext3</span></span><br><span class="line">       str25 = <span class="string">&quot;---\n S ::= a &#123;:_1+1&#125; b.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       <span class="comment">-- Test htext4</span></span><br><span class="line">       str26 = <span class="string">&quot;---\n S ::= a &#123;?_1+1&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       <span class="comment">-- Test LHS1</span></span><br><span class="line">       str27 = <span class="string">&quot;---\n S &#123;:P&#125;::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg27 = [((<span class="string">&quot;S&quot;</span>,<span class="type">RPlain</span>,<span class="type">Just</span> (<span class="type">AUser</span> <span class="string">&quot;P&quot;</span>)),<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test LHS2</span></span><br><span class="line">       str28 = <span class="string">&quot;---\n s &#123;:P&#125; ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg28 = [((<span class="string">&quot;s&quot;</span>,<span class="type">RToken</span>,<span class="type">Just</span> (<span class="type">AUser</span> <span class="string">&quot;P&quot;</span>)),<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test LHS3</span></span><br><span class="line">       str29 = <span class="string">&quot;---\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg29 = [((<span class="string">&quot;_&quot;</span>,<span class="type">RSep</span>,<span class="type">Nothing</span>),<span class="type">ESeq</span> [] <span class="string">&quot;()&quot;</span>)]</span><br><span class="line">       <span class="comment">-- Test Preamble1</span></span><br><span class="line">       str30 = <span class="string">&quot;asdasdasd---\n S ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg30 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test Preamble2</span></span><br><span class="line">       str31 = <span class="string">&quot;a s d a s d a s d ---\n S ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg31 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test Preamble3</span></span><br><span class="line">       str32 = <span class="string">&quot;a s d a s d a s d ---\n --asas\n S ::= a.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg32 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;a&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Test ERules1</span></span><br><span class="line">       str33 = <span class="string">&quot;---\n S ::= S \&quot;a\&quot; &#123;_1+1&#125; | \&quot;b\&quot; &#123;0&#125;.\n _ ::= &#123;()&#125;.&quot;</span></span><br><span class="line">       eg33 = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">              <span class="type">EBar</span> (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SNTerm</span> <span class="string">&quot;S&quot;</span>), <span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;a&quot;</span>)] <span class="string">&quot;_1+1&quot;</span>)</span><br><span class="line">                            (<span class="type">ESeq</span> [<span class="type">ESimple</span> (<span class="type">SLit</span> <span class="string">&quot;b&quot;</span>)] <span class="string">&quot;0&quot;</span>)),</span><br><span class="line">              ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), <span class="type">ESeq</span> [] (<span class="string">&quot;()&quot;</span>))]</span><br><span class="line">       <span class="comment">-- Transformer</span></span><br><span class="line">       <span class="comment">-- eg = [((&quot;S&quot;, RPlain, Nothing),</span></span><br><span class="line">       <span class="comment">--        EBar (ESeq [ESimple (SNTerm &quot;S&quot;), ESimple (SLit &quot;a&quot;)] &quot;_1+1&quot;)</span></span><br><span class="line">       <span class="comment">--                      (ESeq [ESimple (SLit &quot;b&quot;)] &quot;0&quot;)),</span></span><br><span class="line">       <span class="comment">--        ((&quot;_&quot;, RSep, Nothing), ESeq [] (&quot;()&quot;))]</span></span><br><span class="line">       g = [((<span class="string">&quot;S&quot;</span>, <span class="type">RPlain</span>, <span class="type">Nothing</span>),</span><br><span class="line">          [([<span class="type">SNTerm</span> <span class="string">&quot;S&quot;</span>, <span class="type">SLit</span> <span class="string">&quot;a&quot;</span>], <span class="type">AUser</span> <span class="string">&quot;_1+1&quot;</span>),</span><br><span class="line">           ([<span class="type">SLit</span> <span class="string">&quot;b&quot;</span>], <span class="type">AUser</span> <span class="string">&quot;0&quot;</span>)]),</span><br><span class="line">         ((<span class="string">&quot;_&quot;</span>, <span class="type">RSep</span>, <span class="type">Nothing</span>), [([], <span class="type">AUser</span> <span class="string">&quot;()&quot;</span>)])]</span><br></pre></td></tr></table></figure><h2 id="erlst.erl">erlst.erl</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(erlst)</span>.</span><br><span class="line"><span class="keyword">-behaviour</span><span class="params">(gen_server)</span>.</span><br><span class="line"><span class="comment">% You are allowed to split your Erlang code in as many files as you</span></span><br><span class="line"><span class="comment">% find appropriate.</span></span><br><span class="line"><span class="comment">% However, you MUST have a module (this file) called erlst.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% Export at least the API:</span></span><br><span class="line"><span class="keyword">-export</span><span class="params">([launch/<span class="number">0</span>,</span></span><br><span class="line"><span class="params">         shutdown/<span class="number">1</span>,</span></span><br><span class="line"><span class="params">         open_account/<span class="number">2</span>,</span></span><br><span class="line"><span class="params">         account_balance/<span class="number">1</span>,</span></span><br><span class="line"><span class="params">         make_offer/<span class="number">2</span>,</span></span><br><span class="line"><span class="params">         rescind_offer/<span class="number">2</span>,</span></span><br><span class="line"><span class="params">         add_trader/<span class="number">2</span>,</span></span><br><span class="line"><span class="params">         remove_trader/<span class="number">2</span>,</span></span><br><span class="line"><span class="params">         show/<span class="number">1</span></span></span><br><span class="line"><span class="params">        ])</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% You may have other exports as well</span></span><br><span class="line"><span class="keyword">-export</span><span class="params">([init/<span class="number">1</span>,terminate/<span class="number">2</span>,handle_call/<span class="number">3</span>,handle_cast/<span class="number">2</span>])</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([removeoffer/<span class="number">3</span>,run_strategy/<span class="number">2</span>,check_offer_exists/<span class="number">1</span>,run_all_traders/<span class="number">2</span>,run_all_Map_Res/<span class="number">4</span></span></span><br><span class="line"><span class="params">    ,transfer_stock/<span class="number">2</span>,change_stock/<span class="number">4</span>])</span>.</span><br><span class="line"></span><br><span class="line">-type stock_exchange<span class="params">()</span> :: term<span class="params">()</span>.</span><br><span class="line">-type account_id<span class="params">()</span> :: term<span class="params">()</span>.</span><br><span class="line">-type offer_id<span class="params">()</span> :: term<span class="params">()</span>.</span><br><span class="line">-type trader_id<span class="params">()</span> :: term<span class="params">()</span>.</span><br><span class="line">-type stock<span class="params">()</span> :: atom<span class="params">()</span>.</span><br><span class="line">-type isk<span class="params">()</span> :: non_neg_integer<span class="params">()</span>.</span><br><span class="line">-type stock_amount<span class="params">()</span> :: pos_integer<span class="params">()</span>.</span><br><span class="line">-type holdings<span class="params">()</span> :: &#123;isk<span class="params">()</span>, [&#123;stock<span class="params">()</span>, stock_amount<span class="params">()</span>&#125;]&#125;.</span><br><span class="line">-type offer<span class="params">()</span> :: &#123;stock<span class="params">()</span>, isk<span class="params">()</span>&#125;.</span><br><span class="line">-type decision<span class="params">()</span> :: accept | reject.</span><br><span class="line">-type trader_strategy<span class="params">()</span> :: fun<span class="params">((offer())</span> -&gt; decision<span class="params">()</span>).</span><br><span class="line"></span><br><span class="line"><span class="comment">% --------------------------user API----------------</span></span><br><span class="line"><span class="keyword">-spec</span> launch<span class="params">()</span> -&gt; &#123;ok, stock_exchange<span class="params">()</span>&#125; | &#123;error, term<span class="params">()</span>&#125;.</span><br><span class="line"><span class="function"><span class="title">launch</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    gen_server:start_link(?MODULE, [], []).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> shutdown<span class="params">(S :: stock_exchange())</span> -&gt; non_neg_integer<span class="params">()</span>.</span><br><span class="line"><span class="function"><span class="title">shutdown</span><span class="params">(S)</span> -&gt;</span></span><br><span class="line">    Ret = gen_server:call(S, shutdown),</span><br><span class="line">    Ret.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> open_account<span class="params">(S :: stock_exchange(), holdings())</span> -&gt; account_id<span class="params">()</span>.</span><br><span class="line"><span class="function"><span class="title">open_account</span><span class="params">(S,Holdings)</span> -&gt;</span></span><br><span class="line">    gen_server:call(S, &#123;open_account, Holdings,S&#125;).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> account_balance<span class="params">(Acct :: account_id())</span> -&gt; holdings<span class="params">()</span>.</span><br><span class="line"><span class="function"><span class="title">account_balance</span><span class="params">(Acct)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Acct <span class="keyword">of</span></span><br><span class="line">        &#123;Server,Id&#125; -&gt;</span><br><span class="line">            gen_server:call(Server, &#123;account_balance, Id&#125;);</span><br><span class="line">        _ -&gt;</span><br><span class="line">            &#123;error, badAcct&#125;</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> make_offer<span class="params">(Acct :: account_id(), Terms :: offer())</span> -&gt; &#123;ok, offer_id<span class="params">()</span>&#125; | &#123;error, term<span class="params">()</span>&#125;.</span><br><span class="line"><span class="function"><span class="title">make_offer</span><span class="params">(Acct, Offer)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> check_Account_exist(Acct) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            <span class="keyword">case</span> Acct <span class="keyword">of</span></span><br><span class="line">                &#123;Server,Id&#125; -&gt;</span><br><span class="line">                    gen_server:call(Server, &#123;make_offer, Offer, Id&#125;);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    &#123;error, badAcct&#125;</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            &#123;error, notexist&#125;</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> rescind_offer<span class="params">(Acct :: account_id(), Offer :: offer_id())</span> -&gt; ok.</span><br><span class="line"><span class="function"><span class="title">rescind_offer</span><span class="params">(Acct, Offer)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> check_Account_exist(Acct) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            <span class="keyword">case</span> Acct <span class="keyword">of</span></span><br><span class="line">                &#123;Server,Id&#125; -&gt;</span><br><span class="line">                    gen_server:cast(Server, &#123;rescind_offer, Offer, Id&#125;);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    &#123;error, badAcct&#125;</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            &#123;error, notexist&#125;</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> add_trader<span class="params">(Acct :: account_id(), Strategy :: trader_strategy())</span> -&gt; trader_id<span class="params">()</span>.</span><br><span class="line"><span class="function"><span class="title">add_trader</span><span class="params">(Acct, Strategy)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> check_Account_exist(Acct) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            <span class="keyword">case</span> Acct <span class="keyword">of</span></span><br><span class="line">                &#123;Server,Id&#125; -&gt;</span><br><span class="line">                    gen_server:call(Server, &#123;add_trader, Strategy, Id&#125;);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    &#123;error, badAcct&#125;</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            &#123;error, notexist&#125;</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">-spec</span> remove_trader<span class="params">(Acct :: account_id(), Trader :: trader_id())</span> -&gt; ok.</span><br><span class="line"><span class="function"><span class="title">remove_trader</span><span class="params">(Acct, Trader)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> check_Account_exist(Acct) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            <span class="keyword">case</span> Acct <span class="keyword">of</span></span><br><span class="line">                &#123;Server,Id&#125; -&gt;</span><br><span class="line">                    gen_server:cast(Server, &#123;remove_trader, Trader, Id&#125;);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    &#123;error, badAcct&#125;</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            &#123;error, notexist&#125;</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">show</span><span class="params">(S)</span> -&gt;</span></span><br><span class="line">    gen_server:call(S, show).</span><br><span class="line"></span><br><span class="line"><span class="comment">% --------------------------server API----------------</span></span><br><span class="line"><span class="comment">% State is [Num,Accounts, Offers, Traders]</span></span><br><span class="line"><span class="comment">% Num is the number of trades</span></span><br><span class="line"><span class="comment">% Accounts is [&#123;&#123;S,Id&#125;,&#123;isk,[&#123;stock,amount&#125;.....]&#125;&#125;....]</span></span><br><span class="line"><span class="comment">% Offers is [&#123;OfferId,AccountId,&#123;stock,isk&#125;&#125;....]</span></span><br><span class="line"><span class="comment">% Traders is [&#123;TraderId,AccountId,Strategy&#125;....]</span></span><br><span class="line"><span class="comment">% Strategy = fun((Offer) -&gt; Decision), i.e. fun(&#123;&quot;Erlang Inc&quot;, Price&#125;) when Price =&lt; 42 -&gt; accept; (_) -&gt; reject end.</span></span><br><span class="line"><span class="function"><span class="title">init</span><span class="params">([])</span> -&gt;</span></span><br><span class="line">    &#123;ok, [<span class="number">0</span>,[],[],[]]&#125;.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handle_call</span><span class="params">(&#123;open_account, Holdings,Server&#125;, _From, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    &#123;H,M,S&#125; = erlang:now(),</span><br><span class="line">    AccountId = lists:concat([&#x27;A&#x27;,H,M,S]),</span><br><span class="line">    <span class="keyword">case</span> checkHoldings(Holdings) <span class="keyword">of</span> </span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            &#123;reply, &#123;Server,AccountId&#125;, [Num, [&#123;&#123;Server,AccountId&#125;,Holdings&#125;|Accounts], Offers, Traders]&#125;;</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            &#123;reply, &#123;error, badHoldings&#125;, [Num, Accounts, Offers, Traders]&#125;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="title">handle_call</span><span class="params">(show, _From, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    io:format(<span class="string">&quot;Num: ~p~n&quot;</span>,[Num]),</span><br><span class="line">    io:format(<span class="string">&quot;Accounts: ~p~n&quot;</span>,[Accounts]),</span><br><span class="line">    io:format(<span class="string">&quot;Offers: ~p~n&quot;</span>,[Offers]),</span><br><span class="line">    io:format(<span class="string">&quot;Traders: ~p~n&quot;</span>,[Traders]),</span><br><span class="line">    &#123;reply,&#123;Accounts,Offers,Traders&#125;, [Num, Accounts, Offers, Traders]&#125;;</span><br><span class="line"><span class="function"><span class="title">handle_call</span><span class="params">(&#123;make_offer,Offer,Id&#125;, _From, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Offer <span class="keyword">of</span></span><br><span class="line">        &#123;_, Price&#125; -&gt;</span><br><span class="line">            <span class="keyword">if</span> Price &gt;= <span class="number">0</span> -&gt;</span><br><span class="line">                &#123;H,M,S&#125; = erlang:now(),</span><br><span class="line">                OfferId = lists:concat([&#x27;O&#x27;,H,M,S]),</span><br><span class="line">                NewOffers = [&#123;OfferId,Id,Offer&#125;|Offers],</span><br><span class="line"></span><br><span class="line">                <span class="comment">% Run Traders</span></span><br><span class="line">                Map_Reses = run_all_traders(NewOffers, Traders),</span><br><span class="line">                &#123;NewAccounts, NewOffers1,NewNum&#125; = run_all_Map_Res(Map_Reses, Accounts, NewOffers,Num),</span><br><span class="line">                &#123;reply, &#123;ok, OfferId&#125;, [NewNum, NewAccounts, NewOffers1, Traders]&#125;;</span><br><span class="line">            <span class="literal">true</span> -&gt;</span><br><span class="line">                &#123;reply, &#123;error, badPrice&#125;, [Num, Accounts, Offers, Traders]&#125;</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            &#123;reply, &#123;error, badOffer&#125;, [Num, Accounts, Offers, Traders]&#125;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="title">handle_call</span><span class="params">(&#123;add_trader,Strategy,Id&#125;, _From, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    &#123;H,M,S&#125; = erlang:now(),</span><br><span class="line">    TraderId = lists:concat([&#x27;T&#x27;,H,M,S]),</span><br><span class="line">    NewTraders = [&#123;TraderId, Id, Strategy&#125;|Traders],</span><br><span class="line"></span><br><span class="line">    <span class="comment">% Run Traders</span></span><br><span class="line">    Map_Reses = run_all_traders(Offers, NewTraders),</span><br><span class="line">    &#123;NewAccounts, NewOffers,NewNum&#125; = run_all_Map_Res(Map_Reses, Accounts, Offers,Num),</span><br><span class="line">    &#123;reply, TraderId, [NewNum, NewAccounts, NewOffers, NewTraders]&#125;;</span><br><span class="line"><span class="function"><span class="title">handle_call</span><span class="params">(shutdown, _From, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    &#123;stop, normal, Num, [Num, Accounts, Offers, Traders]&#125;;</span><br><span class="line"><span class="function"><span class="title">handle_call</span><span class="params">(&#123;account_balance,Id&#125;, _From, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    Balance = getBalance(Id, Accounts),</span><br><span class="line">    &#123;reply, Balance, [Num, Accounts, Offers, Traders]&#125;.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handle_cast</span><span class="params">(&#123;rescind_offer,OfferId,Id&#125;, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    NewOffers = removeoffer(OfferId, Id, Offers),</span><br><span class="line">    &#123;noreply,[Num, Accounts, NewOffers, Traders]&#125;;</span><br><span class="line"><span class="function"><span class="title">handle_cast</span><span class="params">(&#123;remove_trader,TraderId,Id&#125;, [Num, Accounts, Offers, Traders])</span> -&gt;</span></span><br><span class="line">    NewTraders = removetrader(TraderId, Id, Traders),</span><br><span class="line">    &#123;noreply,[Num, Accounts, Offers, NewTraders]&#125;</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">terminate</span><span class="params">(_Reason, _State)</span> -&gt;</span></span><br><span class="line">    ok.</span><br><span class="line"></span><br><span class="line"><span class="comment">% --------------------------helper functions----------------------------</span></span><br><span class="line"><span class="function"><span class="title">checkHoldings</span><span class="params">(Holdings)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Holdings <span class="keyword">of</span></span><br><span class="line">        &#123;ISK, STOCKS&#125; -&gt;</span><br><span class="line">            <span class="keyword">if</span> ISK &gt;= <span class="number">0</span> -&gt;</span><br><span class="line">                checkStocks(STOCKS);</span><br><span class="line">            <span class="literal">true</span> -&gt;</span><br><span class="line">                <span class="literal">false</span></span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            <span class="literal">false</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% adasd</span></span><br><span class="line"><span class="function"><span class="title">checkStocks</span><span class="params">(STOCKS)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> STOCKS <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            <span class="literal">true</span>;</span><br><span class="line">        &#123;_, Amount&#125; -&gt;</span><br><span class="line">            <span class="keyword">if</span> Amount &gt;= <span class="number">0</span> -&gt;</span><br><span class="line">                <span class="literal">true</span>;</span><br><span class="line">            <span class="literal">true</span> -&gt;</span><br><span class="line">                <span class="literal">false</span></span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        [&#123;_,Amount&#125;|STOCKS1] -&gt;</span><br><span class="line">            <span class="keyword">if</span> Amount &gt;= <span class="number">0</span> -&gt;</span><br><span class="line">                checkStocks(STOCKS1);</span><br><span class="line">            <span class="literal">true</span> -&gt;</span><br><span class="line">                <span class="literal">false</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">getBalance</span><span class="params">(Id, Accounts)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Accounts <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            &#123;error, empty&#125;;</span><br><span class="line">        [&#123;&#123;_,Id&#125;,&#123;Balance,Share&#125;&#125;|_] -&gt;</span><br><span class="line">            &#123;Balance,Share&#125;;</span><br><span class="line">        [_|T] -&gt;</span><br><span class="line">            getBalance(Id, T)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">removeoffer</span><span class="params">(OfferId, Id, Offers)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Offers <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            [];</span><br><span class="line">        [&#123;OfferId, Id, A&#125;|_] -&gt;</span><br><span class="line">            Offers -- [&#123;OfferId, Id, A&#125;];</span><br><span class="line">        [_|T] -&gt;</span><br><span class="line">            removeoffer(OfferId, Id, T)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">removetrader</span><span class="params">(TraderId, Id, Traders)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Traders <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            [];</span><br><span class="line">        [&#123;TraderId, Id, A&#125;|_] -&gt;</span><br><span class="line">            Traders -- [&#123;TraderId, Id, A&#125;];</span><br><span class="line">        [_|T] -&gt;</span><br><span class="line">            removetrader(TraderId, Id, T)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">check_Account_exist</span><span class="params">(Id)</span> -&gt;</span></span><br><span class="line">    Balance = account_balance(Id),</span><br><span class="line">    <span class="keyword">case</span> Balance <span class="keyword">of</span></span><br><span class="line">        &#123;error, empty&#125; -&gt;</span><br><span class="line">            <span class="literal">false</span>;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% -----------------------------Trader helper functions--------------------------------</span></span><br><span class="line"><span class="comment">% condition1</span></span><br><span class="line"><span class="function"><span class="title">check_offer_exists</span><span class="params">(Offers)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Offers <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            <span class="literal">false</span>;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% Use Strategy handle one offer</span></span><br><span class="line"><span class="function"><span class="title">run_strategy</span><span class="params">(Strategy, Offer)</span> -&gt;</span></span><br><span class="line">    Me = self(),</span><br><span class="line">    spawn(<span class="keyword">fun</span>() -&gt;</span><br><span class="line">        <span class="keyword">case</span> Strategy(Offer) <span class="keyword">of</span></span><br><span class="line">            accept -&gt;</span><br><span class="line">                Me ! accept;</span><br><span class="line">            reject -&gt;</span><br><span class="line">                Me ! reject;</span><br><span class="line">            _ -&gt;</span><br><span class="line">                Me ! reject</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>),</span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        accept -&gt;</span><br><span class="line">            accept;</span><br><span class="line">        reject -&gt;</span><br><span class="line">            reject</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% One trider run all offer</span></span><br><span class="line"><span class="function"><span class="title">map_offer</span><span class="params">(Offers, Trader)</span> -&gt;</span></span><br><span class="line">    &#123;_, Buyer, Strategy&#125; = Trader,</span><br><span class="line">    <span class="keyword">case</span> check_offer_exists(Offers) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            lists:map(<span class="keyword">fun</span>(Offer) -&gt;</span><br><span class="line">                &#123;_,_,Temp&#125; = Offer,</span><br><span class="line">                Res = run_strategy(Strategy,Temp),</span><br><span class="line">                &#123;Res,Buyer,Offer&#125;</span><br><span class="line">            <span class="keyword">end</span>, Offers);</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            []</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% get all trader result</span></span><br><span class="line"><span class="function"><span class="title">run_all_traders</span><span class="params">(Offers, Traders)</span> -&gt;</span></span><br><span class="line">    lists:map(<span class="keyword">fun</span>(Trader) -&gt;</span><br><span class="line">        map_offer(Offers, Trader)</span><br><span class="line">    <span class="keyword">end</span>, Traders).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% get new Offers</span></span><br><span class="line"><span class="function"><span class="title">remove_offer</span><span class="params">(Map_Res,Offers)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Map_Res <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            Offers;</span><br><span class="line">        [Res|T] -&gt;</span><br><span class="line">            <span class="keyword">case</span> Res <span class="keyword">of</span></span><br><span class="line">                &#123;accept,_,&#123;OfferId,Id,_&#125;&#125; -&gt;</span><br><span class="line">                    removeoffer(OfferId,Id,Offers);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    remove_offer(T,Offers)</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% get new Map_Res and Accounts,return is &#123;Map_Res,Accounts&#125;</span></span><br><span class="line"><span class="function"><span class="title">transfer_stock</span><span class="params">(Map_Res, Accounts)</span> -&gt;</span></span><br><span class="line">    transfer_stock(Map_Res, Accounts, []).</span><br><span class="line"><span class="function"><span class="title">transfer_stock</span><span class="params">([], Accounts, NewMap_Res)</span> -&gt;</span></span><br><span class="line">    &#123;NewMap_Res, Accounts&#125;;</span><br><span class="line"><span class="function"><span class="title">transfer_stock</span><span class="params">(Map_Res, Accounts, NewMap_Res)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Map_Res <span class="keyword">of</span></span><br><span class="line">        [&#123;accept,Buyer,&#123;OfferId,Seller,&#123;Stock,Price&#125;&#125;&#125;|T] -&gt;</span><br><span class="line">            Acc1 = change_ISK(add, Seller, Price, Accounts),</span><br><span class="line">            <span class="keyword">case</span> change_ISK(remove, Buyer, Price, Acc1) <span class="keyword">of</span></span><br><span class="line">                &#123;error,not_enough_ISK&#125; -&gt;</span><br><span class="line">                    NewRes = &#123;reject,Buyer,&#123;OfferId,Seller,&#123;Stock,Price&#125;&#125;&#125;,</span><br><span class="line">                    transfer_stock(T, Accounts, [NewRes|NewMap_Res]);</span><br><span class="line">                Acc2 -&gt;</span><br><span class="line">                    Acc3 = change_stock(add, Buyer, Stock, Acc2),</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> change_stock(remove, Seller, Stock, Acc3) <span class="keyword">of</span></span><br><span class="line">                        &#123;error, aaa&#125; -&gt;</span><br><span class="line">                            NewRes = &#123;reject,Buyer,&#123;OfferId,Seller,&#123;Stock,Price&#125;&#125;&#125;,</span><br><span class="line">                            transfer_stock(T, Accounts,[NewRes|NewMap_Res]);</span><br><span class="line">                        Acc4 -&gt;</span><br><span class="line">                            NewRes = &#123;accept,Buyer,&#123;OfferId,Seller,&#123;Stock,Price&#125;&#125;&#125;,</span><br><span class="line">                            transfer_stock(T, Acc4, [NewRes|NewMap_Res])</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        [&#123;reject,B,O&#125;|T] -&gt;</span><br><span class="line">            NewRes = &#123;reject,B,O&#125;,</span><br><span class="line">            transfer_stock(T, Accounts, [NewRes|NewMap_Res])</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">change_ISK</span><span class="params">(Label, Id, Price, Accounts)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Accounts <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            [];</span><br><span class="line">        [&#123;&#123;S,Id&#125;, &#123;ISK, Holdings&#125;&#125;|T] -&gt;</span><br><span class="line">            <span class="keyword">case</span> Label <span class="keyword">of</span></span><br><span class="line">                add -&gt;</span><br><span class="line">                    [&#123;&#123;S,Id&#125;, &#123;ISK+Price, Holdings&#125;&#125;|T];</span><br><span class="line">                remove -&gt;</span><br><span class="line">                    <span class="keyword">case</span> ISK-Price &lt; <span class="number">0</span> <span class="keyword">of</span></span><br><span class="line">                        <span class="literal">true</span> -&gt;</span><br><span class="line">                            &#123;error, not_enough_ISK&#125;;</span><br><span class="line">                        <span class="literal">false</span> -&gt;</span><br><span class="line">                            [&#123;&#123;S,Id&#125;, &#123;ISK-Price, Holdings&#125;&#125;|T]</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        [H|T] -&gt;</span><br><span class="line">            [H|change_ISK(Label, Id, Price, T)]</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">change_stock</span><span class="params">(_, _, _, [])</span> -&gt;</span></span><br><span class="line">    [];</span><br><span class="line"><span class="comment">% qwqw</span></span><br><span class="line"><span class="function"><span class="title">change_stock</span><span class="params">(_,_,_,&#123;error,_&#125;)</span>-&gt;</span></span><br><span class="line">    [];</span><br><span class="line"><span class="function"><span class="title">change_stock</span><span class="params">(Label, Id, Stock, [&#123;&#123;S,Id&#125;, &#123;ISK, Holdings&#125;&#125;|T])</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Label <span class="keyword">of</span></span><br><span class="line">        add -&gt;</span><br><span class="line">            NewHoldings = add_stock(Stock, Holdings),</span><br><span class="line">            [&#123;&#123;S,Id&#125;, &#123;ISK, NewHoldings&#125;&#125;|T];</span><br><span class="line">        remove -&gt;</span><br><span class="line">            <span class="keyword">case</span> remove_stock(Stock, Holdings) <span class="keyword">of</span></span><br><span class="line">                &#123;error, not_enough_stock&#125; -&gt;</span><br><span class="line">                    &#123;error, aaa&#125;;</span><br><span class="line">                NewHoldings -&gt;</span><br><span class="line">                    [&#123;&#123;S,Id&#125;, &#123;ISK,NewHoldings&#125;&#125;|T]</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="title">change_stock</span><span class="params">(Label, Id, Stock, [H|T])</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> change_stock(Label, Id, Stock, T) <span class="keyword">of</span></span><br><span class="line">        &#123;error, aaa&#125; -&gt;</span><br><span class="line">            &#123;error, aaa&#125;;</span><br><span class="line">        NewT -&gt;</span><br><span class="line">            [H|NewT]</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">remove_stock</span><span class="params">(Stock, Holdings)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Holdings <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            &#123;error, not_enough_stock&#125;;</span><br><span class="line">        [H|T] -&gt;</span><br><span class="line">            <span class="keyword">case</span> H <span class="keyword">of</span></span><br><span class="line">                &#123;Stock, Amount&#125; -&gt;</span><br><span class="line">                    <span class="keyword">case</span> Amount <span class="keyword">of</span></span><br><span class="line">                        <span class="number">1</span> -&gt;</span><br><span class="line">                            T;</span><br><span class="line">                        _ -&gt;</span><br><span class="line">                            [&#123;Stock, Amount-<span class="number">1</span>&#125;|T]</span><br><span class="line">                    <span class="keyword">end</span>;</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    [H|remove_stock(Stock, T)]</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            &#123;error, not_enough_stock&#125;</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">add_stock</span><span class="params">(Stock, Holdings)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Holdings <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            [&#123;Stock,<span class="number">1</span>&#125;];</span><br><span class="line">        &#123;Stock, Amount&#125; -&gt;</span><br><span class="line">            &#123;Stock, Amount+<span class="number">1</span>&#125;;</span><br><span class="line">        &#123;_, _&#125; -&gt;</span><br><span class="line">            [&#123;Stock,<span class="number">1</span>&#125;|Holdings];</span><br><span class="line">        [H|T] -&gt;</span><br><span class="line">            <span class="keyword">case</span> H <span class="keyword">of</span></span><br><span class="line">                &#123;Stock, Amount&#125; -&gt;</span><br><span class="line">                    [&#123;Stock, Amount+<span class="number">1</span>&#125;|T];</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    [H|add_stock(Stock, T)]</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% get final Accounts and Offers</span></span><br><span class="line"><span class="comment">% Map_Reses = [[&#123;accept,AccountId,Offer&#125;...],...]</span></span><br><span class="line"><span class="function"><span class="title">run_all_Map_Res</span><span class="params">(Map_Reses,Accounts,Offers,Num)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Map_Reses <span class="keyword">of</span></span><br><span class="line">        [] -&gt;</span><br><span class="line">            &#123;Accounts,Offers,Num&#125;;</span><br><span class="line">        [Map_Res|T] -&gt;</span><br><span class="line">            OldNum = length(Offers),</span><br><span class="line">            &#123;NewMap_Res,NewAccounts&#125;= transfer_stock(Map_Res,Accounts),</span><br><span class="line">            NewOffers = remove_offer([NewMap_Res],Offers),</span><br><span class="line">            NewNum = length(NewOffers),</span><br><span class="line">            Num2 = Num + OldNum - NewNum,</span><br><span class="line">            run_all_Map_Res(T,NewAccounts,NewOffers,Num2)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="test_erlst_unit.erl">Test_erlst_unit.erl</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(test_erlst_unit)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-import</span><span class="params">(erlst, [launch/<span class="number">0</span>, open_account/<span class="number">2</span>, make_offer/<span class="number">2</span>, add_trader/<span class="number">2</span>, show/<span class="number">1</span>, run_all_traders/<span class="number">2</span>])</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([test_all/<span class="number">0</span>, test_everything/<span class="number">0</span>])</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([])</span>. <span class="comment">% Remember to export the other functions from Q2.2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">-include_lib</span><span class="params">(<span class="string">&quot;eunit/include/eunit.hrl&quot;</span>)</span>.</span><br><span class="line"><span class="comment">% You are allowed to split your testing code in as many files as you</span></span><br><span class="line"><span class="comment">% think is appropriate, just remember that they should all start with</span></span><br><span class="line"><span class="comment">% &#x27;test_&#x27;.</span></span><br><span class="line"><span class="comment">% But you MUST have a module (this file) called test_erlst.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_all</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    [</span><br><span class="line">        &#123;<span class="string">&quot;EUnit&quot;</span>, spawn, [</span><br><span class="line">            test_start_server(),</span><br><span class="line">            test_shutdown(),</span><br><span class="line">            test_open_account(),</span><br><span class="line">            test_account_balance(),</span><br><span class="line">            test_make_offer(),</span><br><span class="line">            test_rescind_offer(),</span><br><span class="line">            test_add_trader()</span><br><span class="line">        ]&#125;</span><br><span class="line">    ].</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_everything</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    eunit:test(test_all(), [verbose]).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_start_server</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  &#123;<span class="string">&quot;Start server&quot;</span>,</span><br><span class="line">    <span class="keyword">fun</span>() -&gt;</span><br><span class="line">      ?assertMatch(&#123;ok, _&#125;, erlst:launch())</span><br><span class="line">    <span class="keyword">end</span>&#125;.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_shutdown</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  &#123;<span class="string">&quot;Shutdown server&quot;</span>,</span><br><span class="line">    <span class="keyword">fun</span>() -&gt;</span><br><span class="line">      &#123;ok,S&#125; = erlst:launch(),</span><br><span class="line">      ?assertMatch(<span class="number">0</span>, erlst:shutdown(S))</span><br><span class="line">    <span class="keyword">end</span>&#125;.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_open_account</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    [</span><br><span class="line">        &#123;<span class="string">&quot;Open account acc1 and check balance&quot;</span>,</span><br><span class="line">        <span class="keyword">fun</span>() -&gt;</span><br><span class="line">          &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">          Acc1 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">10</span>&#125;]&#125;),</span><br><span class="line">          B = erlst:account_balance(Acc1),</span><br><span class="line">          ?assertMatch(&#123;<span class="number">2000</span>,[&#123;<span class="string">&quot;a&quot;</span>,<span class="number">10</span>&#125;]&#125; , B)</span><br><span class="line">        <span class="keyword">end</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;Open acc with Holdings and check balance&quot;</span>, <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">        Holdings = &#123;<span class="number">100</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">10</span>&#125;, &#123;<span class="string">&quot;b&quot;</span>, <span class="number">20</span>&#125;]&#125;,</span><br><span class="line">        Acc1 = erlst:open_account(S, Holdings),</span><br><span class="line">        B = erlst:account_balance(Acc1),</span><br><span class="line">        ?assertMatch(Holdings , B)</span><br><span class="line">        <span class="keyword">end</span>&#125;,</span><br><span class="line">      &#123;<span class="string">&quot;Open multipal accs&quot;</span>, <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">        Holdings = &#123;<span class="number">100</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">10</span>&#125;, &#123;<span class="string">&quot;b&quot;</span>, <span class="number">20</span>&#125;]&#125;,</span><br><span class="line">        Acc1 = erlst:open_account(S, Holdings),</span><br><span class="line">        Acc2 = erlst:open_account(S, Holdings),</span><br><span class="line">        Acc3 = erlst:open_account(S, Holdings),</span><br><span class="line">        B1 = erlst:account_balance(Acc1),</span><br><span class="line">        B2 = erlst:account_balance(Acc2),</span><br><span class="line">        B3 = erlst:account_balance(Acc3),</span><br><span class="line">        erlst:show(S),</span><br><span class="line">        ?assertMatch(Holdings , B1),</span><br><span class="line">        ?assertMatch(Holdings , B2),</span><br><span class="line">        ?assertMatch(Holdings , B3)</span><br><span class="line">        <span class="keyword">end</span>&#125;,</span><br><span class="line">      &#123;<span class="string">&quot;Check negative ISK&quot;</span>, <span class="keyword">fun</span>() -&gt;</span><br><span class="line">          &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">          Holdings = &#123;-<span class="number">100</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">10</span>&#125;, &#123;<span class="string">&quot;b&quot;</span>, <span class="number">20</span>&#125;]&#125;,</span><br><span class="line">          ?assertMatch(&#123;error, badHoldings&#125;, erlst:open_account(S, Holdings))</span><br><span class="line">      <span class="keyword">end</span>&#125;,</span><br><span class="line">      &#123;<span class="string">&quot;Check negative num&quot;</span>, <span class="keyword">fun</span>() -&gt;</span><br><span class="line">          &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">          Holdings = &#123;<span class="number">100</span>, [&#123;<span class="string">&quot;a&quot;</span>, -<span class="number">10</span>&#125;, &#123;<span class="string">&quot;b&quot;</span>, <span class="number">20</span>&#125;]&#125;,</span><br><span class="line">          ?assertMatch(&#123;error, badHoldings&#125;, erlst:open_account(S, Holdings))</span><br><span class="line">      <span class="keyword">end</span>&#125;</span><br><span class="line">    ].</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="title">test_account_balance</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    &#123;<span class="string">&quot;Check balance of absent user&quot;</span>, <span class="keyword">fun</span>() -&gt;</span><br><span class="line">      erlst:launch(),</span><br><span class="line">      B = erlst:account_balance(&#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;&#125;),</span><br><span class="line">      ?assertMatch(&#123;error,badAcct&#125; , B)</span><br><span class="line">    <span class="keyword">end</span>&#125;.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_make_offer</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  [&#123;<span class="string">&quot;Check make offer&quot;</span>,</span><br><span class="line">    <span class="keyword">fun</span>() -&gt;</span><br><span class="line">      &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">      Acc2 = erlst:open_account(S, &#123;<span class="number">2000</span>, []&#125;),</span><br><span class="line">      ?assertMatch(&#123;ok,_&#125;, erlst:make_offer(Acc2, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="string">&quot;Check make offer with negative num&quot;</span>,</span><br><span class="line">      <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">        Acc2 = erlst:open_account(S, &#123;<span class="number">2000</span>, []&#125;),</span><br><span class="line">        ?assertMatch(&#123;error, badPrice&#125;, erlst:make_offer(Acc2, &#123;<span class="string">&quot;a&quot;</span>, -<span class="number">50</span>&#125;))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="string">&quot;Check make offer with absent user&quot;</span>,</span><br><span class="line">      <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        ?assertMatch(&#123;error, badAcct&#125;, erlst:make_offer(&#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;&#125;, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Check make offer with not own stock&quot;</span>,</span><br><span class="line">      <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">        Acc2 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;b&quot;</span>, <span class="number">50</span>&#125;]&#125;),</span><br><span class="line">        ?assertMatch(&#123;ok, _&#125;, erlst:make_offer(Acc2, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Check make offer and reciend it&quot;</span>,</span><br><span class="line">      <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">        Acc2 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;]&#125;),</span><br><span class="line">        Offer = erlst:make_offer(Acc2, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;),</span><br><span class="line">        ?assertMatch(&#123;ok, _&#125;, Offer),</span><br><span class="line">        ?assertMatch(ok, erlst:rescind_offer(Acc2, Offer))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Check make offer and add trader and run it&quot;</span>,</span><br><span class="line">      <span class="keyword">fun</span>() -&gt;</span><br><span class="line">        &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">        Acc1 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;]&#125;),</span><br><span class="line">        Acc2 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;]&#125;),</span><br><span class="line">        Strategy = <span class="keyword">fun</span>(&#123;<span class="string">&quot;a&quot;</span>, Price&#125;) -&gt;</span><br><span class="line">            <span class="keyword">if</span></span><br><span class="line">                Price &lt; <span class="number">100</span> -&gt; accept;</span><br><span class="line">                <span class="literal">true</span> -&gt; reject</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        erlst:add_trader(Acc1, Strategy),</span><br><span class="line">        Offer = erlst:make_offer(Acc2, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;),</span><br><span class="line">        ?assertMatch(&#123;ok, _&#125;, Offer),</span><br><span class="line">        timer:sleep(<span class="number">1000</span>),</span><br><span class="line">        ?assertMatch(&#123;<span class="number">1950</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">51</span>&#125;]&#125;, erlst:account_balance(Acc1)),</span><br><span class="line">        ?assertMatch(&#123;<span class="number">2050</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">49</span>&#125;]&#125;, erlst:account_balance(Acc2))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;].</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_add_trader</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  &#123;<span class="string">&quot;Add trader and check trader&quot;</span>,</span><br><span class="line">    <span class="keyword">fun</span>() -&gt;</span><br><span class="line">      &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">      Acc3 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">2</span>&#125;]&#125;),</span><br><span class="line">      Acc4 = erlst:open_account(S, &#123;<span class="number">1000</span>, []&#125;),</span><br><span class="line">      Strategy = <span class="keyword">fun</span>(&#123;<span class="string">&quot;a&quot;</span>, Price&#125;) -&gt;</span><br><span class="line">            <span class="keyword">if</span></span><br><span class="line">                Price &lt; <span class="number">100</span> -&gt; accept;</span><br><span class="line">                <span class="literal">true</span> -&gt; reject</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">      erlst:make_offer(Acc3, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;),</span><br><span class="line">      erlst:add_trader(Acc4, Strategy),</span><br><span class="line">      timer:sleep(<span class="number">1000</span>),</span><br><span class="line">      ?assertMatch(&#123;<span class="number">2050</span>,[&#123;<span class="string">&quot;a&quot;</span>,<span class="number">1</span>&#125;]&#125;,erlst:account_balance(Acc3)),</span><br><span class="line">      ?assertMatch(&#123;<span class="number">950</span>,[&#123;<span class="string">&quot;a&quot;</span>,<span class="number">1</span>&#125;]&#125; ,erlst:account_balance(Acc4))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    &#125;.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_rescind_offer</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  &#123;<span class="string">&quot;Rescind offer&quot;</span>,</span><br><span class="line">    <span class="keyword">fun</span>() -&gt;</span><br><span class="line">      &#123;ok, S&#125; = erlst:launch(),</span><br><span class="line">      Acc2 = erlst:open_account(S, &#123;<span class="number">2000</span>, [&#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;]&#125;),</span><br><span class="line">      Offer = erlst:make_offer(Acc2, &#123;<span class="string">&quot;a&quot;</span>, <span class="number">50</span>&#125;),</span><br><span class="line">      ?assertMatch(&#123;ok, _&#125;, Offer),</span><br><span class="line">      ?assertMatch(ok, erlst:rescind_offer(Acc2, Offer))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    &#125;.</span><br></pre></td></tr></table></figure><h2 id="test_erlst.erl">Test_erlst.erl</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(test_erlst)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([test_all/<span class="number">0</span>, test_everything/<span class="number">0</span>])</span>.</span><br><span class="line"><span class="comment">% -import(test_erlst_unit, [test_all/0, test_everything/0]).</span></span><br><span class="line"><span class="comment">% Remember to export the other functions from Q2.2</span></span><br><span class="line"><span class="keyword">-export</span><span class="params">([prop_value_preservation/<span class="number">0</span>, mkstrategy/<span class="number">1</span>, reliable_strategy/<span class="number">0</span>,prop_total_trades/<span class="number">0</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">% -compile(export_all).</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">-include_lib</span><span class="params">(<span class="string">&quot;eqc/include/eqc.hrl&quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_all</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    eqc:quickcheck(prop_value_preservation()),</span><br><span class="line">    eqc:quickcheck(prop_total_trades()),</span><br><span class="line">    test_erlst_unit:test_everything().</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test_everything</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    test_all().</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">mkstrategy</span><span class="params">(Opr)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Opr <span class="keyword">of</span></span><br><span class="line">        buy_everything -&gt;</span><br><span class="line">            <span class="keyword">fun</span>(&#123;_, _&#125;) -&gt; accept <span class="keyword">end</span>;</span><br><span class="line">        &#123;buy_cheap, Num&#125; -&gt;</span><br><span class="line">            <span class="keyword">fun</span>(&#123;_, Price&#125;) -&gt;</span><br><span class="line">                <span class="keyword">if</span></span><br><span class="line">                    Price =&lt; Num -&gt; accept;</span><br><span class="line">                    <span class="literal">true</span> -&gt; reject</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        &#123;buy_only, Stocks&#125; -&gt;</span><br><span class="line">            <span class="keyword">fun</span>(&#123;Stock, _&#125;) -&gt;</span><br><span class="line">                <span class="keyword">case</span> lists:member(Stock, Stocks) <span class="keyword">of</span></span><br><span class="line">                    <span class="literal">true</span> -&gt; accept;</span><br><span class="line">                    <span class="literal">false</span> -&gt; reject</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        &#123;both, S1, S2&#125; -&gt;</span><br><span class="line">            <span class="keyword">fun</span>(Offer) -&gt;</span><br><span class="line">                Str1 = mkstrategy(S1),</span><br><span class="line">                Str2 = mkstrategy(S2),</span><br><span class="line">                <span class="keyword">case</span> &#123;Str1(Offer), Str2(Offer)&#125; <span class="keyword">of</span></span><br><span class="line">                    &#123;accept, accept&#125; -&gt; accept;</span><br><span class="line">                    &#123;reject, reject&#125; -&gt; reject;</span><br><span class="line">                    _ -&gt; reject</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">stock_name</span><span class="params">()</span> -&gt;</span> eqc_gen:oneof([a,b,c,d,e,f]).</span><br><span class="line"><span class="function"><span class="title">stock_names</span><span class="params">()</span> -&gt;</span> eqc_gen:list(stock_name()).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">stock_list</span><span class="params">()</span> -&gt;</span> </span><br><span class="line">    ?SUCHTHAT(&#123;_,Price&#125;,</span><br><span class="line">        &#123;stock_name(), eqc_gen:int()&#125;,</span><br><span class="line">        Price &gt; <span class="number">0</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">holdings</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    ?SUCHTHAT(&#123;Money, _&#125;,</span><br><span class="line">              &#123;eqc_gen:int(), stock_list()&#125;,</span><br><span class="line">              Money &gt; <span class="number">0</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">offer</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    ?SUCHTHAT(&#123;_,Price&#125;,</span><br><span class="line">          &#123;stock_name(), eqc_gen:int()&#125;,</span><br><span class="line">          Price &gt;= <span class="number">0</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">reliable_strategy</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    oneof([</span><br><span class="line">            &#123;call, test_erlst, mkstrategy, [buy_everything]&#125;,</span><br><span class="line">            &#123;call, test_erlst, mkstrategy, [&#123;buy_cheap, int()&#125;]&#125;,</span><br><span class="line">            &#123;call, test_erlst, mkstrategy, [&#123;buy_only, stock_names()&#125;]&#125;,</span><br><span class="line">            &#123;call, test_erlst, mkstrategy, [&#123;both,&#123;buy_cheap,int()&#125;, &#123;buy_only, stock_names()&#125;&#125;]&#125;</span><br><span class="line">    ]).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">calc_Total_Money</span><span class="params">(Accts)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Accts <span class="keyword">of</span></span><br><span class="line">        [] -&gt; <span class="number">0</span>;</span><br><span class="line">        [&#123;Balance,_&#125;|T] -&gt; <span class="keyword">case</span> Balance+<span class="number">0</span> <span class="keyword">of</span></span><br><span class="line">            <span class="number">0</span> -&gt; calc_Total_Money(T);</span><br><span class="line">            _ -&gt; Balance+calc_Total_Money(T)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">calc_Total_Stock</span><span class="params">(Accts)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Accts <span class="keyword">of</span></span><br><span class="line">        [] -&gt; <span class="number">0</span>;</span><br><span class="line">        &#123;_,Holdings&#125; -&gt; Holdings;</span><br><span class="line">        [&#123;_,Holdings&#125;|T] -&gt; <span class="keyword">case</span> Holdings <span class="keyword">of</span></span><br><span class="line">            [] -&gt; calc_Total_Stock(T);</span><br><span class="line">            [&#123;_,Num&#125;|T2] -&gt; Num+calc_Total_Stock(T);</span><br><span class="line">            &#123;_,Num&#125; -&gt; Num</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">prop_value_preservation</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    ?FORALL(</span><br><span class="line">        &#123;Strategy, Holdings1,Holdings2,Offer&#125;,</span><br><span class="line">        &#123;reliable_strategy(), holdings(),holdings(), offer()&#125;,</span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">            &#123;ok,S&#125; = erlst:launch(),</span><br><span class="line">            A1 = erlst:open_account(S, Holdings1),</span><br><span class="line">            A2 = erlst:open_account(S, Holdings2),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            A1Holding = erlst:account_balance(A1),</span><br><span class="line">            A2Holding = erlst:account_balance(A2),</span><br><span class="line">            Money1 = calc_Total_Money([A1Holding, A2Holding]),</span><br><span class="line">            Stock1 = calc_Total_Stock([A1Holding, A2Holding]),</span><br><span class="line">            erlst:add_trader(A1, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A1, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A1, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A1, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A2, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A2, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A2, eval(Strategy)),</span><br><span class="line">            erlst:add_trader(A2, eval(Strategy)),</span><br><span class="line">            A1Holding1 = erlst:account_balance(A1),</span><br><span class="line">            A2Holding1 = erlst:account_balance(A2),</span><br><span class="line">            Money2 = calc_Total_Money([A1Holding1, A2Holding1]),</span><br><span class="line">            Stock2 = calc_Total_Stock([A1Holding1, A2Holding1]),</span><br><span class="line">            eqc:equals(Money1, Money2),</span><br><span class="line">            eqc:equals(Stock1, Stock2)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    ).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">prop_total_trades</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    ?FORALL(</span><br><span class="line">        &#123;Strategy, Holdings1,Holdings2, Offer&#125;,</span><br><span class="line">        &#123;mkstrategy(buy_everything), holdings(), holdings(), offer()&#125;,</span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">            &#123;ok,Pid&#125; = erlst:launch(),</span><br><span class="line">            A1 = erlst:open_account(Pid, Holdings1),</span><br><span class="line">            A2 = erlst:open_account(Pid, Holdings2),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A1, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:make_offer(A2, Offer),</span><br><span class="line">            erlst:add_trader(A2, Strategy),</span><br><span class="line">            erlst:add_trader(A2, Strategy),</span><br><span class="line">            erlst:add_trader(A2, Strategy),</span><br><span class="line">            erlst:add_trader(A2, Strategy),</span><br><span class="line">            erlst:add_trader(A1, Strategy),</span><br><span class="line">            erlst:add_trader(A1, Strategy),</span><br><span class="line">            erlst:add_trader(A1, Strategy),</span><br><span class="line">            erlst:add_trader(A1, Strategy),</span><br><span class="line">            Num = erlst:shutdown(Pid),</span><br><span class="line">            Num =&lt; <span class="number">8</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    ).</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> UCPH </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ACS-Notes</title>
      <link href="/2023/01/30/ACS-Notes/"/>
      <url>/2023/01/30/ACS-Notes/</url>
      
        <content type="html"><![CDATA[<ul><li>部分笔记</li><li>部分题型总结</li></ul><span id="more"></span><h1 id="acs-笔记">ACS 笔记</h1><h2 id="part1-3-lectures-1-2">Part1-3 （lectures 1-2）</h2><h3 id="chapter1">Chapter1</h3><p>Introduce fundamental abstractions like memory, interpreters, andcommunication links.</p><h4 id="memory">Memory</h4><p>Memory, sometimes called storage, is the system component thatremembers data values for use in computation.</p><blockquote><p>Durability: A property of a storage medium: the length of time itremembers.</p><p>Stability: A property of an object: it is unchanging.</p><p>Persistence: A property of an active agent: it keeps trying.</p></blockquote><p>API:</p><ul><li>Write(name,value)</li><li>Value &lt;- Read(name)</li></ul><p>read/write coherence: the result of the read of a named cell isalways the same as the most recent write to that cell.</p><p>Before-or-after atomicity: the result of every read or write is as ifthat read or write occurred either completely before or completely afterany other read or write.</p><h3 id="chapter-2">Chapter 2</h3><ul><li>Recognize and explain modular designs with clients andservices.</li><li>Predict the functioning of service calls under diﬀerent RPCsemantics and failure modes.</li><li>Identify diﬀerent mechanisms to achieve RPCs.</li><li>Implement RPC services with an appropriate mechanism, such as webservices.</li></ul><h4 id="rpc">RPC</h4><p>using stub to make remote procedure calls behave the same as anordinary procedure call.</p><p>Difference between ordinary procedure call:</p><ol type="1"><li>RPCs can reduce fate sharing between the caller and callee byexposing the failures of the callee to the caller so that the caller canrecover.</li><li>RPCs introduce a new failure mode</li><li>calling a local procedure takes typically much less time thancalling a remote procedure call.</li><li>some programming language features don’t combine well with RPC.</li></ol><h4 id="rpc-strategies">RPC strategies:</h4><p>In order to handle no-response case.</p><p>At-least-once</p><blockquote><p>If the client stub doesn’t receive a response within some specifictime, the stub resends the request as many times as necessary until itreceives a response from the service.</p></blockquote><p>At-most-once</p><blockquote><p>If the client stub doesn’t receive a response within some specifictime, then the client stub returns an error to the caller, indicatingthat the service may or may not have processed the request.</p><p>Implementing at-most-once RPC is harder than it sounds because theunderlying network may duplicate the request message without the clientstub’s knowledge.</p></blockquote><p>Exactly-once</p><blockquote><p>These semantics are the ideal, but because the client and service areindependent it is in principle impossible to guarantee.</p><p>by adding the complexity of extra message exchanges and carefulrecordkeeping, one can approach exactly-once semantics closely enough tosatisfy some applications.</p></blockquote><h4 id="communicating-through-an-intermediary">Communicating through anIntermediary</h4><p>e.g. mail service</p><h3 id="chapter-3">Chapter 3</h3><ul><li>Explain performance metrics such as latency, throughput, overhead,utilization, capacity, and scalability.</li><li>List common hardware parameters that aﬀect performance.</li><li>Apply performance improvement techniques, such as concurrency,batching, dallying, and fast-path coding.</li></ul><h4 id="bottleneck-source">Bottleneck source</h4><ol type="1"><li>Physical reasons may cause bottleneck</li><li>several clients may share a device</li></ol><h4 id="performance-metrics">Performance Metrics</h4><p>Capacy : service's size or amount of resources.</p><p>Utilization(利用率): percentage of capacity of a resource that isused for some given workload of requests.</p><p>Overhead(开销) : what the layers below current layer do</p><p>Useful work : what the layers above it do</p><p>处理器利用了95%，但是只给应用层了70%的利用，因为操作系统层使用了25%。此时应用层就认为开销是25%，70%是有用工作。</p><p>Latency : the delay between a change at the input to a system and thecorresponding change at its output.(输入和输出的时延)</p><p>Have a pipeline model in mind to think about latency.</p><p>Throughput(吞吐量) : a measure of the rate of useful work done by aservice for some given workload of requests.</p><p>Throughput = 1/latency</p><p>假如管道有两部分，第一部分每秒1000k，第二部分每秒100k，总吞吐量小于等于100k，也就是t(a+b)&lt;= min(t(a),t(b))</p><p>假如串行处理吞吐量就和延迟有关，并行处理的话没有直接关系。</p><h4 id="apply-performance-improvement-techniques">Apply performanceimprovement techniques</h4><h5 id="fast-path-coding">Fast-path coding</h5><p>splitting the staged pipeline into a fast path for the frequentrequests and a slow path for other requests</p><ul><li>One optimized path for common requests -&gt; fast path</li><li>One slow but comprehensive path for all other requests -&gt; slowpath</li><li>Caching is an example</li></ul><p>It can lead to the optimization for the common case.</p><h5 id="concurrency">Concurrency</h5><p>this plan can, in principle, speed up the processing by a factorn</p><p>In practice, the speedup is usually less than n because there isoverhead in parallelizing a computation—the subtasks need to communicatewith each other,</p><p>Challenges:</p><ul><li>many applications are difficult to parallelize. Applications such assearch have exploitable parallelism, but other computations don’t spliteasily into n mostly independent pieces.</li><li>developing parallel applications is difficult because the programmermust manage the concurrency and coordinate the activities of thedifferent subtasks.</li></ul><p>Traditionally: rely on continuous technology improvements to reduceapplication latency.</p><p>This development means that improving performance by usingconcurrency will inevitably increase in importance.</p><h5 id="batching">Batching</h5><p>Run multiple requests at once.</p><p>May improve latency and throughput</p><h5 id="dallying">Dallying</h5><p>Wait until you accumulate some requests and then run them.</p><p>May improve throughput when used together with batching, buttypically incurs a latency penalty</p><h2 id="part4lecture-3-4-concurrency-control">Part4(lecture 3-4)Concurrency Control</h2><ul><li>Identify the multiple interpretations of the property ofatomicity.</li><li>Implement methods to ensure before-or-after atomicity, and argue fortheir correctness.</li><li>Explain the variants of the two-phase locking (2PL) protocol, inparticular the widely-used Strict 2PL.</li><li>Discuss deﬁnitions of serializability and their implications, inparticular conﬂict-serializability and view-serializability.</li><li>Apply the conﬂict-serializability test using a precedence graph totransaction schedules.</li><li>Explain deadlock prevention and detection techniques.</li><li>Apply deadlock detection using a waits-for graph to transactionschedules.</li><li>Explain situations where predicate locking is required.</li><li>Explain the optimistic concurrency control and multi-versionconcurrency control models.</li><li>Predict validation decisions under optimistic concurrencycontrol.</li></ul><p>transaction: any one execution of a user program in a DBMS</p><p>Schedule: a list of actions (reading, writing, aborting, orcommitting) from a set of transactions</p><p>serializable schedule: effect on any consistent database instance isguaranteed to be identical to that of some complete serial schedule overS.</p><h3 id="the-acid-properties">THE ACID PROPERTIES</h3><ol type="1"><li>atomic: Either all actions are carried out or none are.</li><li>consistency: Each transaction, run by itself with no concurrentexecution of other transactions, must preserve the consistency of thedatabase.</li><li>isolation: Users should be able to understand a transaction withoutconsidering the effect of other concurrently executing transactions,even if the DBJVIS interleaves the actions of transactions forperformance reasons.</li><li>durability: Once the DBMS informs the user that a transaction beensuccessfully completed, its effects should persist even if the systemcrashes before all its changes are reflected on disk.</li></ol><h3 id="anomalies">Anomalies</h3><h4 id="wr-conflicts">WR Conflicts</h4><p>a transaction T2 could read a database object A that has beenmodified by another transaction Tl, which has not yet committed.</p><p>Such a read is called a dirty read.</p><h4 id="rw-conflicts">RW Conflicts</h4><p>T2 could change the value of an object A that has been read by atransaction Tl, while Tl is still in progress.</p><h4 id="ww-conflicts">WW Conflicts</h4><p>a transaction T2 could overwrite the value of an object A, which hasalready been modified by a transaction Tl,while Tl is still inprogress.</p><h3 id="lock-based-concurrency-control">Lock-Based ConcurrencyControl</h3><p>A locking protocol is a set rules to be followed by each transaction(and enforced by the DBMS) to ensure that, even though actions ofseveral transactions might be interleaved, net effect is identical toall transactions in some serial order.</p><h4 id="s2pl">S2PL</h4><p>rules：</p><ol type="1"><li>If a transaction T wants to read modify) an object, it first ashared (respectively, exclusive) lock on the object.</li><li>All locks held by a transaction are released when the transaction iscompleted .</li></ol><p>May cause deadlock</p><p>Performance may be caused by blocking and aborting</p><p>the overhead locking comes primarily from delays due to blocking.</p><figure><img data-src="https://i.imgur.com/NOrLU3h.png"alt="image-2022123070222236 PM" /><figcaption aria-hidden="true">image-2022123070222236 PM</figcaption></figure><p>并发数高的时候会有抖动</p><p>减少抖动方法：</p><ul><li>By locking the smallest sized objects possible (reducing thelikelihood that two transactions need the same lock).</li><li>By reducing tiIne that transaction hold locks (so that othertransactions are blocked for a shorter time).</li><li>By reducing hot spots. A hot spot is a database object that isfrequently accessed and modified, and causes a lot of blocking delays.Hot spots can significantly affect perfonnance.</li></ul><h3 id="stealing-and-forcing-pages">Stealing and Forcing Pages</h3><p>Steal : Can the changes made to an object 0 in the buffer pool by atransaction T be written to disk before T commits? Such writes areexecuted when another transaction wants to bring in a page and thebuffer nlanager chooses to replace the frame containing 0; of course,this page must have been unpinned by T. If such writes are allowed, wesay that a steal approach is used. (Informally, the second transaction'steals' a frame from T.)</p><p>Force: When a transaction commits, must we ensure that all thechanges it has made to objects in the buffer pool are immediately forcedto disk? If so, we say that: a force approach is used.</p><p>If a no-steal approach is used, we do not have to undo the changes ofan aborted transaction (because these changes have not been written todisk)</p><p>if a force approach is used, we do not have to redo the changes of acommitted transaction if there is a subsequent crash (because all thesechanges are guaranteed to have been written to disk at commit time).</p><h1 id="concurrency-control">Concurrency Control</h1><h3 id="pl-serializability-recoverability">2PL ,serializability,recoverability</h3><h5 id="conflict-equivalent">conflict equivalent:</h5><p>if they involve the (same set of) actions of the same transactionsand they order every pair of conflicting actions of two committedtransactions in the same way.</p><p>相同事物的相同操作，且每一对冲突的操作在两个调度中顺序相同（WW,WR,RR)</p><h5 id="conflict-action">Conflict action:</h5><p>Two actions of different transactions are conflicting if they accessthe same object and one of them is a write</p><h5 id="conflict-serializable">conflict serializable:</h5><p>it is conflict equivalent to some serial schedule.</p><h5 id="precedence-graphserializability-graph">precedencegraph(serializability graph):</h5><ul><li>点是committed transaction</li><li>边是有confilect 的pair，先发生的指向后发生的，并且与commit无关</li></ul><h5 id="pl">2PL</h5><p>relaxes the second rule of Strict 2PL to allow transactions torelease locks before the end.</p><p>用的时候申请，用完了就释放且无法再次申请</p><h5 id="view-equivalent">view equivalent</h5><ol type="1"><li><p>对同一 data item， 只要是有一个 schedule读了它的初始值，另外一个schedule 也必须读它的初始值。</p></li><li><p>对同一data item,如果在一个 schedule里，一个操作是读了一个写操作后的值，另一个 schedule也必须读同样写操作后的值。</p></li><li><p>对同一 data item,如果在一个 schedule 里最后进行了写操作，则另一个schedule 也要在最后进行同样的写操作。</p></li></ol><h5 id="deadlock">DeadLock</h5><p>lock manager maintains a structure called a waits-for graph to detectdeadlock cycles.</p><p>Nodes: active transactions</p><p>Arc： from $ T_i $ to <span class="math inline">\(T_j\)</span> if anonly if <span class="math inline">\(T_i\)</span> is waiting for <spanclass="math inline">\(T_j\)</span> to release a lock</p><p>如果i和j都commit了就加一条反方向的线</p><p>Waits-for graph周期性检查有没有循环，有的话就abort某一个transaction并且释放他的锁。</p><p>There is an edge from Ti to Tj if Ti is waiting for Tj to release alock</p><figure><img data-src="https://i.imgur.com/PgpE4eC.png"alt="image-20230112115706850 PM" /><figcaption aria-hidden="true">image-20230112115706850 PM</figcaption></figure><h5 id="deadlock-prevention">Deadlock Prevention</h5><p>We can prevent deadlocks by giving each transaction a priority andensuring that lower-priority transactions are not allowed to waithigher-priority transactions (or vice versa).反之亦然</p><p>如果a要一个锁，b拿着这个锁，就看优先级，有两种策略：</p><p>Wait-die: If Ti has higher priority, it is allowed to wait;otherwise, it is aborted.</p><p>Wound-wait: If Ti has higher priority, abort Tj; otherwise, Tiwaits.</p><p>第一个里低优先级永远不等高优先级，第二个里高优先级永远不等低优先级</p><h5 id="deadlock-detection">Deadlock Detection</h5><p>画图看有没有环</p><h5 id="optimistic-concurrency-control">Optimistic ConcurrencyControl</h5><p>Read,Validation,Write</p><h2 id="recovery">Recovery</h2><p>每条log都有prevLSN,transID,type(updating,commit,abort,end,undoing).</p><p>Transaction Table 包含所有active action，有transaction id, status,lastLSN</p><p>Dirty page Table 包含buffer pool的 page，有recLSN(第一个让这个page进入的记录)和pageID</p><p>遇到end再删transaction table中的记录</p><p>winner and loser transaction:winner是commit过的transaction，loser是没能commit的，they were stillactive while the crash occured.</p><p>Redo starts at the smallest recLSN in the dirty page,and all logsrelated to pages in the dirty page need to be redone.</p><p>Undo follow redo and ends all loser set transaction. Undo find thelastLSN of transactions in the loser set and undo all its work.</p><figure><img data-src="https://i.imgur.com/uZrYhhI.png"alt="image-2023012552829664 PM" /><figcaption aria-hidden="true">image-2023012552829664 PM</figcaption></figure><p>第一个是dpt里最小的，第二个是loser里的最早的。</p><figure><img data-src="https://i.imgur.com/Z238DOQ.png"alt="image-2023012542634769 PM" /><figcaption aria-hidden="true">image-2023012542634769 PM</figcaption></figure><p>第一个是表里有pageID且在dirty page table里有的记录需要redo。</p><p>第二个是loser集合里的所有transaction的LSN。</p><p>Redo从上往下， Undo从下往上。</p><p>after log:</p><ul><li>先end所有commit的transaction</li><li>先abort当前inprogress的transaction</li><li>上两个的PREV_LSN都是上一步相关的LSN</li><li>然后undo这些transaction的log。第一条CLR的PREV_LSN写abort的LSN，后续PREV_LSN都写上一个CLR的LSN。CLR还有undonextLSN字段，CLR写法：CLR:UndoT1 LSN 9 (undonextLSN4)，CLR的pageID和这条log初始的ID一样，需要写。</li><li>然后end这个transaction</li><li>顺序与上边update顺序相同</li></ul><p>若遇到CLR过程中crash就继续上边没完成的CLR之类，有end就先end</p><h1 id="题型">题型</h1><h2 id="求vector-clock顺序">求Vector Clock顺序</h2><p>从(0,0,0)开始，每当接收到用户发来的更新消息时就当前对应数字+1之后用新数据发消息。假如接收到的数据和当前的有新的也有旧的就需要callan application-specfic merge function to combine both valuesconsistently,不然的话就overwrite value.</p><h2 id="画waits-for-graph判断是否有死锁">画Waits-forgraph判断是否有死锁</h2><p>首先给每个Action都标上共享锁（SA）或者排它锁（XA），然后当有T1等T2的时候就画一条T1指向T2的线。如果最终图里有环则有可能会发生死锁</p><h2id="画precedence-graph判断是否能转换成conflict-serializable">画precedencegraph判断是否能转换成conflict-serializable</h2><p>点是所有transaction，边是action之间的冲突并且先执行的指向后执行的。冲突是两个transaction都对同一个对象进行操作并且有一个是W</p><p>有环就不是conflict-serializable</p><h2id="哪种tpl会有死锁为什么其他的不会有死锁">哪种TPL会有死锁？为什么其他的不会有死锁？</h2><p>S2PL和2PL会有（所有逐步获得锁的都会有）</p><p>其他的都一次性拿到所有锁，所以不会死锁。</p><h2id="判断一个schedule能不能被s2pl产生">判断一个schedule能不能被s2pl产生</h2><p>presendence graph有环就不能被所有产生</p><p>首先schedule必须是conflict-serializable</p><p>其次只要有要锁的过程就不能产生，先inject S/X lock,然后判断</p><h2id="判断一个schedule能不能被2pl产生">判断一个schedule能不能被2pl产生</h2><p>逐步拿锁，后边不需要的时候就放，但是一旦开始放锁就不能再要锁</p><h2id="判断一个schedule能不能被c2pl产生">判断一个schedule能不能被c2pl产生</h2><p>一个transaction一次拿全所有的锁，用完就放。只需要判断其他t有没有要他还没放的锁</p><h2 id="optimisic-concurrency-control-kung-robinson">OptimisicConcurrency Control (Kung-Robinson)</h2><figure><img data-src="https://i.imgur.com/Ty6vqiQ.png"alt="image-2023012515132027 PM" /><figcaption aria-hidden="true">image-2023012515132027 PM</figcaption></figure><figure><img data-src="https://i.imgur.com/SCCwAXA.png"alt="image-2023012515139272 PM" /><figcaption aria-hidden="true">image-2023012515139272 PM</figcaption></figure><p>不为空的话会引起read dirty data</p><figure><img data-src="https://i.imgur.com/Is0lLM7.png"alt="image-2023012515151003 PM" /><figcaption aria-hidden="true">image-2023012515151003 PM</figcaption></figure><p>不为空的话会引起read dirty data 和 overwrite write</p><h2id="写一个conflict-serializable但不是s2pl的schedule">写一个conflict-serializable但不是S2PL的schedule</h2><h2id="写一个是s2pl但不是c2pl的schedule">写一个是S2PL但不是C2PL的schedule</h2><p>S2PL用完就放锁，C2PL用之前全要完锁</p><h2 id="判断serializable">判断serializable</h2><p>serializable：不管T123先后顺序怎么变，最后对数据库结果一样</p><p>View-serializable:两个schedule看起来效果是一样的，在A中某位置的读在B中会同样读到一样的数据</p><p>conflict-serializable： 画图没环</p><h2 id="force和steal">force和steal</h2><p>As steal is used, we need to implement undo because if some databeing written to the disk because of steal of RAM and there’s a crush,we will need to undo it. As force is used, every update are written intothe disk instead of RAM so we don’t need to Redo.</p>]]></content>
      
      
      <categories>
          
          <category> UCPH </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>AADS-ExamNotes</title>
      <link href="/2023/01/30/AADS-ExamNotes/"/>
      <url>/2023/01/30/AADS-ExamNotes/</url>
      
        <content type="html"><![CDATA[<ul><li>MaxFlow</li><li>Linear Programming Problem</li><li>Randomized Algorithm</li><li>Hash</li><li>Veb Tree</li><li>NP Completeness</li><li>Exact Exponetial problems</li><li>Approximation Algorithm</li><li>Polygon Triangulation</li></ul><span id="more"></span><h1 id="maxflow">maxflow</h1><h2 id="outline">outline</h2><ul><li>flow network,</li><li>flow: a function return a real value and has two constraints<ul><li>Capacity constraint</li><li>flow conservation</li></ul></li><li>FF method<ul><li>Initialize flow f, while there's an augmenting path p in theresidual network, add it</li><li>residual network<ul><li>residual capacity</li><li>flow augmentation</li></ul></li></ul></li><li>cut off flow networks<ul><li>definition: a partition of V into S and T</li><li>f(S,T) = s到t所有边的f - t到s所有边的f</li><li>minimum cut: a cut whose capacity is the minimum overall cut of thenetwork</li></ul></li></ul><h2 id="presentation">presentation</h2><p><strong>flow network:</strong> G=(V,E) is a directed graph in whicheach edge <span class="math inline">\((u,v)\in E\)</span> has anonnegative capacity <span class="math inline">\(c(u,v)\ge 0\)</span>.We also require if E contains an edge(u,v) there's no reverse edge(v,u). If there's no edge between two vertexes we define the capacitybetween these two vertex to be 0. There's a source s and a sink t in anetwork.</p><p><strong>flow:</strong> a function receive two vertexes and return areal value which stands for the flow value between them. A flow has twoproperties:</p><p>the first is capacity constraint, which is for all <spanclass="math inline">\(u,v\in V\)</span> we require <spanclass="math inline">\(0 \le f(u,v) \le c(u,v)\)</span>.</p><p>The second is flow conservation, which is for all <spanclass="math inline">\(u \in V-\{s, t\}\)</span> we require <spanclass="math inline">\(\sum_{v \in V} f(v, u)=\sum_{v \in V} f(u,v)\)</span>, which means the flow that goes out is equal to the flowthat goes in.</p><p>The value |f| of a flow is the sum of all flow go out from souceminuse all flow goes in the source, and defined as <spanclass="math inline">\(|f|=\sum_{\nu \in V} f(s, v)-\sum_{\nu \in V} f(v,s)\)</span></p><p>In max-flow we want to find a flow of maximum value.</p><p>To solve the problem we can use Ford-Fulkerson Method. It forst inita flow f to be 0, and while there's an augmenting path p in the residualnetwork <span class="math inline">\(G_f\)</span> we augment the flow fwith p.</p><p><strong>Residual network:</strong>a residual network is made up ofthe same nodes, and between two adjencnt nodes we add two reverse edges.The capacity of each edges are from current flow of the graph and it'sbased of this:<span class="math inline">\(c_f(u, v)= \begin{cases}c(u,v)-f(u, v) &amp; \text { if }(u, v) \in E \\ f(v, u) &amp; \text { if}(v, u) \in E \\ 0 &amp; \text { otherwise }\end{cases}\)</span></p><p>we can remove all edges that has a capacity of 0.</p><p>After we get the flow from the algorithm we want to know if it'sactually a max flow, so we need to use Max-flow min-cut theorem</p><p>First we need to specify what's a cut.</p><p><strong>cut</strong>:a cut of flow is a partition of V into S and Tsuch that source node is in set S and the sink node is in set T.</p><p>The net flow of a cut is the total flow from set S to set T minus thetotal flow from set T to set S and it's denoted as <spanclass="math inline">\(f(S, T)=\sum_{u \in S} \sum_{v \in T} f(u,v)-\sum_{u \in S} \sum_{v \in T} f(v, u)\)</span>..</p><p>The capacity of a cut is the sum of all capacities from set S to setT and it's denoted as <span class="math inline">\(c(S, T)=\sum_{u \in S}\sum_{v \in T} c(u, v)\)</span>.</p><p>Then we have the theorem: if f is a flow in a flow network G withsource s sink t, then we have following equivalent conditions:</p><ol type="1"><li>f is a max flow in G</li><li>the residual network <span class="math inline">\(G_f\)</span>contains no augmenting paths</li><li>|f| = c(S,T) for some cut(S,T) of G</li></ol><p><strong>Proof:</strong></p><p>(1)=&gt;(2): suppose f is a max flow and there's an augmenting path<span class="math inline">\(f_p\)</span> in residual network, then afteraugmenting <span class="math inline">\(f_p\)</span> the value of f willincrease, which contradics with f is a max flow.</p><p>(2)=&gt;(3):suppose <span class="math inline">\(G_f\)</span> has noaugmenting path, so it have no path from source to sink.Let set S =<span class="math inline">\(\left\{v \in V:\right.\)</span> there existsa path from <span class="math inline">\(s\)</span> to <spanclass="math inline">\(v\)</span> in <spanclass="math inline">\(\left.G_f\right\}\)</span>and T = V - S</p><p>The partition (S,T) is a cut.</p><p>Now we can say there's a u in S and v in T. If(u,v) is in E, then wemust have f(u,v) = c(u,v) because otherwise residual network will havean augment path. If (v,u) is in E,then we must have f(v,u) = 0 becauseotherwise in residual there will be some room for cancellation. And if(u,v)and(v,u) both not in E we have both two flow to be 0.</p><p>Then we have: <span class="math display">\[\begin{aligned}f(S, T) &amp; =\sum_{u \in S} \sum_{v \in T} f(u, v)-\sum_{v \in T}\sum_{u \in S} f(v, u) \\&amp; =\sum_{u \in S} \sum_{v \in T} c(u, v)-\sum_{v \in T} \sum_{u \inS} 0 \\&amp; =c(S, T)\end{aligned}\]</span> Then by lemma 4 that is flow value of a cut is equal to thenet flow value of its cut we can get |f| = f(S,T), then we have |f| =c(S,T). Because of the reason of time I don't prove lemma 4 now, you canask me to do that later.</p><p>(3)=&gt;(1):</p><p>By Corollary we know that for all cuts the flow value is less orequal to the cut capacity, and when it equals we can know f is a maxflow.</p><figure><img data-src="https://i.imgur.com/AK4Quf1.png"alt="image-20230125104137157 PM" /><figcaption aria-hidden="true">image-20230125104137157 PM</figcaption></figure><figure><img data-src="https://i.imgur.com/E2WAAma.png"alt="image-20230125104402866 PM" /><figcaption aria-hidden="true">image-20230125104402866 PM</figcaption></figure><h1 id="linear-programming-problem">Linear Programming Problem</h1><p>Problem: There's a list of variables with some constraints, we have alinear objective function and its feasible solution which is a set ofvalues x1 x2... x6 that can satisfy all constraints. The set of allfeasible solutions is called the feasible region. What we want is anoptimal solution that has the minimum or maximum objective value.</p><p>The solution is the SIMPLEX algorithm.</p><p>Start with the standard form. Procedures to produce it:</p><ol type="1"><li>transform minimization problem to maximization problem</li><li>replace variables that don't have non-negativity constraint into twonon-negative variables and xj is replaced by xj' - xj''<ol type="1"><li>只有x1&gt;=0没有x2&gt;=0</li></ol></li><li>change equal constraint into a pair of opposite inequalityconstraint<ol type="1"><li>x1+x2 = 0 变成x1 + x2 &gt;=0 和 x1 + x2 &lt;= 0</li></ol></li><li>change all &gt;= into &lt;=</li><li>Rename variables</li></ol><p>Slack variable</p><p>there's a slack between inequality's left side and right side. We adda new variable to the left side and make inequality become equality.Addz = objective function, e.g. z = 0 + 2x1 - 3x2 + 3x3</p><p>The feasible solution: all variables including nonbasic(right-handside) and basic(left-hand side) are positive.</p><p>Basic solution: all nonbasic variables to 0.</p><p>SIMPLEX:</p><ol type="1"><li>Pivoting: find x1's binding and add until there's a basic variablethat becomes negative. then we have a feasible solution(9,0,0,21,6,0)andz = 27.Then we rewrite the slack form and put x1 to the left side, itsbinding variable to the right side. And replace all x1 with a formulawith x2,x3, and x6.</li><li>And then you add another none basic variable to become basic untilthere's no room for the original none basic to grow, now it's theoptimal solution.</li></ol><p>Termination:</p><ul><li>When all variables in the objective function &lt;= 0</li><li>When LP is unbounded<ul><li>an unbasic increase all basic are also increase</li></ul></li></ul><p>Cycling:</p><ul><li>If a set of basic and none basic is pivoted again</li><li>if SIMPLEX fails to terminate then it cycles</li><li>Avoid: always choose the variable with positive coefficients andpick one with the smallest indices. And pick the smallest indices toleave. (最小下标)</li><li></li></ul><p>Infeasible First Basic Solution</p><ul><li>Define an auxiliary LP problem</li><li>it's always feasible and bounded</li></ul><ol type="1"><li>Find max -x0</li><li>Change each ax &lt;= b into ax-x0 &lt;= b</li><li>add x0 &gt;= 0</li></ol><p>it is bounded as x0 &gt;=0 so max -x0 is 0</p><p>If it's 0 then the original solution is feasible</p><p>if it's negative original is infeasible.</p><p>如果是0的话把x0=0就成为原始的simplex问题了，就有一组解可以解决。</p><p>Dual problem:</p><p>if min of dual = max of original then it's the optimal solution</p><p>It's used to prove Simplex</p><ol type="1"><li>Multiply constraints by y1 y2 and make the sum less than the rightside's sum<ol type="1"><li>Y1(x1-x2-x3+3x4) + y2(5x1+x2+3x3+8x4)+y3(-x1+2x2+3x3-5x4)&lt;= y1 +55y2+3y3</li></ol></li><li>The left side has an upper bound of LP<ol type="1"><li>y1+5y2-y3&gt;=4</li></ol></li><li>4x1+x2+5x3+3x4 &lt;= y1+55y2+3y3</li><li>Minimize the right side with 2's constraints and get its dualproblem</li><li>(transpose the original matrix)</li></ol><figure><img data-src="https://i.imgur.com/uWUZFSY.png"alt="image-20230109104722576 PM" /><figcaption aria-hidden="true">image-20230109104722576 PM</figcaption></figure><p>weak duality</p><figure><img data-src="https://i.imgur.com/lppWVYD.png"alt="image-20230109104649736 PM" /><figcaption aria-hidden="true">image-20230109104649736 PM</figcaption></figure><p>If there's an optimal solution for dual then there's an optimalsolution for a primal solution.</p><figure><img data-src="https://i.imgur.com/xqzboKa.png"alt="image-20230109105139766 PM" /><figcaption aria-hidden="true">image-20230109105139766 PM</figcaption></figure><figure><img data-src="https://i.imgur.com/ybO2cMj.png"alt="image-20230109105209994 PM" /><figcaption aria-hidden="true">image-20230109105209994 PM</figcaption></figure><p>m = constrains数量，n=variables数量</p><p>当原始的constrain远大于variables的时候解决Dual比解决原始问题简单</p><h2 id="outline-1">Outline</h2><ol type="1"><li>Introduction</li><li>Objective function,constraint</li><li>Example</li><li>SIMPLEX algorithm</li></ol><p>Example:</p><figure><img data-src="https://i.imgur.com/qaweUh5.png"alt="image-20230111125255676 PM" /><figcaption aria-hidden="true">image-20230111125255676 PM</figcaption></figure><h2 id="presentation-1">Presentation</h2><p>I'm going talk about linear problem. In real life a lot of problemscan be solved by this algorithm, so linear program is quite useful inmany practial areas.</p><p>a general linear problem consists of an objective function thatdescribes some relation between the variables of the problem, which wewant to either be maximize or minimize; it also consists of linearconstraints on the variables.</p><p>Given a linear problem, we first need to transform it into standardform.First I need to introduce what's standard form. In standard form wehave an maximization object function with n variables and m linearinequalities.And we are going to use these to manage to get the maximizeof the object function,like this:</p><figure><img data-src="https://i.imgur.com/MOcnpJH.png"alt="image-2023011330653524 PM" /><figcaption aria-hidden="true">image-2023011330653524 PM</figcaption></figure><p>So there are non-negativity constraints on all the n variables andall other constrains should be less than equal.</p><p>(Do standard form)</p><p>Then, in order to solve the problem, we need to tranform standardform into slack form by adding a slack variable to make all theinequality to become equal.</p><p>(Do slack form)</p><p>Then we can apply SIMPLEX algorithm on the slack form by continuouslychanging the basic solution by pivoting variables to and from the basicvariables. Pick a variables in the objective function which positivelyincreases the value, and pivot it with the basic variable thatbottlenecks how much the non-basic variable can be increased.</p><p>(Do SIMPLEX)</p><p>In this example SIMPLEX algorithm runs normally and give a resonableresult.However, in some other circumenstences it may occur some specialcases, like it won't stop, or basic solution is not feasible, or why itreturn the optimal solution. Due to limited time I'd like to onlydiscuss about the last one.</p><p>First, we have sth called the dual of a linear program.which we canuse to show that the SIMPLEX algorithm actually computes the optimalsolution to the problem. I just want to talk about the weak dualitytheorem, which states that the solution to the DUAL of a linear program(PRIMAL) is always an upper bound to the solution to the PRIMAL.</p><p>The dual looks like follows:</p><figure><img data-src="https://i.imgur.com/QLqyOJH.png"alt="image-20230113105655482 PM" /><figcaption aria-hidden="true">image-20230113105655482 PM</figcaption></figure><p>So, what the weak duality theorem says is that it is always the casethat</p><figure><img data-src="https://i.imgur.com/nwxbLi0.png"alt="image-20230113105716981 PM" /><figcaption aria-hidden="true">image-20230113105716981 PM</figcaption></figure><p>Proof are as follows:</p><figure><img data-src="https://i.imgur.com/X6IqMIZ.png"alt="image-20230113105738794 PM" /><figcaption aria-hidden="true">image-20230113105738794 PM</figcaption></figure><h1 id="randomized-algorithm">Randomized Algorithm</h1><p>Randomized algorithms are algorithms that add randomness in theprocedure.In some cases they can be the most fast or the most simple oneamong all other solutions to the problem. There are two types ofrandomized algorithm which is Las vegas and Monte Carlo. The first onealways return the correct answer but the time it consumes may vary. Thesecond one will end in a specfic time but the result it returns may notbe that correct.</p><h2 id="randomized-quick-sort">Randomized Quick Sort</h2><h3 id="algorithm">Algorithm</h3><p>It's similar to quick sort but the point is choose tach pivotrandomly.</p><p>Example:[3,5,2,1,4].</p><h3 id="why-it-sorts-the-numbers">Why it sorts the numbers?</h3><p>Proof: indoction on n</p><p>n=0 trival</p><p>Assume true for n-1 numbers</p><p>Then we return RandQS(L) + <span class="math inline">\(S_i\)</span> +RandQS(R),L+R &lt;= n-1</p><p>And the result is sorted.</p><h3 id="what-might-be-the-case">What might be the case?</h3><h4 id="lucky-case">Lucky case:</h4><h4 id="s_i-is-always-medium"><span class="math inline">\(S_i\)</span>is always medium</h4><p>Running time: T(n)=O(n)+2T(n/2)=...=O(n)+2O(n/2)+4O(n/4)+...+nO(1)</p><p>O(nlogn)</p><h4 id="unlucky-case">Unlucky case:</h4><h4 id="s_i-is-always-minimum"><span class="math inline">\(S_i\)</span>is always minimum</h4><p>O(n^2)</p><h4 id="average-case">average case:</h4><p>O(nlogn). proof</p><p><span class="math inline">\(\mathbb{E}[\#\)</span> comparisons <spanclass="math inline">\(]=\mathbb{E}\left[\sum_{i&lt;j} X_{ij}\right]=\sum_{i&lt;j} \mathbb{E}\left[X_{i j}\right]\)</span></p><p><span class="math inline">\(\mathbb{E}\left[X_{ij}\right]=\left(1-p_{i j}\right) \cdot 0+p_{i j} \cdot 1=p_{ij}\)</span></p><p><span class="math inline">\(\mathbb{E}[\#\)</span> comparisons <spanclass="math inline">\(]=\sum_{i&lt;j} \mathbb{E}\left[X_{ij}\right]=\sum_{i&lt;j} p_{i j}\)</span></p><p><span class="math inline">\(\begin{aligned} p_{i j} &amp;=\operatorname{Pr}[c \in\{i, j\} \mid c \in\{i, i+1, \ldots, j\} \text {u.a.r. }] \\ &amp; =\frac{2}{|\{i, i+1, \ldots,j\}|}=\frac{2}{j+1-i}\end{aligned}\)</span></p><p><span class="math inline">\(\mathbb{E}[\#\)</span> comparisons <spanclass="math inline">\(]=\sum_{i&lt;j} p_{i j}=\sum_{i&lt;j}\frac{2}{j+1-i}\)</span></p><p><span class="math inline">\(=\sum_{i&lt;j} \frac{2}{j+1-i}\)</span><span class="math inline">\(=\sum_{i=1}^{n-1} \sum_{j=i+1}^n\frac{2}{j+1-i}\)</span> <span class="math inline">\(=\sum_{i=1}^{n-1}\sum_{k=2}^{n+1-i} \frac{2}{k}&lt;\sum_{i=1}^n \sum_{k=2}^n\frac{2}{k}\)</span> <span class="math inline">\(=2 n \sum_{k=2}^n\frac{1}{k}=2 n\left(\left(\sum_{k=1}^n \frac{1}{k}\right)-1\right)=2n\left(H_n-1\right)\)</span> <span class="math inline">\(\leq 2 n\int_1^n \frac{1}{x} d x=2 n \ln n=\mathcal{O}(n \log n)\)</span></p><h2 id="randomized-min-cut">Randomized min-cut</h2><ul><li>Why it return a cut?</li></ul><p>Prove by induction on the number k of iterations of the loop.If k = 0then it returnall edges in the graph.suppose it is true for up to k-1iterations, we can get a graph <spanclass="math inline">\(G&#39;\)</span> after first iteration and do k-1iterations, it's a cut in G', but such cut is also a cut in G becauseit's the same with do K iterations.</p><ul><li>For any min-cut C, the probability that RandMinCut(G) returns C is<span class="math inline">\(\ge \frac{2}{n(n-1)}\)</span></li></ul><p>Proof :</p><ol type="1"><li><p>Let Ei be the event that the edge to be contracted isn't part ofC,Then we need to prove 当且仅当每一步都不删除C里的边才会返回C<imgsrc="https://i.imgur.com/VRix2iJ.png"alt="image-20230114110202228 PM" /></p></li><li><p>With conditional probability formula we can know</p><figure><img data-src="https://i.imgur.com/a6fdqGV.png"alt="image-20230114110348933 PM" /><figcaption aria-hidden="true">image-20230114110348933 PM</figcaption></figure><p>Then the pr before can be defined as此时pi是前i-1步都不删除的前提下第i步也不删除</p><figure><img data-src="https://i.imgur.com/8QCX1a3.png"alt="image-20230114110440511 PM" /><figcaption aria-hidden="true">image-20230114110440511 PM</figcaption></figure></li><li><p>With observation we can know</p><ol type="1"><li><p><span class="math inline">\(G_i = (V_i,E_i)\)</span>has ni = n -i vertices</p></li><li><p>The min-cut size of ith procedure is &gt;= |C|</p></li><li><p>每个点的degree 都&gt;= |C|</p><p><span class="math inline">\(\left|E_i\right|=\frac{1}{2} \sum_{v \inV_i} d_i(v) \geq \frac{1}{2} n_i|C|\)</span></p><p>第i步后的边数等于总度数/2大于ni乘mincut</p><p>得到第i步后的边数与C的关系</p></li></ol></li><li><p>第i步选中C的概率是C的大小/边数，即</p><p><span class="math inline">\(\begin{aligned} 1-p_i &amp;=\operatorname{Pr}\left[\text { uniformly random } e \in E_{i-1} \text {is in } C \mid \cap_{j=1}^{i-1} \mathcal{E}_j\right] \\ &amp;=\frac{|C|}{\left|E_{i-1}\right|} \leq \frac{|C|}{\frac{1}{2}n_{i-1}|C|}=\frac{2}{n_{i-1}}=\frac{2}{n-(i-1)} \\ \Rightarrow p_i &amp;\geq1-\frac{2}{n-i+1}=\frac{n-i-1}{n-i+1}\end{aligned}\)</span></p></li><li><p>连乘逐项相消得到2/n(n-1)</p></li></ol><p>Trade Off:</p><p>call it <span class="math inline">\(t \frac{n(n-1)}{2}\)</span> timesand let <span class="math inline">\(C^*\)</span> be the smallest cutreturned(用到1+x&lt;=<span class="math inline">\(e^x\)</span> )</p><p><span class="math inline">\(\begin{aligned}\operatorname{Pr}\left[C^{\star} \text { is not a min-cut }\right] &amp;\leq\left(1-\frac{2}{n(n-1)}\right)^{t \frac{n(n-1)}{2}} \\ &amp;\leq\left(e^{-\frac{2}{(n-1)}}\right)^{t\frac{n(n-1)}{2}}\end{aligned}\)</span></p><p><span class="math inline">\(=e^{-t}\)</span></p><p><span class="math inline">\(\begin{aligned}\operatorname{Pr}\left[C^{\star} \text { is a min-cut }\right] &amp;\geq 1-e^{-t} \\ &amp; \left.=1-n^{-c} \quad \text { (If we set } t=c\ln n\right)\end{aligned}\)</span></p><p>So we repeat it <span class="math inline">\(c \cdot \frac{n(n-1)}{2}\cdot \ln n\)</span> times then P[get a min-cut] is <spanclass="math inline">\(1-n^{-c}\)</span> .</p><h1 id="hash">Hash</h1><h2 id="hashing-fundamentals">Hashing fundamentals</h2><p>Hash function: A hash function h : U-&gt;[m] for each x from U,h(x)in [m] is a random variable.</p><h3 id="truly-random">Truly random:</h3><p>​ if the variables h(x) for x in U are independent and uniform</p><p>​ <strong>(Impractial, because it require |U|logm bits torepresent)</strong></p><h3 id="universal">Universal:</h3><p>​ for any distinct values, their hash value are same has a smallprobability</p><p>​ <span class="math inline">\(x \neq y \in U:\operatorname{Pr}[h(x)=h(y)] \leq \frac{1}{m}\)</span></p><h3 id="c-approximately-universal">C-approximately universal:</h3><p>​ Because sometime we need to compute faster so we need a slackversion of universal.</p><p>​ h is c-approximately if <span class="math inline">\(x \neq y \in U:\operatorname{Pr}[h(x)=h(y)] \leq \frac{c}{m}\)</span></p><h3 id="strongly-universal2-independent">stronglyuniversal(2-independent)</h3><ul><li>Each key is hashed uniformly into [m]<ul><li>for any x and any q, <span class="math inline">\(Pr[h(x) = q] =\frac{1}{m}\)</span></li></ul></li><li>Any two distinct keys hash independently<ul><li>there's two keys x,y. If you know h(x) = q you don't know anythingabout h(y) = ?</li></ul></li></ul><p>​ for all <span class="math inline">\(x \neq y \in U\)</span> ,and<span class="math inline">\(q, r \in[m]: \operatorname{Pr}[h(x)=q \wedgeh(y)=r]=\frac{1}{m^2}\)</span></p><p>​ explaniation: (h(x)=q is 1/m,h(y)=r is 1/m)</p><h3 id="c-approximately-strongly-universal">C-approximately stronglyuniversal</h3><ul><li>each key has <span class="math inline">\(Pr[h(x) = q] =\frac{1}{m}\)</span></li></ul><p>​ <span class="math inline">\(q, r \in[m]: \operatorname{Pr}[h(x)=q\wedge h(y)=r]=\frac{c}{m^2}\)</span></p><h2 id="applicationunordered-sets">Application:Unordered sets</h2><p>Maintain a set S with at most n keys</p><p>need to insert,delete,member</p><h3 id="hashing-with-chaining">Hashing with chaining</h3><p>Define a store array L and <span class="math inline">\(L[i]=\)</span>linked list over <span class="math inline">\(\{y \in S \midh(y)=i\}\)</span></p><figure><img data-src="https://i.imgur.com/AhcNsP8.png"alt="image-20230115113819274 PM" /><figcaption aria-hidden="true">image-20230115113819274 PM</figcaption></figure><p>Each operation takes <spanclass="math inline">\(\mathcal{O}(|L[h(x)]|+1)\)</span> time (the firstone is to find the element in the chain and the second one is to operateon it)</p><p>Prove it only use constant time.</p><h2 id="applicationsignatures">Application:Signatures</h2><figure><img data-src="https://i.imgur.com/5ye5C1J.png"alt="image-20230116122232950 AM" /><figcaption aria-hidden="true">image-20230116122232950 AM</figcaption></figure><h2 id="practial-hash-functions">Practial hash functions</h2><p>How to generate hash values</p><h3 id="multiply-mod-prime">Multiply-mod-prime</h3><p>Let <span class="math inline">\(U=[u]\)</span> and Pick prime <spanclass="math inline">\(p \geq u\)</span></p><p>for any <span class="math inline">\(a, b \in[p]\)</span>, let <spanclass="math inline">\(h_{a, b}^m: U \rightarrow[m]\)</span> be:</p><p><span class="math inline">\(h_{a, b}^m(x)=((a x+b) \bmod p) \bmodm\)</span></p><p>choose a,b independently and uniformly at random. h(x) is a2-approximately strongly universal hash function</p><h3 id="multiply-shift">Multiply-shift</h3><p>Let <span class="math inline">\(U=\left[2^w\right]\)</span> and <spanclass="math inline">\(m=2^{\ell}\)</span>. For any odd <spanclass="math inline">\(a \in\left[2^w\right]\)</span> define</p><p><span class="math inline">\(h_a(x):=\left\lfloor\frac{(a x) \bmod2^w}{2^{w-\ell}}\right\rfloor\)</span></p><p>choose a randomly then h is 2-approximately universal hashfunction</p><h3 id="strong-multiply-shift">Strong multiply-shift</h3><figure><img data-src="https://i.imgur.com/2mIS37y.png"alt="image-2023011635100504 PM" /><figcaption aria-hidden="true">image-2023011635100504 PM</figcaption></figure><h2 id="applicationcoordinated-sampling">Application:Coordinatedsampling</h2><h1 id="veb-tree">VEB tree</h1><ul><li>proof of O(lg lg u)</li><li>do some operation on the example of vEB</li></ul><figure><img data-src="https://i.imgur.com/Iij29ei.png"alt="image-2023012440305148 PM" /><figcaption aria-hidden="true">image-2023012440305148 PM</figcaption></figure><h1 id="np-completeness">NP Completeness</h1><ul><li>Definition of verification, languages</li><li>Definition of NP, reduction,NPC</li><li>prove CLIQUE from 3-CNF-SAT</li><li>Prove VERTEX-COVER from CLIQUE</li><li>Prove TSP from HAM-CYCLE</li></ul><p><strong>Definition of a problem</strong>: there's a set I ofinstances and a set S of solutions, a problem is a binary relationbetween I and S</p><p><strong>Definition of a decision problem</strong>: problem whoseresult is Yes or No, so S is {0,1}</p><p>optimal problems can be transformed into decision problems,e.g. youwant to find the shortest path, instead of finding its shortest we caniterate over all the possible results and get the last Yes resultinstance</p><p><strong>Definition of Languages</strong>:</p><ol type="1"><li>Alphabet: a finite set <span class="math inline">\(\Sigma\)</span>of symbols</li><li>language L over <span class="math inline">\(\Sigma\)</span> : a setof strings of symbols from <span class="math inline">\(\Sigma\)</span>,e.g.: <span class="math inline">\(\Sigma=\{a, b, c\}\)</span> and <spanclass="math inline">\(L=\{a, b a, c a b, b b a c, \ldots\}\)</span>. Theempty string is denoted by(epsilon) <spanclass="math inline">\(\epsilon\)</span> and empty language is denoted by(emptyset) <span class="math inline">\(\emptyset\)</span> and allstrings are denoted by <spanclass="math inline">\(\Sigma^*\)</span></li><li>Language acceptance: Let A be an algorithm for a decision problemand denote by <span class="math inline">\(A(x) \in\{0,1\}\)</span>, Aaccepts a string x if A(x) = 1 and rejects a string x if A(x) = 0.Thelanguage accepted by A is<span class="math inline">\(L=\left\{x\in\{0,1\}^* \mid A(x)=1\right\}\)</span> .We say all strings not in Lare rejected by A, so <span class="math inline">\(A(x)=0 \forall x\in\{0,1\}^* \backslash L\)</span>.</li></ol><p><strong>Definition of P and NP:</strong></p><p><span class="math inline">\(P=\left\{L \subseteq\{0,1\}^*\mid\right.\)</span> there exists an algorithm <spanclass="math inline">\(A\)</span> that decides <spanclass="math inline">\(L\)</span> in polynomial time <spanclass="math inline">\(\}\)</span>.</p><p>NP is the class of languages that can be veriﬁed in polynomial time.More precisely, L ∈ NP if and only if there is a polynomial-timeveriﬁcation algorithm A and a constant c such that <spanclass="math inline">\(L=\left\{x \in\{0,1\}^* \mid\right.\)</span> thereis a <span class="math inline">\(y \in\{0,1\}^{*}\)</span> with <spanclass="math inline">\(|y|=O\left(|x|^{c}\right)\)</span> such that <spanclass="math inline">\(\left.A(x, y)=1\right\}\)</span>.</p><p><strong>Verification</strong></p><p>Consider algorithm A taking two parameters, instead of trying to ﬁnda solution to x (which may take a long time), A instead veriﬁes that cis a solution to x.</p><p>The language verified by A is <span class="math inline">\(L=\left\{x\in\{0,1\}^* \mid\right.\)</span> there is a <spanclass="math inline">\(y \in\{0,1\}^*\)</span> such that <spanclass="math inline">\(\left.A(x, y)=1\right\}\)</span>.</p><p><strong>Reducibility</strong></p><p>Language L 1is polynomial-time reducible to language L 2if there is apolynomial-time computible function f ∶ {0, 1} ∗ → {0, 1} ∗ such thatfor all x ∈ {0, 1} ∗ ,<span class="math inline">\(x \in L_1\Longleftrightarrow f(x) \in L_2\)</span>. In this case, we write <spanclass="math inline">\(L_1 \leq p L_2\)</span> , and it shows L1 is noharder to solve than L2.</p><h4 id="prove-clique-from-3-cnf-sat">prove CLIQUE from 3-CNF-SAT</h4><ul><li>Prove NP<ul><li>consider an algorithm A taking two inputs, &lt;G, k &gt; and acertiﬁcate y.</li><li>y speciﬁes a subset V ′ of vertices of G.</li><li>A check that | V ′ | = k and that V ′ is a clique in G.</li><li>This can easily be done in polynomial time.</li></ul></li><li>Prove <span class="math inline">\(3-\mathrm{CNF}-\mathrm{SAT} \leq{}_P\)</span> CLIQUE<ul><li>Given a formula f = C 1∧ C 2∧ . . . ∧ C kin 3-CNF.</li><li>We will construct a graph G such that f is satisﬁable if and only ifG has a clique of size k.</li><li>For each <span class="math inline">\(C_r=\ell_1^r \vee \ell_2^r \vee\ell_3^r\)</span> , we include three vertices to G.</li><li>There is an edge <span class="math inline">\(\left(v_i^r,v_j^s\right)\)</span> in <span class="math inline">\(G\)</span> if andonly if <span class="math inline">\(r \neq s\)</span> and <spanclass="math inline">\(\ell_i^r\)</span> is not the negation of <spanclass="math inline">\(\ell_j^s\)</span>.</li></ul></li><li><figure><img data-src="https://i.imgur.com/zM8753X.png"alt="image-20230118124407756 AM" /><figcaption aria-hidden="true">image-20230118124407756 AM</figcaption></figure></li></ul><p><strong>Prove TSP from HAM-CYCLE</strong></p><ul><li>prove NP<ul><li>consider an algorithm A taking two inputs, G.= &lt;V,E,c&gt; and acertificate y.</li><li>y specifies a tour in G</li><li>A check y's cost and get the minimum</li><li>This can easily be done in polynomial time</li></ul></li><li>Prove <span class="math inline">\(\mathrm{HAM}-\mathrm{CYCLE}\leq_P\)</span> TSP<ul><li><figure><img data-src="https://i.imgur.com/wIZVHAb.png"alt="image-2023011810156956 AM" /><figcaption aria-hidden="true">image-2023011810156956 AM</figcaption></figure></li></ul></li></ul><h1 id="exact-exponential-algorithms">Exact exponential algorithms</h1><ul><li>TSP via DP</li></ul><p>Problem: Given cities <span class="math inline">\(c_1, \ldots,c_n\)</span>, and distances <span class="math inline">\(d_{ij}=d\left(c_i, c_j\right)\)</span>, find tour of minimal length,visiting all cities exactly once.</p><p>We can define a set S which is the subset of the set of points fromc2 to cn and select a ci from set S.Then as we are using DynamicProgramming we need to define the structure OPT[s,ci] = minimum lengthof all paths in <span class="math inline">\(S\cup\left\{c_1\right\}\)</span> that starts from c1, visits all vertexesin S once and ends in ci. Then <span class="math inline">\(\min\left\{\operatorname{OPT}\left[\left\{c_2, \ldots c_n\right\},c_i\right]+d\left(c_i, c_1\right) \mid c_i \in\left\{c_2, \ldots,c_n\right\}\right\}\)</span> is the length of the minimal tour</p><p>We have</p><p>OPT <span class="math inline">\(\left[S, c_i\right]=\begin{cases}d\left(c_1, c_i\right) &amp; \text { if }S=\left\{c_i\right\} \\ \min \left\{\text { OPT }\left[S\backslash\left\{c_i\right\}, c_k\right]+d\left(c_k, c_i\right) \mid c_k\in S \backslash\left\{c_i\right\}\right\} &amp; \text { if}\left\{c_i\right\} \subset S\end{cases}\)</span></p><p>To prove this, we first let e = (ck,ci) to be the last edge on thispath. If k = 1 we just use the distance from c1 to ci. If k &gt; 1 thenthe shortest length through e must be OPT <spanclass="math inline">\(\left[S \backslash\left\{c_i\right\},c_k\right]+d\left(c_k, c_i\right)\)</span>.The shortest such path mustuse the minimum over all <span class="math inline">\(c_k \in S\backslash\left\{c_i\right\}\)</span>.</p><p>So we know the formula is correct and we can get shortet paththrought it.What about time it consume?</p><p>We can get the solution with this method by computing <spanclass="math inline">\(O(n^2*2^n)\)</span> shortest paths.Here I'll givethe proof.</p><p>We enlarge the set where we want to go through from 2 to n-1 and wechoose a set of size n-1 from j citys.Then we need to pick one as thelast.We can observe it's bounded by <spanclass="math inline">\(n^2\)</span> and this one we can add more intothis and this equals to <span class="math inline">\(n^2*2^n\)</span>.And then we return <span class="math inline">\(\min\left\{\operatorname{OPT}\left[\left\{c_2, \ldots c_n\right\},c_i\right]+d\left(c_i, c_1\right) \mid c_i \in\left\{c_2, \ldots,c_n\right\}\right\}\)</span> and we only compute n-1 times at most.</p><p>we assume basic operations take polynomial time in n and thealgorithm costs <span class="math inline">\(O^*(2^n)\)</span>. We alsoneed to specify what <span class="math inline">\(O^*\)</span>​ is</p><p>for any a &gt; 1 we have <spanclass="math inline">\(O(n^c*a^n)\subset O((a+\epsilon)^n)\)</span></p><p>So when comparing exact exponential algorithms the polynomial factorsare mostly irrelevant.</p><p><span class="math inline">\(f(n) \in O^*(g(n)) &lt;=&gt; \exists c\in \mathbb{R}: f(n) \in \mathcal{O}\left(n^c \cdotg(n)\right)\)</span></p><p>So <span class="math inline">\(O^*\)</span> is the same as O butignores polynomial factors.</p><ul><li>Bar fight prevention</li></ul><h1 id="approximation-algorithms">Approximation algorithms</h1><ul><li>approximation ratio</li><li>Vertex cover</li><li>3-CNF-SAT</li></ul><p>易错点：ratio证明，3-SAT写X=sum。</p><p>There are some optimization problems which will take exponential timeto get the exact result, but sometimes a solution which is not that goodis also acceptable, and it will become much faster to get these results.So we need to use approximation algorithms.</p><p><strong>approximation ratio</strong></p><p>we say that an algorithm for an optimization problem has anapproximation ratio of <span class="math inline">\(\rho(n)\)</span> if,for any input of size n:</p><p><span class="math inline">\(\max \left(\frac{C}{C^*},\frac{C^*}{C}\right) \leq \rho(n)\)</span></p><p>If an algorithm achieves an approximation ratio of (n), we call it a<span class="math inline">\(\rho(n)\)</span>-approximationalgorithm.</p><p><strong>Vertex cover</strong></p><p>The following algorithm is a polynomial-time 2-approximationalgorithm:</p><figure><img data-src="https://i.imgur.com/JeozAY1.png"alt="image-20230119124119184 PM" /><figcaption aria-hidden="true">image-20230119124119184 PM</figcaption></figure><p>The running time in worst case is O(|V| + |E|) as we will add allvertexs and remove all edges.Now I'd like to prove it's a2-approximation algorithm:</p><p>First let <span class="math inline">\(C^*\)</span> to be an optimalcover, and let <span class="math inline">\(A \subset E\)</span> be theedges chosen by the algorithm. Each edges have two endpoints and one ofthem must be in <span class="math inline">\(C^*\)</span> ,so <spanclass="math inline">\(|C^*| \ge |A| = |C|/2\)</span> (|C| =returnvertex's number) ,so it's 2-approximate.</p><p><strong>MAX-3-SAT</strong></p><p>There's also another problem called Max-3-CNF which input is someclauses combined with logic connections, the goal is to return anassignment of the variables that maximize the number of clausesevaluating to 1.</p><p>The following algorithm is a polynomial time algorithm:</p><figure><img data-src="https://i.imgur.com/XDOS5Vk.png"alt="image-2023011914701123 PM" /><figcaption aria-hidden="true">image-2023011914701123 PM</figcaption></figure><p>The running time of that is O(n) and n is the number of thevariables. So it is a polynomial algorithm. Now I will prove it is an8/7 approximation algorithm.</p><p>First, let phi<span class="math inline">\(\Phi=C_1 \wedge \ldots\wedge C_n\)</span> and each of the clauses <spanclass="math inline">\(C_i=\ell_1 \vee \ell_2 \vee \ell_3\)</span>.</p><p>So the clause is not satisfied if and only if all three variables are0, in other words <span class="math inline">\(\neg \ell_1 \wedge \neg\ell_2 \wedge \neg \ell_3\)</span>.</p><p>So <span class="math inline">\(\operatorname{Pr}\left[\negC_i\right]=\operatorname{Pr}\left[\neg \ell_1\right] \cdot\operatorname{Pr}\left[\neg \ell_2\right] \cdot\operatorname{Pr}\left[\neg \ell_2\right]=\left(\frac{1}{2}\right)^3=1 /8\)</span></p><p><spanclass="math inline">\(\operatorname{Pr}\left[C_i\right]=1-\operatorname{Pr}\left[\negC_i\right]=1-1 / 8=7 / 8\)</span></p><p>And we define a variable X = <spanclass="math inline">\(\sum_{i=1}^n\left[C_i\right]\)</span> which is thenumber of satisfied clauses</p><p>We want to calculate the expect of X, which is <spanclass="math inline">\(\mathbf{E}[X]=\mathbf{E}\left[\sum_{i=1}^n\left[C_i\right]\right]{=} \sum_{i=1}^n \mathbf{E}\left[C_i\right]=\sum_{i=1}^n \frac{7}{8}=7 n/ 8\)</span></p><p>So we can know in this algorithm C is 7n/8, and the optimal solutionshould be n,so it's approximation ratio is <spanclass="math inline">\(\frac{\mathcal{C}^*}{\mathcal{C}}=\frac{\mathcal{C}^*}{7n / 8} \leq \frac{n}{7 n / 8}=8 / 7\)</span></p><p><strong>TSP</strong></p><p>Last I want to give another algorithm, TSP, given a completeundirected graph and each edge has a capacity. we want to find a minimumweight cycle through all vertices.</p><p>The approx-tsp algorithm is as follows: first it find the minimumspanning tree in the graph, and make a euler tour W along the MST so itgoes through each edge twice,and then we shortcut W to get H and returnit.</p><p>It's a polynomial time algorithm because each step in it consumespolynomial time. Then I'd like to prove it's a 2-approximationproblem.</p><p>Let <span class="math inline">\(H^*\)</span> to be the optimalsolution, then <span class="math inline">\(c(T)\le c((H^*))\)</span>.Andwe know <span class="math inline">\(c(W) = 2c(T)\)</span>, and <spanclass="math inline">\(c(H) \le c(W)\)</span> because of the triangleinequality.</p><p>So we have <span class="math inline">\(c(H) \le 2c(H^*)\)</span> ,and it's proven.</p><h1 id="polygon-triangulation">Polygon triangulation</h1><ul><li>definition of a monotone polygon</li><li>partitioning into monotone pieces</li><li>Triangulating a monotone polygon</li></ul><p>example:<img data-src="https://i.imgur.com/EefMoDj.png"alt="image-2023011934120613 PM" /></p><p>There are some problems like the art gallery problem we need tosolve, and in order to solve the problem we need to first triangulatethe polygon. Then I'll introduce an algorithm that can efficientlytriangulate a simple polygon.</p><p><strong>y-monotone polygon</strong></p><p>In geometry, a polygon <em>P</em> is called<strong>y-monotone</strong> with respect to a horizontal line<em>L</em>, if every line in the boundary of <em>P</em> intersects withL at most twice.</p><p>If we have a y-monotone polygon then it's easy to triangulate it,which I will discuss it later. If the polygon is not y-monotone then weneed to cut it into several parts, I'd like to show how we can doit.</p><p><strong>partitioning</strong></p><p>A simple polygon has several different types of vertices, like start,normal, merge split, and end. From the definition, we can know that apolygon without split and merge and only having one start and one endvertex is a y-monotone polygon, so we need to erase all the merge andsplit vertexes from our polygon.</p><p>First, we need to introduce the idea of sweeping. We construct asweeping horizontal line that goes from top to bottom. As we can onlyexplore the part above the line, we can only erase split vertexes whenit sweeps down and we can erase merge vertexes when the sweep line goesup.</p><p>So, how can we remove the split vertex?</p><p>I'd like to introduce the helper of edges first. The helper for anedge e which has a polygon right of it is the lowest vertex v above thesweep line such that the horizontal line segment connecting e and v areinside the polygon. In another word, it's the first vertex sweep linethat will touch if it goes up.</p><p>We will also need a status structure to store all edges that have thepolygon to the right with their helper and an event list storing allvertices by decreasing y-coordinate. While there are still events in thelist we pop and handle them.</p><p>How do we handle the event?</p><p><strong>Start v: </strong></p><p><img data-src="https://i.imgur.com/kUUD7J2.png" alt="image-2023011940309588 PM" style="zoom:50%;" /></p><p>Insert the counterclockwise incident edge in T with v as thehelper.</p><p><strong>Regular v:</strong></p><p><img data-src="https://i.imgur.com/UARzNQT.png" alt="image-2023011940322092 PM" style="zoom:50%;" /></p><p>If the polygon is right of the two incident edges, then replace theupper edge with the lower edge in T, and make v the helper</p><p>If the polygon is left of the two incident edges , then find the edgee directly left of v , and replace its helper by v</p><p><strong>Merge v:</strong></p><p><img data-src="https://i.imgur.com/RDR9vc9.png" alt="image-2023011940339625 PM" style="zoom:50%;" /></p><p>Remove the edge clockwise from v from T Find the edge e directly leftof v , and replace its helper by v</p><p><strong>Split v:</strong></p><p><img data-src="https://i.imgur.com/LrUGAAq.png" alt="image-2023011940631161 PM" style="zoom:50%;" /></p><ol type="1"><li>add a diagonal from v to the helper of the edge directly left ofv.</li><li>Replace the helper of e by v</li><li>Insert the edge counterclockwise from v in T with v as itshelper</li></ol><p><strong>End v:</strong></p><p>Delete the clockwise incident edge and its helper from T</p><p><strong>How much time does it cost?</strong></p><p>Sorting events costs O(N log N) and if we use a binary search tree asa status structure every event costs O(logn).</p><p>So we partitioned the polygon into several y-monoton polygons, weneed to trangulate it.</p><p><strong>Triangulate algorithm</strong></p><ol type="1"><li>Sort all vertices from top to bottom</li><li>init a stack and push the first two vertices</li><li>take the next vertex, triangulate as much as possible while poppingthe stack and push v into the stack</li></ol><p>It will take O(n) time.</p><p>Probable question: Can we immediately conclude: A simple polygon withn vertices can be triangulated O ( n log n) time?</p><p>We need to argue that all y - monotone polygons together that we willtriangulate have O ( n ) vertices</p><p>Initially we had n edges . We add at most n - 3 diagonals in thesweeps . These diagonals are used on both sides as edges . So allmonotone polygons together have at most 3n - 6 edges , and therefore atmost 3n - 6 vertices</p><p>Hence we can conclude that triangulating all monotone polygonstogether takes only O ( n ) time</p>]]></content>
      
      
      <categories>
          
          <category> UCPH </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>new-in-bootstrap5</title>
      <link href="/2023/01/14/new-in-bootstrap5/"/>
      <url>/2023/01/14/new-in-bootstrap5/</url>
      
        <content type="html"><![CDATA[<ul><li>Nav-bar</li></ul><span id="more"></span><ul><li><p>Nav-bar toggle</p><blockquote><p>before:</p><p>​ data-toggle="" data-target=""</p><p>New:</p><p>​ data-bs-toggle="" data-bs-target=""</p></blockquote></li><li><p>Nav-bar margin</p><blockquote><p>Margin left auto &amp; margin right auto</p><p>ml-auto can make an item be at the right of the nav bar, and mr-autocan make the item be at the left of the nav bar.</p><p>Before:</p><p>​ ml-auto mr-auto</p><p>New:</p><p>​ ms-auto me-auto</p></blockquote></li></ul><p>Ref:https://stackoverflow.com/questions/19733447/bootstrap-navbar-with-left-center-or-right-aligned-items</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bootstrap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>monitor-csgo-item-price</title>
      <link href="/2023/01/06/monitor-csgo-item-price/"/>
      <url>/2023/01/06/monitor-csgo-item-price/</url>
      
        <content type="html"><![CDATA[<p>This article describes how to trace the items in your stock and get asummary of how much you profit/lose from it.</p><ul><li>Use a Web crawler to get the current item price</li><li>Save daily price into sqlite3 database</li><li>Use crontab to run the script daily</li><li>Use cronitor to monitor crontab</li><li>Call system notification after it's done or fail</li><li>Use flask and echarts to visualize the data</li></ul><span id="more"></span><h2 id="use-a-web-crawler-to-get-the-current-item-price">Use a Webcrawler to get the current item price</h2><p>First, log in to the NetEase BUFF platform, and find an item you wantto trace. Open F12 and in Network, you'll find a file named"sell_order?game=csgo&amp;goods_id=xxx". In the preview of the file, youwill find a JSON file containing all the information about itsmarket.</p><p>First, you need to get the cookies and header in "Headers", theheader is its User-Agent.</p><p>Then, use Python to save this information</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;your header&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">cookie_str = <span class="string">&#x27;your cookie&#x27;</span></span><br><span class="line">cookies = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> cookie_str.split(<span class="string">&#x27;;&#x27;</span>):</span><br><span class="line">    name, value = line.strip().split(<span class="string">&#x27;=&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    cookies[name] = value</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Then, define the URLs and the stock you have. The user can be foundby right-clicking the file "sell_order" and selecting "copy-copy linkaddress".</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">urls = &#123;</span><br><span class="line">    <span class="string">&#x27;火神&#x27;</span>: <span class="string">&#x27;https://buff.163.com/api/market/goods/buy_order?game=csgo&amp;goods_id=33976&amp;page_num=1&amp;_=1672999623684&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">stock = &#123;</span><br><span class="line">    <span class="string">&#x27;火神&#x27;</span>: [<span class="number">1099</span>,<span class="number">1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The list in stock value contains the price it originally bought andthe number of items you have.</p><p>Then we use the requests to send the request and get the result. Forthis part, you need to import requests.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name, status <span class="keyword">in</span> stock.items():</span><br><span class="line">        num = status[<span class="number">1</span>]</span><br><span class="line">        url = urls[name]</span><br><span class="line">        oldprice = status[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">while</span> num:</span><br><span class="line">            time.sleep(<span class="number">0.3</span>)</span><br><span class="line">            r = requests.get(url, headers=headers, cookies=cookies)</span><br><span class="line">            data = r.json()</span><br><span class="line">    <span class="comment">#do sth here</span></span><br><span class="line">            num -=<span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="save-daily-price-into-sqlite3-database">Save daily price intosqlite3 database</h2><p>First import sqlite3.</p><p>Connect to database:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db = <span class="string">&#x27;/Users/xuanlang/study/python/csgo.db&#x27;</span></span><br><span class="line">conn = sqlite3.connect(db)</span><br></pre></td></tr></table></figure><p>Start cursor:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c = conn.cursor()</span><br></pre></td></tr></table></figure><p>Create database:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">text_create_table = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE IF NOT EXISTS stock (</span></span><br><span class="line"><span class="string">    Date DATE,</span></span><br><span class="line"><span class="string">    Name TEXT,</span></span><br><span class="line"><span class="string">    CurrentPrice REAL,</span></span><br><span class="line"><span class="string">    OriginalPrice REAL</span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line">c.execute(text_create_table)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>write into the database:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sql_text_insert = <span class="string">&quot;INSERT INTO stock VALUES (&#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;)&quot;</span> % (today,name, curprice, oldprice)</span><br><span class="line">c.execute(sql_text_insert)</span><br></pre></td></tr></table></figure><p>View current profit:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">conn = sqlite3.connect(db)</span><br><span class="line">c = conn.cursor()</span><br><span class="line">sql_text_select = <span class="string">&quot;SELECT SUM(OriginalPrice) FROM stock WHERE date = &#x27;%s&#x27;&quot;</span> % today</span><br><span class="line">c.execute(sql_text_select)</span><br><span class="line">cost = c.fetchall()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(cost)</span><br><span class="line">sql_text_select = <span class="string">&quot;SELECT SUM(CurrentPrice) FROM stock WHERE date = &#x27;%s&#x27;&quot;</span> % today</span><br><span class="line">c.execute(sql_text_select)</span><br><span class="line">cur = c.fetchall()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成本&quot;</span>,cost,<span class="string">&quot;现价&quot;</span>,<span class="built_in">format</span>(cur,<span class="string">&quot;.2f&quot;</span>),<span class="string">&quot;盈利&quot;</span>,<span class="built_in">round</span>(cur-cost,<span class="number">2</span>),<span class="string">&quot;盈利率&quot;</span>,<span class="built_in">round</span>((cur-cost)/cost* <span class="number">100</span>,<span class="number">2</span>),<span class="string">&quot;%&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>There's a point you need to be aware of which are you need todetermine if today's data has been written into the database you justneed to update it, so you need to determine first:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断数据库中是否有今天的数据</span></span><br><span class="line">sql_text_select = <span class="string">&quot;SELECT * FROM stock WHERE date = &#x27;%s&#x27;&quot;</span> % today</span><br><span class="line">c.execute(sql_text_select)</span><br><span class="line">result = c.fetchall()</span><br><span class="line"><span class="keyword">if</span> result:</span><br><span class="line">  update()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  insert()</span><br></pre></td></tr></table></figure><h2 id="use-crontab-to-run-the-script-daily">Use crontab to run thescript daily</h2><p>To run the script automatically you need to use crontab(inmacOS).</p><p>First use <code>crontab -e</code> to write a new cron with the format<code>* * * * * * ~/miniconda3/bin/python3 /Users/xuanlang/study/python/test.py</code></p><p>For more information about cron, you can go tohttps://crontab.guru/</p><p>The crontab's log will be sent to macOS terminal mailbox, use<code>mail</code> to see them.</p><p>You can define cron's environment variables in crontab itself,like:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LANG=nb_NO.UTF-8</span><br><span class="line">LC_ALL=nb_NO.UTF-8</span><br><span class="line"><span class="comment"># m h  dom mon dow   command</span></span><br><span class="line"></span><br><span class="line">* * * * * sleep 5s &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;yo&quot;</span></span><br></pre></td></tr></table></figure><p>There might be some problems occur, to solve them:</p><ol type="1"><li>Count the right number of * !!!</li><li>Check cron's shell and env is the same as your terminal, or it won'tfind some instruction sometimes.</li><li>Use mail to trace the log.</li></ol><h2 id="use-cronitor-to-monitor-crontab">Use cronitor to monitorcrontab</h2><p><ahref="https://cronitor.io/app/welcome?env=production&amp;time=24h">cronitor</a>is a tool that can trace some jobs as well as some other things. We willuse it to monitor cron work.</p><ol type="1"><li>install CronitorCLI</li><li>Run <code>cronitor discover</code> to find cron jobs</li></ol><p>for more information go to its document https://cronitor.io/docs.</p><h2 id="call-system-notification-after-its-done-or-fail">Call systemnotification after it's done or fail</h2><p>to do this you need to import os.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_notification</span>(<span class="params">title, text</span>):</span></span><br><span class="line">  os.system(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">              osascript -e &#x27;display notification &quot;&#123;&#125;&quot; with title &quot;&#123;&#125;&quot;&#x27;</span></span><br><span class="line"><span class="string">              &quot;&quot;&quot;</span>.<span class="built_in">format</span>(text, title))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Usage:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str_result = <span class="string">&quot;成本: %s 现价: %s 盈利: %s 盈利率: %s&quot;</span> % (cost, <span class="built_in">format</span>(cur,<span class="string">&quot;.2f&quot;</span>), <span class="built_in">round</span>(cur-cost,<span class="number">2</span>), <span class="built_in">round</span>((cur-cost)/cost* <span class="number">100</span>,<span class="number">2</span>))</span><br><span class="line">show_notification(<span class="string">&quot;csgo track result&quot;</span>, str_result)</span><br></pre></td></tr></table></figure><p>the system will pop up a notification when it's called.</p><h2 id="use-flask-and-echarts-to-visualize-the-data">Use flask andecharts to visualize the data</h2><h3 id="flask">Flask</h3><p>First, install flask by <code>conda install flask</code></p><p>Then create dirs for flask:</p><ul><li>flask<ul><li>static<ul><li>CSS, js...etc</li></ul></li><li>templates<ul><li>index.html</li></ul></li><li>app.py</li></ul></li></ul><p>in 'app.py ' you need to fetch data from the database, host a serverand pass the data to the front end. Here I made two routes, one is "/"for the Html page and the other is "/stock" to send the JSON data so itcan catch those data and display them in the front end.</p><p>Then run the python file and go to the browser to check if thewebsite works well. several problems may occur, check thesesolutions:</p><ul><li>If the flask is installed correctly. Use <code>flask run</code> inthe flask dir to check this.</li><li>If the index.html is in the templates directory. the dir name mustbe right or it won't be able to find the file.</li><li>If all the other resources like CSS and js files are placed in thestatic directory, otherwise the HTML file may not be able to loadthem.</li></ul><h3 id="echarts">echarts</h3><p>go to the apache <ahref="https://echarts.apache.org/examples/en/index.html">echartswebsite</a> and search for the one you want to use. I used the stackedline chart for my website. Just copy it into the index.html and readabout its data to figure out its usage.</p><p>Import jquery into your HTML and use ajax to get data from the backend. Fit those data into eharts to show the result.</p><p>Then configure the page to make it look better.</p><p>Set the legend's type to scroll can make show less at once on thepage, and set its width and height and top to fit the view.</p><p>Set the grid to adjust the graph's position.</p><p>Set the x-axis and y-axis's names to show their names.</p><p>Set some other thing.</p><h2 id="reference">Reference</h2><ul><li>https://cloud.tencent.com/developer/article/1823287</li><li>https://echarts.apache.org/examples/en/index.html#chart-type-line</li><li>https://getbootstrap.com/docs/5.3/components/navbar/#how-it-works</li><li>https://www.w3cschool.cn/echarts_tutorial/echarts_tutorial-2dbe2cgw.html</li><li>https://www.w3cschool.cn/echarts_tutorial/echarts_tutorial-5c3q2cj7.html</li><li>https://blog.csdn.net/zSY_snake/article/details/105412370</li><li>https://blog.csdn.net/chelen_jak/article/details/81131786</li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> crawler </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning</title>
      <link href="/2022/09/09/Machine-Learning/"/>
      <url>/2022/09/09/Machine-Learning/</url>
      
        <content type="html"><![CDATA[<p>A machine-Learning Learning notes</p><span id="more"></span><h1 id="supervised-learning">Supervised learning</h1><h2 id="linear-regression">Linear regression</h2><h3 id="model">model</h3><p><span class="math display">\[f_{\omega,b}(x) = wx+b\]</span></p><p>change the w and b to optimize the algorithm.</p><h3 id="cost-function">Cost function</h3><p>Used to evaluate the model. The goal is to use cost function tominimize it and to find the best parameters for the model.</p><p>used for linear regression is <span class="math display">\[J(\omega,b) =\frac{1}{2m}\sum_{i=1}^{m}(f_{\omega,b}(x^{(i)})-y^{(i)})^2\]</span> It's related with w and b</p><p>Graph when J is only related to w:</p><p><imgsrc="https://cdn.mathpix.com/snip/images/4PNilhlBG6Ar9npUJvpzHe04Da9TCX2XZTiS9frwkpk.original.fullsize.png" /></p><h3 id="gradient-descent">Gradient descent</h3><p>In a 3D plot which choose w,b as the ground,J(w,b)as the hight.Tofind the best w,b it needs to go down from a "hill" to a "valley". Youlook around and go step by step from the hill untill can't go down anyfurther, that's a valley.</p><h4 id="algorithm">algorithm</h4><p><span class="math display">\[w=w-\alpha \frac{\partial}{\partial w} J(w, b)\]</span> <span class="math display">\[b=b-\alpha \frac{\partial}{\partial b} J(w, b)\]</span></p><p><span class="math inline">\(\alpha\)</span> means "Learning rate",which controls how largh you take for each step downhill.</p><p>You need to update w and b simultaneously, the correct method are asfollows: <span class="math display">\[\begin{aligned}&amp;t m p_{-} w=w-\alpha \frac{\partial}{\partial w} J(w, b) \\&amp;{tmp_{-}b=b-\alpha \frac{\partial}{\partial b} J\left(w,b\right)}\\&amp;w=t m p_{-} w\\&amp;b=tmp_{-}b\end{aligned}\]</span> Repeat doing this untile w and b convergence.</p><p>Why use derivative?</p><p>The learning rate is always positive,so if the derivative isnegative, to make the J(w,b) smaller you need to increase w. If thederivative is positive, you need to decreate w.</p><p>The cost function usually shape like a bowl, so it only have oneminimum point.</p><h2 id="multiple-linear-regression">Multiple Linear regression</h2><p><span class="math inline">\(\mathrm{x}_j\)</span> = <spanclass="math inline">\(j^{\text {th }}\)</span> feature</p><p><spanclass="math inline">\(\overrightarrow{\mathrm{x}}^{(i)}\)</span> =features of <span class="math inline">\(i^{\text {th }}\)</span>training example, this is a vector</p><p><span class="math inline">\(\mathrm{X}_j^{(i)}\)</span> = value offeature j in <span class="math inline">\(i^{\text {th }}\)</span>training example</p><h3 id="model-1">Model:</h3><p><span class="math display">\[f_{w, b}(x)=w_1 x_1+w_2 x_2+\cdots+w_n x_n+b\]</span></p><p><spanclass="math inline">\(\vec{\omega}=\left[\begin{array}{lllll}w_1 &amp;w_2 &amp; w_3 &amp; \ldots &amp; w_n\end{array}\right]\)</span></p><p>It can be rewritten as:</p><p><span class="math inline">\(f_{\overrightarrow{\mathrm{w}},b}(\overrightarrow{\mathrm{x}})=\overrightarrow{\mathrm{w}} \cdot\overrightarrow{\mathrm{x}}+b\)</span></p><h3 id="vectorization">Vectorization</h3><p>overall: use numpy as much as possible to make the program runfaster.</p><p>Without vectorization you need to use for loop to calculate f</p><p>With vectorization you can use np.dot(w,x) to get the result.</p><h3 id="multiple-gradient-descent">Multiple Gradient descent</h3><p>Repeat{</p><p><span class="math inline">\(\left.w_1=w_1-\alpha \frac{1}{m}\sum_{i=1}^m\left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)-y^{(i)}\right)x_1^{(i)}\right)\)</span></p><p>​ =&gt;<span class="math inline">\(\frac{\partial}{\partial w_1}J(\overrightarrow{\mathrm{w}}, b)\)</span></p><p><span class="math inline">\(\vdots\)</span></p><p><span class="math inline">\(w_n=w_n-\alpha \frac{1}{m}\sum_{i=1}^m\left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)-y^{(i)}\right)x_n^{(i)}\)</span></p><p><span class="math inline">\(b=b-\alpha \frac{1}{m}\sum_{i=1}^m\left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)-y^{(i)}\right)\)</span></p><p>simultaneously update <span class="math inline">\(w_j(\)</span> for<span class="math inline">\(j=1, \cdots, n)\)</span> and <spanclass="math inline">\(b\)</span></p><p>}</p><h3 id="feature-scaling">Feature scaling</h3><p>Choose proper w1,w2...can make gradient descent faster.</p><h2 id="logistic-regression">Logistic regression</h2><p>use sigmoid function to make classifition.</p><p>Sigmoid function:</p><p><span class="math inline">\(g(z)=\frac{1}{1+e^{-z}} \quad0&lt;g(z)&lt;1\)</span></p><p>Logistic regression model: <span class="math display">\[z=\overrightarrow{\mathrm{w}} \cdot \overrightarrow{\mathrm{x}}+b\\g(z)=\frac{1}{1+e^{-z}}\]</span></p><h3 id="decision-boundary">Decision boundary</h3><p>choose a threshold to determin whether <spanclass="math inline">\(\hat y\)</span> is 0 or 1.</p><p>Normally use when <spanclass="math inline">\(z=\overrightarrow{\mathrm{w}} \cdot\overrightarrow{\mathrm{x}}+b=0\)</span> when it's a linearsituation.</p><p>When it's a non-linear situation, use this one <spanclass="math inline">\(z=x_1^2+x_2^2-1=0\)</span></p><h3 id="costlost-function">Cost/Lost function</h3><p>Previous: <span class="math inline">\(J(\overrightarrow{\mathrm{w}},b)=\frac{1}{m} \sum_{i=1}^m\frac{1}{2}\left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)-y^{(i)}\right)^2\)</span>squared error.</p><p>It's cost function is a non-convex, so need a new function.</p><p>new version: <span class="math display">\[L\left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right),y^{(i)}\right)=\left\{\begin{aligned}-\log \left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)\right) &amp; \text { if} y^{(i)}=1 \\-\log \left(1-f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)\right) &amp; \text { if} y^{(i)}=0\end{aligned}\right.\]</span></p><figure><img data-src="https://i.imgur.com/zRvpK1r.png"alt="image-2022101512523502 AM" /><figcaption aria-hidden="true">image-2022101512523502 AM</figcaption></figure><p>simplified version: <span class="math display">\[L\left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right),y^{(i)}\right)=-y^{(i)} \log \left(f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)\right)-\left(1-y^{(i)}\right)\log \left(1-f_{\overrightarrow{\mathrm{w}},b}\left(\overrightarrow{\mathrm{x}}^{(i)}\right)\right)\]</span> It's cost function: <span class="math display">\[J(\mathbf{w}, b)=\frac{1}{m}\sum_{i=0}^{m-1}\left[\operatorname{loss}\left(f_{\mathbf{w},b}\left(\mathbf{x}^{(i)}\right), y^{(i)}\right)\right]\]</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_cost_logistic</span>(<span class="params">X, y, w, b</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Computes cost</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      X (ndarray (m,n)): Data, m examples with n features</span></span><br><span class="line"><span class="string">      y (ndarray (m,)) : target values</span></span><br><span class="line"><span class="string">      w (ndarray (n,)) : model parameters  </span></span><br><span class="line"><span class="string">      b (scalar)       : model parameter</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">      cost (scalar): cost</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    m = X.shape[<span class="number">0</span>]</span><br><span class="line">    cost = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        z_i = np.dot(X[i],w) + b</span><br><span class="line">        f_wb_i = sigmoid(z_i)</span><br><span class="line">        cost +=  -y[i]*np.log(f_wb_i) - (<span class="number">1</span>-y[i])*np.log(<span class="number">1</span>-f_wb_i)</span><br><span class="line">             </span><br><span class="line">    cost = cost / m</span><br><span class="line">    <span class="keyword">return</span> cost</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="overfitting">overfitting</h3><ul><li>Underfit:the model doesn't fit the training set well.(high bias inprediction result)</li><li>Overfit : the model fits the training set extremely well.(highvariance in result, small change cause huge difference)</li></ul><p>How to deal with it?</p><ul><li>collect more training examples</li><li>Reduce features to use</li><li>reduce the size of parameters(regularization)</li></ul><h3 id="gradient-decent">Gradient decent</h3><p>repeat until convergence: { <span class="math display">\[\begin{aligned}&amp;b:=b-\alpha \frac{\partial J(\mathbf{w}, b)}{\partial b} \\&amp;w_j:=w_j-\alpha \frac{\partial J(\mathbf{w}, b)}{\partial w_j}\quad \text { for } \mathrm{j}:=0 . . \mathrm{n}-1\end{aligned}\]</span> } <span class="math display">\[\begin{gathered}\frac{\partial J(\mathbf{w}, b)}{\partial b}=\frac{1}{m}\sum_{i=0}^{m-1}\left(f_{\mathbf{w},b}\left(\mathbf{x}^{(i)}\right)-\mathbf{y}^{(i)}\right) \\\frac{\partial J(\mathbf{w}, b)}{\partial w_j}=\frac{1}{m}\sum_{i=0}^{m-1}\left(f_{\mathbf{w},b}\left(\mathbf{x}^{(i)}\right)-\mathbf{y}^{(i)}\right) x_j^{(i)}\end{gathered}\]</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_gradient_logistic</span>(<span class="params">X, y, w, b</span>):</span> </span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Computes the gradient for linear regression </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      X (ndarray (m,n): Data, m examples with n features</span></span><br><span class="line"><span class="string">      y (ndarray (m,)): target values</span></span><br><span class="line"><span class="string">      w (ndarray (n,)): model parameters  </span></span><br><span class="line"><span class="string">      b (scalar)      : model parameter</span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">      dj_dw (ndarray (n,)): The gradient of the cost w.r.t. the parameters w. </span></span><br><span class="line"><span class="string">      dj_db (scalar)      : The gradient of the cost w.r.t. the parameter b. </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    m,n = X.shape</span><br><span class="line">    dj_dw = np.zeros((n,))                           <span class="comment">#(n,)</span></span><br><span class="line">    dj_db = <span class="number">0.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        f_wb_i = sigmoid(np.dot(X[i],w) + b)          <span class="comment">#(n,)(n,)=scalar</span></span><br><span class="line">        err_i  = f_wb_i  - y[i]                       <span class="comment">#scalar</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            dj_dw[j] = dj_dw[j] + err_i * X[i,j]      <span class="comment">#scalar</span></span><br><span class="line">        dj_db = dj_db + err_i</span><br><span class="line">    dj_dw = dj_dw/m                                   <span class="comment">#(n,)</span></span><br><span class="line">    dj_db = dj_db/m                                   <span class="comment">#scalar</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> dj_db, dj_dw  </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradient_descent</span>(<span class="params">X, y, w_in, b_in, cost_function, gradient_function, alpha, num_iters, lambda_</span>):</span> </span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Performs batch gradient descent to learn theta. Updates theta by taking </span></span><br><span class="line"><span class="string">    num_iters gradient steps with learning rate alpha</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      X :    (array_like Shape (m, n)</span></span><br><span class="line"><span class="string">      y :    (array_like Shape (m,))</span></span><br><span class="line"><span class="string">      w_in : (array_like Shape (n,))  Initial values of parameters of the model</span></span><br><span class="line"><span class="string">      b_in : (scalar)                 Initial value of parameter of the model</span></span><br><span class="line"><span class="string">      cost_function:                  function to compute cost</span></span><br><span class="line"><span class="string">      alpha : (float)                 Learning rate</span></span><br><span class="line"><span class="string">      num_iters : (int)               number of iterations to run gradient descent</span></span><br><span class="line"><span class="string">      lambda_ (scalar, float)         regularization constant</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">      w : (array_like Shape (n,)) Updated values of parameters of the model after</span></span><br><span class="line"><span class="string">          running gradient descent</span></span><br><span class="line"><span class="string">      b : (scalar)                Updated value of parameter of the model after</span></span><br><span class="line"><span class="string">          running gradient descent</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># number of training examples</span></span><br><span class="line">    m = <span class="built_in">len</span>(X)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># An array to store cost J and w&#x27;s at each iteration primarily for graphing later</span></span><br><span class="line">    J_history = []</span><br><span class="line">    w_history = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_iters):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Calculate the gradient and update the parameters</span></span><br><span class="line">        dj_db, dj_dw = gradient_function(X, y, w_in, b_in, lambda_)   </span><br><span class="line"></span><br><span class="line">        <span class="comment"># Update Parameters using w, b, alpha and gradient</span></span><br><span class="line">        w_in = w_in - alpha * dj_dw               </span><br><span class="line">        b_in = b_in - alpha * dj_db              </span><br><span class="line">       </span><br><span class="line">        <span class="comment"># Save cost J at each iteration</span></span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="number">100000</span>:      <span class="comment"># prevent resource exhaustion </span></span><br><span class="line">            cost =  cost_function(X, y, w_in, b_in, lambda_)</span><br><span class="line">            J_history.append(cost)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Print cost every at intervals 10 times or as many iterations if &lt; 10</span></span><br><span class="line">        <span class="keyword">if</span> i% math.ceil(num_iters/<span class="number">10</span>) == <span class="number">0</span> <span class="keyword">or</span> i == (num_iters-<span class="number">1</span>):</span><br><span class="line">            w_history.append(w_in)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Iteration <span class="subst">&#123;i:<span class="number">4</span>&#125;</span>: Cost <span class="subst">&#123;<span class="built_in">float</span>(J_history[-<span class="number">1</span>]):<span class="number">8.2</span>f&#125;</span>   &quot;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> w_in, b_in, J_history, w_history <span class="comment">#return w and J,w history for graphing</span></span><br></pre></td></tr></table></figure><h2 id="decision-tree">Decision tree</h2><p>A predict which features are discrete values.</p><p>Questions about the algorithm:</p><ol type="1"><li>How to choose parameters?<ol type="1"><li>Maximize purity</li></ol></li><li>When to stop splitting<ol type="1"><li>When a node is 100% one class</li><li>When splitting a node will result in the tree exceeding a maximumdepth</li><li>When improvements in purity score are below a threshold</li></ol></li></ol><h3 id="use-entropy-to-measure-purity">use Entropy to measurepurity</h3><figure><img data-src="https://i.imgur.com/Orti8J9.png"alt="image-2022110314327111 PM" /><figcaption aria-hidden="true">image-2022110314327111 PM</figcaption></figure><p><span class="math inline">\(\begin{aligned} H\left(p_1\right)&amp;=-p_1 \log _2\left(p_1\right)-p_0 \log _2\left(p_0\right) \\&amp;=-p_1 \log _2\left(p_1\right)-\left(1-p_1\right) \log_2\left(1-p_1\right) \end{aligned}\)</span></p><h1 id="neural-networks">Neural Networks</h1><h2 id="neural-network-model">Neural Network Model</h2><p>activation function:<spanclass="math inline">\(a=f(x)=\frac{1}{1+e^{-(w x+b)}}\)</span></p><p>If a vector X begin input into the first layer which consists threeneurons.</p><p>Each neuron will return <spanclass="math inline">\(a_1=g(\overrightarrow{\mathrm{w}} \cdot\overrightarrow{\mathrm{x}}+b)*weight\)</span> and composits a vector ofthree numbers, which is the output of this layer.</p><p><span class="math inline">\(w_1^{\text {[1] }}\)</span> denotes thefirst layer's first w.</p><h2 id="mutiple-layers-neural-networks">Mutiple layers neuralnetworks</h2><p>Notation:</p><p><span class="math inline">\(a_j^{[l]}=g\left(\vec{w}_j^{[l]} \cdot\vec{a}^{[l-1]}+b_j^{[l]}\right)\)</span></p><figure><img data-src="https://i.imgur.com/k006QFs.png"alt="image-20221018111702509 AM" /><figcaption aria-hidden="true">image-20221018111702509 AM</figcaption></figure><h2 id="forward-propagation">Forward propagation</h2><figure><img data-src="https://i.imgur.com/chW6p6H.png"alt="image-2022101815035177 PM" /><figcaption aria-hidden="true">image-2022101815035177 PM</figcaption></figure><h3 id="specific-calculation">specific calculation:</h3><p><span class="math inline">\(x=n p \cdot\operatorname{array}([200,17])\)</span></p><p><spanclass="math inline">\(a_1^{[1]}=g\left(\overrightarrow{\mathrm{w}}_1^{[1]}\cdot \overrightarrow{\mathrm{x}}+b_1^{[1]}\right)\)</span></p><p>w1_1 <span class="math inline">\(=\)</span> np. array <spanclass="math inline">\(([1,2])\)</span> b1_1 <spanclass="math inline">\(=\)</span> np. <spanclass="math inline">\(\operatorname{array}([-1])\)</span> <spanclass="math inline">\(z 11=n p \cdot \operatorname{dot}(w 11, x)+b11\)</span> a1_1 = sigmoid <span class="math inline">\(\left(z1_{-1}\right)\)</span></p><p>and then a1 = np. array( [a1_1,a1_2,a1_3]</p><h2 id="training-a-neural-network">Training a neural network</h2><ol type="1"><li>specify how to compute output</li><li>specify loss and cost</li><li>Train to minimize lost</li></ol><h3 id="create-model">Create model</h3><p>use sequence and dense func</p><h3 id="train-model">Train model</h3><p>repeat { <span class="math display">\[\begin{aligned}&amp;w_j^{[l]}=w_j^{[l]}-\alpha \frac{\partial}{\partial w_j}J(\overrightarrow{\mathrm{w}}, b) \\&amp;b_j^{[l]}=b_j^{[l]}-\alpha \frac{\partial}{\partial b j}J(\overrightarrow{\mathrm{w}}, b)\end{aligned}\]</span> <span class="math display">\[\text { \} }\]</span></p><p><code>model.fit(X,y,epochs=100)</code></p><h2 id="activation-functions">Activation functions</h2><p>Linear activation function <spanclass="math inline">\(g(z)=z\)</span></p><p>Sigmoid <spanclass="math inline">\(g(z)=\frac{1}{1+e^{-z}}\)</span></p><p>ReLU <span class="math inline">\(g(z)=\max (0, z)\)</span></p><figure><img data-src="https://i.imgur.com/5AyiP2i.png"alt="image-2022101985528546 PM" /><figcaption aria-hidden="true">image-2022101985528546 PM</figcaption></figure><h3 id="how-to-choose">How to choose?</h3><p>output layer:</p><p>Binary cassification: Signoid</p><p>Regression:Linear activation</p><p>Regression with all positive:ReLU</p><p>Hidden layer</p><p>in hidden layer mostly ReLU</p><h2 id="multiclass-classification">Multiclass Classification</h2><h3 id="softmax-regression">Softmax regression</h3><p><span class="math inline">\(z_1=\overrightarrow{\mathrm{w}}_1 \cdot\overrightarrow{\mathrm{x}}+b_1\)</span></p><p><spanclass="math inline">\(a_1=\frac{e^{z_1}}{e^{z_1}+e^{z_2}+e^{z_3}+e^{z_4}}\)</span><span class="math display">\[z_j=\overrightarrow{\mathrm{w}}_j \cdot \overrightarrow{\mathrm{x}}+b_j\quad \mathrm{j}=1, \ldots, \mathrm{N}\]</span></p><p><span class="math display">\[a_j=\frac{e^{z_j}}{\sum_{k=1}^N e^{z_k}}=\mathrm{P}(\mathrm{y}=j \mid\overrightarrow{\mathrm{x}})\]</span></p><h3 id="cost">Cost</h3><p><span class="math display">\[a_N=\frac{e^{z_N}}{e^{z_1}+e^{z_2}+\cdots+e^{z_N}}=P(y=N \mid\overrightarrow{\mathrm{x}})\]</span></p><p><span class="math display">\[\operatorname{loss}\left(a_1, \ldots, a_N,y\right)=\left\{\begin{array}{lc}-\log a_1 &amp; \text { if } y=1 \\-\log a_2 &amp; \text { if } y=2 \\&amp; \vdots \\-\log a_N &amp; \text { if } y=N\end{array}\right.\]</span></p><h3 id="programming">Programming</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Dense(units=<span class="number">10</span>,activation=<span class="string">&#x27;softmax&#x27;</span>)<span class="comment">#output layer</span></span><br><span class="line"></span><br><span class="line">model.<span class="built_in">compile</span>(loss=SparseCategoricalCrossentropy())</span><br></pre></td></tr></table></figure><p>Better way(recommended):</p><p>To make it more numerically accurate.</p><p>From <span class="math inline">\(\operatorname{loss}=-y \log(a)-(1-y) \log (1-a)\)</span></p><p>to <span class="math inline">\(\operatorname{loss}=-y \log\left(\frac{1}{1+e^{-z}}\right)-(1-y) \log\left(1-\frac{1}{1+e^{-z}}\right)\)</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Dense(units=<span class="number">10</span>,activation=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">compile</span>(loss=SparseCategoricalCrossEntropy(from_logits=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure><h2 id="optimization-and-diagnosing">Optimization and Diagnosing</h2><h3 id="adam-algorithm">Adam algorithm</h3><p>Adaptive Moment estimation</p><p>automatically change alpha while doing learning.Has a lot of alphafor different parameters.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">compile</span>(tf.keras.optimizers.Adam(learning_rate=<span class="number">1e-3</span>))</span><br></pre></td></tr></table></figure><h2 id="layer-types">Layer types</h2><h3 id="dense-layer">Dense Layer</h3><p>output is a function of all the activation function result</p><h3 id="convolutional-layer">Convolutional Layer</h3><p>Each neuron only looks at part of the previous layer's output</p><h1 id="unsupervised-learning">Unsupervised Learning</h1><h2 id="pcaprinciple-component-analysis">PCA(principle componentanalysis)</h2><h3 id="theoretical-part">theoretical part</h3><p>It's propose is to reduce dimension of input data. Suppose we havesample X with n dimensions <span class="math inline">\(X=\left\{x_0,x_1, \ldots, x_m\right\}\)</span> and we want to have a transformation<span class="math inline">\(y=P x\)</span> in which P is a matrix. Thenwe get some data Y with k dimensions <spanclass="math inline">\(Y=\left\{y_0, y_1, \ldots, y_m\right\}\)</span>.</p><ol type="1"><li><p>preprocessing data</p><p>normolize input data by subtracting their mean of eachcolumn.</p></li><li><p>Do the PCA as follows:</p></li></ol><p>we need to make sure these two laws of PCA:</p><ul><li>After reducing, each of the dimensions should be independent, whichmeans every axis are orthogonal after PCA.</li><li>maximize the variance of each dimensions, which means keeping theoriginal data as much as possible.</li></ul><p>First we can denote the covariance matrix after transportation as<span class="math inline">\(B_{k \times k}=\frac{1}{m} Y Y^T\)</span> ,to make each dimensions independent B should be a diagonal matrix, whichmeans it's all 0 except for it's diagonal.</p><p>Let's substitute this equation <span class="math inline">\(y=Px\)</span> into the equation <span class="math inline">\(B_{k \timesk}=\frac{1}{m} Y Y^T\)</span> and get: <span class="math display">\[B_{k \times k}=\frac{1}{m} Y Y^T=\frac{1}{m} P X(P X)^T=P \frac{1}{m} XX^T P^T=P_{k \times n} C_{n \times n} P_{n \times k}^T\]</span> in which <span class="math inline">\(C_{n \timesn}=\frac{1}{m} X X^T\)</span> is the covariance matrix of trainingdata.</p><p>Use eigenvalue decomposition on C and get <spanclass="math inline">\(D_{n \times n}=Q_{n \times n} C_{n \times n} Q_{n\times n}^T\)</span> and D is a diagonal matrix.</p><p>So we can know P is a matrix composed by k-th big eigenvectors inline. Each item in B is the eigenvalues sorted in descending order.Eigenvalues shows the degree of confidence of each eigenvectors.</p><h3 id="practical-part">practical part</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line">pca = PCA(n_components=<span class="literal">None</span>, copy=<span class="literal">True</span>, whiten=<span class="literal">False</span>)</span><br><span class="line">pca.fit(X)</span><br></pre></td></tr></table></figure><p>parameters:</p><blockquote><p>n_ components : the component number needs to be kept in theresult.</p><p>​ None: keep all components ​ int : number of components ​ String:choose components automatically</p><p>copy: whether keep the original data</p><p>​ true : original data keep same ​ false: original data changes intolower dimension</p><p>whiten: if whiten the data</p></blockquote><p>pca's parameters :</p><blockquote><p>components_ : return those includes max variance.</p><p>explained_variance_ratio : return their variance's percentage</p><p>n_ components_ :return the number of components</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pca = PCA()</span><br><span class="line">pca.fit(normed)</span><br><span class="line">x = pca.components_</span><br><span class="line">pca_2_compo = pca.components_[<span class="number">0</span>:<span class="number">2</span>, :]</span><br><span class="line">mapped_input = np.dot(normed, pca_2_compo.T)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">explained_variance = pca.explained_variance_ratio_</span><br><span class="line">top_10 = np.<span class="built_in">sum</span>(explained_variance[:<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line">plt.plot(np.cumsum(pca.explained_variance_ratio_))</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of components&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;explained variance&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Explained Variance&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(np.arange(<span class="number">1</span>,<span class="number">65</span>), np.log(pca.explained_variance_ratio_), <span class="string">&#x27;r--&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of components&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;eigenspectrum&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Eigenspectrum&#x27;</span>)</span><br><span class="line"></span><br><span class="line">top5 = pca.components_[:<span class="number">5</span>]</span><br><span class="line">top5 = top5.reshape(<span class="number">5</span>,<span class="number">8</span>,<span class="number">8</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">5</span>,i+<span class="number">1</span>)</span><br><span class="line">    plt.imshow(top5[i], cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br></pre></td></tr></table></figure><figure><img data-src="https://i.imgur.com/ehen9BU.png"alt="image-2022101813109545 AM" /><figcaption aria-hidden="true">image-2022101813109545 AM</figcaption></figure><figure><img data-src="https://i.imgur.com/BR91KWS.png"alt="image-2022101813118956 AM" /><figcaption aria-hidden="true">image-2022101813118956 AM</figcaption></figure><figure><img data-src="https://i.imgur.com/EqBTzcH.png"alt="image-2022101813125171 AM" /><figcaption aria-hidden="true">image-2022101813125171 AM</figcaption></figure><h2 id="kmeans">Kmeans</h2><p>used for clustering.</p><h1 id="tensorflow">TensorFlow</h1><h2 id="simple-example">Simple example:</h2><figure><img data-src="https://i.imgur.com/gGdUowO.png"alt="image-2022101835321992 PM" /><figcaption aria-hidden="true">image-2022101835321992 PM</figcaption></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([[<span class="number">200.0</span>,<span class="number">17.0</span>]])</span><br><span class="line">layer_1 = Dense(units=<span class="number">3</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">a1 = layer_1(x)</span><br><span class="line">layer_2 = Dense(units=<span class="number">1</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">a2 = layer_2(a1)</span><br><span class="line"><span class="keyword">if</span> a2 &gt;= <span class="number">0.5</span>:</span><br><span class="line">  yhat = <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  yhat = <span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="train-a-neural-network">Train a neural network:</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">layer_1 = Dense(units=<span class="number">3</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">layer_2 = Dense(units=<span class="number">1</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">model = Sequential([layer_1,layer_2])</span><br><span class="line">model.<span class="built_in">compile</span>(...)</span><br><span class="line">model.fit(x,y)<span class="comment">#x is data, y is label</span></span><br><span class="line">model.predict(x_new)<span class="comment"># get the new data </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Or in a simple way:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">model = Sequential([</span><br><span class="line">  Dense(units=<span class="number">3</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>),</span><br><span class="line">  Dense(units=<span class="number">1</span>,activation=<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>in compile we need to specify loss function.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">compile</span>(</span><br><span class="line"> loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=<span class="literal">True</span>),</span><br><span class="line">    optimizer=tf.keras.optimizers.Adam(<span class="number">0.01</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MachineLearning </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>conda相关使用</title>
      <link href="/2022/08/16/conda%E7%9B%B8%E5%85%B3%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/08/16/conda%E7%9B%B8%E5%85%B3%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>在管理本地Python环境的时候经常用到的就是conda，它可以简单快捷地切换Python环境。</p><span id="more"></span><h1 id="安装">1. 安装</h1><p>我之前使用过完整版的Anaconda，但是感觉有点太大了，并且也用不到哪些功能，所以就用miniconda来管理。</p><p>下载链接：</p><p>https://docs.conda.io/en/latest/miniconda.html</p><h1 id="指令">2. 指令</h1><ul><li><p>查看当前所有环境<code>conda env list</code></p></li><li><p>创建新的环境<code>conda create -n ENVNAME python=3.10</code></p></li><li><p>删除环境 <code>conda remove -n ENVNAME --all</code></p></li><li><p>克隆环境<code>conda create --clone ENVNAME -n NEWENV</code></p></li><li><p>安装包<code>conda install xxx</code></p></li><li><p>删除包<code>conda uninstall xxx</code></p></li><li><p>查看包<code>conda list</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> conda </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>下载kindle购买书籍</title>
      <link href="/2022/06/22/%E4%B8%8B%E8%BD%BDkindle%E8%B4%AD%E4%B9%B0%E4%B9%A6%E7%B1%8D/"/>
      <url>/2022/06/22/%E4%B8%8B%E8%BD%BDkindle%E8%B4%AD%E4%B9%B0%E4%B9%A6%E7%B1%8D/</url>
      
        <content type="html"><![CDATA[<p>随着kindle在大陆退出市场，我们需要把之前购买过的书籍都下载下来以防万一。</p><span id="more"></span><h1 id="批量下载图书">1.批量下载图书</h1><p>访问 <a href="https://z.cn/myk">http://z.cn/myk</a>并登录你的账号，进入电子书列表。把下列js代码保存成书签后在“内容”页点击书签就可以自动批量下载。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript:(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)%7<span class="title">Bif</span>(<span class="params">!<span class="built_in">window</span>.location.hash.startsWith(<span class="string">&#x27;%23%2Fhome%2Fcontent%2FbooksAll&#x27;</span>)</span>)%7<span class="title">Balert</span>(<span class="params"><span class="string">&#x27;Need%20to%20visit%3A%20https%3A%2F%2Fz.cn%2Fmyk&#x27;</span></span>)%3<span class="title">Breturn</span>%3<span class="title">B</span>%7<span class="title">Dif</span>(<span class="params">!confirm(<span class="string">&#x27;Start%20now%3F&#x27;</span>)</span>)<span class="title">return</span>%3<span class="title">Bconst</span>%20<span class="title">h</span>%3<span class="title">Dz</span>%3<span class="title">D</span>%3<span class="title">Ez</span>.<span class="title">replace</span>(<span class="params">%2F%5B%EF%BC%<span class="number">88</span>%EF%BC%<span class="number">89</span>()%<span class="number">22</span>%E2%<span class="number">80</span>%9C%E2%<span class="number">80</span>%9D%E3%<span class="number">80</span>%8A%E3%<span class="number">80</span>%8B%E3%<span class="number">80</span>%<span class="number">90</span>%E3%<span class="number">80</span>%<span class="number">91</span>%3A%EF%BC%9A%3B%EF%BC%9B%EF%BC%8C%2C.%E3%<span class="number">80</span>%<span class="number">81</span>%5C%2F%E2%<span class="number">80</span>%A2%E3%<span class="number">80</span>%<span class="number">82</span>!%EF%BC%<span class="number">81</span>%3F%EF%BC%9F_%<span class="number">26</span>%C2%B7%E2%<span class="number">80</span>%<span class="number">94</span>%5Cs%2B-%5D%2Fg%2C<span class="string">&#x27;&#x27;</span></span>).<span class="title">replace</span>(<span class="params"><span class="string">&#x27;EnglishEdition&#x27;</span>%2C<span class="string">&#x27;&#x27;</span></span>).<span class="title">toLowerCase</span>(<span class="params"></span>)%3<span class="title">Bw</span>%3<span class="title">Dms</span>%3<span class="title">D</span>%3<span class="title">Enew</span>%20<span class="title">Promise</span>(<span class="params">r%3D%3EsetTimeout(r%2Cms)</span>)%2<span class="title">Cn</span>%3<span class="title">Dz</span>%3<span class="title">D</span>%3<span class="title">EparseInt</span>(<span class="params">%<span class="number">24</span>(<span class="string">&#x27;.contentCount_myx&#x27;</span>).text().match(%2F(%5Cd%2B)%2Fg)%5Bz%5D</span>)%2<span class="title">Ca</span>%3<span class="title">Dn</span>(<span class="params"><span class="number">0</span></span>)%2<span class="title">Cp</span>%3<span class="title">Dz</span>%3<span class="title">D</span>%3<span class="title">Econsole</span>.<span class="title">log</span>(<span class="params">z</span>)%3<span class="title">Blet</span>%20<span class="title">c</span>%3<span class="title">D0</span>%2<span class="title">Cv</span>%3<span class="title">D0</span>%2<span class="title">Co</span>%3<span class="title">D0</span>%2<span class="title">Cx</span>%3<span class="title">D</span>%5<span class="title">B</span>%5<span class="title">D</span>%3<span class="title">Basync</span>%20<span class="title">function</span>%20<span class="title">d</span>(<span class="params"></span>)%7<span class="title">Blet</span>%20<span class="title">ls</span>%3<span class="title">D</span>%24(<span class="params"><span class="string">&#x27;.contentTableListRow_myx%20li&#x27;</span></span>)%2<span class="title">Cl</span>%3<span class="title">Dls</span>.<span class="title">length</span>%2<span class="title">Cs</span>%3<span class="title">Dn</span>(<span class="params"><span class="number">2</span></span>)%3<span class="title">Bif</span>(<span class="params">l%3C200%<span class="number">26</span>%26s%3Ca</span>)%7<span class="title">Bwindow</span>.<span class="title">scrollTo</span>(<span class="params"><span class="number">0</span>%2C%<span class="number">24</span>(<span class="string">&#x27;body&#x27;</span>).outerHeight()</span>)%3<span class="title">B</span>%7<span class="title">Delse</span>%7<span class="title">Bc</span>%2<span class="title">B</span>%3<span class="title">Dl</span>%3<span class="title">Bfor</span>(<span class="params"><span class="keyword">const</span>%20j%20of%20ls.get()</span>)%7<span class="title">Bconst</span>%20<span class="title">t</span>%3<span class="title">D</span>%24(<span class="params">j</span>).<span class="title">find</span>(<span class="params"><span class="string">&#x27;div%5Bbo-text%3D%22tab.title%22%5D&#x27;</span></span>).<span class="title">text</span>(<span class="params"></span>)%3<span class="title">Bp</span>(<span class="params"><span class="string">&#x27;Downloading%3A%20&#x27;</span>%2Bt</span>)%3<span class="title">B</span>%24(<span class="params">j</span>).<span class="title">find</span>(<span class="params"><span class="string">&#x27;button%5Baria-label%3D%22actions%22%5D&#x27;</span></span>).<span class="title">click</span>(<span class="params"></span>)%3<span class="title">Bconst</span>%20<span class="title">u</span>%3<span class="title">D</span>%24(<span class="params"><span class="string">&#x27;%23contentAction_download_myx&#x27;</span></span>)%3<span class="title">Bif</span>(<span class="params">u.is(<span class="string">&#x27;%3Ahidden&#x27;</span>)</span>)%7<span class="title">Bo</span>%2<span class="title">B</span>%3<span class="title">D1</span>%3<span class="title">Bp</span>(<span class="params"><span class="string">&#x27;sample%2C%20ignore&#x27;</span></span>)%3<span class="title">Bcontinue</span>%3<span class="title">B</span>%7<span class="title">Dif</span>(<span class="params">x.length%<span class="number">26</span>%26x.includes(h(t))</span>)%7<span class="title">Bo</span>%2<span class="title">B</span>%3<span class="title">D1</span>%3<span class="title">Bp</span>(<span class="params"><span class="string">&#x27;duplicate%2C%20ignore&#x27;</span></span>)%3<span class="title">Bcontinue</span>%3<span class="title">B</span>%7<span class="title">Du</span>.<span class="title">click</span>(<span class="params"></span>)%3<span class="title">Bif</span>(<span class="params">%<span class="number">24</span>(<span class="string">&#x27;div%5Bng-show%3D%22noDeviceEligible%22%5D&#x27;</span>).is(<span class="string">&#x27;%3Avisible&#x27;</span>)</span>)%7<span class="title">Bconst</span>%20<span class="title">m</span>%3<span class="title">D</span>&#x27;<span class="title">No</span>%20<span class="title">available</span>%20<span class="title">Kindle</span>%20<span class="title">device</span>.&#x27;%3<span class="title">Balert</span>(<span class="params">m</span>)%3<span class="title">Bp</span>(<span class="params">m%2B<span class="string">&#x27;%20Exit.&#x27;</span></span>)%3<span class="title">Breturn</span>%3<span class="title">B</span>%7<span class="title">D</span>%24(<span class="params"><span class="string">&#x27;a%5Bid%3D%22dialogButton_ok_myx%20%22&#x27;</span></span>).<span class="title">click</span>(<span class="params"></span>)%3<span class="title">Bv</span>%2<span class="title">B</span>%3<span class="title">D1</span>%3<span class="title">Bp</span>(<span class="params">%60Total%3A%<span class="number">20</span>%<span class="number">24</span>%7Ba%7D%2C%20Done%3A%<span class="number">20</span>%<span class="number">24</span>%7Bv%7D%2C%20Ignore%3A%<span class="number">20</span>%<span class="number">24</span>%7Bo%7D%<span class="number">60</span></span>)%3<span class="title">Bawait</span>%20<span class="title">w</span>(<span class="params"><span class="number">10000</span></span>)%3<span class="title">B</span>%7<span class="title">Dif</span>(<span class="params">s%3D%3Da</span>)%7<span class="title">Bp</span>(<span class="params"><span class="string">&#x27;Done.&#x27;</span></span>)%3<span class="title">Breturn</span>%3<span class="title">B</span>%7<span class="title">Delse</span>%7<span class="title">B</span>%24(<span class="params"><span class="string">&#x27;.contentTableShowMore_myx&#x27;</span></span>).<span class="title">eq</span>(<span class="params"><span class="number">1</span></span>).<span class="title">click</span>(<span class="params"></span>)%3<span class="title">B</span>%7<span class="title">D</span>%7<span class="title">Dawait</span>%20<span class="title">w</span>(<span class="params"><span class="number">2000</span></span>)%3<span class="title">Bawait</span>%20<span class="title">d</span>(<span class="params"></span>)%3<span class="title">B</span>%7<span class="title">Dfunction</span>%20<span class="title">q</span>(<span class="params"></span>)%7<span class="title">Bif</span>(<span class="params">confirm(<span class="string">&#x27;Need%20to%20exclude%20files%3F&#x27;</span>)</span>)%7<span class="title">B</span>%24(<span class="params"><span class="string">&#x27;body&#x27;</span></span>).<span class="title">append</span>(<span class="params"><span class="string">&#x27;%3Cinput%20id%3D%22e%22%20type%3D%22file%22%20style%3D%22display%3Anone%3B%22%20webkitdirectory%3E&#x27;</span></span>)%3<span class="title">Bconst</span>%20<span class="title">e</span>%3<span class="title">D</span>%24(<span class="params"><span class="string">&#x27;%23e&#x27;</span></span>)%3<span class="title">Be</span>.<span class="title">change</span>(<span class="params">(ev)%3D%3E%7Bfor(<span class="keyword">const</span>%20f%20of%20ev.target.files)%7Bx.push(h(f.name.replace(%2F%5C.azw.*%<span class="number">24</span>%2F%2C<span class="string">&#x27;&#x27;</span>)))%3B%7Dd()%3B%7D</span>)%3<span class="title">Be</span>.<span class="title">click</span>(<span class="params"></span>)%3<span class="title">B</span>%7<span class="title">Delse</span>%7<span class="title">Bd</span>(<span class="params"></span>)%3<span class="title">B</span>%7<span class="title">D</span>%7<span class="title">Dq</span>(<span class="params"></span>)%7<span class="title">D</span>)(<span class="params"></span>)</span>;</span><br></pre></td></tr></table></figure><h1 id="解密与转换格式">2.解密与转换格式</h1><p>由于直接从官网下载的图书是DRM加密的，我们需要解密并且更换格式。这里需要用到两个工具：</p><ul><li><strong>下载 Calibre</strong>：<ahref="https://calibre-ebook.com/download">官方下载页面</a> ｜ <ahref="https://github.com/kovidgoyal/calibre/releases">Github发布页</a></li><li><strong>下载 DeDRM 插件</strong>：<ahref="https://github.com/noDRM/DeDRM_tools/releases">分叉版本</a> ｜ <ahref="https://github.com/apprenticeharper/DeDRM_tools/releases">原始版本</a>（已停止维护）</li></ul><p>注意，移除 DRM是为了维护自己的合法权益，为避免触犯版权方的权益，请勿分发到互联网上。为保护个人隐私及电子书文件不被外泄，建议避免使用任何在线形式的DRM 去除工具。</p><p>下载后先安装Calibre，这一步需要选kindle，其他步骤下一步即可。</p><figure><imgsrc="https://img.zhaoxuanlang.cn/v2-e66ea24afe92775b4dc3bc24f3f4fa7a_1440w.jpg"alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><p>DeDRM插件解压缩后有一个DeDRM_plugin.zip文件，去calibre中首选项-插件-从文件加载插件-选择刚刚那个zip文件-确定-确定-选择这个插件-自定义-eInkKindle ebooks-点加号，输入你kindle的 序列号（16位）-保存关闭设置页面</p><figure><imgsrc="https://img.zhaoxuanlang.cn/v2-9b2a9caf7ec2d635a9ad71fec604f9fa_1440w.jpg"alt="选择插件" /><figcaption aria-hidden="true">选择插件</figcaption></figure><p>这里就设置完成了，现在可以把刚刚下好的书籍直接拖进软件中，点上边转换书籍，右上角可以选输出格式，输出即可。</p><figure><imgsrc="https://img.zhaoxuanlang.cn/image-20220622%E4%B8%8A%E5%8D%88121826096.png"alt="image-20220622上午121826096" /><figcaption aria-hidden="true">image-20220622上午121826096</figcaption></figure><h1 id="用脚本提取epub图书">3.用脚本提取epub图书</h1><p>刚刚转换出来的目录格式很不人性化，类似这样：</p><p>-dir -a/a.epub -b/b.epub -c/c.epub</p><p>这样手工选择就很麻烦，所以需要写个脚本来自动遍历，脚本内容如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="comment"># 更改IFS变量，以换号符作为for循环的分隔符</span></span><br><span class="line">oldIFS=<span class="variable">$IFS</span></span><br><span class="line">IFS=$<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">mkdir epubs azw3s</span><br><span class="line"><span class="keyword">for</span> dir1 <span class="keyword">in</span> `ls /Users/zxl/Calibre\ 书库/`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> dir2 <span class="keyword">in</span> `ls /Users/zxl/Calibre\ 书库/<span class="variable">$dir1</span>`</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">cd</span> /Users/zxl/Calibre\ 书库/<span class="variable">$dir1</span>/<span class="variable">$dir2</span></span><br><span class="line">        book=`ls | grep <span class="string">&quot;.epub&quot;</span>`</span><br><span class="line">        <span class="built_in">echo</span> processing <span class="variable">$book</span> .......</span><br><span class="line">        sudo cp <span class="variable">$book</span> ~/epubs/<span class="variable">$book</span></span><br><span class="line">        azw3=`ls | grep <span class="string">&quot;.azw3&quot;</span>`</span><br><span class="line">        <span class="built_in">echo</span> processing <span class="variable">$azw3</span> .......</span><br><span class="line">        sudo cp <span class="variable">$azw3</span> ~/azw3s/<span class="variable">$azw3</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;done&quot;</span></span><br></pre></td></tr></table></figure><p>运行即可自动把epub和azw3文件分类放好。</p>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Amazon-kindle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新建hexo文章的优化操作</title>
      <link href="/2022/06/04/%E6%96%B0%E5%BB%BAhexo%E6%96%87%E7%AB%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%93%8D%E4%BD%9C/"/>
      <url>/2022/06/04/%E6%96%B0%E5%BB%BAhexo%E6%96%87%E7%AB%A0%E7%9A%84%E4%BC%98%E5%8C%96%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>在新建hexo文章的时候需要先进入hexo的目录再新建，而且新建的文章常常不知道该给他加什么标签和分类，还得去网站上看现在有啥。这篇文章介绍了快速新建文章并且显示辅助信息的一系列操作。</p><span id="more"></span><h1 id="显示当前有的标签和分类">显示当前有的标签和分类</h1><p>首先需要获取到所有的信息，由于hexo文章结构都是固定的，因此获得信息页不是很难。</p><p>首先使用</p><figure><img data-src="新建hexo文章的优化操作/image-2023120442339977%20PM.png"alt="image-2023120442339977 PM" /><figcaption aria-hidden="true">image-2023120442339977 PM</figcaption></figure><p>获取到tags和categories之间的文本并且保存在test文件中。<sup><ahref="https://blog.csdn.net/ichen820/article/details/118112985"title="sed截取字符串之间内容">1</a></sup></p><figure><img data-src="新建hexo文章的优化操作/image-2023120441744954%20PM.png"alt="image-2023120441744954 PM" /><figcaption aria-hidden="true">image-2023120441744954 PM</figcaption></figure><p>在观察这个文件的时候我发现里边有很多不需要的内容，所以又使用了</p><figure><img data-src="新建hexo文章的优化操作/image-2023120442416327%20PM.png"alt="image-2023120442416327 PM" /><figcaption aria-hidden="true">image-2023120442416327 PM</figcaption></figure><p>来删除以id和date开头的行并保存在test2中。<sup><ahref="https://os.51cto.com/article/624709.html"title="使用sed删除特定行">2</a></sup></p><figure><img data-src="新建hexo文章的优化操作/image-2023120441909798%20PM.png"alt="image-2023120441909798 PM" /><figcaption aria-hidden="true">image-2023120441909798 PM</figcaption></figure><p>之后再使用<code>sort -n ./test2 | awk '&#123;if($0!=line)print; line=$0&#125;' &gt; test3</code></p><figure><img data-src="新建hexo文章的优化操作/image-2023120442125804%20PM.png"alt="image-2023120442125804 PM" /><figcaption aria-hidden="true">image-2023120442125804 PM</figcaption></figure><p>将数据排序去重得到粗加工产物test3.<sup><ahref="https://cloud.tencent.com/developer/article/1392949?from=15425"title="Linux去重">3</a></sup></p><p>然后使用python来读取这个文件并且进行细分，代码如下</p><figure><img data-src="新建hexo文章的优化操作/image-2023120442536263%20PM.png"alt="image-2023120442536263 PM" /><figcaption aria-hidden="true">image-2023120442536263 PM</figcaption></figure><p>开头的一行是因为在使用脚本调用的时候括号需要转义，如果加上用环境中的python去运行的话也可以实现并且简洁不少。<sup><ahref="https://www.jianshu.com/p/b1a8264c2043"title="编写shell脚本运行python文件">4</a></sup></p><p>最后把他们整合到一个sh文件中：</p><figure><img data-src="新建hexo文章的优化操作/image-2023120442606486%20PM.png"alt="image-2023120442606486 PM" /><figcaption aria-hidden="true">image-2023120442606486 PM</figcaption></figure><p>这个文件要放在_posts目录下运行。</p><p>现在运行new.sh就可以看到结果。</p><figure><img data-src="新建hexo文章的优化操作/image-2023120442654369%20PM.png"alt="image-2023120442654369 PM" /><figcaption aria-hidden="true">image-2023120442654369 PM</figcaption></figure><h1 id="快速新建文章">快速新建文章</h1><p>利用了别名的传参技巧<sup><ahref="https://www.qianjinyike.com/alias-%E5%88%AB%E5%90%8D%E5%91%BD%E4%BB%A4%E6%97%B6%E5%80%99%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%AF%E6%8C%81%E4%BC%A0%E5%8F%82%EF%BC%9F/"title="别名传参">5</a></sup>，具体别名实现如下：</p><p><code>hexo='func()&#123; cd ~/study/newblog/source/_posts/ &amp;&amp; hexo $1 $2 &amp;&amp; sh new.sh &amp;&amp; cd ~&#125;;func'</code></p><p>现在在任何位置都可以使用hexo相关命令，并且创建文件后会先打开这个文章便于编辑，并且提示你当前有的所有信息，最后回到~目录下。</p><h1 id="参考文献">参考文献：</h1>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用meta实现定时跳转链接</title>
      <link href="/2022/05/29/%E4%BD%BF%E7%94%A8meta%E5%AE%9E%E7%8E%B0%E5%AE%9A%E6%97%B6%E8%B7%B3%E8%BD%AC%E9%93%BE%E6%8E%A5/"/>
      <url>/2022/05/29/%E4%BD%BF%E7%94%A8meta%E5%AE%9E%E7%8E%B0%E5%AE%9A%E6%97%B6%E8%B7%B3%E8%BD%AC%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<p>利用了meta标签的一个功能。</p><span id="more"></span><p>HTML：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;5; url=http://www.baidu.com&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>页面将在 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;time&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span> 秒后重定向<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;111.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">legend</span>&gt;</span>health information<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">          height: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">          weight: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;time&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> t = <span class="number">5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeTIme</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        t--;</span><br><span class="line">        num.innerHTML = t;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(<span class="string">&#x27;Time out&#x27;</span>);</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(changeTIme, <span class="number">1000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>统计代码行数</title>
      <link href="/2022/05/26/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E8%A1%8C%E6%95%B0/"/>
      <url>/2022/05/26/%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E8%A1%8C%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>虽然用行数来统计代码量很蠢，但是很多情况下又想看看这个项目中一共有多少行代码，自己数就变得更蠢了，所以需要一个统计行数的小插件。</p><span id="more"></span><h2 id="下载安装">下载安装</h2><p>mac系统使用brew下载<code>brew install cloc</code></p><p>github链接：https://github.com/AlDanial/cloc</p><h2 id="使用">使用</h2><p><code>cloc ./</code>统计当前文件夹行数</p>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码统计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ stack/queue方法集</title>
      <link href="/2022/05/09/c-stack-queue%E6%96%B9%E6%B3%95%E9%9B%86/"/>
      <url>/2022/05/09/c-stack-queue%E6%96%B9%E6%B3%95%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<p>增删查改</p><span id="more"></span><h1 id="stack">stack</h1><figure><img data-src="https://img.zhaoxuanlang.cn/2-1P913101Q4T2.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><h1 id="queue">queue</h1><figure><img data-src="https://img.zhaoxuanlang.cn/2-1P913113140553.jpg" alt="img" /><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>haskell 学习</title>
      <link href="/2022/04/13/haskell-%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/04/13/haskell-%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>haskell笔记</p><span id="more"></span><h1 id="基础">基础</h1><h2 id="变量">变量</h2><p>变量命名使用驼峰式</p><h2 id="函数">函数</h2><h3 id="调用">调用</h3><p>先写函数名后加参数，如<code>min 1 2</code></p><h3 id="声明">声明</h3><p>先函数名，后跟空格分隔的参数表，然后加=后定义函数行为</p><p><code>doubleme x = x+x</code></p><h3 id="常用函数">常用函数</h3><p>replicate n m 复制n个m</p><h2 id="if语句">if语句</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">doubleme</span> x = <span class="keyword">if</span> x&gt;<span class="number">100</span></span><br><span class="line"><span class="keyword">then</span> x</span><br><span class="line"><span class="keyword">else</span> x*<span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>if里 else部分不能省略</p><p><strong>if语句是一个表达式</strong>，即返回一个值的代码。</p><h2 id="变量-1">变量</h2><p>在ghci下使用let或在脚本中直接写a=1定义</p><h3 id="list">List</h3><p>[_x]匹配只有一个元素时的元素</p><p><code>let a = [1,2,3,4]</code> 记得用逗号隔开</p><p>字符串就是字符的list</p><ul><li>合并list：<code>[1,2,3] ++ [4,5,6]</code><code>"hello" ++ "world"</code></li></ul><p>合并时会遍历整个list，长字符串性能差</p><ul><li>前插元素： <code>1:[2,3,4,5]</code></li></ul><p>++操作需要两个操作数都是list，因此需要<code>[1] ++ [2]</code></p><p>:操作是将一个字符前插到一个list，因此<code>[1,2,3]</code>实质上就是<code>1:2:3:[]</code></p><ul><li>索引元素：<code>[1,2,3,4] !! 1</code>,<code>[[[],[]],[]] !! 0 !! 1</code></li><li>Head 获取第一个元素</li><li>tail 获取除去第一个剩下的</li><li>last 获取最后一个</li><li>init 获取除去最后一个剩下的</li><li>length 获取长度</li><li>null 获取是否为空</li><li>Reverse 反转列表</li><li>take n list 获取前n个元素<ul><li><code>take 10 (repeat 5)</code></li><li><code>replicate 3 10</code></li></ul></li><li>drop n list 删除前n个元素</li><li>n elem list 判断n是否在list里</li></ul><h3 id="range">Range</h3><p><code>[1..20]</code></p><p><code>[1,2..20]</code>只会按照特定加法步长生成list，不要使用浮点数</p><p>可以定义无限长度list，如取前24个3的倍数。<code>take 24 [3,6..]</code>由于Haskell是懒惰的，所以他只会在你取值的时候进行计算。</p><h3 id="元组tuple">元组Tuple</h3><p>用小括号定义</p><p>与list区别：可以存入多种元素，可以包含多种类别的元素</p><p>zip函数接受两个list，生成一个包含tuple的list。若长短不一则长的适配短的</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> ghci&gt; zip [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] [<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">[(<span class="number">1</span>,<span class="number">5</span>),(<span class="number">2</span>,<span class="number">5</span>),(<span class="number">3</span>,<span class="number">5</span>),(<span class="number">4</span>,<span class="number">5</span>),(<span class="number">5</span>,<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line"><span class="title">ghci</span>&gt; zip [<span class="number">1</span> .. <span class="number">5</span>] [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>, <span class="string">&quot;five&quot;</span>]</span><br><span class="line"></span><br><span class="line">[(<span class="number">1</span>,<span class="string">&quot;one&quot;</span>),(<span class="number">2</span>,<span class="string">&quot;two&quot;</span>),(<span class="number">3</span>,<span class="string">&quot;three&quot;</span>),(<span class="number">4</span>,<span class="string">&quot;four&quot;</span>),(<span class="number">5</span>,<span class="string">&quot;five&quot;</span>)]</span><br></pre></td></tr></table></figure><h1 id="函数语法">函数语法</h1><h2 id="模式匹配">模式匹配</h2><p>模式匹配通过检查数据的特定结构来检查其是否匹配，并按模式从中取得数据。</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">sayMe</span> :: (<span class="type">Integral</span> a) =&gt; a -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">sayMe</span> <span class="number">1</span> = <span class="string">&quot;One!&quot;</span>  </span><br><span class="line"><span class="title">sayMe</span> <span class="number">2</span> = <span class="string">&quot;Two!&quot;</span>  </span><br><span class="line"><span class="title">sayMe</span> <span class="number">3</span> = <span class="string">&quot;Three!&quot;</span>  </span><br><span class="line"><span class="title">sayMe</span> <span class="number">4</span> = <span class="string">&quot;Four!&quot;</span>  </span><br><span class="line"><span class="title">sayMe</span> <span class="number">5</span> = <span class="string">&quot;Five!&quot;</span>  </span><br><span class="line"><span class="title">sayMe</span> x = <span class="string">&quot;Not between 1 and 5&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>若想匹配不需要的东西就需要用括号括起来并且用_表示</p><p>递归常使用(x:xs)进行匹配</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">sum&#x27;</span> :: (<span class="type">Num</span> a) =&gt; [a] -&gt; a  </span><br><span class="line"><span class="title">sum&#x27;</span> [] = <span class="number">0</span>  </span><br><span class="line"><span class="title">sum&#x27;</span> (x:xs) = x + sum&#x27; xs</span><br></pre></td></tr></table></figure><p>as模式：</p><p>将一个名字和 <code>@</code>置于模式前，可以在按模式分割什么东西时仍保留对其整体的引用。</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">capital</span> :: <span class="type">String</span> -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">capital</span> <span class="string">&quot;&quot;</span> = <span class="string">&quot;Empty string, whoops!&quot;</span>  </span><br><span class="line"><span class="title">capital</span> all@(x:xs) = <span class="string">&quot;The first letter of &quot;</span> ++ all ++ <span class="string">&quot; is &quot;</span> ++ [x]</span><br></pre></td></tr></table></figure><h2 id="guards">Guards</h2><p>用来检查一个值的某项属性是否为真</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">bmiTell</span> :: (<span class="type">RealFloat</span> a) =&gt; a -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">bmiTell</span> bmi  </span><br><span class="line">    | bmi &lt;= <span class="number">18.5</span> = <span class="string">&quot;You&#x27;re underweight, you emo, you!&quot;</span>  </span><br><span class="line">    | bmi &lt;= <span class="number">25.0</span> = <span class="string">&quot;You&#x27;re supposedly normal. Pffft, I bet you&#x27;re ugly!&quot;</span>  </span><br><span class="line">    | bmi &lt;= <span class="number">30.0</span> = <span class="string">&quot;You&#x27;re fat! Lose some weight, fatty!&quot;</span>  </span><br><span class="line">    | otherwise   = <span class="string">&quot;You&#x27;re a whale, congratulations!&quot;</span></span><br></pre></td></tr></table></figure><p>竖线就是guards，若为真就使用，为假就往下</p><h2 id="where">Where</h2><p>写在guards下边</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">bmiTell</span> :: (<span class="type">RealFloat</span> a) =&gt; a -&gt; a -&gt; <span class="type">String</span>  </span><br><span class="line"><span class="title">bmiTell</span> weight height  </span><br><span class="line">    | bmi &lt;= skinny = <span class="string">&quot;You&#x27;re underweight, you emo, you!&quot;</span>  </span><br><span class="line">    | bmi &lt;= normal = <span class="string">&quot;You&#x27;re supposedly normal. Pffft, I bet you&#x27;re ugly!&quot;</span>  </span><br><span class="line">    | bmi &lt;= fat    = <span class="string">&quot;You&#x27;re fat! Lose some weight, fatty!&quot;</span>  </span><br><span class="line">    | otherwise     = <span class="string">&quot;You&#x27;re a whale, congratulations!&quot;</span>  </span><br><span class="line">    <span class="keyword">where</span> bmi = weight / height ^ <span class="number">2</span>  </span><br><span class="line">          skinny = <span class="number">18.5</span>  </span><br><span class="line">          normal = <span class="number">25.0</span>  </span><br><span class="line">          fat = <span class="number">30.0</span></span><br></pre></td></tr></table></figure><h2 id="let">let</h2><p>let必须跟一个in，在let里定义的变量可以在in里当成私有变量来使用。</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">cylinder</span> :: (<span class="type">RealFloat</span> a) =&gt; a -&gt; a -&gt; a  </span><br><span class="line"><span class="title">cylinder</span> r h = </span><br><span class="line">    <span class="keyword">let</span> sideArea = <span class="number">2</span> * pi * r * h  </span><br><span class="line">        topArea = pi * r ^<span class="number">2</span>  </span><br><span class="line">    <span class="keyword">in</span>  sideArea + <span class="number">2</span> * topArea</span><br></pre></td></tr></table></figure><p>let是一个表达式，可以在任何地方使用。</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (<span class="keyword">let</span> (a,b,c) = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="keyword">in</span> a+b+c) * <span class="number">100</span>  </span><br><span class="line"><span class="number">600</span></span><br></pre></td></tr></table></figure><h2 id="case">case</h2><p>Case 类似switch</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">case</span> expression <span class="keyword">of</span> pattern -&gt; result  </span><br><span class="line">                   pattern -&gt; result  </span><br><span class="line">                   pattern -&gt; result  </span><br><span class="line">                   ...</span><br></pre></td></tr></table></figure><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">head&#x27;</span> :: [a] -&gt; a  </span><br><span class="line"><span class="title">head&#x27;</span> xs = <span class="keyword">case</span> xs <span class="keyword">of</span> [] -&gt; error <span class="string">&quot;No head for empty lists!&quot;</span>  </span><br><span class="line">                      (x:_) -&gt; x</span><br></pre></td></tr></table></figure><h1 id="常用函数-1">常用函数</h1><h2 id="zip-a-b">zip [a] [b]</h2><p>返回数组，将a，b组合起来，若长度不同则以短的为准</p><h2 id="replicate-a-b">replicate a b</h2><p>返回数组，把b重复a次</p><h2 id="flip-f-a-b">flip f a b</h2><p>返回f b a的结果</p><h2 id="div-a-b">div a b</h2><p>返回a/b , 只能用于整数</p><h2 id="zipwith-f-a-b">zipWith f [a] [b]</h2><p>返回数组，每一项是a，b中相应项经过f操作后的结果</p><h2 id="map-f-a">map f [a]</h2><p>返回数组，每一项是a经过f操作后的结果</p><h2 id="filter-a-bool-a">filter (a-&gt;bool) [a]</h2><p>返回数组，a数组经过限制条件后剩余元素</p><h2 id="takewhile-a-bool-a">takeWhile (a-&gt;bool) [a]</h2><p>返回符合限制条件的元素数组</p><h2 id="dropwhile-a-bool-a">dropWhile (a-&gt;bool) [a]</h2><p>返回去除条件后的数组</p><h2 id="odd">odd</h2><p>判断是不是基数</p><h2 id="even">even</h2><p>判断是不是偶数</p><h2 id="words">words</h2><p>把string中的单词拆出来成为数组</p><h2 id="unwords">unwords</h2><p>把单词数组组合成String</p><h1 id="计算函数">计算函数</h1><p>mod 取模</p><p>div 除</p><h1 id="自定义type">自定义type</h1><h2 id="继承类">继承类</h2><h3 id="show">show</h3><p>让他可以print</p><h3 id="eq">Eq</h3><p>可以做比较</p><h1 id="输入输出">输入输出</h1><h2 id="输入">输入</h2><p>putStrLn</p><h1 id="functorapplicative-functormonoids">Functor,ApplicativeFunctor,Monoids</h1><h2 id="functor">Functor</h2><p>Functors 是可以被 map over的对象，这个typeclass只有一个method是fmap</p><h3 id="fmap">fmap</h3><p>fmap :: (a -&gt; b) -&gt; f a -&gt; f b</p><p>提供一个函数和一个有盒子的值，输出装着新值的盒子</p><p>将输入的方程应用到a上，即 fmap f a = f a</p><h2 id="applicative-functor">Applicative Functor</h2><p>pure a = a</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&lt;*&gt;) :: <span class="type">Applicative</span> f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b</span><br></pre></td></tr></table></figure><p>提供一个在盒子里的函数和一个盒子里的值，输出装着新值的盒子</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; pure (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span>  </span><br><span class="line"><span class="type">Just</span> <span class="number">8</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; pure (+) &lt;*&gt; <span class="type">Just</span> <span class="number">3</span> &lt;*&gt; <span class="type">Nothing</span>  </span><br><span class="line"><span class="type">Nothing</span>  </span><br><span class="line"><span class="title">ghci</span>&gt; pure (+) &lt;*&gt; <span class="type">Nothing</span> &lt;*&gt; <span class="type">Just</span> <span class="number">5</span>  </span><br><span class="line"><span class="type">Nothing</span></span><br></pre></td></tr></table></figure><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(&lt;$&gt;) :: (<span class="type">Functor</span> f) =&gt; (a -&gt; b) -&gt; f a -&gt; f b  </span><br><span class="line"><span class="title">f</span> &lt;$&gt; x = fmap f x</span><br><span class="line"><span class="title">pure</span> f &lt;*&gt; x = f &lt;$&gt; x</span><br></pre></td></tr></table></figure><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; (++) &lt;$&gt; <span class="type">Just</span> <span class="string">&quot;johntra&quot;</span> &lt;*&gt; <span class="type">Just</span> <span class="string">&quot;volta&quot;</span>  </span><br><span class="line"><span class="type">Just</span> <span class="string">&quot;johntravolta&quot;</span></span><br></pre></td></tr></table></figure><p>举例：</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">ghci</span>&gt; a = [(*)]&lt;*&gt;[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="title">ghci</span>&gt; :t a</span><br><span class="line"><span class="comment">--a :: Num a =&gt; [a -&gt; a]</span></span><br><span class="line"><span class="comment">--a是一个数组，里边每个元素都是一个a-&gt;a的函数</span></span><br><span class="line"><span class="title">ghci</span>&gt; length a</span><br><span class="line"><span class="comment">--4</span></span><br><span class="line"><span class="title">ghci</span>&gt; a&lt;*&gt;[<span class="number">3</span>]</span><br><span class="line"><span class="comment">--[3,6,4,5]</span></span><br><span class="line"><span class="title">a</span>里边是<span class="number">1</span>*,<span class="number">2</span>*,<span class="number">1</span>+,<span class="number">2</span>+</span><br></pre></td></tr></table></figure><h1 id="monads">Monads</h1><h2 id="bind">bind &gt;&gt;=</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&gt;&gt;=) :: <span class="type">Monad</span> m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</span><br></pre></td></tr></table></figure><h2 id="laws">Laws:</h2><ol type="1"><li>return v&gt;&gt;=f =&gt; f v</li><li>M &gt;&gt;= (= a) =&gt; M</li></ol><h2 id="pure">pure</h2><h2 id="do-statement">Do statement</h2><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">do</span></span><br><span class="line"><span class="title">x</span>&lt;-[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title">y</span>&lt;-[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="title">pure</span>(x*y)</span><br><span class="line"><span class="comment">--等价于</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&gt;&gt;=\x-&gt;</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]&gt;&gt;=\y-&gt;</span><br><span class="line">pure (x*y)</span><br></pre></td></tr></table></figure><p>见到左箭头可以认为从右侧取一个值</p><p>x&lt;- m a</p><p>通过左箭头后x变成a类型</p><h1 id="ghci命令">ghci命令</h1><h2 id="l-装载某个hs文件">:l 装载某个hs文件</h2><p><code>:l aaa.hs</code></p><h2 id="t-查看类型">:t 查看类型</h2><p><code>:t 'a'</code></p><h1 id="quickcheck">quickcheck</h1><p>查看用当前arbitry生成的样本数据</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">sample&#x27;</span> arbitrary :: <span class="type">IO</span> [<span class="type">UpperCaseString</span>]</span><br></pre></td></tr></table></figure><p>使用erlang的quickCheck需要导入包</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-include_lib</span><span class="params">(<span class="string">&quot;eqc/include/eqc.hrl&quot;</span>)</span>.</span><br></pre></td></tr></table></figure><p>查看eqc生成的样本数据</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eqc_gen:sample(dict_eqc:dict_5()).</span><br></pre></td></tr></table></figure><h1 id="otp">Otp</h1><p>分离发信息和逻辑部分</p><h2 id="使用gen_server">使用gen_server</h2><p>cast-&gt; request</p><p>Call -&gt; request_reply</p><p>handle_cast -&gt; handle_request</p><h2 id="statefunction-mode">Statefunction mode</h2><p>-behavior(gen_statem)</p><p>需要先明确程序的多个状态</p><h3 id="lamp-module-implementation">lamp module implementation</h3><ol type="1"><li>module定义，public API定义，callbacks</li><li>start函数，使用gen_statem的start方法，第一个参数是自身module</li><li>button函数，使用cast方法，参数是Lamp和button</li><li>stop函数，使用stop方法</li><li>callback方法：</li><li>定义init，返回一个三元组</li><li>定义callback_mode返回state_functions，还可以使用handle_event_functions</li><li>states方法：</li><li>Off接受cast,button,Data,返回四元组{next_state,low-UNSTABLE,Data,2000}</li><li>Low_unstable同样接受三个参数，如果第一个是cast则在触发cast的时候进入，再定义一个第一个是timeout，第二个是_的来等到超时进入。</li><li>使用：</li><li>{ok,L} = Lamp:start()</li></ol><h2 id="supervisor">supervisor</h2><p>如果有另一个进程需要执行但是不知道需要执行多久，就spown一个新的，并且用一个supervisor来监督他的执行</p><p>理想状况是除了root每个进程都有一个supervisor</p><h3 id="lamp-module-supervisior-implementation">Lamp module supervisiorimplementation</h3><ol type="1"><li>module定义，export start_link, spawn_lamp</li><li>Export init</li><li>Behaviour 是supervisor</li><li>startlink函数，同上start</li><li>spawnlamp函数，传入一个S，使用supervisior的start_child方法传入两个参数</li><li>init函数，定义一个Child变量，包含一系列参数的tuple。定义RestartStrategy变量，定义了重启时需要的操作。定义MaxRestart变量和MaxTime变量，返回这些变量。</li><li>在lamp.erl文件中新增一个start_link函数，使用的是他自己behavior的方法</li><li>使用：</li><li>{ok,S} = lamp_sup:start_link()</li><li>{ok,L1} = Spawn_lamp(S)</li><li>现在可以使用L1了</li><li>Exit(S,shutdown)关闭supervisor和他下边的所有进程</li></ol>]]></content>
      
      
      <categories>
          
          <category> haskell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>c++ String 方法集</title>
      <link href="/2022/04/11/c-String-%E6%96%B9%E6%B3%95%E9%9B%86/"/>
      <url>/2022/04/11/c-String-%E6%96%B9%E6%B3%95%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<p>String方法</p><span id="more"></span><h1 id="连接">连接</h1><p>单个char使用push_back()</p><p>连接字符串直接用+即可，也可以使用append方法</p>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>引用类型</title>
      <link href="/2022/03/15/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/"/>
      <url>/2022/03/15/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>引用值即对象，使用new后跟构造函数创建，不同于原始值，引用值保存在堆空间中。</p><span id="more"></span><h1 id="string">String</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&quot;text&quot;</span></span><br><span class="line">s2 = s1.substring(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line">s1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">s2 = s1.substring(<span class="number">2</span>)</span><br><span class="line">s1 = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;hello&quot;</span></span><br><span class="line">s2 =  <span class="string">&quot;world&quot;</span></span><br><span class="line">str.concat(s2)<span class="comment">//&quot;helloworld&quot;</span></span><br><span class="line"><span class="comment">//提取子串，两个参数，子串开始和结束位置，左闭右开</span></span><br><span class="line">str.slice(<span class="number">2</span>)<span class="comment">//  &quot;llo&quot;</span></span><br><span class="line">str.substring(<span class="number">2</span>)<span class="comment">//llo</span></span><br><span class="line">str.substr<span class="comment">//第二个参数是长度</span></span><br><span class="line">str.slice(-<span class="number">1</span>)<span class="comment">//o</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="number">Number</h1><p>方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">toString(a) <span class="comment">//返回以a为基数的字符串</span></span><br><span class="line"><span class="string">&quot;10&quot;</span>.toString(<span class="number">2</span>)<span class="comment">//&quot;1010&quot;</span></span><br><span class="line"></span><br><span class="line">toFixed(a)<span class="comment">//返回包含a位小数的字符串</span></span><br><span class="line"><span class="number">10.</span>toFixed(<span class="number">2</span>)<span class="comment">//&quot;10.00&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="math">Math</h1><p>方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.max()</span><br><span class="line"><span class="built_in">Math</span>.min()</span><br><span class="line"><span class="built_in">Math</span>.ceil()<span class="comment">//向上舍入</span></span><br><span class="line"><span class="built_in">Math</span>.floor() <span class="comment">//向下舍入</span></span><br><span class="line"><span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">10</span>+<span class="number">2</span>)<span class="comment">//2-10随机数</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ set/map 方法集</title>
      <link href="/2022/03/14/c-set-map-%E6%96%B9%E6%B3%95%E9%9B%86/"/>
      <url>/2022/03/14/c-set-map-%E6%96%B9%E6%B3%95%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<p>增加，删除，查找，遍历，大小</p><span id="more"></span><h1 id="set">Set</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"><span class="comment">//增加</span></span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">s.<span class="built_in">erase</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="keyword">bool</span> is_in = s.<span class="built_in">find</span>(<span class="number">1</span>) != s.<span class="built_in">end</span>();</span><br><span class="line"><span class="comment">//遍历</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i : s)&#123;</span><br><span class="line">    cout&lt;&lt;i;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">//大小</span></span><br><span class="line">s.<span class="built_in">size</span>();</span><br></pre></td></tr></table></figure><h1 id="map">Map</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;m;</span><br><span class="line"><span class="comment">//增加</span></span><br><span class="line">map[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">map.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;(<span class="number">2</span>,<span class="number">2</span>));</span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">m.<span class="built_in">erase</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="keyword">bool</span> is_in = s.<span class="built_in">find</span>(<span class="number">1</span>) != s.<span class="built_in">end</span>();</span><br><span class="line"><span class="comment">//遍历</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">auto</span> i : m)&#123;</span><br><span class="line">        cout &lt;&lt; i.first &lt;&lt; i.second &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux Command Line笔记</title>
      <link href="/2022/03/07/Linux-Command-Line%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/03/07/Linux-Command-Line%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="花括号展开">花括号展开</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[me@linuxbox ~]$ mkdir Pics</span><br><span class="line">[me@linuxbox ~]$ <span class="built_in">cd</span> Pics</span><br><span class="line">[me@linuxbox Pics]$ mkdir &#123;2007..2009&#125;-0&#123;1..9&#125; &#123;2007..2009&#125;-&#123;10..12&#125;</span><br><span class="line">[me@linuxbox Pics]$ ls</span><br><span class="line">2007-01 2007-07 2008-01 2008-07 2009-01 2009-07</span><br><span class="line">2007-02 2007-08 2008-02 2008-08 2009-02 2009-08</span><br><span class="line">2007-03 2007-09 2008-03 2008-09 2009-03 2009-09</span><br><span class="line">2007-04 2007-10 2008-04 2008-10 2009-04 2009-10</span><br><span class="line">2007-05 2007-11 2008-05 2008-11 2009-05 2009-11</span><br><span class="line">2007-06 2007-12 2008-06 2008-12 2009-06 2009-12</span><br></pre></td></tr></table></figure><h1 id="光标移动命令">光标移动命令</h1><table><thead><tr class="header"><th style="text-align: left;">按键</th><th style="text-align: left;">行动</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Ctrl-a</td><td style="text-align: left;">移动光标到行首。</td></tr><tr class="even"><td style="text-align: left;">Ctrl-e</td><td style="text-align: left;">移动光标到行尾。</td></tr><tr class="odd"><td style="text-align: left;">Ctrl-f</td><td style="text-align: left;">光标前移一个字符；和右箭头作用一样。</td></tr><tr class="even"><td style="text-align: left;">Ctrl-b</td><td style="text-align: left;">光标后移一个字符；和左箭头作用一样。</td></tr><tr class="odd"><td style="text-align: left;">Alt-f</td><td style="text-align: left;">光标前移一个字。</td></tr><tr class="even"><td style="text-align: left;">Alt-b</td><td style="text-align: left;">光标后移一个字。</td></tr><tr class="odd"><td style="text-align: left;">Ctrl-l</td><td style="text-align: left;">清空屏幕，移动光标到左上角。clear命令完成同样的工作。</td></tr></tbody></table><h1 id="剪切和粘贴命令">剪切和粘贴命令</h1><table><colgroup><col style="width: 17%" /><col style="width: 82%" /></colgroup><thead><tr class="header"><th style="text-align: left;">按键</th><th style="text-align: left;">行动</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Ctrl-k</td><td style="text-align: left;">剪切从光标位置到行尾的文本。</td></tr><tr class="even"><td style="text-align: left;">Ctrl-u</td><td style="text-align: left;">剪切从光标位置到行首的文本。</td></tr><tr class="odd"><td style="text-align: left;">Alt-d</td><td style="text-align: left;">剪切从光标位置到词尾的文本。</td></tr><tr class="even"><td style="text-align: left;">Alt-Backspace</td><tdstyle="text-align: left;">剪切从光标位置到词头的文本。如果光标在一个单词的开头，剪切前一个单词。</td></tr><tr class="odd"><td style="text-align: left;">Ctrl-y</td><td style="text-align: left;">把剪切环中的文本粘贴到光标位置。</td></tr></tbody></table><h1 id="ps">ps</h1><p>加x可以显示所有进程，不管由什么终端控制</p><p>加aux宣誓属于每个用户的进程信息</p><h1 id="top">top</h1><p>连续显示系统进程更新的信息，最上边是系统概要，下边是进程列表</p><p>表11-3: top 命令信息字段</p><table><colgroup><col style="width: 11%" /><col style="width: 53%" /><col style="width: 34%" /></colgroup><thead><tr class="header"><th style="text-align: left;">行号</th><th style="text-align: left;">字段</th><th style="text-align: left;">意义</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">1</td><td style="text-align: left;">top</td><td style="text-align: left;">程序名。</td></tr><tr class="even"><td style="text-align: left;">14:59:20</td><td style="text-align: left;">当前时间。</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">up 6:30</td><tdstyle="text-align: left;">这是正常运行时间。它是计算机从上次启动到现在所运行的时间。在这个例子里，系统已经运行了六个半小时。</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">2 users</td><td style="text-align: left;">有两个用户登录系统。</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">load average:</td><tdstyle="text-align: left;">加载平均值是指，等待运行的进程数目，也就是说，处于运行状态的进程个数，这些进程共享CPU。展示了三个数值，每个数值对应不同的时间周期。第一个是最后60秒的平均值，下一个是前5分钟的平均值，最后一个是前15分钟的平均值。若平均值低于1.0，则指示计算机工作不忙碌。</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">2</td><td style="text-align: left;">Tasks:</td><td style="text-align: left;">总结了进程数目和各种进程状态。</td></tr><tr class="odd"><td style="text-align: left;">3</td><td style="text-align: left;">Cpu(s):</td><td style="text-align: left;">这一行描述了 CPU正在执行的进程的特性。</td></tr><tr class="even"><td style="text-align: left;">0.7%us</td><td style="text-align: left;">0.7% of the CPU is being used for userprocesses. 这意味着进程在内核之外。</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">1.0%sy</td><td style="text-align: left;">1.0%的 CPU时间被用于系统（内核）进程。</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">0.0%ni</td><td style="text-align: left;">0.0%的 CPU时间被用于"nice"（低优先级）进程。</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">98.3%id</td><td style="text-align: left;">98.3%的 CPU 时间是空闲的。</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">0.0%wa</td><td style="text-align: left;">0.0%的 CPU 时间来等待 I/O。</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">4</td><td style="text-align: left;">Mem:</td><td style="text-align: left;">展示物理内存的使用情况。</td></tr><tr class="even"><td style="text-align: left;">5</td><td style="text-align: left;">Swap:</td><td style="text-align: left;">展示交换分区（虚拟内存）的使用情况。</td></tr></tbody></table><h1 id="把进程放到后台执行">把进程放到后台执行</h1><p>在命令后加&amp;</p><p>使用jobs可以看后台命令和编号</p><p>使用fg %1可以把1号进程放到前台</p><h1 id="shell环境">shell环境</h1><p>printenv输出环境变量</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>733-图像渲染</title>
      <link href="/2022/03/01/733-%E5%9B%BE%E5%83%8F%E6%B8%B2%E6%9F%93/"/>
      <url>/2022/03/01/733-%E5%9B%BE%E5%83%8F%E6%B8%B2%E6%9F%93/</url>
      
        <content type="html"><![CDATA[<p>有一幅以二维整数数组表示的图画，每一个整数表示该图画的像素值大小，数值在0 到 65535 之间。</p><p>给你一个坐标 (sr, sc) 表示图像渲染开始的像素值（行，列）和一个新的颜色值 newColor，让你重新上色这幅图像。</p><p>为了完成上色工作，从初始坐标开始，记录初始坐标的上下左右四个方向上像素值与初始坐标相同的相连像素点，接着再记录这四个方向上符合条件的像素点与他们对应四个方向上像素值与初始坐标相同的相连像素点，……，重复该过程。将所有有记录的像素点的颜色值改为新的颜色值。</p><p>最后返回经过上色渲染后的图像。</p><p>示例 1:</p><blockquote><p>输入: image = [[1,1,1],[1,1,0],[1,0,1]] sr = 1, sc = 1, newColor = 2输出: [[2,2,2],[2,2,0],[2,0,1]] 解析:在图像的正中间，(坐标(sr,sc)=(1,1)),在路径上所有符合条件的像素点的颜色都被更改成2。注意，右下角的像素没有更改为2，因为它不是在上下左右四个方向上与初始点相连的像素点。</p></blockquote><span id="more"></span><p>解法一：BFS</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt;xs = &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt;ys = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">floodFill</span>(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; image, <span class="keyword">int</span> sr, <span class="keyword">int</span> sc, <span class="keyword">int</span> newColor) &#123;</span><br><span class="line">        <span class="keyword">int</span> num = image[sr][sc],width = image.<span class="built_in">size</span>(),height = image[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(image[sr][sc] == newColor)&#123;</span><br><span class="line">            <span class="keyword">return</span> image;</span><br><span class="line">        &#125;</span><br><span class="line">        queue&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; que;</span><br><span class="line">        que.<span class="built_in">emplace</span>(sr,sc);</span><br><span class="line">        image[sr][sc]=newColor;</span><br><span class="line">        <span class="keyword">while</span>(!que.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">int</span> x = que.<span class="built_in">front</span>().first;</span><br><span class="line">            <span class="keyword">int</span> y = que.<span class="built_in">front</span>().second;</span><br><span class="line">            que.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> mx = x+xs[i];</span><br><span class="line">                <span class="keyword">int</span> my = y-ys[i];</span><br><span class="line">                <span class="keyword">if</span>(mx&gt;=<span class="number">0</span> &amp;&amp; mx&lt;width &amp;&amp; my&gt;=<span class="number">0</span> &amp;&amp; my&lt;height &amp;&amp; image[mx][my]==num)&#123;</span><br><span class="line">                    que.<span class="built_in">emplace</span>(mx,my);</span><br><span class="line">                    image[mx][my] = newColor;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> image;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>使用队列表示已染色的元素。先入队并染色第一个元素，然后只要队列不空就循环：出队一个，判断上下左右四个元素是否合法，合法的话就入队并染色。</p><p>知识点：</p><ol type="1"><li>queue<ol type="1"><li>添加元素到队尾是emplace()或者push，区别是emplace是新建一个对象并添加，push是添加一个已有对象。</li><li>删除队头元素：pop()，注意它没返回值</li><li>获取队头元素：front()</li></ol></li><li>pair<ol type="1"><li>pair表示一对元素，定义：<code>pair(type1,type2) name</code></li><li>获取或更改内容使用<code>pair.first    pair.second</code></li></ol></li></ol><p>解法二：DFS</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt;xs = &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt;xy = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; image,<span class="keyword">int</span> sr,<span class="keyword">int</span> sc,<span class="keyword">int</span> collor,<span class="keyword">int</span> newColor)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(image[sr][sc] == collor)&#123;</span><br><span class="line">            image[sr][sc] = newColor;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> x = sr + xs[i];</span><br><span class="line">                <span class="keyword">int</span> y = sc + xy[i];</span><br><span class="line">                <span class="keyword">if</span>(x &gt;= <span class="number">0</span>&amp;&amp; x &lt; image.<span class="built_in">size</span>() &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt; image[<span class="number">0</span>].<span class="built_in">size</span>())&#123;</span><br><span class="line">                    <span class="built_in">dfs</span>(image,x,y,collor,newColor);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">floodFill</span>(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; image, <span class="keyword">int</span> sr, <span class="keyword">int</span> sc, <span class="keyword">int</span> newColor) &#123;</span><br><span class="line">        <span class="keyword">if</span>(image[sr][sc] != newColor)&#123;</span><br><span class="line">            <span class="built_in">dfs</span>(image,sr,sc,image[sr][sc],newColor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> image;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>写起来较容易，深度优先需要先定义一个dfs递归函数。如果当前可以染色就染色，并且对上下左右中合法的元素使用dfs，主函数直接调用即可。</p>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> medium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ Vector方法集</title>
      <link href="/2022/02/24/c-Vector%E6%96%B9%E6%B3%95%E9%9B%86/"/>
      <url>/2022/02/24/c-Vector%E6%96%B9%E6%B3%95%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<figure><img data-src="https://img.zhaoxuanlang.cn/image-20220224215604333.png"alt="image-20220224215604333" /><figcaption aria-hidden="true">image-20220224215604333</figcaption></figure><span id="more"></span><h1 id="迭代器">迭代器</h1><ol type="1"><li><ahref="https://www.geeksforgeeks.org/vectorbegin-vectorend-c-stl/">begin()</a>– 返回一个指向向量中第一个元素的迭代器</li><li><ahref="https://www.geeksforgeeks.org/vectorbegin-vectorend-c-stl/">end()</a>– 返回一个迭代器，指向向量中最后一个元素之后的理论元素</li><li><ahref="https://www.geeksforgeeks.org/vector-rbegin-and-rend-function-in-c-stl/">rbegin()</a>–返回一个反向迭代器，指向向量中的最后一个元素（反向开始）。它从最后一个元素移动到第一个元素</li><li><ahref="https://www.geeksforgeeks.org/vector-rbegin-and-rend-function-in-c-stl/">rend()</a>–返回一个反向迭代器，指向向量中第一个元素之前的理论元素（视为反向结束）</li><li><ahref="https://www.geeksforgeeks.org/vector-cbegin-vector-cend-c-stl/">cbegin()</a>– 返回指向向量中第一个元素的常量迭代器。</li><li><ahref="https://www.geeksforgeeks.org/vector-cbegin-vector-cend-c-stl/">cend()</a>– 返回一个常量迭代器，指向向量中最后一个元素之后的理论元素。</li><li><ahref="https://www.geeksforgeeks.org/vectorcrend-vectorcrbegin-examples/">crbegin()</a>–返回一个常量反向迭代器，指向向量中的最后一个元素（反向开始）。它从最后一个元素移动到第一个元素</li><li><ahref="https://www.geeksforgeeks.org/vectorcrend-vectorcrbegin-examples/">crend()</a>–返回一个常量反向迭代器，指向向量中第一个元素之前的理论元素（被视为反向端）</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to illustrate the</span></span><br><span class="line"><span class="comment">// iterators in vector</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; g1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">g1.<span class="built_in">push_back</span>(i);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Output of begin and end: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i = g1.<span class="built_in">begin</span>(); i != g1.<span class="built_in">end</span>(); ++i)</span><br><span class="line">cout &lt;&lt; *i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nOutput of cbegin and cend: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i = g1.<span class="built_in">cbegin</span>(); i != g1.<span class="built_in">cend</span>(); ++i)</span><br><span class="line">cout &lt;&lt; *i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nOutput of rbegin and rend: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> ir = g1.<span class="built_in">rbegin</span>(); ir != g1.<span class="built_in">rend</span>(); ++ir)</span><br><span class="line">cout &lt;&lt; *ir &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nOutput of crbegin and crend : &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> ir = g1.<span class="built_in">crbegin</span>(); ir != g1.<span class="built_in">crend</span>(); ++ir)</span><br><span class="line">cout &lt;&lt; *ir &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>输出：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">begin 和 end 的输出：1 2 3 4 5 </span><br><span class="line">cbegin 和 cend 的输出：1 2 3 4 5 </span><br><span class="line">rbegin 和 rend 的输出：5 4 3 2 1 </span><br><span class="line">crbegin 和 crend 的输出：5 4 3 2 1</span><br></pre></td></tr></table></figure><h1 id="容量">容量</h1><p><strong>容量</strong></p><ol type="1"><li><ahref="https://www.geeksforgeeks.org/vectorempty-vectorsize-c-stl/">size()</a>– 返回向量中元素的数量。</li><li><ahref="https://www.geeksforgeeks.org/vector-max_size-function-in-c-stl/">max_size()</a>– 返回向量可以容纳的最大元素数。</li><li><ahref="https://www.geeksforgeeks.org/vector-capacity-function-in-c-stl/">capacity()</a>– 返回当前分配给向量的存储空间大小，以元素数表示。</li><li><ahref="https://www.geeksforgeeks.org/vector-resize-c-stl/">resize(n)</a>– 调整容器大小，使其包含“n”个元素。</li><li><ahref="https://www.geeksforgeeks.org/vectorempty-vectorsize-c-stl/">empty()</a>– 返回容器是否为空。</li><li><ahref="https://www.geeksforgeeks.org/vector-shrink_to_fit-function-in-c-stl/">shrink_to_fit()</a>– 减小容器的容量以适应其大小并销毁超出容量的所有元素。</li><li><ahref="https://www.geeksforgeeks.org/using-stdvectorreserve-whenever-possible/">Reserve()</a>– 请求向量容量至少足以包含 n 个元素。</li></ol><h1 id="元素访问">元素访问</h1><ol type="1"><li>[引用运算符 <ahref="https://www.geeksforgeeks.org/vectoroperator-vectoroperator-c-stl/">g]</a>– 返回对向量中位置“g”处元素的引用</li><li><ahref="https://www.geeksforgeeks.org/vectorat-vectorswap-c-stl/">at(g)</a>– 返回对向量中位置“g”处元素的引用</li><li><ahref="https://www.geeksforgeeks.org/vectorfront-vectorback-c-stl/">front()</a>– 返回对向量中第一个元素的引用</li><li><ahref="https://www.geeksforgeeks.org/vectorfront-vectorback-c-stl/">back()</a>– 返回对向量中最后一个元素的引用</li><li><ahref="https://www.geeksforgeeks.org/vector-data-function-in-c-stl/">data()</a>– 返回指向向量内部用于存储其拥有的元素的内存数组的直接指针。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to illustrate the</span></span><br><span class="line"><span class="comment">// element accesser in vector</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; g1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">g1.<span class="built_in">push_back</span>(i * <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nReference operator [g] : g1[2] = &quot;</span> &lt;&lt; g1[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nat : g1.at(4) = &quot;</span> &lt;&lt; g1.<span class="built_in">at</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nfront() : g1.front() = &quot;</span> &lt;&lt; g1.<span class="built_in">front</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nback() : g1.back() = &quot;</span> &lt;&lt; g1.<span class="built_in">back</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// pointer to the first element</span></span><br><span class="line"><span class="keyword">int</span>* pos = g1.<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe first element is &quot;</span> &lt;&lt; *pos;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Reference operator [g] : g1[2] = 30</span><br><span class="line">at : g1.at(4) = 50</span><br><span class="line">front() : g1.front() = 10</span><br><span class="line">back() : g1.back() = 100</span><br><span class="line">The first element is 10</span><br></pre></td></tr></table></figure><h1 id="修饰符">修饰符</h1><ol type="1"><li><ahref="https://www.geeksforgeeks.org/vector-assign-in-c-stl/">assign()</a>- 它通过替换旧元素为向量元素分配新值</li><li><ahref="https://www.geeksforgeeks.org/vectorpush_back-vectorpop_back-c-stl/">push_back()</a>– 将元素从后面推入向量</li><li><ahref="https://www.geeksforgeeks.org/vectorpush_back-vectorpop_back-c-stl/">pop_back()</a>- 它用于从后面的向量中弹出或删除元素。</li><li><ahref="https://www.geeksforgeeks.org/vector-insert-function-in-c-stl/">insert()</a>- 在指定位置的元素之前插入新元素</li><li><ahref="https://www.geeksforgeeks.org/vectorclear-vectorerase-c-stl/">erase()</a>- 用于从容器中删除指定位置或范围的元素。</li><li><ahref="https://www.geeksforgeeks.org/vectorat-vectorswap-c-stl/">swap()</a>- 用于将一个向量的内容与另一个相同类型的向量交换。尺寸可能不同。</li><li><ahref="https://www.geeksforgeeks.org/vectorclear-vectorerase-c-stl/">clear()</a>- 用于删除向量容器的所有元素</li><li><ahref="https://www.geeksforgeeks.org/vector-emplace-function-in-c-stl/">emplace()</a>- 它通过在位置插入新元素来扩展容器</li><li>emplace_back() -用于将新元素插入向量容器中，新元素添加到向量的末尾</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to illustrate the</span></span><br><span class="line"><span class="comment">// Modifiers in vector</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// Assign vector</span></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fill the array with 10 five times</span></span><br><span class="line">v.<span class="built_in">assign</span>(<span class="number">5</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The vector elements are: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; v[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// inserts 15 to the last position</span></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">15</span>);</span><br><span class="line"><span class="keyword">int</span> n = v.<span class="built_in">size</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe last element is: &quot;</span> &lt;&lt; v[n - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// removes last element</span></span><br><span class="line">v.<span class="built_in">pop_back</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// prints the vector</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe vector elements are: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; v[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// inserts 5 at the beginning</span></span><br><span class="line">v.<span class="built_in">insert</span>(v.<span class="built_in">begin</span>(), <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe first element is: &quot;</span> &lt;&lt; v[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// removes the first element</span></span><br><span class="line">v.<span class="built_in">erase</span>(v.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe first element is: &quot;</span> &lt;&lt; v[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// inserts at the beginning</span></span><br><span class="line">v.<span class="built_in">emplace</span>(v.<span class="built_in">begin</span>(), <span class="number">5</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe first element is: &quot;</span> &lt;&lt; v[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inserts 20 at the end</span></span><br><span class="line">v.<span class="built_in">emplace_back</span>(<span class="number">20</span>);</span><br><span class="line">n = v.<span class="built_in">size</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nThe last element is: &quot;</span> &lt;&lt; v[n - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// erases the vector</span></span><br><span class="line">v.<span class="built_in">clear</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nVector size after erase(): &quot;</span> &lt;&lt; v.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// two vector to perform swap</span></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; v1, v2;</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v2.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v2.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n\nVector 1: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; v1[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nVector 2: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v2.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; v2[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Swaps v1 and v2</span></span><br><span class="line">v1.<span class="built_in">swap</span>(v2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nAfter Swap \nVector 1: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; v1[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nVector 2: &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v2.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; v2[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">The vector elements are: 10 10 10 10 10 </span><br><span class="line">The last element is: 15</span><br><span class="line">The vector elements are: 10 10 10 10 10 </span><br><span class="line">The first element is: 5</span><br><span class="line">The first element is: 10</span><br><span class="line">The first element is: 5</span><br><span class="line">The last element is: 20</span><br><span class="line">Vector size after erase(): 0</span><br><span class="line"></span><br><span class="line">Vector 1: 1 2 </span><br><span class="line">Vector 2: 3 4 </span><br><span class="line">After Swap </span><br><span class="line">Vector 1: 3 4 </span><br><span class="line">Vector 2: 1 2</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>189. 轮转数组</title>
      <link href="/2022/02/22/189-%E8%BD%AE%E8%BD%AC%E6%95%B0%E7%BB%84/"/>
      <url>/2022/02/22/189-%E8%BD%AE%E8%BD%AC%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<p>给你一个数组，将数组中的元素向右轮转 k 个位置，其中 k 是非负数。</p><p>示例 1:</p><p>输入: nums = [1,2,3,4,5,6,7], k = 3 输出: [5,6,7,1,2,3,4] 解释:向右轮转 1 步: [7,1,2,3,4,5,6] 向右轮转 2 步: [6,7,1,2,3,4,5] 向右轮转 3步: [5,6,7,1,2,3,4]</p><span id="more"></span><p>解：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.<span class="built_in">size</span>()&lt;<span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">        k%=nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">begin</span>()+k);</span><br><span class="line">        <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>()+k,nums.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img data-src="https://img.zhaoxuanlang.cn/image-20220222185337166.png"alt="image-20220222185337166" />可以用辅助数组实现，原地处理的话就先整体旋转，前半部分旋转，后半部分旋转。</p><p>注意k很大的情况下先与数组长度取余可以得到确切移动的位数。</p><p>std::reverse函数：</p><p>在algorithm头文件中预定义。</p><p><strong>Syntax:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void reverse(BidirectionalIterator first, BidirectionalIterator last)</span><br><span class="line">BidirectionalIterator is an iterator that can be used to access any</span><br><span class="line">elements of a container in both forward and backward direction.</span><br></pre></td></tr></table></figure><p><strong>Examples:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Input : 10 11 12 13 14 15 16 17</span><br><span class="line">Output :10 11 12 13 14 17 16 15</span><br><span class="line">Explanation:</span><br><span class="line">reverse(v.begin() + 5, v.begin() + 8);</span><br><span class="line">In the above function, input we have applied reverse() on the vector</span><br><span class="line">from index 5 to index 7.</span><br><span class="line">Therefore when we display the vector we get reverse order</span><br><span class="line">from index 5 to index 7.</span><br></pre></td></tr></table></figure><p>注意第二个参数要往后一位，也可以用v.end()</p>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> medium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一部分</title>
      <link href="/2022/01/26/%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"/>
      <url>/2022/01/26/%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220126083059360.png"alt="image-20220126083059360" /><figcaption aria-hidden="true">image-20220126083059360</figcaption></figure><span id="more"></span><h1 id="类型选择">类型选择</h1><ol type="1"><li>数值不为负使用无符号类型</li><li>数值超过int表示范围用long long</li><li>浮点运算用double</li></ol><figure><img data-src="https://img.zhaoxuanlang.cn/image-20220126083553646.png"alt="image-20220126083553646" /><figcaption aria-hidden="true">image-20220126083553646</figcaption></figure><h1 id="列表初始化">列表初始化</h1><p>如</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> units&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">units</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="keyword">int</span> units = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> units = &#123;<span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure><h1 id="声明与定义">声明与定义</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明：</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> i</span><br><span class="line"><span class="comment">//定义</span></span><br><span class="line"><span class="keyword">int</span> j</span><br></pre></td></tr></table></figure><p>多个文件用同一个变量时可以有多个声明但是只能有一个定义</p><p>声明后赋值将变成定义</p><h1 id="引用">引用</h1><p>在定义引用时程序把引用和初始值绑定，所以必须初始化</p><p>“引用即别名”，为引用赋值实际上是把值赋给了与引用绑定的对象。获取引用的值实际上是获取与引用绑定对象的值。</p><p>引用类型初始值必须是对象</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> &amp;ref = <span class="number">4</span><span class="comment">//错误</span></span><br></pre></td></tr></table></figure><h1 id="指针">指针</h1><h2 id="指针定义">指针定义</h2><p>指针存放某个对象的地址，要想获取地址需要使用取地址符&amp;</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> dval; <span class="comment">//dval是double类型变量</span></span><br><span class="line"><span class="keyword">double</span> *pd = &amp;dval;<span class="comment">//pd是指向dval的double型指针</span></span><br><span class="line"><span class="keyword">double</span> *pd2 = pd;<span class="comment">//pd2是指向pd的double型指针</span></span><br><span class="line"><span class="keyword">int</span> *pi = pd;<span class="comment">//错误，pi类型与pd不匹配</span></span><br><span class="line">pi = &amp;dval<span class="comment">//错误，试图把double类型对象地址赋给int型指针</span></span><br></pre></td></tr></table></figure><p>指针的值应该是4种状态之一：</p><ol type="1"><li>指向一个对象</li><li>指向紧邻对象所占空间的下一个位置</li><li>空指针，没有指向任何对象</li><li>无效指针，上述情况以外</li></ol><h2 id="利用指针访问对象">利用指针访问对象</h2><p>指针指向一个对象时可以用解引用符*来访问该对象</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ival = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> *p = &amp;ival;<span class="comment">//p里存着ival的地址</span></span><br><span class="line">cout &lt;&lt; *p;<span class="comment">//用*解引用得到p指针所指对象</span></span><br></pre></td></tr></table></figure><h2 id="复合类型写法">复合类型写法</h2><p>有两种写法：</p><p>1.<code>int* p;</code></p><p>着重强调本次定义了一种复合类型</p><p>2.<code>int *p;</code></p><p>着重强调变量具有的复合类型</p><p>复杂声明语句从右向左阅读，离变量名最近的符号对变量类型有最直接影响</p><h1 id="const">Const</h1><p>默认只能在一个文件内使用，要想共享需要在声明的时候在前边加extern</p><p>const指针：<code>int *const curErr = &amp;errNumb;</code></p><h1 id="头文件保护符">头文件保护符</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> aaa <span class="comment">//如果aaa已定义为真</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> aaa <span class="comment">///如果aaa未定义为真</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> aaa</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><h1 id="string">String</h1><p>需引入string头文件</p><h2 id="定义">定义</h2><p>可以使用<code>string s(10,'c')</code>，s是cccccccccc</p><p>可以使用<code>string('qwe')</code></p><h2 id="方法">方法</h2><p>s.size(),s1+s2,s.empty()</p><p>cin&gt;&gt;s，遇到空格停</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> s:str)</span><br><span class="line">  cout&lt;&lt;s;</span><br></pre></td></tr></table></figure><h1 id="vector">Vector</h1><p>需要#include <vector></p><h2 id="定义-1">定义</h2><p>可以用小括号或大括号，大括号是列表初始化，小括号可以定义重复元素或者指定大小</p><p>用大括号时会尽可能把值当成初始值来处理，不行的时候尝试圆括号初始化方式。</p><p>一般来讲，初始化适用于以下三种：</p><ol type="1"><li>初始值已知且较少</li><li>初始值是另一个vector副本</li><li>重复初始值</li></ol><h2 id="方法-1">方法</h2><p>添加元素：v.push_back()</p><p>v.empty()</p><p>v.size()</p><h1 id="迭代器">迭代器</h1><p>有迭代器的类型都有begin和end方法,C++11新引入了cbegin和cend方法返回const类型</p><p>*iter返回所指元素的引用</p><p>运算时加减整数仍然是一个迭代器，进行了一些移动。两个迭代器相减得到他们的距离</p><h1 id="数组">数组</h1><h2 id="定义-2">定义</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>];<span class="comment">//10个大小的数组</span></span><br><span class="line"><span class="keyword">int</span> *parr[<span class="number">10</span>];<span class="comment">//10个int指针的数组</span></span><br><span class="line"><span class="keyword">char</span> a[] = &#123;<span class="string">&#x27;q&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="string">&#x27;e&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">char</span> a[] = <span class="string">&quot;qwe&quot;</span>;</span><br><span class="line"><span class="comment">//不可以使用：</span></span><br><span class="line"><span class="keyword">char</span> b[] = a;</span><br></pre></td></tr></table></figure><h2 id="数组与指针">数组与指针</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string nums[] = &#123;<span class="string">&#x27;q&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="string">&#x27;e&#x27;</span>&#125;;</span><br><span class="line">string *p = nums; <span class="comment">//== p = &amp;nums[0]</span></span><br><span class="line"><span class="comment">//nums其实是指向头元素的指针</span></span><br></pre></td></tr></table></figure><p>标准库函数begin(s),end(s)返回指向的指针</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *beg = <span class="built_in">begin</span>(ia);</span><br></pre></td></tr></table></figure><p>获得大小可以使用sizeof()</p><h2 id="多维数组">多维数组</h2><h3 id="初始化">初始化</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ia[<span class="number">3</span>][<span class="number">4</span>] = &#123;<span class="number">0</span>&#125;;<span class="comment">//全0</span></span><br><span class="line"><span class="keyword">int</span> ia[<span class="number">3</span>][<span class="number">4</span>] = &#123;</span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> ia[<span class="number">3</span>][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;<span class="comment">//与上边的相等</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="跳转语句">跳转语句</h2><h3 id="break">break</h3><p>终止离他最近的while,do while,for和switch语句。</p><h3 id="continue">continue</h3><p>终止最近的循环中的当前迭代并立刻开始下一次迭代，只能出现在for和while内部</p><h1 id="函数">函数</h1><h2 id="函数内静态对象">函数内静态对象</h2><p>函数内定义的static对象只初始化一次，可以用来计数函数进行次数</p>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ Primer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开始</title>
      <link href="/2022/01/25/%E5%BC%80%E5%A7%8B/"/>
      <url>/2022/01/25/%E5%BC%80%E5%A7%8B/</url>
      
        <content type="html"><![CDATA[<figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220125145908636.png"alt="image-20220125145908636" /><figcaption aria-hidden="true">image-20220125145908636</figcaption></figure><span id="more"></span><h1 id="编译器">编译器</h1><p>编译器有gcc,clang,llvm等。但是在macOS上安装Xcode commandline后会自动安装clang，并且将gcc定向到clang，可以用-v验证：</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220125151113141.png"alt="image-20220125151113141" /><figcaption aria-hidden="true">image-20220125151113141</figcaption></figure><p>因此不要被误导，认为gcc和clang是一个东西。要在mac使用gcc也很简单。首先使用<code>brew install gcc</code>安装gcc，然后根据安装的版本来使用：</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220125151232833.png"alt="image-20220125151232833" /><figcaption aria-hidden="true">image-20220125151232833</figcaption></figure><p>我这里安装的是gcc--11.2，因此就可以用gcc-11调用GNU的gcc编译器</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220125151315675.png"alt="image-20220125151315675" /><figcaption aria-hidden="true">image-20220125151315675</figcaption></figure><h2 id="clang用法">clang用法：</h2><p>所有用法可以去[<ahref="https://clang.llvm.org/docs/UsersManual.html">clang官网</a>]查看，这里列出几个常用的：</p><ul><li><p><code>-o &lt;file&gt;</code></p><p>输出到某个文件中</p></li><li><p><code>-c</code></p><p>只运行预处理，编译和汇编</p></li></ul><h2 id="读取数量不定的输入">读取数量不定的输入</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>,value = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//可以最后输入0.0来终止，while读取的是输入流的状态</span></span><br><span class="line"><span class="keyword">while</span> (std::cin&gt;&gt;value)&#123;</span><br><span class="line">  sum+=value;</span><br><span class="line">&#125;</span><br><span class="line">std::cout&lt;&lt;sum;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ Primer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>强制git使用ssh</title>
      <link href="/2022/01/22/%E5%BC%BA%E5%88%B6git%E4%BD%BF%E7%94%A8ssh/"/>
      <url>/2022/01/22/%E5%BC%BA%E5%88%B6git%E4%BD%BF%E7%94%A8ssh/</url>
      
        <content type="html"><![CDATA[<p>国内使用github时由于网络问题，push和pull时经常会卡，因此建议使用ssh代替http.</p><span id="more"></span><p>虽然在github页面可以直接选择使用ssh链接，但是有一些软件会使用git服务，这时就不是很好切换，我的例子是在使用cocoapods的时候没法podinstall。所以尝试在gitconfig里强制使用ssh。</p><p>只需要在~/.gitconfig里加以下内容即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[url &quot;git@github.com:&quot;]</span><br><span class="line">  insteadOf = https://github.com/</span><br><span class="line">[url &quot;git@github.com:&quot;]</span><br><span class="line">  pushInsteadOf = &quot;git://github.com/&quot;</span><br><span class="line">[url &quot;git@github.com:&quot;]</span><br><span class="line">  pushInsteadOf = &quot;https://github.com/&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>104.二叉树的最大深度</title>
      <link href="/2022/01/15/104-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/"/>
      <url>/2022/01/15/104-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>给定一个二叉树，找出其最大深度。</p><p>二叉树的深度为根节点到最远叶子节点的最长路径上的节点数。</p><p><strong>说明:</strong> 叶子节点是指没有子节点的节点。</p><span id="more"></span><p>示例： 给定二叉树 [3,9,20,null,null,15,7]，</p><pre><code>        3   / \  9  20    /  \   15   7</code></pre><p>返回它的最大深度 3 。</p><p>解法一：递归</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">1</span>+<span class="built_in">Math</span>.max(maxDepth(root.left),maxDepth(root.right))</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220115123206116.png"alt="image-20220115123206116" /><figcaption aria-hidden="true">image-20220115123206116</figcaption></figure><p>解法二：BFS</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> queue = [];</span><br><span class="line">  queue.push(root);</span><br><span class="line">  <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> size = queue.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">      <span class="comment">// 队头出队列</span></span><br><span class="line">      <span class="keyword">let</span> node = queue.shift();</span><br><span class="line">      <span class="keyword">if</span> (node.left) queue.push(node.left);</span><br><span class="line">      <span class="keyword">if</span> (node.right) queue.push(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">    ans += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220115192905403.png"alt="image-20220115192905403" /><figcaption aria-hidden="true">image-20220115192905403</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> easy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo上github-pages后的一些优化</title>
      <link href="/2022/01/15/hexo%E4%B8%8Agithub-pages%E5%90%8E%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BC%98%E5%8C%96/"/>
      <url>/2022/01/15/hexo%E4%B8%8Agithub-pages%E5%90%8E%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>本文介绍使用githubpages负载hexo的优化，包括push不受网络问题影响，网站https设置，使用CDN加速浏览</p><span id="more"></span><h1 id="使用ssh加速push操作">使用ssh加速push操作</h1><p>由于国内网络问题，使用http向githubpush的时候经常遇到卡顿或者无法连接的情况，建议使用ssh</p><p>首先需要用<code>ssh-keygen</code>来生成一个ssh密钥。然后把id_rsa.pub里的内容复制到github里</p><p>在_config.yml中将github链接改为ssh对应的链接，删除.git_deploy文件，使用hexoclean，然后再hexo g &amp;&amp; hexo d</p><h1 id="使用https给网页加密">使用https给网页加密</h1><p>在腾讯云可以免费申请ssl证书。申请后可以搭配下边cdn一起使用。在githubpages位置开启强制HTTPS即可</p><h1 id="使用cdn加速网站访问">使用CDN加速网站访问</h1><p>在腾讯云-内容分发网络-域名管理新建针对网站域名的CDN服务</p><p>在原站配置选自有源，https<imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220115111541902.png"alt="image-20220115111541902" /></p><p>地址就填github官方给的地址</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;185.199.108.153</span><br><span class="line">&gt;185.199.109.153</span><br><span class="line">&gt;185.199.110.153</span><br><span class="line">&gt;185.199.111.153</span><br></pre></td></tr></table></figure></blockquote><p>开启后在缓存位置可以改短一些，我设置的是1天缓存。缓存时间太长会导致网页更新后访问不到最新的页面。你也可以手动在刷新预热-URL刷新删除所有CDN缓存。</p><p>测试结果：</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/1s-%E6%B5%8B%E9%80%9F.png"alt="1s-测速" /><figcaption aria-hidden="true">1s-测速</figcaption></figure><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/1h-%E6%B5%8B%E9%80%9F.png"alt="1h-测速" /><figcaption aria-hidden="true">1h-测速</figcaption></figure><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/1d-%E6%B5%8B%E9%80%9F.png"alt="1d-测速" /><figcaption aria-hidden="true">1d-测速</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图床测试</title>
      <link href="/2022/01/12/%E5%9B%BE%E5%BA%8A%E6%B5%8B%E8%AF%95/"/>
      <url>/2022/01/12/%E5%9B%BE%E5%BA%8A%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>七牛图床和gitee图床测试</p><span id="more"></span><p>七牛图床：</p><figure><img data-src="https://img.zhaoxuanlang.cn/image-20220112202327645.png"alt="image-20220112202327645" /><figcaption aria-hidden="true">image-20220112202327645</figcaption></figure><p>Gitee图床：</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220112202349502.png"alt="image-20220112202349502" /><figcaption aria-hidden="true">image-20220112202349502</figcaption></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>在Mac使用gnupg加密git</title>
      <link href="/2022/01/04/%E5%9C%A8Mac%E4%BD%BF%E7%94%A8gnupg%E5%8A%A0%E5%AF%86git/"/>
      <url>/2022/01/04/%E5%9C%A8Mac%E4%BD%BF%E7%94%A8gnupg%E5%8A%A0%E5%AF%86git/</url>
      
        <content type="html"><![CDATA[<p>让你的git提交也能拥有酷炫的认证标志</p><span id="more"></span><h2 id="生成gpg密码并测试可以使用">生成gpg密码并测试可以使用</h2><p>首先需要下载安装gpg</p><p><code>brew install gpg</code></p><p>安装好之后看一眼有没有pinentry <code>pinentry -h</code></p><p>有的话用<code>which pinentry</code>查找一下在哪，没有的话使用<code>brew install pinentry</code>安装</p><p>找到目录后使用<code>vim ~/.gnupg/gpg-agent.conf</code>添加一行<code>pinentry-program /usr/local/bin/pinentry</code>这里写你自己的路径</p><p>然后使用<code>gpg --full-generate-key</code>生成，跟着指引走即可，注意一点，邮箱需要和github里添加的一样</p><p>然后使用<code>echo "test"|gpg --clearsign</code>测试一下能不能用，在这一步可能会报错</p><blockquote><p>gpg: 签名时失败： Inappropriate ioctl for device gpg: [stdin]:clear-sign failed: Inappropriate ioctl for device</p></blockquote><p>解决方案：编辑~/.gnupg目录下的gpg.conf和gpg-agent.conf两个文件</p><p>gpg.conf</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span>-<span class="title">agent</span></span><br><span class="line"><span class="title">pinentry</span>-<span class="title">mode</span> <span class="title">loopback</span></span><br></pre></td></tr></table></figure><p>gpg-agent.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow-loopback-pinentry</span><br></pre></td></tr></table></figure><p>更改完后使用<code>gpgconf --kill gpg-agent</code>重启gpg，然后再尝试，此时应该可以生成密码了</p><h2 id="配置git">配置git</h2><p>使用<code>gpg --list-secret-keys --keyid-format=long</code>查看当前的秘钥</p><blockquote><p>/Users/zxl/.gnupg/pubring.kbx</p><p>sec rsa3072/89E3C55059BE3D97 2022-01-04 [SC]CE52DE13A3615D3687F9C82389E3C55059BE3D97 uid [ 绝对 ] Zhaoxuanlang (It'sme!) <a href="mailto:1982606762@qq.com"class="email">1982606762@qq.com</a> ssb rsa3072/1CF09AC8CF9821942022-01-04 [E]</p></blockquote><p>这里你密钥的ID是89E3C55059BE3D97</p><p>然后使用<code>gpg --armor --export 89E3C55059BE3D97</code>查看公钥，复制所有包括BEGIN和END的内容</p><p>进入github页面-settings-SSH-新增GPG，复制进去即可</p><p>还需要在本地设置git使用密钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.signingkey &quot;GPG key ID&quot;</span><br></pre></td></tr></table></figure><p>然后在commit的时候使用<code>git commit -S -m "xxxx"</code>来加密本次提交，push之后就可以见到<imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220104122352299.png"alt="image-20220104122352299" /></p><p>防止每次都加-S太麻烦可以使用<code>git config --global commit.gpgsign true</code>来默认使用加密提交</p><p>此外，还可以使用<code>gpg --delete-secret-and-public-key your@email.addr</code>来删除已生成的本地密钥</p><p>或是两步删除密钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg -k #列出所有密钥</span><br><span class="line">gpg --delete-secret-keys id</span><br><span class="line">gpg --delete-keys id</span><br></pre></td></tr></table></figure><h2 id="参考链接">参考链接</h2><p>https://blog.csdn.net/qq_33154343/article/details/106030946</p><p>https://superuser.com/questions/1628782/gpg-signing-failed-no-pinentry</p><p>https://docs.github.com/cn/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key</p><p>https://frostming.com/2019/11-25/git-commit-sign/</p><p>https://blog.chaos.run/dreams/using-gpg/</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swift学习</title>
      <link href="/2021/12/03/swift%E5%AD%A6%E4%B9%A0/"/>
      <url>/2021/12/03/swift%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>udemy <ahref="https://www.udemy.com/course/ios-13-app-development-bootcamp/">iOS&amp; Swift - The Complete iOS App Development Bootcamp</a> 学习笔记</p><span id="more"></span><h1 id="使用xcode">使用xcode</h1><p>在view中使用上方的加号可以添加元素，点击元素在右侧可以修改属性</p><p>使用assistant分屏左侧view右侧controller的时候点control并将元素拖到右边可以创建链接，按钮需要放到最下边并使用UIButton</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211203214120296.png"alt="image-20211203214120296" /><figcaption aria-hidden="true">image-20211203214120296</figcaption></figure><blockquote><p>control+I自动格式化</p><p>cmd+shift+B分析代码</p></blockquote><h2 id="在storyboard中修改按钮圆角">在storyboard中修改按钮圆角</h2><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211206191909648.png"alt="image-20211206191909648" /><figcaption aria-hidden="true">image-20211206191909648</figcaption></figure><p>在这里新增<code>layer.cornerRadius</code> 即可</p><h2 id="可视化选择uicolor和img">可视化选择UIColor和Img</h2><p>Xcode13之后变成了<code>#colorLiteral()</code> 和<code>#imgLiteral()</code> 来快速选择</p><p>Xcode13之前可以使用 <code>color literal</code>来自动补全</p><h2 id="使用自带图形sfsymbol">使用自带图形SFSymbol</h2><p>点imageview，右边image下拉菜单找或者输入名字</p><h2 id="dark-mode">Dark Mode</h2><p>将颜色设置成label或者Systemcolor就可以随系统变化</p><p>自定义颜色：</p><ol type="1"><li>在Assets.xcassets里左下角点加号新增一个colorset，然后分别自定义各个颜色</li></ol><p>自定义图片：</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211220185034330.png"alt="image-20211220185034330" /><figcaption aria-hidden="true">image-20211220185034330</figcaption></figure><h2 id="分割线和自定义快捷输入">分割线和自定义快捷输入</h2><p>分割线是<code>//MARK: -</code></p><p>选中函数右键，create code snippet可以新建快捷输入</p><h1 id="swift基础">Swift基础</h1><p>用var声明变量，用let声明常量。</p><p>获取随机数： Int.random(in:begin...end)Int.random(in:begin..&lt;end)不包含endFloat.random(in:begin...end)获取浮点随机数</p><p>arr.shuffle()可以将数组打乱顺序</p><p>字符串可以直接用加号连接</p><h2 id="for循环建议使用">for循环建议使用</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">_</span> <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">6</span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也支持</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> titleText <span class="operator">=</span> <span class="string">&quot;⚡️FlashChat&quot;</span></span><br><span class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> titleText&#123;</span><br><span class="line">    <span class="built_in">print</span>(letter)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="if语句">if语句</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a <span class="operator">==</span> <span class="number">1</span>&#123;</span><br><span class="line">  xxx</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="switch语句">switch语句</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num <span class="operator">=</span> <span class="type">Int</span>.random(in: <span class="number">0</span><span class="operator">...</span><span class="number">100</span>)</span><br><span class="line"><span class="keyword">switch</span> num &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="swift-range">Swift range</h2><blockquote><p>a...b closed Range [a,b]</p><p>a..&lt;b half open Range [a,b)</p><p>...b One sided Range [1,b]</p></blockquote><h2 id="dictionary">Dictionary</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dic <span class="operator">=</span> [:]</span><br><span class="line"><span class="keyword">let</span> dic : [<span class="type">String</span>:<span class="type">Int</span>] <span class="operator">=</span> [<span class="string">&quot;aaa&quot;</span>:<span class="number">123</span>]</span><br></pre></td></tr></table></figure><h2 id="optional">Optional</h2><p>一个变量如果可能是nil就是一个optional变量，如果用到某个变量，他有可能是nil，并且是nil的时候会崩溃，就需要使用optional变量</p><blockquote><p>string 普通string String? optional string</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name : string<span class="operator">?</span> <span class="operator">=</span> <span class="literal">nil</span></span><br></pre></td></tr></table></figure><h2 id="structure">Structure</h2><p>包含property 和method¡</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyStructure</span></span>&#123;</span><br><span class="line">  <span class="keyword">let</span> name : <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> p : [<span class="type">String</span>]</span><br><span class="line">  <span class="function"><span class="keyword">init</span>(<span class="params">name</span>:<span class="type">String</span>,<span class="params">p</span>:[<span class="type">String</span>])</span>&#123;</span><br><span class="line">    <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    <span class="keyword">self</span>.p <span class="operator">=</span> p</span><br><span class="line">&#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">hello</span>()</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s1 <span class="operator">=</span> <span class="type">MyStructure</span>()</span><br><span class="line"><span class="built_in">print</span>(s1.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exercise</span>()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">User</span></span>&#123;</span><br><span class="line">        <span class="keyword">let</span> name : <span class="type">String</span></span><br><span class="line">        <span class="keyword">var</span> email : <span class="type">String</span>?</span><br><span class="line">        <span class="keyword">var</span> followers : <span class="type">Int</span></span><br><span class="line">        <span class="keyword">var</span> isActive : <span class="type">Bool</span></span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">logStatus</span>()</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.isActive &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(<span class="keyword">self</span>.name)</span> is working hard&quot;</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(<span class="keyword">self</span>.name)</span> has left the earth&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Define the User struct here</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialise a User struct here</span></span><br><span class="line">    <span class="keyword">var</span> riuser <span class="operator">=</span> <span class="type">User</span>(name: <span class="string">&quot;Richard&quot;</span>, email: <span class="literal">nil</span>, followers: <span class="number">0</span>, isActive: <span class="literal">false</span>)</span><br><span class="line">    riuser.logStatus()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Diagnostic code - do not change this code</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\n</span>Diagnostic code (i.e., Challenge Hint):&quot;</span>)</span><br><span class="line">    <span class="keyword">var</span> musk <span class="operator">=</span> <span class="type">User</span>(name: <span class="string">&quot;Elon&quot;</span>, email: <span class="string">&quot;elon@tesla.com&quot;</span>, followers: <span class="number">2001</span>, isActive: <span class="literal">true</span>)</span><br><span class="line">    musk.logStatus()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Contacting <span class="subst">\(musk.name)</span> on <span class="subst">\(musk.email<span class="operator">!</span>)</span> ...&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(musk.name)</span> has <span class="subst">\(musk.followers)</span> followers&quot;</span>)</span><br><span class="line">    <span class="comment">// sometime later</span></span><br><span class="line">    musk.isActive <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    musk.logStatus()</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="external-parameter">External parameter</h2><p>一个函数的参数可以有一个外部名字和一个内部名字，在设置了之后，使用函数就可以用外部名字传参，函数内再使用内部名字。或者直接不使用外部名字，使用函数时就不需要写参数名</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//with external parameter</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span>(<span class="params">answer</span> <span class="params">parameter</span>:<span class="type">String</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">print</span>(parameter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(answer:<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//without external parameter</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test2</span>(<span class="keyword">_</span> <span class="params">parameter</span>:<span class="type">String</span>,<span class="keyword">_</span> <span class="params">para2</span>:<span class="type">Int</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(parameter)</span><br><span class="line">    <span class="built_in">print</span>(para2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test2(<span class="string">&quot;Hello&quot;</span>,<span class="number">123</span>)</span><br></pre></td></tr></table></figure><h2 id="function">Function</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isOdd</span>(<span class="keyword">_</span> <span class="params">n</span>:<span class="type">Int</span>)</span>-&gt; <span class="type">Bool</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> n<span class="operator">%</span><span class="number">2</span> <span class="operator">==</span> <span class="number">1</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="mutable可变性">Mutable(可变性)</h2><p>Swift中用var创建的变量都是mutable，用let创建的都是immutable。在修改immutable变量时需要打碎再重建</p><p>在struct内部修改struct变量值的时候需要给方法添加mutating属性</p><p>使用SwiftUI的时候可以给变量加@State属性来修复</p><h2 id="保留小数位数">保留小数位数</h2><p>从Double转到String时可使用<code>String("$.2f",num)</code>来保留两位小数</p><p>从Int转到String，不足两位前面补0：<code>String("%02d,num")</code></p><h2 id="类和继承">类和继承</h2><p>类的定义方式和结构体类似</p><p>继承：<code>class A : B&#123;&#125;</code></p><p>重载函数： <code>override func a()&#123;&#125;</code></p><p>使用父类的函数：<code>super.funca()</code></p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211210111025022.png"alt="image-20211210111025022" /><figcaption aria-hidden="true">image-20211210111025022</figcaption></figure><p>NSObject(NextObject)</p><h2 id="struct和class区别">Struct和Class区别</h2><p>使用A=B的时候Class是浅拷贝，struct是深拷贝</p><p>struct使用值传递，class使用reference传递</p><p>apple建议一开始使用struct，有需要时再变成class</p><h2 id="optional进阶用法">Optional进阶用法</h2><ol type="1"><li><p>强制unwrap a = optional!</p></li><li><p>```swift if optional != nil{ print(safe!) }else{</p><p>} <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. optional binding : </span><br><span class="line"></span><br><span class="line">   ```swift</span><br><span class="line">   if let safe = optional&#123;</span><br><span class="line">     print(safe)</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">     </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p></li><li><p>Default: <code>optional ?? defaltvalue</code></p></li><li><p>Optional chaining <code>optional?.prop</code></p></li></ol><h2 id="自动页面位置">自动页面位置</h2><p>横屏时自动修正位置：</p><p>可以通过添加位置约束和对齐的方式</p><blockquote><ul><li>位置约束：距离最近的元素上下左右具体多少像素</li><li>对齐：水平轴或者垂直轴居中</li><li>也可以两者一起使用</li></ul></blockquote><p>添加位置约束：</p><p>选择需要修改的view，选中需要修改的元素，右下角添加约束</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211204153117825.png"alt="image-20211204153117825" /><figcaption aria-hidden="true">image-20211204153117825</figcaption></figure><p>把虚线点成实线后add。现在横屏后可能会局限在safearea中，就需要点constraint，具体修改四个方位的safearea改成superview即可</p><p>添加居中：</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211204155250623.png"alt="image-20211204155250623" /><figcaption aria-hidden="true">image-20211204155250623</figcaption></figure><p>两个一起使用可以制作出如图label效果，垂直轴居中并且离上边元素30px</p><p>居中时会让元素大小发生变化，可以使用constrain来设置大小</p><h3 id="用view控制位置">用view控制位置</h3><p>对复杂元素定位时可以使用view，就是div的用处。选中需要在一起的元素点击这里可以放进一个view。</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211204160340654.png"alt="image-20211204160340654" /><figcaption aria-hidden="true">image-20211204160340654</figcaption></figure><p>Stackview可以把多个view堆叠。将多个view添加到一个stackview后可以调整边距，元素距离等。</p><blockquote><p>Bug:Stack view的Alignment设置成vertical时会使按钮无法使用，需要设置成Fill</p></blockquote><h2 id="播放声音">播放声音</h2><p>在遇到新模块的时候去google，模板：dosth+language+stackoverflow</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AVFoundation</span><br><span class="line"><span class="keyword">var</span> player: <span class="type">AVAudioPlayer</span>?</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">playSound</span>(<span class="params">name</span>: <span class="type">String</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">Bundle</span>.main.url(forResource: name, withExtension: <span class="string">&quot;mp3&quot;</span>) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> <span class="type">AVAudioSession</span>.sharedInstance().setCategory(.playback, mode: .default)</span><br><span class="line">            <span class="keyword">try</span> <span class="type">AVAudioSession</span>.sharedInstance().setActive(<span class="literal">true</span>)</span><br><span class="line">            </span><br><span class="line">            player <span class="operator">=</span> <span class="keyword">try</span> <span class="type">AVAudioPlayer</span>(contentsOf: url, fileTypeHint: <span class="type">AVFileType</span>.mp3.rawValue)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> player <span class="operator">=</span> player <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">            </span><br><span class="line">            player.play()</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> <span class="keyword">let</span> error &#123;</span><br><span class="line">            <span class="built_in">print</span>(error.localizedDescription)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="使用progressviewer">使用progressViewer</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">progressViewer.setProgress(<span class="number">0.0</span>,animated: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><h2 id="定时器">定时器</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timer <span class="operator">=</span> <span class="type">Timer</span>?</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">startTimer</span>(<span class="params">time</span>:<span class="type">Int</span>)</span> &#123;</span><br><span class="line">        timer<span class="operator">?</span>.invalidate()</span><br><span class="line">        timer <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">        counter <span class="operator">=</span> time</span><br><span class="line">        timer <span class="operator">=</span> <span class="type">Timer</span>.scheduledTimer(timeInterval: <span class="number">1.0</span>, target: <span class="keyword">self</span>, selector: #selector(updateCounter), userInfo: <span class="literal">nil</span>, repeats: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">updateCounter</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> counter <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">            progressViewer.setProgress(<span class="type">Float</span>(times[hard]<span class="operator">!-</span>counter)<span class="operator">/</span><span class="type">Float</span>(times[hard]<span class="operator">!</span>), animated: <span class="literal">true</span>)</span><br><span class="line">            counter <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            playSound(name: <span class="string">&quot;alarm_sound&quot;</span>)</span><br><span class="line">            progressViewer.setProgress(<span class="number">1.0</span>, animated: <span class="literal">true</span>)</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">self</span>.progressViewer.setProgress(<span class="number">0.0</span>, animated: <span class="literal">true</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> timer <span class="operator">=</span> <span class="keyword">self</span>.timer &#123;</span><br><span class="line">                timer.invalidate()</span><br><span class="line">                <span class="keyword">self</span>.timer <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="设计模式">设计模式</h2><p>设计模式就是针对某一种问题的一个经过验证的解决方案</p><p>有很多设计模式</p><h3 id="mvc">MVC</h3><p>Model-view-controller</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211206165603374.png"alt="image-20211206165603374" /><figcaption aria-hidden="true">image-20211206165603374</figcaption></figure><h3 id="delegate">Delegate</h3><p>常用delegate：</p><p>Decodable：用于表明这个struct可以转化成json</p><p>Identifiable：必须自己有一个叫做id的东西，可以使用computedpropoty代替。用处可以简便的遍历这个类的元素</p><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211228193140941.png"alt="image-20211228193140941" /><figcaption aria-hidden="true">image-20211228193140941</figcaption></figure><h2 id="使用代码新建view">使用代码新建view</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">secondViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bmi <span class="operator">=</span>  <span class="string">&quot;0.0&quot;</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .red</span><br><span class="line">        <span class="keyword">let</span> label <span class="operator">=</span> <span class="type">UILabel</span>()</span><br><span class="line">        label.text <span class="operator">=</span> bmi</span><br><span class="line">        label.frame <span class="operator">=</span> <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">100</span>, height: <span class="number">50</span>)</span><br><span class="line">        label.backgroundColor <span class="operator">=</span> .green</span><br><span class="line">        view.addSubview(label)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="切换显示view">切换显示view</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vc2 <span class="operator">=</span> secondViewController()</span><br><span class="line">vc2.bmi <span class="operator">=</span> <span class="type">String</span>(format: <span class="string">&quot;%.2f&quot;</span>, bmi1)</span><br><span class="line"><span class="keyword">self</span>.present(vc2, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><h2 id="创建segue">创建segue</h2><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20211211172952388.png"alt="image-20211211172952388" /><figcaption aria-hidden="true">image-20211211172952388</figcaption></figure><p>在controller上或者view上边的小点上按住control拖到下边的viewcontroller</p><p>还可以直接按住cintrol从Aview里的某一个按钮上拖到另一个view</p><p>segue可以定义页面切换的动画，不同segue的区别：https://help.apple.com/xcode/mac/8.0/#/dev564169bb1</p><p>若要用segue从Acontroller切换到Bcontroller：</p><blockquote><p>需要在Acontroller中定义prepare函数来传输一些B必要的变量</p><p>A中使用<code>self.performSegue</code>切换.第一个是在storyboard设置的名称，第二个是self或别的类</p><p>B中使用 <code>dismiss</code> 来回去</p></blockquote><figure><imgsrc="https://gitee.com/Squirrel_01/img/raw/master/img/image-20220123215120967.png"alt="image-20220123215120967" /><figcaption aria-hidden="true">image-20220123215120967</figcaption></figure><h2 id="protocol用法">protocol用法</h2><p>protocol类似一种认证，其实就是虚类</p><p>内部类似虚类，只能定义函数名</p><p>用的时候需要定义函数</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">airplane</span>: <span class="title">canfly</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">fly</span>()</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;fly&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用api获得天气数据">使用api获得天气数据</h2><p>在openweather注册账号，使用current来获取数据，还可以自定义一些显示特征</p><h2 id="使用swift进行url链接">使用swift进行url链接</h2><ol type="1"><li>生成url</li><li>创建URLSession</li><li>给UrlSession一个任务</li><li>运行任务</li></ol><h2 id="用函数作为参数匿名函数">用函数作为参数，匿名函数</h2><p>函数作参数传入：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculate</span>(<span class="params">n1</span>:<span class="type">Int</span>,<span class="params">n2</span>:<span class="type">Int</span>,<span class="params">operation</span>:(<span class="type">Int</span>,<span class="type">Int</span>)-&gt;<span class="type">Int</span>)</span>-&gt;<span class="type">Int</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> operation(n1,n2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">plus</span>(<span class="params">n1</span>:<span class="type">Int</span>,<span class="params">n2</span>:<span class="type">Int</span>)</span>-&gt;<span class="type">Int</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n1<span class="operator">+</span>n2</span><br><span class="line">&#125;</span><br><span class="line">calculate(n1: <span class="number">2</span>, n2: <span class="number">3</span>, operation: plus(n1:n2:))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>匿名函数：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    (no1:<span class="type">Int</span>,no2:<span class="type">Int</span>)-&gt;<span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> no1<span class="operator">+</span>no2</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//编译器可以预判你要输出一些东西</span></span><br><span class="line">calculate(n1:<span class="number">2</span>,n2:<span class="number">3</span>,operation:&#123;(no1,no2) <span class="keyword">in</span> </span><br><span class="line">                              no1<span class="operator">+</span>no2&#125;)</span><br><span class="line"><span class="comment">//$0代表第一个变量</span></span><br><span class="line">calculate(n1:<span class="number">2</span>,n2:<span class="number">3</span>,operation:&#123;<span class="variable">$0</span><span class="operator">+</span><span class="variable">$1</span>&#125;)</span><br><span class="line">calculate(n1:<span class="number">2</span>,n2:<span class="number">3</span>)&#123;<span class="variable">$1</span><span class="operator">+</span><span class="variable">$2</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="map函数">Map函数</h2><p><code>array.map(func1)</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newarray <span class="operator">=</span> array.map&#123;<span class="string">&quot;<span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>&#125;</span><br><span class="line">array.map(&#123;(n1)<span class="keyword">in</span></span><br><span class="line">    n1<span class="operator">+</span><span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="computed-property">Computed property</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> prop:<span class="type">String</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;qwwe&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="dispatchqueue">DispatchQueue</h2><p>在需要长时间进行的任务（如从网上寻找东西）的时候系统会让他在后台执行，因为如果让用户等的话就会看起来像是卡住了。但是如果在任务中需要更新前台的显示就需要修改更新的代码</p><p>把更新部分的代码用sync包裹起来</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DispatchQueue</span>.main.sync &#123;</span><br><span class="line">            temperatureLabel.text <span class="operator">=</span> weather.temperatureString</span><br><span class="line">            conditionImageView.image <span class="operator">=</span> <span class="type">UIImage</span>(systemName: weather.conditionName)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="extension用法">extension用法</h2><p>用于扩展某个类，新增函数</p><ol type="1"><li><p>扩展内建类</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Double</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">round</span>(<span class="params">to</span>:<span class="type">Int</span>)</span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> q <span class="operator">=</span> pow(<span class="number">10</span>, <span class="type">Double</span>(to))</span><br><span class="line">        <span class="keyword">var</span> n <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">        n<span class="operator">=</span>n<span class="operator">*</span>q</span><br><span class="line">        n.round()</span><br><span class="line">        n <span class="operator">=</span> n<span class="operator">/</span>q</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> double <span class="operator">=</span> <span class="number">3.14159</span></span><br><span class="line">double.round(to:<span class="number">3</span>)</span><br></pre></td></tr></table></figure></li><li><p>扩展protocol</p><p>如果某个protocol里的函数需要一个默认值可以使用extension来添加</p></li><li><p>简化代码。</p><p>如果一个类有很多继承关系，可以把每个继承写成一个扩展，扩展内部写和这个继承相关的函数</p></li></ol><h2 id="使用cocoapods">使用cocoapods</h2><p>cocoapods类似前端的npm，是一个Swift的包管理器</p><ol type="1"><li><code>sudo gem install cocoapods</code>安装</li><li>cd到项目目录，使用pod init生成podfile</li><li>修改podfile，添加需要的模块</li><li><code>pod install</code></li><li>打开新生成的App.xcworkspace进行操作</li></ol><p>删除操作：</p><ol type="1"><li>在podfile中删除模块</li><li>使用pod install</li></ol><p>相关链接：<a href="https://cocoapods.org/">cocoapods官网</a></p><h2 id="constant文件">Constant文件</h2><p>用来记录一些项目中的常量</p><p>在根文件夹新建Constants.swift，里边新增一个Constantsstruct。里边的成员使用static修饰</p><p><imgsrc="https://img.zhaoxuanlang.cn/image-20220130205457742.png" /></p><p>let是instance变量，staticlet是type变量。type变量依赖于type，instance变量依赖于instance</p><p>建议struct叫做K，比较短</p><h2 id="uitableview">UITableView</h2><p>搜索tableview，同时新增一个tablecell。这个cell必须要设置一个identifier</p><p>也可以直接搜索UItableviewcontroller，这样的话所有所需的关联都会自动添加。（推荐）</p><h3 id="使用">使用</h3><p>在controller中首先需要有数据源的数组</p><p>然后添加两个函数，一个是有numberOfRowsInSection，返回数据源的成员个数，获得table的行数</p><p>另一个是有cellForRowAt，返回的是一个cell。这个函数内先定义一个cell，这里要用到之前的那个identifier，然后可以设置它的文本，最好返回这个cell。</p><figure><img data-src="https://img.zhaoxuanlang.cn/image-20220213113516497.png"alt="image-20220213113516497" /><figcaption aria-hidden="true">image-20220213113516497</figcaption></figure><h3 id="添加点击事件">添加点击事件</h3><p>需要用到delegate方法来呼叫delegate。</p><p>添加有didSelectRowAt的tableView方法，里边可以先写个print来获得点击的位置。点击后有灰色的效果，如果想取消灰色效果就需要加tableView.deselectRow方法。</p><p>可以通过添加accessoryType来添加尾部元素如checkmark。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">UITableView</span>, <span class="params">didSelectRowAt</span> <span class="params">indexPath</span>: <span class="type">IndexPath</span>)</span> &#123;</span><br><span class="line"><span class="comment">//        print(ItemArray[indexPath.row])</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (tableView.cellForRow(at: indexPath)<span class="operator">?</span>.accessoryType <span class="operator">==</span> .checkmark)&#123;</span><br><span class="line">            tableView.cellForRow(at: indexPath)<span class="operator">?</span>.accessoryType <span class="operator">=</span> .none</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            tableView.cellForRow(at: indexPath)<span class="operator">?</span>.accessoryType <span class="operator">=</span> .checkmark</span><br><span class="line">        &#125;</span><br><span class="line">        tableView.deselectRow(at: indexPath, animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="重新加载">重新加载</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tableview.reloadData()</span><br></pre></td></tr></table></figure><h1 id="as标签的使用">as标签的使用</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">If</span> i <span class="keyword">is</span> int&#123;</span><br><span class="line">  </span><br><span class="line">&#125;<span class="comment">//可以用来辨别i变量的属性</span></span><br></pre></td></tr></table></figure><p>as!用于强制类型转换，可以转化成子类，但是有可能在运行时报错</p><p>as?用于有可能能转化</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> a <span class="keyword">as?</span> b&#123;</span><br><span class="line">a.bfunc()</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>as是把类转化成父类（不常用）</p><h2 id="navigation-bar">Navigation bar</h2><h3 id="生成">生成</h3><p>点击第一个view，editor-embedin-navigationcontroller就可以添加进navigation stack</p><h3 id="颜色设置">颜色设置</h3><p>点左侧NavigationBar，右侧的设置中Translucent可以让它颜色和下边相同</p><p>Tint是返回文字的颜色</p><h3 id="自定义显示和隐藏">自定义显示和隐藏</h3><p>在要隐藏的view controller中添加</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillAppear</span>(xxx)</span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.viewxxxx</span><br><span class="line">  navigationController<span class="operator">?</span>.isNavigationBarHidden <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillDisappear</span>(xxx)</span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.viewxxxx</span><br><span class="line">  xxx <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在bar中添加button">在bar中添加button</h3><p>搜索barbutton添加，可以直接选择systemItem为一些预设样式</p><h2 id="view-controller-生命周期">View Controller 生命周期</h2><figure><img data-src="https://img.zhaoxuanlang.cn/image-20220201211336874.png"alt="image-20220201211336874" /><figcaption aria-hidden="true">image-20220201211336874</figcaption></figure><h2 id="swiftui使用">SwiftUI使用</h2><p>SwiftUI可以实时预览，还能直接向画面上添加组件</p><h3 id="创建">创建</h3><p>在创建项目时选择使用SwiftUI</p><h3 id="添加自定义字体">添加自定义字体</h3><p>把文件放进项目后在info里新增一条Fonts provided byapplication,值填字体的全称，包括扩展名。</p><h3 id="图片">图片</h3><p>更改大小需要加resizable，然后可以用aspectRatio来自适应。padding类似于前端的margin。</p><h3 id="extract-subview实现组件复用">Extract Subview实现组件复用</h3><p>cmd+左键点某一个组件，选择ExtractSubview就可以分离出来，然后可以进行改名。</p><p>分离出来之后在总view中新建变量，调用的时候传入变量后就可以复用。</p><p>还可以新建一个SwiftUI文件，把这个复制进去作为单独的文件用。</p><p><imgsrc="https://img.zhaoxuanlang.cn/image-20220207123719045.png" /></p><h2 id="uialert">UIAlert</h2><h3 id="定义">定义</h3><p>需要定义一个alert和一个action。alert是对话框本地，action是添加到alert对象上的选项。</p><p>alert可以添加TextField文本输入框</p><h2 id="本地存储">本地存储</h2><p><imgsrc="https://img.zhaoxuanlang.cn/%E6%88%AA%E5%B1%8F2022-02-16%20%E4%B8%8B%E5%8D%881.53.27.png" /></p><h3 id="userdefault">Userdefault</h3><p>把所有数据以key-value的形式存在一个plist里</p><p>首先需要定义一个<code>var defaults = UserDefaults.standard</code></p><p>存储：<code>self.defaults.set(xxxxx,forKey:"keyxxx")</code></p><p>读取取决于存入的类型：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defaults.array(forKey:<span class="string">&quot;keyxxx&quot;</span>)</span><br><span class="line">defaults.float()</span><br><span class="line">defaults.object()</span><br><span class="line">defaults.dictionary()</span><br></pre></td></tr></table></figure><p>不建议存储大量数据，每次读取都会读所有的plist</p><h3 id="nsdecoder">NSdecoder</h3><p>自定义plist的存储位置，可以分开多个plist存放不同数据</p><p>首先需要定义plist：</p><p><code>**let** dataFilePath = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first?.appendingPathComponent("items.plist")</code></p><p>读取与写入：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">saveitems</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> encoder <span class="operator">=</span> <span class="type">PropertyListEncoder</span>()</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try</span> encoder.encode(<span class="type">ItemArray</span>)</span><br><span class="line">            <span class="keyword">try</span> data.write(to: dataFilePath<span class="operator">!</span>)</span><br><span class="line">        &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Error saving!&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        tableView.reloadData()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadItem</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">Data</span>(contentsOf: dataFilePath<span class="operator">!</span>)&#123;</span><br><span class="line">            <span class="keyword">let</span> decoder <span class="operator">=</span> <span class="type">PropertyListDecoder</span>()</span><br><span class="line">            <span class="keyword">do</span>&#123;</span><br><span class="line">                <span class="type">ItemArray</span> <span class="operator">=</span> <span class="keyword">try</span> decoder.decode([<span class="type">Item</span>].<span class="keyword">self</span>, from: data)</span><br><span class="line">            &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">                <span class="built_in">print</span>(error)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="singleton">Singleton</h2><p>全局只能有一个</p><p>在class里定义一个static类型变量</p>]]></content>
      
      
      <categories>
          
          <category> swift </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vue学习</title>
      <link href="/2021/11/05/vue%E5%AD%A6%E4%B9%A0/"/>
      <url>/2021/11/05/vue%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="vue-app内容">vue app内容</h1><h2 id="data">data</h2><p>可以return多个内容，代表app要使用的所有数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">list</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">num</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="mounted">mounted</h2><p>在网页加载完成后自动执行内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.num = <span class="built_in">Math</span>.random() * <span class="number">100</span></span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="methods">methods</h2><p>app要使用的所有函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.list.push(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="built_in">this</span>.name,</span><br><span class="line">      <span class="attr">age</span>: <span class="built_in">this</span>.num</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.num = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="事件">事件</h3><p>函数默认第一个参数是event，若有参数就可以使用$event作为实参传入</p><p>绑定多个事件可以用逗号隔开，并且加上函数的引用括号</p><p>阻止事件冒泡，事件修饰符：</p><ul><li>可以在内层btn上使用@click.stop</li><li>可以在外层使用@click.self判断是不是点的自己</li><li>在外层加.capture让他捕获冒泡</li><li>在外层加.once让他</li></ul><p>按键修饰符：<span class="citation"data-cites="keydown">@keydown</span></p><p>Enter,tab,delete,esc,up,down,left,right</p><p>鼠标修饰符：<span class="citation"data-cites="click">@click</span></p><p>Left,right,middle</p><p>精确修饰符：<span class="citation"data-cites="click.ctrl.exact只有点击ctrl才可以">@click.ctrl.exact只有点击ctrl才可以</span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input @keydown.delete = <span class="string">&quot;handleKeyDown&quot;</span></span><br></pre></td></tr></table></figure><h2 id="template">template</h2><p>在app绑定的节点内添加里边的内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">template: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;input v-model=&quot;name&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;input v-model=&quot;num&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;button v-on:click = &quot;handleClick&quot;&gt;添加&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;ul&gt;</span></span><br><span class="line"><span class="string">                    &lt;li v-for=&quot;(item,index) in list&quot;&gt;</span></span><br><span class="line"><span class="string">                        &#123;&#123;item.name&#125;&#125;</span></span><br><span class="line"><span class="string">                        &#123;&#123;item.age&#125;&#125;</span></span><br><span class="line"><span class="string">                        &#123;&#123;index&#125;&#125;</span></span><br><span class="line"><span class="string">                    &lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">&#125;).mount(<span class="string">&#x27;#root&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="component">component</h2><p>组件，可以表示任何可见元素</p><p>定义：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.component(<span class="string">&#x27;my-component&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;content&#x27;</span>,<span class="string">&quot;index&quot;</span>],</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;li&gt;</span></span><br><span class="line"><span class="string">            &#123;&#123;content.name&#125;&#125;</span></span><br><span class="line"><span class="string">            &#123;&#123;content.age&#125;&#125;</span></span><br><span class="line"><span class="string">            &#123;&#123;index&#125;&#125;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">my-component</span> </span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">v-for</span>=<span class="string">&quot;(item,index) in list&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">v-bind:content</span>=<span class="string">&quot;item&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">v-bind:index</span> = <span class="string">&quot;index&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">/&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><h2 id="计算属性">计算属性</h2><p>computed</p><p>当计算属性依赖的内容发生变更时才重新执行计算</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="function"><span class="title">total</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Date</span>.now()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="监听器">监听器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//price发生变化时执行</span></span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="function"><span class="title">price</span>(<span class="params">current,prev</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = prev + <span class="string">&quot;changed to&quot;</span> + current</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="样式">样式</h2><p>在style里定义类，然后给标签绑定类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>&#123;</span><br><span class="line">    <span class="attr">class</span>:<span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="attr">classObj</span>:&#123;<span class="attr">red</span>:<span class="literal">true</span>,<span class="attr">green</span>:<span class="literal">true</span>&#125;,</span><br><span class="line">    <span class="attr">classArray</span>:[<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;green&#x27;</span>,&#123;<span class="attr">brown</span>:<span class="literal">true</span>&#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;div :class=&quot;classObj&quot;&gt;Hello World&lt;/div&gt;`</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>对于组价有两种方法来改变class</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.每个组价标签都加class</span></span><br><span class="line"><span class="comment">//2.父组件加class，子组件使用:class=&quot;$attrs.class&quot;继承父组件的class</span></span><br></pre></td></tr></table></figure><h1 id="vue基本操作">vue基本操作</h1><h2 id="v-for">v-for</h2><p>支持两个参数，第二个是当前项的索引，从0开始</p><h2 id="v-bind">V-bind</h2><p>用于给某个标签绑定属性，如title，class等</p><p>简写为:</p><p>v-bind:class后可以在某条件达成后获得某个类名</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in navList&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:index === activeNavIndex&#125;&quot;</span></span></span><br></pre></td></tr></table></figure><h2 id="v-on">v-on</h2><p>绑定点击事件<code>v-on:click = "handleclick"</code></p><p>简写为@click</p><h2 id="v-model">v-model</h2><p>双向绑定数据和输入框,把输入框变成单标签。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;message&#125;&#125;</span><br><span class="line">&lt;input v-model=<span class="string">&quot;message&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><h3 id="标签">标签</h3><p>可以使用：input(text,checkbox,video),textarea,select</p><p>使用checkbox的时候message可以是一个数组[]，然后input添加value就可以显示当前点的什么</p><p>也可以自定义选中和没选中的时候的显示：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">message:<span class="string">&quot;world&quot;</span></span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> v-model=<span class="string">&quot;message&quot;</span> <span class="literal">true</span>-value=<span class="string">&quot;hello&quot;</span> <span class="literal">false</span>-value=<span class="string">&quot;world&quot;</span>/&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>使用video的时候message是字符串‘’</p><p>使用select的时候message是字符串，最好给一个初始值，其中内部的option可以用object来批量初始化：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">options:[&#123;</span><br><span class="line">  <span class="attr">text</span>:<span class="string">&#x27;A&#x27;</span>,<span class="attr">value</span>:<span class="string">&#x27;A&#x27;</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">text</span>:<span class="string">&#x27;B&#x27;</span>,<span class="attr">value</span>:<span class="string">&#x27;B&#x27;</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">text</span>:<span class="string">&#x27;C&#x27;</span>,<span class="attr">value</span>:<span class="string">&#x27;C&#x27;</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;select v-model=<span class="string">&quot;message&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in options&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span>&#123;&#123;item.text&#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="修饰符">修饰符</h3><p>v-model.lazy可以让他变得变慢</p><p>V-model.number让输入的值存储成number类型</p><p>V-model.trim去除后边的空格</p><h2 id="v-once">V-once</h2><p>让语句里的变量不会在改变的时候进行渲染</p><p>内容会变，但是页面上显示的不变</p><h2 id="v-if">v-if</h2><p>根据变量判断是否展示标签</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">condotion</span>:<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div :class=&#x27;classs&#x27;&gt;Hello World&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div v-if=&quot;show&quot;&gt;if&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div v-else-if=&quot;condotion&quot;&gt;elseif&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div v-else&gt;else&lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure><p>使用template来做占位符，仅做到for循环的效果并且不添加div</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,key,index) in listItem&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;key !== &#x27;second&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    &#123;&#123;key&#125;&#125;---&#123;&#123;value&#125;&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span>    </span><br><span class="line">        &lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="v-show">v-show</h2><p>根据变量判断是否加display:none</p><h1 id="mvvm">mvvm</h1><blockquote><p>let app = Vue.<strong>createApp</strong>({</p><p>​ });</p><p>创造vue app</p><p>let vm = app.mount('#root')</p><p>vue应用的根组件</p></blockquote><h1 id="生命周期函数">生命周期函数</h1><p>某一时刻被自动执行的函数</p><figure><img data-src="https://img.zhaoxuanlang.cn/lifecycle.png"alt="The Vue Instance Lifecycle" /><figcaption aria-hidden="true">The Vue Instance Lifecycle</figcaption></figure><h1 id="组件">组件</h1><p>可以复用，每个组件内的data是独立的</p><p>全局组件定义后全局可以使用，但是性能不高</p><p>局部组件注册才能用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> counter = &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;div @click=&quot;count += 1&quot;&gt;&#123;&#123;count&#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在app里添加components:{'count':counter}，或者{counter}简写</p><h2 id="传值">传值</h2><p>在调用的时候传递<code>&lt;test content="123" /&gt;</code></p><p>或者使用v-bind:content="num"并且在data里定义num</p><p>在组件里添加<code>props:['content']</code></p><h2 id="参数类型校验">参数类型校验</h2><p>在组件里使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">props:&#123;</span><br><span class="line">  <span class="attr">content</span>: string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>就是需要传入一个string</p><p>可以使用string,boolean,array,object,function</p><p>高级用法：可以把content定义为一个object，里边可以包含default函数，validator函数，required元素等。</p><h2 id="单向数据流">单向数据流</h2><p>父组件能向子组件传值，但是子组件不能修改</p><p>方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props:[<span class="string">&#x27;count&#x27;</span>]</span><br><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>&#123;</span><br><span class="line">    <span class="attr">mycount</span>: <span class="built_in">this</span>.count</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="non-prop属性">non-prop属性</h2><p>子组件不定义prop的时候父组件传过来的值就会变成一个属性，如msg="hello"</p><p>用处：可以快速定义style</p><p>可以在子组件加inheritAttrs: false来不接收</p><p>子组件有做个的时候可以在想添加的那个组件上添加v-bind="$attrs"来获得属性</p><h2 id="父子组件间使用方法通信">父子组件间使用方法通信</h2><p>子组件使用this.$emit('add,1')</p><p>父组件监听@add = handle</p><p>handle函数有一个参数，获得1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                <span class="attr">count</span>:<span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleadd</span>(<span class="params">para</span>)</span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.count += para</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;</span></span><br><span class="line"><span class="string">            &lt;test @add=&quot;handleadd&quot; :content=&quot;count&quot;/&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span></span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line">    app.component(<span class="string">&#x27;test&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">props</span>:[<span class="string">&#x27;content&#x27;</span>],</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.$emit(<span class="string">&#x27;add&#x27;</span>,<span class="number">2</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`&lt;div @click=&quot;handleClick&quot;&gt;&#123;&#123;content&#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>使用emits是一个数组可以在数组里写所有父组件需要监听的函数名</p><p>emits如果里边加一个函数的话可以在传参的时候校验参数</p><p>高级用法：使用v-model双向绑定</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                <span class="attr">count</span>:<span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            &lt;test v-model=&quot;count&quot;/&gt;`</span></span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line">    app.component(<span class="string">&#x27;test&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">props</span>:[<span class="string">&#x27;modelValue&#x27;</span>],</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.$emit(<span class="string">&#x27;update:modelValue&#x27;</span>,<span class="built_in">this</span>.modelValue+<span class="number">3</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`&lt;div @click=&quot;handleClick&quot;&gt;&#123;&#123;modelValue&#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h2 id="动态组件">动态组件</h2><p>使用component标签实现动态切换</p><h2 id="同步组件异步组件">同步组件，异步组件</h2><p>同步组件可以直接加载，异步组件会等一会加载</p><h1 id="插槽">插槽</h1><p>使用子组件的时候想传入一个dom元素可以使用slot</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">            &lt;test&gt;</span></span><br><span class="line"><span class="string">                &lt;div&gt;提交&lt;/div&gt;    </span></span><br><span class="line"><span class="string">            &lt;/test&gt;</span></span><br><span class="line"><span class="string">            &lt;test&gt;</span></span><br><span class="line"><span class="string">                &lt;button&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/test&gt;</span></span><br><span class="line"><span class="string">            `</span></span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line">    app.component(<span class="string">&#x27;test&#x27;</span>,&#123;</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                alert(<span class="number">123</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;</span></span><br><span class="line"><span class="string">            &lt;input /&gt; </span></span><br><span class="line"><span class="string">            &lt;span @click=&quot;handleClick&quot;&gt;  </span></span><br><span class="line"><span class="string">            &lt;slot&gt;&lt;/slot&gt;</span></span><br><span class="line"><span class="string">            &lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>可以传入另一个子组件</p><p>可以设定默认值</p><h2 id="具名插槽">具名插槽</h2><p>把插槽分开，每个片段用template包裹，template上加上v-slot:"name"或者#name</p><p>子组件内部使用的时候slot加name=“”属性</p><h2 id="作用域插槽">作用域插槽</h2><p>子组件渲染的内容由父组件决定的时候使用。父组件可以调用子组件的数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">            &lt;list v-slot=&quot;&#123;item&#125;&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/list&gt;</span></span><br><span class="line"><span class="string">            `</span></span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line">    app.component(<span class="string">&#x27;list&#x27;</span>,&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                <span class="attr">list</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;</span></span><br><span class="line"><span class="string">            &lt;slot v-for=&quot;item in list&quot; :item=&quot;item&quot;/&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h1 id="vue-动画效果">Vue 动画效果</h1><h2 id="实现基础过渡和动画">实现基础过渡和动画</h2><h3 id="动画">动画</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">        @keyframes leftToright &#123;</span><br><span class="line">            <span class="number">0</span>%&#123;</span><br><span class="line">                <span class="attr">transform</span>: translateX(-100px);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="number">50</span>%&#123;</span><br><span class="line">                <span class="attr">transform</span>: translateX(-50px);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="number">100</span>%&#123;</span><br><span class="line">                <span class="attr">transform</span>: translateX(0px);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .animation&#123;</span><br><span class="line">            <span class="attr">animation</span>: leftToright 3s;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">animate</span>:&#123;</span><br><span class="line">                    <span class="attr">animation</span>:<span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.animate.animation = !<span class="built_in">this</span>.animate.animation</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;    </span></span><br><span class="line"><span class="string">        &lt;div :class=&quot;animate&quot;&gt;hello world&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;button @click=&quot;handleClick&quot;&gt;切换&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h3 id="过渡">过渡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.transition&#123;</span><br><span class="line">            <span class="attr">transition</span>: 3s background-color ease;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .green&#123;</span><br><span class="line">            <span class="attr">background</span>: green;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .blue&#123;</span><br><span class="line">            <span class="attr">background</span>: blue;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">animate</span>:&#123;</span><br><span class="line">                    <span class="attr">transition</span>:<span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">blue</span>:<span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">green</span>:<span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.animate.blue = !<span class="built_in">this</span>.animate.blue</span><br><span class="line">                <span class="built_in">this</span>.animate.green = !<span class="built_in">this</span>.animate.green</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;    </span></span><br><span class="line"><span class="string">        &lt;div :class=&quot;animate&quot;&gt;hello world&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;button @click=&quot;handleClick&quot;&gt;切换&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h2 id="实现单元素组件动画">实现单元素组件动画</h2><h3 id="使用transition标签">使用transition标签</h3><p>css：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-enter-to</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-enter-active</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> opacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave-to</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave-active</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> opacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">show</span>:<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.show = !<span class="built_in">this</span>.show</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;    </span></span><br><span class="line"><span class="string">            &lt;transition&gt;</span></span><br><span class="line"><span class="string">            &lt;div v-if=&quot;show&quot;&gt;hello world&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/transition&gt;</span></span><br><span class="line"><span class="string">        &lt;button @click=&quot;handleClick&quot;&gt;切换&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>动画效果实现也一样，只是v-enter-active里opacity改成动画keyframe名称即可。</p><p>在transition添加name=‘aaa'后v-enter-active就需要改成aaa-enter-active，v只是默认名称。</p><h3 id="自定义类名">自定义类名</h3><p>可以在<code>transition</code>标签上添加<code>enter-active-class=""  leave-active-class=""</code></p><p>里边填入类名，如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bye</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>:shake <span class="number">3s</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hello</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>:shake <span class="number">3s</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="列表的动画效果">列表的动画效果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;script src=&quot;https://unpkg.com/vue@next&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .v-enter-from&#123;</span><br><span class="line">            opacity: 0;</span><br><span class="line">            transform: translateY(30px);</span><br><span class="line">        &#125;</span><br><span class="line">        .v-enter-to&#123;</span><br><span class="line">            opacity: 1;</span><br><span class="line">            transform: translateY(0);</span><br><span class="line">            /* 从下往上的动画效果 */</span><br><span class="line">        &#125;</span><br><span class="line">        .v-enter-active&#123;</span><br><span class="line">            transition: all .5s ease-in;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .v-move&#123;</span><br><span class="line">            /* 其他元素移动时的移动效果 */</span><br><span class="line">            transition: all .5s ease-in;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .list-item&#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            margin-right: 10px;</span><br><span class="line">        &#125;</span><br><span class="line">        .v-leave-from&#123;</span><br><span class="line">            opacity: 1;</span><br><span class="line">            transform: translateY(0);</span><br><span class="line">        &#125;</span><br><span class="line">        .v-leave-to&#123;</span><br><span class="line">            opacity: 0;</span><br><span class="line">            transform: translateY(30px);</span><br><span class="line">        &#125;</span><br><span class="line">        .v-leave-active&#123;</span><br><span class="line">            transition:all .5s ease-out;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    let app = Vue.createApp(&#123;</span><br><span class="line">        data()&#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                list:[1,2,3],</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">            handleClick()&#123;</span><br><span class="line">                this.list.unshift(Math.floor(Math.random()*100));</span><br><span class="line">            &#125;,</span><br><span class="line">            handleremove(i)&#123;</span><br><span class="line">                this.list.splice(i,1)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        template:`</span><br><span class="line">        &lt;div&gt;    </span><br><span class="line">            &lt;transition-group&gt;</span><br><span class="line">                &lt;span name=&quot;list&quot; class=&quot;list-item&quot; v-for=&quot;(item,index) in list&quot; :key=&quot;item&quot; @click=&quot;handleremove(index)&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/transition-group&gt;</span><br><span class="line">        &lt;button @click=&quot;handleClick&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        `</span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    let vm = app.mount(&#x27;#root&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="状态动画">状态动画</h2><p>让某些数据有缓慢变化的过程，应用如svg</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = Vue.createApp(&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">number</span>:<span class="number">1</span>,</span><br><span class="line">                <span class="attr">animatenumber</span>:<span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">methods</span>:&#123;</span><br><span class="line">            <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.number = <span class="number">10</span>;</span><br><span class="line">                <span class="keyword">let</span> currentNumber = <span class="built_in">this</span>.animatenumber;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">this</span>.animatenumber &lt; <span class="built_in">this</span>.number)&#123;</span><br><span class="line">                    <span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                    currentNumber++;</span><br><span class="line">                    <span class="built_in">this</span>.animatenumber = currentNumber;</span><br><span class="line">                    <span class="keyword">if</span>(currentNumber&gt;=<span class="built_in">this</span>.number)&#123;</span><br><span class="line">                        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,<span class="number">100</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;,</span><br><span class="line">            </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;    </span></span><br><span class="line"><span class="string">        &lt;div&gt;&#123;&#123;animatenumber&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;button @click=&quot;handleClick&quot;&gt;增加&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure><h1 id="高级语法">高级语法</h1><h2 id="mixin">mixin</h2><ul><li>组件data优先级高于mixin优先级</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mixin 混入</span></span><br><span class="line">    <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">number</span>:<span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>不能用于子组件，需要使用全局mixin(不推荐使用)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.mixin(&#123;</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">number</span>:<span class="number">2</span>,</span><br><span class="line">                <span class="attr">count</span>:<span class="number">222</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">created</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器解析url</title>
      <link href="/2021/10/12/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90url/"/>
      <url>/2021/10/12/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90url/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>1、URL解析：主要有地址解析（合法、编码、内容判断） 、 HSTS 、访问限制操作、安全检查操作、缓存检查操作等。</p><p>2、DNS查询 ： 浏览器缓存——&gt; 操作系统缓存——&gt;路由器缓存——&gt;ISPDNS 缓存 ——&gt; 根域名服务器查询。</p><p>3、TCP连接（四层封装）</p><p>4、处理请求:HTTP解析（域名、路径、方法等）、重定向、URL重写等</p><p>5、浏览器接受响应：资源分析、根状态码做事、压缩问题、响应</p><p>6、渲染页面：</p><p>HTML解析</p><pre><code>                  第一步：解码（UTF-8或者GB2312等等等）解析成HTML。                   第二步：预解析（识别请求资源比如imges中SRC属性加入请求队列。）                  第三步：并行操作：符号化，构建树、解标签、创DOM节点</code></pre><p>CSS解析</p><pre><code>                第一步：从左到右解析选择器进行判断等               举例：div    .p   &#123;    &#125;   判断P的父元素是不是div</code></pre><p>渲染树</p><p>7、断开链接、TCP四次挥手。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 浏览器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>未知宽高元素居中</title>
      <link href="/2021/10/09/%E6%9C%AA%E7%9F%A5%E5%AE%BD%E9%AB%98%E5%85%83%E7%B4%A0%E5%B1%85%E4%B8%AD/"/>
      <url>/2021/10/09/%E6%9C%AA%E7%9F%A5%E5%AE%BD%E9%AB%98%E5%85%83%E7%B4%A0%E5%B1%85%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>有两种方法</p><ol type="1"><li><p>使用flex</p><p>父元素：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line"><span class="attribute">background</span>: skyblue;</span><br><span class="line"><span class="comment">/* position: relative; */</span></span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="comment">/* align-content: center; */</span></span><br><span class="line"><span class="attribute">justify-content</span>: center;</span><br><span class="line"><span class="attribute">align-items</span>: center;</span><br></pre></td></tr></table></figure><p>子元素不用设置</p></li><li><p>使用transform</p><p>父元素：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line"><span class="attribute">background</span>: skyblue;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br></pre></td></tr></table></figure><p>子元素：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line"><span class="attribute">word-break</span>: break-all;</span><br><span class="line"><span class="attribute">background-color</span>: deepskyblue;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>类</title>
      <link href="/2021/09/01/%E7%B1%BB/"/>
      <url>/2021/09/01/%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<figure><img data-src="http://img.zhaoxuanlang.cn/image-20210901165330991.png"alt="image-20210901165330991" /><figcaption aria-hidden="true">image-20210901165330991</figcaption></figure><span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>forEach系函数用法</title>
      <link href="/2021/08/27/forEach%E7%B3%BB%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/"/>
      <url>/2021/08/27/forEach%E7%B3%BB%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1id="简述foreachmapeverysome和filter的用法">简述forEach()、map()、every()、some()和filter()的用法</h1><span id="more"></span><h2id="一foreach用于遍历数组无返回值">一、forEach()，用于遍历数组，无返回值</h2><p>这里先给出一个数组（以下例子通用）：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">-2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">-5</span>];</span><br></pre></td></tr></table></figure><p>然后我要做事情的就是，将数组中的每一项翻倍。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,<span class="keyword">array</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">array</span>[index] = item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(arr);   <span class="comment">// [2,-4,6,8,-10]</span></span><br></pre></td></tr></table></figure><p>可以看到，forEach()可以传入一个匿名函数作为参数，而该匿名函数有含有三个参数，其依次代表数组遍历时的当前元素item，数组遍历时的当前元素的索引index，以及正在遍历的数组array。有了这三个参数，可以方便我们做很多事情，比如说示例当中将每一项数组元素翻倍，这时需要用到第一个参数item。但是，仅仅只是将item乘以2可不行，我们还得将其赋值给原来的数组，这时我们就得用到后面两个参数index和array。</p><p>根据上述可知，array[index]是全等于item的。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,<span class="keyword">array</span></span>)</span>&#123;</span><br><span class="line">    console.log(<span class="keyword">array</span>[index] === item);   <span class="comment">// true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2id="二map用于遍历数组返回处理之后的新数组">二、map()，用于遍历数组，返回处理之后的新数组</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newArr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newArr);   <span class="comment">// [2,-4,6,8,-10]</span></span><br></pre></td></tr></table></figure><p>可以看到，该方法与forEach()的功能类似，只不过map()具有返回值，会返回一个新的数组，这样处理数组后也不会影响到原有数组。</p><h2id="三every用于判断数组中的每一项元素是否都满足条件返回一个布尔值">三、every()，用于判断数组中的每一项元素是否都满足条件，返回一个布尔值</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isEvery = arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item &gt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(isEvery);   <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>可以看到，示例中是要判断数组arr中的元素是否都为正数，很显然不是，所以该方法最终返回false。</p><h2id="四some用于判断数组中的是否存在满足条件的元素返回一个布尔值">四、some()，用于判断数组中的是否存在满足条件的元素，返回一个布尔值</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isSome = arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item &lt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(isSome);   <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>可以看到，该方法与every()类似，示例中是要判断数组arr中是否存在负数元素，很显然存在，所以该方法最终返回true。</p><h2id="五filter用于筛选数组中满足条件的元素返回一个筛选后的新数组">五、filter()，用于筛选数组中满足条件的元素，返回一个筛选后的新数组</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minus = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item &lt; <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(minus);   <span class="comment">// [-2, -5]</span></span><br></pre></td></tr></table></figure><p>可以看到，示例中是要筛选出数组arr中的所有负数，所以该方法最终返回一个筛选后的新数组[-2,-5]。</p><p><strong>补充：</strong>以上五大方法除了传递一个匿名函数作为参数之外，还可以传第二个参数，该参数用于指定匿名函数内的this指向，例如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只传一个匿名函数</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,array</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);  <span class="comment">// window</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传两个参数</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,array</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);  <span class="comment">// [1, -2, 3, 4, -5]</span></span><br><span class="line">&#125;,arr);</span><br></pre></td></tr></table></figure><p><strong>兼容性：</strong>由于以上方法均属ES5方法，所以IE8及其以下浏览器均不兼容。</p><h2 id="重点总结">重点总结：</h2><blockquote><p>①forEach()无返回值，map()和filter()返回新数组，every()和some()返回布尔值② 匿名函数中this指向默认为window，可通过传第二参数来更改之 ③五种遍历方法均为ES5方法</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>七牛云绑定typora</title>
      <link href="/2021/08/23/%E4%B8%83%E7%89%9B%E4%BA%91%E7%BB%91%E5%AE%9Atypora/"/>
      <url>/2021/08/23/%E4%B8%83%E7%89%9B%E4%BA%91%E7%BB%91%E5%AE%9Atypora/</url>
      
        <content type="html"><![CDATA[<p>七牛云做图床绑定PicGo上传图片</p><span id="more"></span><p>七牛云的优势是每个月有10G的免费存储，而且服务器在国内，速度很快，上传和加载图片几乎是秒速</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823090911114.png"alt="image-20210823090911114" /><figcaption aria-hidden="true">image-20210823090911114</figcaption></figure><h1 id="前置工作">前置工作</h1><ol type="1"><li>需要有一个登记备案过的域名（腾讯阿里均可，需要绑定七牛云的图床。没有域名的话可以去腾讯云/阿里云申请一个，很便宜，备案大概半个月就可以完成。没有域名的话七牛云会给你一个临时的域名，但是只能用一个月。一个月后用临时域名就访问不到你的图片了）</li><li>注册七牛云账户</li></ol><h1 id="七牛云配置相关">七牛云配置相关</h1><p>首先要注册账户，这里不多说。注册完之后选择右上角的控制台进入如下页面</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823091246883.png"alt="image-20210823091246883" /><figcaption aria-hidden="true">image-20210823091246883</figcaption></figure><p>首先选择下方资源管理里第二个存储空间，新增一个存储空间。名称自己起一个就行，这个名称需要和他现有的其他空间不重复。需要注意这里一定要选公开！我一开始没有选公开导致上传上去的图片都加载不出来==查了半天报错才发现是这里的问题。</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823091454523.png"alt="image-20210823091454523" /><figcaption aria-hidden="true">image-20210823091454523</figcaption></figure><p>新建完之后他会让你绑定域名。我们假设你已经有了腾讯云的域名，然后进行如下操作。</p><p>我建议使用加速域名，因为访问会快一些，而且因为你流量也不多，加速域名的流量根本用不完。在添加域名页面中加速域名栏要填入一个你域名的二级域名。这里也注意不要直接填入xxx.com。我一开始直接填的xxx到后边CNAME解析的时候就傻眼了。</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823091705146.png"alt="image-20210823091705146" /><figcaption aria-hidden="true">image-20210823091705146</figcaption></figure><p>像这样创建完成之后点复制CNAME，准备进行下一步操作</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823092044307.png"alt="image-20210823092044307" /><figcaption aria-hidden="true">image-20210823092044307</figcaption></figure><h1 id="腾讯云域名配置">腾讯云域名配置</h1><p>这一步很简单，直接打开你域名的控制台，点添加记录</p><p>主机记录就填你刚刚输入的二级域名的头部，比如说我刚刚写的img.xxx.com这里就填img，记录类型选CNAME，记录值粘贴你刚刚复制到那一串东西，然后确认就ok了。</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823092235923.png"alt="image-20210823092235923" /><figcaption aria-hidden="true">image-20210823092235923</figcaption></figure><p>然后回到七牛云，看看你刚刚配置的存储空间是不是一切正常，这里可能需要等个十分钟等他自动配置。如下图就是正常配置成功的显示。</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823092510888.png"alt="image-20210823092510888" /><figcaption aria-hidden="true">image-20210823092510888</figcaption></figure><p>这里有红框框出来的就是成功配置</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823092649657.png"alt="image-20210823092649657" /><figcaption aria-hidden="true">image-20210823092649657</figcaption></figure><h1 id="picgo的配置">Picgo的配置</h1><p>我们来到PicGo，左侧域名列表选择七牛云</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823092747470.png"alt="image-20210823092747470" /><figcaption aria-hidden="true">image-20210823092747470</figcaption></figure><p>这里前两个Key都可以从七牛云右上角头像-&gt;个人中心-&gt;密钥管理处获得，直接粘贴即可</p><p>存储空间名是你刚刚创建的那个的名字</p><p>访问网址是你刚刚设置的加速域名，注意前边要加http://</p><p>存储区域需要看这个<ahref="%5BIMG%5Dhttp://img.zhaoxuanlang.cn/image-20210823092747470.png%5B/IMG%5D">链接</a>，里边有写每个服务器对应的区域，填入你存储空间对应的服务器代号即可</p><figure><img data-src="http://img.zhaoxuanlang.cn/image-20210823093046660.png"alt="image-20210823093046660" /><figcaption aria-hidden="true">image-20210823093046660</figcaption></figure><p>然后上传一张图片看看有没有上传成功就ok。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo进阶</title>
      <link href="/2021/08/21/hexo%E8%BF%9B%E9%98%B6/"/>
      <url>/2021/08/21/hexo%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<p>实现一些hexo的进阶操作</p><span id="more"></span><h1 id="使用next主题美化">使用next主题美化</h1><h2 id="安装主题">安装主题</h2><p>Next主题的安装方式很简单，只需要在博客主目录下执行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>然后设置站点配置文件_config.yml：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure><p>即可将我们的Hexo博客主题替换为Next主题。</p><h2 id="设置主题">设置主题</h2><p>进入到blog/themes/next目录会看到有一个_config.yml文件，打开它，每一项都有相应的注释介绍，按照自己喜好进行修改即可，这里不多介绍。</p><h1 id="设置typora自动上传图片">设置typora自动上传图片</h1><p>我用的编辑器是typora，但是在插入图片的时候默认是存在本地，这样部署到远程之后这些图片是显示不了的。一种解决方案是每张图都上传到图床然后手动插入文章，但是略显繁琐，因此需要设置让编辑器自动帮我们上传图片</p><h2 id="所需软件下载">所需软件下载</h2><p>我用的是PicGo+gitee的方式，这里如果用github就会因为网速原因有点卡。</p><p>首先下载<ahref="https://github.com/Molunerfinn/PicGo/releases">PicGo</a>，下载对应自己电脑的版本即可</p><p><a href="https://imgtu.com/i/fjRO4e"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRO4e.png"alt="fjRO4e.png" /></a></p><p>然后解压安装balabala不谈</p><h2 id="设置picgo和gitee仓库">设置PicGo和gitee仓库</h2><p>安装好打开软件，左边菜单最下边有一个插件设置，点进去搜索gitee，应该会有三个，全安装即可，我这里全安装了但是只显示出了一个。</p><p><a href="https://imgtu.com/i/fjRHHK"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRHHK.png"alt="fjRHHK.png" /></a></p><p>安装好点图床设置，应该就会有gitee了</p><p><a href="https://imgtu.com/i/fjR7B6"><imgsrc="https://z3.ax1x.com/2021/08/21/fjR7B6.png"alt="fjR7B6.png" /></a></p><p>这时我们需要去gitee新建一个仓库</p><p><a href="https://imgtu.com/i/fjRLND"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRLND.png"alt="fjRLND.png" /></a></p><p>然后还需要去获取一个token。按下图进入，点生成新令牌，名字随便起一个就可以</p><p><a href="https://imgtu.com/i/fjRqAO"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRqAO.png"alt="fjRqAO.png" /></a></p><p>现在需要回到PicGo设置界面，点击刚刚的Gitee图床选项，填入信息</p><blockquote><p>Owner：Gitee用户名</p><p>repo：刚刚新建的仓库名</p><p>path：可有可无，和仓库名一样就可以</p><p>token：填入你刚刚申请到的token</p></blockquote><p><a href="https://imgtu.com/i/fjRj9H"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRj9H.png"alt="fjRj9H.png" /></a></p><p>然后点确定。点了就行，它没有什么保存成功的提示。。</p><h2 id="设置typora">设置typora</h2><p>进入typora的设置点击图像栏，如图设置后点击验证一下</p><p><a href="https://imgtu.com/i/fjRv3d"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRv3d.png"alt="fjRv3d.png" /></a></p><p><a href="https://imgtu.com/i/fjRxgA"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRxgA.png"alt="fjRxgA.png" /></a></p><p>注意多次测试可能会验证失败。查阅PicGo.log发现提示文件已存在</p><p><a href="https://imgtu.com/i/fjRzjI"><imgsrc="https://z3.ax1x.com/2021/08/21/fjRzjI.png"alt="fjRzjI.png" /></a></p><p>只需要去PicGo软件的相册内删除他测试用的两个typora图标即可。</p><p>测试成功后你向typora文章内新增图片，它会自动帮你上传并更换连接。</p><h2 id="hexo保存图片到本地asset-文件夹">Hexo保存图片到本地asset文件夹</h2><p>首先在config.yml文件中设置<code>post_asset_folder = true</code></p><p>With asset folder management enabled, Hexo will create a folder everytime you make a new post with the<code>hexo new [layout] &lt;title&gt;</code> command. This asset folderwill have the same name as the markdown file associated with the post.Place all assets related to your post into the associated folder, andyou will be able to reference them using a relative path, making for aneasier and more convenient workflow.</p><p>然后每次新建post都会有一个对应的文件夹。之后需要在typora里设置插入图片时需要复制到自定义文件夹<code>./$&#123;filename&#125;</code>中，这样每当插入图片的时候都会把图片放到asset文件夹里。</p><p>要想在生成的博客中显示图片不能使用传统的!{}表示图片，需要有两种方式，一种是hexo3自带的tagplugins实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path slug %&#125;//显示当前图片路径</span><br><span class="line">&#123;% asset_img slug [title] %&#125;\\显示图片</span><br><span class="line">&#123;% asset_link slug [title] %&#125;\\显示图片链接</span><br></pre></td></tr></table></figure><p><ahref="https://www.joticia.cn/2023/09/15/Asset-Test/">测试链接</a></p><p>还有一种方式是使用<ahref="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>实现</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_config.yml</span><br><span class="line">post_asset_folder: true</span><br><span class="line">marked:  </span><br><span class="line">prependRoot: true  </span><br><span class="line">postAsset: true</span><br></pre></td></tr></table></figure><p><a href="https://hexo.io/docs/asset-folders.html">参考链接</a></p><h1 id="hexo新建文章后自动打开">hexo新建文章后自动打开</h1><p>每次使用<code>hexo new xxx</code>命令后它会在source文件夹下新建一个文章，还需要再用命令行或者手动来打开文件，同样略显繁琐，所以尝试使用node.js来完成自动化新建打开。</p><p>进入blog文件夹，新建一个目录名为scripts，在里边新建一个js文件，名字随意。</p><p>编辑这个js文件，写入以下监听事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).exec</span><br><span class="line"></span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">exec(<span class="string">&#x27;open &#x27;</span>+[data.path]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这里open也可以换成code（如果你用的是vscode来编辑文章），注意open后边有一个空格，不要漏了。</p><p>然后在terminal里使用<code>hexo new xxx</code>命令后他就会自动新建并打开文件辣，可以直线提升100%的效率~</p><h1 id="补充功能以增加hexo使用效率">补充功能以增加hexo使用效率</h1><p>在家目录下编辑.zshrc文件，添加以下别名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> hexo=<span class="string">&#x27;func()&#123; cd ~/study/newblog/source/_posts/ &amp;&amp; hexo $1 $2 &amp;&amp; sh new.sh &amp;&amp; cd ~&#125;;func&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> hexo-find=<span class="string">&#x27;func()&#123; cd ~/study/newblog/source/_posts/ &amp;&amp; ls|grep $1 &amp;&amp; cd ~&#125;;func&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> hexo-open=<span class="string">&#x27;func()&#123; cd ~/study/newblog/source/_posts/ &amp;&amp; open $1&#x27;</span>.md<span class="string">&#x27; &amp;&amp; cd ~&#125;;func&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> hexo-rm=<span class="string">&#x27;func()&#123; cd ~/study/newblog/source/_posts/ &amp;&amp; rm $1&#x27;</span>.md<span class="string">&#x27; &amp;&amp; cd ~&#125;;func&#x27;</span></span><br></pre></td></tr></table></figure><p>增加四个新功能：</p><ul><li>在任意目录下使用hexo 命令</li><li>使用hexo-find来搜索某一个文章</li><li>使用hexo-open打开某一篇文章（无需输入后缀）</li><li>使用hexo-rm删除某一篇文章（无需输入后缀）</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>函数进阶</title>
      <link href="/2021/08/19/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/"/>
      <url>/2021/08/19/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<p><img data-src="https://gitee.com/Squirrel_01/img/raw/master/img/image-20210820104723148.png" alt="image-20210820104723148" style="zoom:50%;" /></p><span id="more"></span><h1 id="rest参数和spread语法">Rest参数和Spread语法</h1><h2 id="rest参数">Rest参数</h2><p>在函数定义时可以使用...args来用args数组收集后边所有的参数。...args后边不能再定义形参</p><p>例如，我们需要把所有的参数都放到数组 <code>args</code> 中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumAll</span>(<span class="params">...args</span>) </span>&#123; <span class="comment">// 数组名为 args</span></span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> arg <span class="keyword">of</span> args) sum += arg;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert( sumAll(<span class="number">1</span>) ); <span class="comment">// 1</span></span><br><span class="line">alert( sumAll(<span class="number">1</span>, <span class="number">2</span>) ); <span class="comment">// 3</span></span><br><span class="line">alert( sumAll(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) ); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><p>我们也可以选择获取第一个参数作为变量，并将剩余的参数收集起来</p><p>下面的例子把前两个参数定义为变量，并把剩余的参数收集到<code>titles</code> 数组中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params">firstName, lastName, ...titles</span>) </span>&#123;</span><br><span class="line">  alert( firstName + <span class="string">&#x27; &#x27;</span> + lastName ); <span class="comment">// Julius Caesar</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 剩余的参数被放入 titles 数组中</span></span><br><span class="line">  <span class="comment">// i.e. titles = [&quot;Consul&quot;, &quot;Imperator&quot;]</span></span><br><span class="line">  alert( titles[<span class="number">0</span>] ); <span class="comment">// Consul</span></span><br><span class="line">  alert( titles[<span class="number">1</span>] ); <span class="comment">// Imperator</span></span><br><span class="line">  alert( titles.length ); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">showName(<span class="string">&quot;Julius&quot;</span>, <span class="string">&quot;Caesar&quot;</span>, <span class="string">&quot;Consul&quot;</span>, <span class="string">&quot;Imperator&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="arguments变量">arguments变量</h2><p>有一个名为 <code>arguments</code>的特殊的类数组对象，该对象按参数索引包含所有参数。</p><p>例如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert( <span class="built_in">arguments</span>.length );</span><br><span class="line">  alert( <span class="built_in">arguments</span>[<span class="number">0</span>] );</span><br><span class="line">  alert( <span class="built_in">arguments</span>[<span class="number">1</span>] );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 它是可遍历的</span></span><br><span class="line">  <span class="comment">// for(let arg of arguments) alert(arg);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依次显示：2，Julius，Caesar</span></span><br><span class="line">showName(<span class="string">&quot;Julius&quot;</span>, <span class="string">&quot;Caesar&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依次显示：1，Ilya，undefined（没有第二个参数）</span></span><br><span class="line">showName(<span class="string">&quot;Ilya&quot;</span>);</span><br></pre></td></tr></table></figure><p>但是arguments没有array的方法，因此最好用rest函数</p><h2 id="spread语法">Spread语法</h2><p>与rest参数相反，使用时在变量名前加...就可以拆出来，内部使用了迭代器的原理</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">alert( [...str] ); <span class="comment">// H,e,l,l,o</span></span><br></pre></td></tr></table></figure><h3 id="用spread合并数组">用spread合并数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],b = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> arr = [...a,...b]</span><br></pre></td></tr></table></figure><h3 id="进行浅拷贝">进行浅拷贝</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arrCopy = [...arr]; <span class="comment">// 将数组 spread 到参数列表中</span></span><br><span class="line">                        <span class="comment">// 然后将结果放到一个新数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个数组中的内容相同吗？</span></span><br><span class="line">alert(<span class="built_in">JSON</span>.stringify(arr) === <span class="built_in">JSON</span>.stringify(arrCopy)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个数组相等吗？</span></span><br><span class="line">alert(arr === arrCopy); <span class="comment">// false（它们的引用是不同的）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改我们初始的数组不会修改副本：</span></span><br><span class="line">arr.push(<span class="number">4</span>);</span><br><span class="line">alert(arr); <span class="comment">// 1, 2, 3, 4</span></span><br><span class="line">alert(arrCopy); <span class="comment">// 1, 2, 3</span></span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>有一个简单的方法可以区分它们：</p><ul><li>若 <code>...</code> 出现在函数参数列表的最后，那么它就是 rest参数，它会把参数列表中剩余的参数收集到一个数组中。</li><li>若 <code>...</code> 出现在函数调用或类似的表达式中，那它就是 spread语法，它会把一个数组展开为列表。</li></ul><p>使用场景：</p><ul><li>Rest 参数用于创建可接受任意数量参数的函数。</li><li>Spread 语法用于将数组传递给通常需要含有许多参数的列表的函数。</li></ul><h1 id="变量作用域闭包">变量作用域，闭包</h1><h3 id="代码块">代码块</h3><p>用{}包裹的代码是一个代码块</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a=<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a =<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="函数对象">函数对象</h2><ul><li><p>name：返回函数的名称</p></li><li><p>length：返回函数参数数量</p></li><li><p>自定义属性</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 计算调用次数</span></span><br><span class="line">  sayHi.counter++;</span><br><span class="line">&#125;</span><br><span class="line">sayHi.counter = <span class="number">0</span>; <span class="comment">// 初始值</span></span><br><span class="line"></span><br><span class="line">sayHi(); <span class="comment">// Hi</span></span><br><span class="line">sayHi(); <span class="comment">// Hi</span></span><br><span class="line"></span><br><span class="line">alert( <span class="string">`Called <span class="subst">$&#123;sayHi.counter&#125;</span> times`</span> ); <span class="comment">// Called 2 times</span></span><br></pre></td></tr></table></figure></li><li><p>命名函数表达式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sayHi = <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">who</span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">`Hello, <span class="subst">$&#123;who&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>func不会被外界所知，可以在函数内进行很方便的使用。</p></li></ul><h2 id="settimeout和setinterval">setTimeout和setInterval</h2><ul><li><code>setTimeout</code>允许我们将函数推迟到一段时间间隔之后再执行。</li><li><code>setInterval</code>允许我们重复运行一个函数，从一段时间间隔之后开始运行，之后以该时间间隔连续重复运行该函数。</li></ul><h3 id="settimeout">setTimeout</h3><p>语法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timerId = <span class="built_in">setTimeout</span>(func|code, [delay], [arg1], [arg2], ...)</span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li><p><code>func|code</code></p><p>想要执行的函数或代码字符串。一般传入的都是函数。由于某些历史原因，支持传入代码字符串，但是不建议这样做。</p></li><li><p><code>delay</code></p><p>执行前的延时，以毫秒为单位（1000 毫秒 = 1 秒），默认值是 0；</p></li><li><p><code>arg1</code>，<code>arg2</code>…</p><p>要传入被执行函数（或代码字符串）的参数列表（IE9 以下不支持）</p></li></ul><p>传入函数不要加括号。</p><h4 id="setinterval">setInterval</h4><p><code>setInterval</code> 方法和 <code>setTimeout</code>的语法相同：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timerId = <span class="built_in">setInterval</span>(func|code, [delay], [arg1], [arg2], ...)</span><br></pre></td></tr></table></figure><p>所有参数的意义也是相同的。不过与 <code>setTimeout</code>只执行一次不同，<code>setInterval</code>是每间隔给定的时间周期性执行。</p><p>想要阻止后续调用，我们需要调用<code>clearInterval(timerId)</code>。</p><p>例：编写一个函数<code>printNumbers(from, to)</code>，使其每秒输出一个数字，数字从<code>from</code> 开始，到 <code>to</code> 结束。</p><p>使用 <code>setInterval</code>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printNumbers</span>(<span class="params"><span class="keyword">from</span>, to</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current = <span class="keyword">from</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> timerId = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(current);</span><br><span class="line">    <span class="keyword">if</span> (current == to) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">    &#125;</span><br><span class="line">    current++;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用例：</span></span><br><span class="line">printNumbers(<span class="number">5</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>使用嵌套的 <code>setTimeout</code>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printNumbers</span>(<span class="params"><span class="keyword">from</span>, to</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current = <span class="keyword">from</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(current);</span><br><span class="line">    <span class="keyword">if</span> (current &lt; to) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(go, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    current++;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用例：</span></span><br><span class="line">printNumbers(<span class="number">5</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>请注意，在这两种解决方案中，在第一个输出之前都有一个初始延迟。函数在<code>1000ms</code> 之后才被第一次调用。</p><p>如果我们还希望函数立即运行，那么我们可以在单独的一行上添加一个额外的调用，像这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printNumbers</span>(<span class="params"><span class="keyword">from</span>, to</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current = <span class="keyword">from</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(current);</span><br><span class="line">    <span class="keyword">if</span> (current == to) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">    &#125;</span><br><span class="line">    current++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  go();</span><br><span class="line">  <span class="keyword">let</span> timerId = <span class="built_in">setInterval</span>(go, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printNumbers(<span class="number">5</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure><h1 id="装饰器callapply">装饰器，call/apply</h1><h2 id="缓存">缓存</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">slow</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 这里可能会有重负载的 CPU 密集型工作</span></span><br><span class="line">  alert(<span class="string">`Called with <span class="subst">$&#123;x&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cachingDecorator</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cache.has(x)) &#123;    <span class="comment">// 如果缓存中有对应的结果</span></span><br><span class="line">      <span class="keyword">return</span> cache.get(x); <span class="comment">// 从缓存中读取结果</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> result = func(x);  <span class="comment">// 否则就调用 func</span></span><br><span class="line"></span><br><span class="line">    cache.set(x, result);  <span class="comment">// 然后将结果缓存（记住）下来</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">slow = cachingDecorator(slow);</span><br><span class="line"></span><br><span class="line">alert( slow(<span class="number">1</span>) ); <span class="comment">// slow(1) 被缓存下来了</span></span><br><span class="line">alert( <span class="string">&quot;Again: &quot;</span> + slow(<span class="number">1</span>) ); <span class="comment">// 一样的</span></span><br><span class="line"></span><br><span class="line">alert( slow(<span class="number">2</span>) ); <span class="comment">// slow(2) 被缓存下来了</span></span><br><span class="line">alert( <span class="string">&quot;Again: &quot;</span> + slow(<span class="number">2</span>) ); <span class="comment">// 和前面一行结果相同</span></span><br></pre></td></tr></table></figure><h2 id="callapply">call/apply</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func.apply(context, args)</span><br></pre></td></tr></table></figure><p>它运行 <code>func</code> 设置<code>this=context</code>，并使用类数组对象 <code>args</code>作为参数列表（arguments）。</p><p><code>call</code> 和 <code>apply</code>之间唯一的语法区别是，<code>call</code> 期望一个参数列表，而<code>apply</code> 期望一个包含这些参数的类数组对象。</p><p>方法借用：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hash</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert( [].join.call(<span class="built_in">arguments</span>) ); <span class="comment">// 1,2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hash(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="函数绑定">函数绑定</h1><p>let fun1 =func.bind(context,...args)可以把函数绑定了this赋值给fun1</p><h1 id="箭头函数">箭头函数</h1><p>没有this，没有arguments</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js数据类型</title>
      <link href="/2021/08/18/js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2021/08/18/js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<figure><img data-src="https://www.hualigs.cn/image/611cef200e311.jpg"alt="image-20210818175151311" /><figcaption aria-hidden="true">image-20210818175151311</figcaption></figure><span id="more"></span><h1 id="map和set">Map和Set</h1><h3 id="map">map</h3><p>Key-键值对形式，类似哈希表</p><ul><li><code>new Map()</code> —— 创建 map。</li><li><code>map.set(key, value)</code> —— 根据键存储值。</li><li><code>map.get(key)</code> —— 根据键来返回值，如果 <code>map</code>中不存在对应的 <code>key</code>，则返回 <code>undefined</code>。</li><li><code>map.has(key)</code> —— 如果 <code>key</code> 存在则返回<code>true</code>，否则返回 <code>false</code>。</li><li><code>map.delete(key)</code> —— 删除指定键的值。</li><li><code>map.clear()</code> —— 清空 map。</li><li><code>map.size</code> —— 返回当前元素个数。</li></ul><p>如果要在 <code>map</code> 里使用循环，可以使用以下三个方法：</p><ul><li><code>map.keys()</code> —— 遍历并返回所有的键（returns an iterablefor keys），</li><li><code>map.values()</code> —— 遍历并返回所有的值（returns an iterablefor values），</li><li><code>map.entries()</code> —— 遍历并返回所有的实体（returns aniterable for entries）<code>[key, value]</code>，<code>for..of</code>在默认情况下使用的就是这个。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj));<span class="comment">//从obj对象创建map</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.fromEntries(map.entries()); <span class="comment">// 创建一个普通对象（plain object）(*)</span></span><br></pre></td></tr></table></figure><h3 id="set">Set</h3><p>每个键只出现一次</p><p>它的主要方法如下：</p><ul><li><code>new Set(iterable)</code> —— 创建一个<code>set</code>，如果提供了一个 <code>iterable</code>对象（通常是数组），将会从数组里面复制值到 <code>set</code> 中。</li><li><code>set.add(value)</code> —— 添加一个值，返回 set 本身</li><li><code>set.delete(value)</code> —— 删除值，如果 <code>value</code>在这个方法调用的时候存在则返回 <code>true</code> ，否则返回<code>false</code>。</li><li><code>set.has(value)</code> —— 如果 <code>value</code> 在 set中，返回 <code>true</code>，否则返回 <code>false</code>。</li><li><code>set.clear()</code> —— 清空 set。</li><li><code>set.size</code> —— 返回元素个数。</li></ul><p><code>Map</code> 中用于迭代的方法在 <code>Set</code>中也同样支持：</p><ul><li><code>set.keys()</code> —— 遍历并返回所有的值（returns an iterableobject for values），</li><li><code>set.values()</code> —— 与 <code>set.keys()</code>作用相同，这是为了兼容 <code>Map</code>，</li><li><code>set.entries()</code> —— 遍历并返回所有的实体（returns aniterable object forentries）<code>[value, value]</code>，它的存在也是为了兼容<code>Map</code>。</li></ul><h3 id="另">另</h3><p>obj = Array.from(iteratable)可以从一个可迭代对象返回一个数组</p><h1 id="weakmap-and-weakset弱映射和弱集合">WeakMap andWeakSet（弱映射和弱集合）</h1><h3 id="weakmap">WeakMap</h3><ul><li>不能用原始值作为键</li><li>假如用对象作为键，但是对象被设为null时map里的键会自动删除</li></ul><p>使用案例：计数某人来的次数，当这个人退出时清空他的数据/清除缓存</p><h3 id="weakset">WeakSet</h3><ul><li>不能添加原始值</li><li>不支持size和keys方法，不可迭代</li></ul><h1 id="object.keysvaluesentries">Object.keys，values，entries</h1><ul><li>Object.keys(obj)—— 返回一个包含该对象所有的键的数组。</li><li>Object.values(obj) —— 返回一个包含该对象所有的值的数组。</li><li>Object.entries(obj) —— 返回一个包含该对象所有 [key, value]键值对的数组。</li></ul><p>区别：（为了灵活性）</p><p><a href="https://imgtu.com/i/fTqytg"><imgsrc="https://z3.ax1x.com/2021/08/18/fTqytg.png"alt="fTqytg.png" /></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>Object.keys(user) = ["name", "age"]</code></li><li><code>Object.values(user) = ["John", 30]</code></li><li><code>Object.entries(user) = [ ["name","John"], ["age",30] ]</code></li></ul><h3 id="转换对象">转换对象</h3><p>对象没有map方法，使用需要先转换成数组再转回来</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> prices = &#123;</span><br><span class="line">  <span class="attr">banana</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">orange</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">meat</span>: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> doublePrices = <span class="built_in">Object</span>.fromEntries(</span><br><span class="line">  <span class="comment">// 转换为数组，之后使用 map 方法，然后通过 fromEntries 再转回到对象</span></span><br><span class="line">  <span class="built_in">Object</span>.entries(prices).map(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> [key, value * <span class="number">2</span>])</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">alert(doublePrices.meat); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h1 id="解构赋值">解构赋值</h1><h2 id="语法">语法</h2><p><code>let &#123;prop : varName = default, ...rest&#125; = object</code></p><p>这表示属性 <code>prop</code> 会被赋值给变量<code>varName</code>，如果没有这个属性的话，就会使用默认值<code>default</code>。</p><p>没有对应映射的对象属性会被复制到 <code>rest</code> 对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们有一个存放了名字和姓氏的数组</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;Ilya&quot;</span>, <span class="string">&quot;Kantor&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构赋值</span></span><br><span class="line"><span class="comment">// sets firstName = arr[0]</span></span><br><span class="line"><span class="comment">// and surname = arr[1]</span></span><br><span class="line"><span class="keyword">let</span> [firstName, surname] = arr;</span><br><span class="line"></span><br><span class="line">alert(firstName); <span class="comment">// Ilya</span></span><br><span class="line">alert(surname);  <span class="comment">// Kantor</span></span><br></pre></td></tr></table></figure><h2 id="剩余的">剩余的 ‘…’</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [name1, name2, ...rest] = [<span class="string">&quot;Julius&quot;</span>, <span class="string">&quot;Caesar&quot;</span>, <span class="string">&quot;Consul&quot;</span>, <span class="string">&quot;of the Roman Republic&quot;</span>];</span><br><span class="line"></span><br><span class="line">alert(name1); <span class="comment">// Julius</span></span><br><span class="line">alert(name2); <span class="comment">// Caesar</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 请注意，`rest` 的类型是数组</span></span><br><span class="line">alert(rest[<span class="number">0</span>]); <span class="comment">// Consul</span></span><br><span class="line">alert(rest[<span class="number">1</span>]); <span class="comment">// of the Roman Republic</span></span><br><span class="line">alert(rest.length); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h2 id="默认值">默认值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [firstName, surname] = [];</span><br><span class="line"></span><br><span class="line">alert(firstName); <span class="comment">// undefined</span></span><br><span class="line">alert(surname); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line"><span class="keyword">let</span> [name = <span class="string">&quot;Guest&quot;</span>, surname = <span class="string">&quot;Anonymous&quot;</span>] = [<span class="string">&quot;Julius&quot;</span>];</span><br><span class="line"></span><br><span class="line">alert(name);    <span class="comment">// Julius（来自数组的值）</span></span><br><span class="line">alert(surname); <span class="comment">// Anonymous（默认值被使用了）</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="date">Date</h1><p>new Date(year, month, date, hour, minute, second, millisecond)</p><ul><li><p><ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getFullYear">getFullYear()</a></p><p>获取年份（4 位数）</p></li><li><p><ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getMonth">getMonth()</a></p><p>获取月份，<strong>从 0 到 11</strong>。</p></li><li><p><ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getDate">getDate()</a></p><p>获取当月的具体日期，从 1 到31，这个方法名称可能看起来有些令人疑惑。</p></li><li><p><ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getHours">getHours()</a>，<ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getMinutes">getMinutes()</a>，<ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getSeconds">getSeconds()</a>，<ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getMilliseconds">getMilliseconds()</a></p><p>获取相应的时间组件。</p></li><li><p><ahref="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Date/getDay">getDay()</a></p><p>获取一周中的第几天，从 <code>0</code>（星期日）到<code>6</code>（星期六）。第一天始终是星期日，在某些国家可能不是这样的习惯，但是这不能被改变。</p></li></ul><p>测量函数运行时间</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> start = <span class="built_in">Date</span>.now();<span class="comment">//获得起始</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) f(date1, date2);<span class="comment">//运行多次函数f</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Date</span>.now() - start;<span class="comment">//返回差值</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bench</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> date1 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">let</span> date2 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> start = <span class="built_in">Date</span>.now();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) f(date1, date2);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Date</span>.now() - start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> time1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> time2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 交替运行 bench(upperSlice) 和 bench(upperLoop) 各 10 次</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  time1 += bench(diffSubtract);</span><br><span class="line">  time2 += bench(diffGetTime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert( <span class="string">&#x27;Total time for diffSubtract: &#x27;</span> + time1 );</span><br><span class="line">alert( <span class="string">&#x27;Total time for diffGetTime: &#x27;</span> + time2 );</span><br></pre></td></tr></table></figure><h1 id="json方法">JSON方法</h1><ul><li><p><code>JSON.stringify()</code> 将对象转换为 JSON。</p></li><li><p><code>JSON.parse()</code> 将 JSON 转换回对象。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>迭代器</title>
      <link href="/2021/08/18/%E8%BF%AD%E4%BB%A3%E5%99%A8/"/>
      <url>/2021/08/18/%E8%BF%AD%E4%BB%A3%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>迭代器使对象可以在for of中使用</p><span id="more"></span><p>需要一个next方法返回{done:,value:}</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> range = &#123;</span><br><span class="line">  <span class="attr">from</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">to</span>: <span class="number">5</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. for..of 调用首先会调用这个：</span></span><br><span class="line">range[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ……它返回迭代器对象（iterator object）：</span></span><br><span class="line">  <span class="comment">// 2. 接下来，for..of 仅与此迭代器一起工作，要求它提供下一个值</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">current</span>: <span class="built_in">this</span>.from,</span><br><span class="line">    <span class="attr">last</span>: <span class="built_in">this</span>.to,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. next() 在 for..of 的每一轮循环迭代中被调用</span></span><br><span class="line">    <span class="function"><span class="title">next</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">// 4. 它将会返回 &#123;done:.., value :...&#125; 格式的对象</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.current &lt;= <span class="built_in">this</span>.last) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">false</span>, <span class="attr">value</span>: <span class="built_in">this</span>.current++ &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在它可以运行了！</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> range) &#123;</span><br><span class="line">  alert(num); <span class="comment">// 1, 然后是 2, 3, 4, 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端听课笔记</title>
      <link href="/2021/08/14/%E5%89%8D%E7%AB%AF%E5%90%AC%E8%AF%BE%E7%AC%94%E8%AE%B0/"/>
      <url>/2021/08/14/%E5%89%8D%E7%AB%AF%E5%90%AC%E8%AF%BE%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>前端实战训练营笔记</p><span id="more"></span><h1 id="javascript基础">JavaScript基础</h1><p>Number全都用双精度浮点数表示</p><p>安全数是2^53-1以下的</p><p>toPresition(a)返回第一个不为0保留后边a位</p><p>tofixed(a)返回保留小数点后a位</p><p>原型链</p><ul><li>_proto_是隐式原型，指向构造函数原型prototype</li><li>prototype是显式原型</li><li></li></ul><h1 id="bom">BOM</h1><p>userAgent可以获取用户的硬件信息</p><p>navigation</p><ul><li>clipboard获得粘贴的信息</li><li>keyboard是键盘相关</li><li>geolocation定位</li></ul><p>indexedDB</p><h3 id="浏览器提供的数据库">浏览器提供的数据库</h3><blockquote><p>Cookie：4kb</p><p>LocalStorage:2.5m-10mb</p><p>indexedDB:无限</p></blockquote><h3 id="filereader">Filereader</h3><blockquote><p>文件操作</p></blockquote><h3 id="生成随机数">生成随机数</h3><blockquote><p>使用window.crypto.getRandomValues()arr</p><p>或Math.random()</p></blockquote><h3 id="图片懒加载">图片懒加载</h3><blockquote><p>可以用parent scroll</p><p>还有IntersectionObserver方法</p></blockquote><h1 id="css">CSS</h1><h3 id="盒模型">盒模型</h3><blockquote><p>从外往里border，margin，content，padding</p></blockquote><p>flex</p><p>grid</p><h1 id="底层技术">底层技术</h1><h3 id="浏览器缓存">浏览器缓存</h3><blockquote><p>缓存顺序</p></blockquote><h3 id="浏览器渲染">浏览器渲染</h3><blockquote><p>async和defer</p><p>async加载好后直接执行</p></blockquote><h1 id="正则表达式">正则表达式</h1>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>秋招面试记录</title>
      <link href="/2021/08/13/%E7%A7%8B%E6%8B%9B%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/08/13/%E7%A7%8B%E6%8B%9B%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>面试过的各大厂面经</p><span id="more"></span><h1 id="字节">字节</h1><ul><li>html标签类型</li><li>meta作用</li><li>css盒模型</li><li>用js向页面添加一个元素</li><li>算法题：扁平化数组</li><li>实现一个js函数A，传入一个带参数的函数B，实现用参数调用A实现B里的功能</li><li>向刚刚添加的a标签添加点击事件</li><li>如果一次性添加上千个a标签有没有性能优化方案</li><li>如何给某ul下上千个li都添加鼠标点击事件，有没有优化方案</li><li>git都有哪几个存储区，都是干什么的</li><li>git实现xxx功能的代码（xxx忘了具体是什么了。。）</li></ul><h1 id="阿里">阿里</h1><ul><li>先自我介绍</li><li>针对我的实习问了一些关于做了什么软件，我干了什么之类的问题</li><li>html标签，meta作用</li><li>做过移动端没，移动端meta作用？（忘了具体问题）</li><li>讲一讲css选择器</li><li>position类型，具体区别</li><li>css盒模型</li><li>js的基本类型都有什么</li><li>js里this指针怎么判断指向（我回答谁调用指向谁）追问箭头函数的情况下指向谁</li><li>js如何实现跨域</li><li>接触过代码打包吗</li><li>简述一个域名从你发出到打开都经历了什么</li><li>前端的性能优化方法</li></ul><h1 id="腾讯">腾讯</h1><ul><li>先自我介绍</li><li>针对自我介绍问了项目具体技术栈，我做了啥</li><li>针对简历<ul><li>个人博客最新发布的两个算法题解，第一个问我怎么想的，就针对js语言有没有其他更简单的实现方式（数组直接变数字加一）,说说时间复杂度，不用while的话解决方法（递归）递归的条件说一下</li><li>第二个题解说说思路，我就blbl说思路，然后说其他的解决方法等等</li><li>还有很多简历上其他的，基本上写过的都问了</li></ul></li><li>用js去除一个字符中所有空格（replaceall）不用replaceall呢（replace加正则表达式）还有别的吗（slice）</li><li>出了六道题在线做题<ul><li>纯css实现三角形</li><li>js实现typeof</li><li>递归算法</li><li>跨域</li><li>Css布局方式</li><li>url从输入到显示出画面都经历哪几步<ul><li>我写了三次握手，让展开讲讲blbl</li><li>为什么是三次，两次呢？</li><li>数组是怎么传输过来的（tcp blbl）</li></ul></li></ul></li><li>简历有写数据库，如何给一个表有id和成绩，求平均成绩最好的那个</li><li>他自己介绍了一下部门</li><li>有什么问题</li></ul><h1 id="好未来">好未来</h1><ul><li><p>先自我介绍</p></li><li><p>css部分</p><ul><li>左右固定中间可变怎么实现</li><li>上边用flex，flex具体横向的属性叫什么</li><li>transform这个属性是干啥的（说了transit）</li><li>如何使用transit实现右移100px</li><li>如何用选择器实现table偶数行底色变红</li><li>选择器都有哪些</li></ul></li><li><p>js部分</p><ul><li><p>js基本类型</p></li><li><p>ES6新增了什么类型</p></li><li><p>typeof用法，typeof null/undefined/array各自返回什么</p></li><li><p>如何区分null 和 array</p></li><li><p>如何获得一个元素的种类</p><blockquote><p><strong>Object.prototupe.toString.call(a)</strong></p></blockquote></li><li><p>假设有两个元素，一个对象一个数组，不知道种类前提如何遍历（用Array.isarray()判断出是数组然后进行for循环）</p></li><li><p>除了for循环还有什么方法能遍历数组（map）</p></li><li><p>map和foreach有什么区别</p></li><li><p>数组都有什么方法</p></li><li><p>怎么遍历对象（for in）</p></li><li><p>ES6新增了for of，怎么用</p></li><li><p>对象可以用for of吗</p></li><li><p>假设现在给一个图片的url，如何创建一个img标签，给他设置url并且添加到body后边</p><ul><li>需要考虑url是否能用</li></ul></li><li><p>说说事件捕获和事件冒泡</p></li><li><p>_.proto. 和 prototype的区别，写一个例子来表示谁指向谁</p></li></ul></li><li><p>网络部分</p><ul><li>304代表什么，与200有什么区别</li></ul></li></ul><h1 id="小黑盒实习">小黑盒（实习）</h1><ul><li>js ES5数据类型？ES6新增了什么类型？</li><li>用map，set和new object创建对象的区别</li><li>var和let的区别</li><li>给代码说结果</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br></pre></td></tr></table></figure><ul><li>css如何让元素居中？<ul><li>行内元素用text-align</li><li>块级元素如何垂直居中（设top）</li><li>块级不确定高度元素垂直居中（上述加transform:-50%且无height）</li></ul></li><li>用css创建三角形，原理？</li><li>说说css盒模型，IE盒模型</li><li>用css画一个大小为父元素宽度一半的正方形</li><li>transition和animation区别</li><li>css如何实现动画</li></ul><h1 id="一些笔试题">一些笔试题</h1><ul><li><p>如何实现add(1)(2)(3)...</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = [...arg];</span><br><span class="line">  _add = <span class="function"><span class="keyword">function</span> (<span class="params">...innerArg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (innerArg.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> a.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> a + b &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      [].push.apply(a, innerArg)</span><br><span class="line">      <span class="keyword">return</span> _add;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _add</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)()<span class="comment">//6</span></span><br></pre></td></tr></table></figure></li><li><p>如何实现数组扁平化</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">result, item</span>)=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> result.concat(<span class="built_in">Array</span>.isArray(item) ? flatten(item) : item);</span><br><span class="line">    &#125;, []);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.toString().split(<span class="string">&#x27;,&#x27;</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Number</span>(item);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.join(<span class="string">&#x27;,&#x27;</span>).split(<span class="string">&#x27;,&#x27;</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">parseInt</span>(item);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="美团">美团</h1><ul><li>自我介绍</li><li>为什么想干前端</li><li>js数据类型<ul><li>怎么区分的基本类型和引用类型</li></ul></li><li>js this指针，call，bind</li><li>深拷贝</li><li>算法：链表反转</li><li>promise</li><li>网络302和304都代表什么</li><li>css如何实现水平垂直居中</li><li>vue框架原理</li></ul><h1 id="蒸汽记忆">蒸汽记忆</h1><h2 id="一面">一面：</h2><ul><li>js数据类型</li><li>Typeof(NaN)输出什么</li><li>null和undefined区别</li><li>软件设计模式有哪些</li></ul><h2 id="二面">二面：</h2><ul><li>求平方根</li><li>力扣第一题两数之和</li></ul><h1 id="春招">春招</h1><h2 id="字节-1">字节</h2><ul><li><p>用nodejs读4G大文件的方法</p></li><li><p>js多线程的方式有哪些</p></li><li><p>如何控制多线程的进度</p></li><li><p>进程和线程的区别</p></li><li><p>进程间通信，线程间通信</p></li><li><p>管程是什么</p></li><li><p>Http2 和以前的有什么区别</p></li><li><p>js数据类型</p></li><li><p>哪些数据类型是保存在堆空间，栈空间</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 秋招 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>66-加一</title>
      <link href="/2021/08/12/66-%E5%8A%A0%E4%B8%80/"/>
      <url>/2021/08/12/66-%E5%8A%A0%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>给定一个由 整数 组成的 非空数组所表示的非负整数，在该数的基础上加一。</p><p>最高位数字存放在数组的首位， 数组中每个元素只存储单个数字。</p><p>你可以假设除了整数 0 之外，这个整数不会以零开头。</p><p>示例 1：</p><p>输入：digits = [1,2,3] 输出：[1,2,4] 解释：输入数组表示数字 123。示例 2：</p><p>输入：digits = [4,3,2,1] 输出：[4,3,2,2] 解释：输入数组表示数字4321。 示例 3：</p><p>输入：digits = [0] 输出：[1]</p><span id="more"></span><h3 id="解题思路">解题思路</h3><p>while内加一和进位</p><p>若不是全9就在while里输出，若是全9就在前边加一个1</p><h3 id="代码">代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">digits</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> plusOne = <span class="function"><span class="keyword">function</span>(<span class="params">digits</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> last = digits.length-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(last&gt;=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(digits[last]!=<span class="number">9</span>)&#123;</span><br><span class="line">            digits[last]+=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> digits;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            digits[last]=<span class="number">0</span>;</span><br><span class="line">            last--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [<span class="number">1</span>].concat(digits);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> easy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>合并两个有序数组</title>
      <link href="/2021/08/12/%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84/"/>
      <url>/2021/08/12/%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<p>给你两个有序整数数组 nums1 和 nums2，请你将 nums2 合并到 nums1 中，使nums1 成为一个有序数组。</p><p>初始化 nums1 和 nums2 的元素数量分别为 m 和 n 。你可以假设 nums1的空间大小等于 m + n，这样它就有足够的空间保存来自 nums2 的元素。</p><p>示例 1：</p><p>输入：nums1 = [1,2,3,0,0,0], m = 3, nums2 = [2,5,6], n = 3输出：[1,2,2,3,5,6] 示例 2：</p><p>输入：nums1 = [1], m = 1, nums2 = [], n = 0 输出：[1]</p><span id="more"></span><p>思路：用双指针逆向向nums1从后往前添加两个数组里大的元素，需要注意最外边的循环mn都是大于等于0，因为等于0的时候说明还有一个元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums1</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">m</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums2</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">n</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span> </span>Do not return anything, modify nums1 in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span> (<span class="params">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> last = m-- + --n;</span><br><span class="line">    <span class="keyword">while</span> (n&gt;=<span class="number">0</span>||m&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            nums1[last--] = nums1[m--];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(m&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            nums1[last--] = nums2[n--];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (nums1[m] &gt;= nums2[n]) &#123;</span><br><span class="line">            nums1[last--] = nums1[m--];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nums1[last--] = nums2[n--];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> easy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>page和hexo搭建自己的博客</title>
      <link href="/2021/08/11/page%E5%92%8Chexo%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/"/>
      <url>/2021/08/11/page%E5%92%8Chexo%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>之前用腾讯云的主机和wordpress建站，但是由于主机到期，所以打算换一个平台，找到了免费的githubpage</p><span id="more"></span><p>githubpage虽然免费，但是不像vps那么强大，他只支持静态博客的搭建。没有数据库支持，更新文章需要使用git手动增量上传。博客生成器我用的是hexo，当然也有其他的解决方案。</p><ol type="1"><li><p>前置工作</p><ul><li>需要电脑有安装git</li><li>安装node.js</li><li>注册github账户</li><li>（非必选）域名</li><li>（非必选）markdown编辑器（推荐typora，vscode也能用而且相关插件很强大）</li></ul></li><li><p>在本地安装hexo</p><p>打开控制台，输入以下代码</p><blockquote><p>npm install hexo -g</p><p>npm install hexo-server -g</p></blockquote><p>然后新建hexo项目</p><blockquote><p>hexo init blog</p><p>cd blog</p><p>npm install</p><p>hexo s</p></blockquote><p>等他提示打开localhost就可以看到博客已经打开了，ctrl/control+c可以关闭</p><p>这时为了下边需要不要关terminal，还在blog目录下安装deploy-git</p><blockquote><p>npm install hexo-deployer-git --save</p></blockquote></li><li><p>配置</p><p>在blog文件夹中找一个叫做_config.yml的文件，打开它</p><p>目前需要改的只有最开头Site部分，按照自己情况写标题作者什么的。</p><p>然后打开github，新建一个仓库</p><p><img data-src="https://www.hualigs.cn/image/611cef5f7cb07.jpg" alt="image-20210818181723781" style="zoom:50%;" /></p><p>在下一级新建一个仓库，名称填xxx.github.io，如</p><p><a href="https://imgtu.com/i/fT5WdJ"><imgsrc="https://z3.ax1x.com/2021/08/18/fT5WdJ.md.png"alt="fT5WdJ.md.png" /></a></p><p>公开或者私密看你自己心情，然后创建</p><p>再回到刚刚那个yml配置文件，拉到最下边deploy位置，按这个格式填入你刚刚创建的仓库信息然后保存文件。</p><blockquote><p>deploy:</p><p>type: git</p><p>repository:https://github.com/1982606762/1982606762.github.io.git</p><p>branch: main</p></blockquote><p>现在配置文件设置好了，只需要用terminal cd进blog文件夹使用hexog&amp;&amp;hexo d就可以部署到远程仓库了。</p><p>等他提示Deploydone的时候可以打开github仓库页面看看有没有部署完成，部署完成在这会有个√</p><p><a href="https://imgtu.com/i/fT5fo9"><imgsrc="https://z3.ax1x.com/2021/08/18/fT5fo9.md.png"alt="fT5fo9.md.png" /></a></p><p>有的话就可以用xxx.github,io访问了。</p></li><li><p>绑定自己的域名</p><p>首先需要去比如说腾讯云或者阿里云注册一个域名，便宜的大概十来块一年。</p><p>到刚刚blog文件夹下的source文件夹内新建一个叫CNAME的文件，注意文件不能有任何后缀。（mac系统新建之后如果用文本编辑器编辑他会自动添加txt后缀。。而且是隐藏的，所以需要用touch命令创建后用vim修改即可）</p><p>修改这个文件内容为你刚刚申请的域名，只包含域名即可如xxx.com</p><p>然后用terminal hexo g&amp;&amp;hexod，等他上传之后看看github仓库的这个位置</p><p><a href="https://imgtu.com/i/fT55J1"><imgsrc="https://z3.ax1x.com/2021/08/18/fT55J1.md.png"alt="fT55J1.md.png" /></a></p><p>是不是显示published at你的域名</p><p><a href="https://imgtu.com/i/fT5IRx"><imgsrc="https://z3.ax1x.com/2021/08/18/fT5IRx.png"alt="fT5IRx.png" /></a></p><p>有的话这边就算设置好了，然后去域名那边设置</p><p>登录到你刚刚买域名的网站，找到控制台里的域名解析或者DNS解析之类的，里边有你刚刚买的域名。找到解析列表，点击添加记录，按照下图第二行设置即可，注意在记录值位置需要改成自己的github账户</p><p><a href="https://imgtu.com/i/fT54iR"><img data-src="https://z3.ax1x.com/2021/08/18/fT54iR.png" alt="fT54iR.png" border="0" /></a></p><p>添加完后等几分钟，等他生效。不出意外此时访问xxx.com(你的域名)就可以打开博客了。</p></li><li><p>新建文章</p><p>写文章首先需要新建，还是用terminalcd到blog目录下输入<code>hexo new 我的博文xxx</code>其中第三个字段是文章名称。</p><p>然后在blog/source/_posts目录下会多一个我的博文xxx.md的文件，用markdown编辑器打开会看到类似</p><blockquote><p>Title:</p><p>date</p><p>tags</p><p>--</p></blockquote><p>---下边就可以用markdown语句写文章，上边是一些参数，可以修改tags</p><p>写完文章后保存这个文件，然后在terminal输入<code>hexo clean</code>之后<code>hexo g&amp;&amp;hexo d</code>就可以上传到云端。这时再打开博客就可以看到新写的文章了</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS开发学习笔记</title>
      <link href="/2021/08/11/JS%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2021/08/11/JS%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="margin参数数量">margin参数数量</h2><blockquote><p>margin: 20px;（上、下、左、右各20px。）</p><p>margin: 20px 40px;（上、下20px；左、右40px。）</p><p>margin: 20px 40px 60px;（上20px；左、右40px；下60px。）</p><p>margin: 20px 40px 60px 80px;（上20px；右40px；下60px；左80px。）</p></blockquote><h2 id="单独设置角度">单独设置角度</h2><p><code>border-bottom-left-radius:2px</code></p><span id="more"></span><h2id="设置单元格内文字不溢出还有padding">设置单元格内文字不溢出还有padding</h2><blockquote><p>.right_menu_inner .module_unit{ width: 40%; left: 60%; border: 1pxsolid #ccc;</p><p>position: absolute;</p><p>​ padding: 6px 12px;</p><p>​ font-size: 14px;</p><p>​ line-height: 1.42857143;</p><p>​ height: 100%;</p><p>​ border-radius: 5px;</p><p>​ background-color: white;</p><p>​ overflow: scroll;</p><p>​ border-top-left-radius: 0;</p><p>​ border-bottom-left-radius: 0;</p><p>}</p><p>.right_menu_inner .module_unit::-webkit-scrollbar{</p><p>​ display: none;</p><p>}</p></blockquote><p>效果：<imgsrc="/Users/zxl/Library/Containers/com.tencent.qq/Data/Library/Caches/Images/E7FA839551193991515F3BE73B5A0C73.jpg"alt="E7FA839551193991515F3BE73B5A0C73" /></p><h2 id="添加输入框后自动编辑">添加输入框后自动编辑</h2><p><em>div</em>.contentEditable=true</p><p>div.focus()</p><h2 id="css定义变量">css定义变量</h2><p><code>:root&#123;         --bianliangming:xxxxx; &#125;</code></p><p>需要前边两个横线</p><p>使用：</p><p><code>div&#123; color:div(--bianliangming,morenzhi)</code><code>&#125;</code></p><h2 id="使用vh进行响应式开发">使用vh进行响应式开发</h2><p>vh就是viewedHeight,同理还有vw就是width，他是相对目前打开的页面大小进行更改</p><blockquote><p>使用方法： 1vh就是1%</p></blockquote><h2 id="使用calc进行css计算">使用calc进行css计算</h2><blockquote><p>表达式中有“+”和“-”时，其前后必须要有空格，如"widht:calc(12%+5em)"这种没有空格的写法是错误的；</p></blockquote><blockquote><p>表达式中有“*”和“/”时，其前后可以没有空格，但建议留有空格。</p></blockquote><blockquote><p>如height:(100vh - 20px);</p></blockquote><h2 id="下方浮动的div实现">下方浮动的div实现</h2><p>只需</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>:fixed</span><br><span class="line">buttom:<span class="number">0px</span></span><br></pre></td></tr></table></figure><p>就可以</p><h2 id="array-操作">array 操作</h2><ul><li><p>Array.replace(a,b)</p><blockquote><p>把a用b替换，a可以使用正则表达式匹配多个内容</p><p>例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.replace(<span class="regexp">/\t/g</span>,<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure><p>选择所有的tab换成空格</p><p>再如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.replace(<span class="regexp">/# |\n/g</span>,<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>选择形如# 和</p></blockquote></li><li><p>Array.split(a,b)</p><blockquote><p>接收两个传入参数，第一个是用什么把array分离开，第二个是可选项分离的最大项数</p><p>例如:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;How are you doing today?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(str.split(<span class="string">&quot; &quot;</span>) + <span class="string">&quot;&lt;br /&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">document</span>.write(str.split(<span class="string">&quot;&quot;</span>) + <span class="string">&quot;&lt;br /&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">document</span>.write(str.split(<span class="string">&quot; &quot;</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>输出</p><figure><imgsrc="/Users/zxl/Library/Application%20Support/typora-user-images/image-20210221202626935.png"alt="image-20210221202626935" /><figcaption aria-hidden="true">image-20210221202626935</figcaption></figure></blockquote></li><li><p>Array.join(a)</p></li></ul><blockquote><p>返回一个字符串。该字符串是通过把 arrayObject的每个元素转换为字符串，然后把这些字符串连接起来，在两个元素之间插入<em>separator</em> 字符串而生成的。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>)</span></span><br><span class="line"><span class="javascript">arr[<span class="number">0</span>] = <span class="string">&quot;George&quot;</span></span></span><br><span class="line"><span class="javascript">arr[<span class="number">1</span>] = <span class="string">&quot;John&quot;</span></span></span><br><span class="line"><span class="javascript">arr[<span class="number">2</span>] = <span class="string">&quot;Thomas&quot;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(arr.join())</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure><imgsrc="/Users/zxl/Library/Application%20Support/typora-user-images/image-20210221202904663.png"alt="image-20210221202904663" /><figcaption aria-hidden="true">image-20210221202904663</figcaption></figure><ul><li><p>Array.slice(start,end)</p><blockquote><h3 id="返回值">返回值</h3><p>返回一个新的数组，包含从 start 到 end （不包括该元素）的 arrayObject中的元素。</p><h3 id="说明">说明</h3><p>请注意，该方法并不会修改数组，而是返回一个子数组。如果想删除数组中的一段元素，应该使用方法Array.splice()。</p><p><strong>注释：</strong>您可使用负值从数组的尾部选取元素。</p><p><strong>注释：</strong>如果 end 未被规定，那么 slice() 方法会选取从start 到数组结尾的所有元素。</p></blockquote></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>)</span></span><br><span class="line"><span class="javascript">arr[<span class="number">0</span>] = <span class="string">&quot;George&quot;</span></span></span><br><span class="line"><span class="javascript">arr[<span class="number">1</span>] = <span class="string">&quot;John&quot;</span></span></span><br><span class="line"><span class="javascript">arr[<span class="number">2</span>] = <span class="string">&quot;Thomas&quot;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(arr + <span class="string">&quot;&lt;br /&gt;&quot;</span>)</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(arr.slice(<span class="number">1</span>) + <span class="string">&quot;&lt;br /&gt;&quot;</span>)</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(arr)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">George,John,Thomas</span><br><span class="line">John,Thomas</span><br><span class="line">George,John,Thomas</span><br></pre></td></tr></table></figure><ul><li><p>array.trim()</p><blockquote><p>去除头尾的空格</p></blockquote></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;       Runoob        &quot;</span>;</span><br><span class="line">alert(str.trim());</span><br></pre></td></tr></table></figure><ul><li><p>Array.map()</p><blockquote><p>映射</p><p>类似于foreach</p><p>var data = [1, 2, 3, 4];</p><p>var arrayOfSquares = data.map(function (item) {</p><p>　　return item * item;</p><p>});</p><p>alert(arrayOfSquares); // [1, 4, 9, 16]</p><p>如果没有return就会把所有内容都映射成undefined</p></blockquote></li></ul><p>综合题：</p><p><imgsrc="https://img-blog.csdnimg.cn/2020092411313370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTExMTM4NA==,size_16,color_FFFFFF,t_70#pic_center" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);fs.readFile(<span class="string">&#x27;./data.text&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;    <span class="keyword">var</span> array = data.toString().split(<span class="string">&quot;\n&quot;</span>);<span class="keyword">var</span> arr = []<span class="keyword">var</span> temp =[]<span class="keyword">for</span>(i <span class="keyword">in</span> array) &#123;    arr[i]=array[i].split(<span class="string">&#x27;,&#x27;</span>);    temp[i] = arr[i]    arr[i] = temp[i].join().trim().replace(<span class="regexp">/\s+/ig</span>,<span class="string">&quot; &quot;</span>).split(<span class="string">&quot; &quot;</span>)&#125;<span class="built_in">console</span>.log(<span class="string">&#x27;arr&#x27;</span>,arr);&#125;);</span><br></pre></td></tr></table></figure><h2 id="给console.log加颜色">给console.log加颜色</h2><p>使用npm下载colors</p><p>用法：colors.xxx.xxx(text)</p><p>支持：</p><blockquote><p>https://www.npmjs.com/package/colors</p></blockquote><h2 id="获得文件扩展名">获得文件扩展名</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)path.extname(<span class="string">&#x27;index.html&#x27;</span>)<span class="comment">// returns&#x27;.html&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="获得文件名">获得文件名</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.replace(<span class="regexp">/\.[^/.]+$/</span>, <span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="nodejs控制台输入流">nodejs控制台输入流</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readline = <span class="built_in">require</span>(<span class="string">&#x27;readline&#x27;</span>).createInterface(&#123; <span class="attr">input</span>: process.stdin, <span class="attr">output</span>: process.stdout&#125;);readline.question(<span class="string">&#x27;Who are you?&#x27;</span>, <span class="function"><span class="params">name</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">`Hey there <span class="subst">$&#123;name&#125;</span>!`</span>); readline.close();&#125;);</span><br></pre></td></tr></table></figure><p>用JQ实现左右侧的滑动标签</p><p>利用jq的animate实现</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">id</span>=<span class="string">&quot;right_hide&quot;</span>&gt;</span>                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-forward&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;/<span class="name">a</span>&gt;</span>                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;right_show&quot;</span> <span class="attr">class</span>=<span class="string">&quot;right_show&quot;</span>&gt;</span>显示新建栏<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-backward&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;                $(<span class="string">&quot;#right_hide&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;                    $(<span class="string">&quot;#right1&quot;</span>).animate(&#123; <span class="attr">right</span>: <span class="string">&#x27;-288px&#x27;</span> &#125;);                    $(<span class="string">&quot;#right_show&quot;</span>).delay(<span class="number">500</span>).animate(&#123; <span class="attr">right</span>: <span class="string">&#x27;0&#x27;</span> &#125;);                    <span class="keyword">if</span> ($(<span class="string">&quot;#left1&quot;</span>).css(<span class="string">&quot;left&quot;</span>) != <span class="string">&quot;0px&quot;</span>) &#123;                        $(<span class="string">&quot;.canvasall&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(100% - 60px)&quot;</span>);                        $(<span class="string">&quot;.top_select_bar&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(100% - 60px)&quot;</span>);                    &#125; <span class="keyword">else</span> &#123;                        $(<span class="string">&quot;.canvasall&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(80% - 30px)&quot;</span>);                        $(<span class="string">&quot;.top_select_bar&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(80% - 30px)&quot;</span>);                    &#125;                &#125;);                $(<span class="string">&quot;#right_show&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;                    $(<span class="string">&quot;#right_show&quot;</span>).animate(&#123; <span class="attr">right</span>: <span class="string">&#x27;-30px&#x27;</span> &#125;);                    $(<span class="string">&quot;#right1&quot;</span>).delay(<span class="number">500</span>).animate(&#123; <span class="attr">right</span>: <span class="string">&#x27;0&#x27;</span> &#125;);                    <span class="keyword">if</span> ($(<span class="string">&quot;#left1&quot;</span>).css(<span class="string">&quot;left&quot;</span>) != <span class="string">&quot;0px&quot;</span>) &#123;                        $(<span class="string">&quot;.canvasall&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(100% - 318px)&quot;</span>);                        $(<span class="string">&quot;.top_select_bar&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(100% - 318px)&quot;</span>);                    &#125; <span class="keyword">else</span> &#123;                        $(<span class="string">&quot;.canvasall&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(80% - 288px)&quot;</span>);                        $(<span class="string">&quot;.top_select_bar&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;calc(80% - 288px)&quot;</span>);                    &#125;                &#125;);&#125;);</span><br></pre></td></tr></table></figure><p>原理就是下边遮盖一层，点击后让上边这层向左/右滑走，下边那层滑入即可。</p><h2 id="实现可拖动div">实现可拖动div</h2><p>首先在需要缩放的div旁边实现一个小div</p><h2 id="js深拷贝复制element">js深拷贝复制element</h2><p><code>var newnode = oldnode.clone(true)</code></p><p>true参数表示克隆节点所有后代</p><h2 id="html实现滑块">html实现滑块</h2><p>用h5自带的input就可以实现</p><p><code>&lt;input type="range" min="10" max="300" value="100" step="10" οnchange="showValue(this.value)" style=""&gt;</code></p><p>然后只需要写个showValue函数就可以修改值</p><h2 id="设置某个div滚动条位置">设置某个div滚动条位置</h2><p><code>先给div设置一个id然后使用document.getElementbyid.scroll(x,y)调整</code></p><blockquote><p>其中xy可以用ll.scrollWidth/ll.scrollHeight获得最大值</p></blockquote><h2 id="哈希表map用法">哈希表/map用法</h2><blockquote><p>1，js创建map对象</p><p>var map = new Map();</p><p>2.将键值对放入map对象</p><p>map.set("key",value)</p><p>map.set("key1",value1)</p><p>map.set("key2",value2)</p><p>3.根据key获取map值</p><p>map.get(key)</p><p>4.删除map指定对象</p><p>delete map[key]</p><p>或</p><p>map.delete(key)</p><p>5.循环遍历map</p><p>map.</p><p>forEach(function(key){ 　　console.log("key",key)//输出的是map中的value值</p><p>})</p></blockquote><h2 id="js取整">js取整</h2><blockquote><p>只保留整数 parseInt(1.111)</p></blockquote><h2 id="css渐变过渡动画">css渐变过渡动画</h2><blockquote><p>transition: property duration timing-function delay</p></blockquote><p>transition属性是个复合属性，包括以下几个子属性：</p><ul><li>transition-property ：规定设置过渡效果的css属性名称</li><li>transition-duration ：规定完成过渡效果需要多少秒或毫秒</li><li>transition-timing-function：指定过渡函数，规定速度效果的速度曲线</li><li>transition-delay ：指定开始出现的延迟时间</li></ul><p>默认值分别为：all 0 ease 0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div &#123;  width: 100px;  height: 100px;  background-color: orange;  margin: 20px auto;  border-radius: 100%;  -webkit-transition-property: -webkit-border-radius;  transition-property: border-radius;  -webkit-transition-duration: 3s;  transition-duration: 3s;  -webkit-transition-timing-function：ease; transition-timing-function：ease; div:hover &#123;  border-radius: 0px;&#125;</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><h2 id="section">2020/07/29</h2><p>6.1对象性质</p><ul><li>数据属性直接定义，有四个属性</li><li>访问器只能用函数定义，有set和get，通常用来改一个值就改所有值</li><li>获取属性使用<code>var qq = object.getownpropertydescriptor(name,"数据名")</code></li></ul><p>6.2创建对象</p><ul><li>构造函数模式，直接写构造函数之后new即可</li><li>原型模式，使用prototype关键字，初始化定义好属性，使用时修改则会吧原型的同名属性屏蔽，可以用delete删除某一属性</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//当前使用最广泛</span><br><span class="line">function personq(name,age,job)</span><br><span class="line">&#123;</span><br><span class="line">    this.age = age;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.job = job;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">personq.prototype = </span><br><span class="line">&#123;</span><br><span class="line">    constructor:personq,</span><br><span class="line">    sayname:function()&#123;</span><br><span class="line">        alert(this.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.3原型链</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/07/image-745x1024.png" /></p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/07/image-1-1024x526.png" /></p><p>继承：</p><ul><li>组合式继承</li><li>寄生组合式继承（效果最好）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function inheritPrototype(subType,superType)&#123;</span><br><span class="line">    var prototype = Object(superType,prototype);</span><br><span class="line">    prototype.constructor = subType;</span><br><span class="line">    subType.prototype = prototype;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Supertype(name)</span><br><span class="line">&#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Supertype.prototype.sayname = function()</span><br><span class="line">&#123;</span><br><span class="line">    alert(this.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Subtype(name,age)&#123;</span><br><span class="line">    //继承属性</span><br><span class="line">    Supertype.call(this,name);</span><br><span class="line">    this.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//继承方法</span><br><span class="line">Subtype.prototype = new Supertype();</span><br><span class="line">//寄生组合式继承</span><br><span class="line">//inheritPrototype(Subtype,Supertype);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Subtype.prototype.sayage = function()&#123;</span><br><span class="line">    alert(this.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="section-1">2020/07/30</h2><p>函数表达式可以不对函数命名，即匿名函数</p><p>在函数内部定义其他函数是闭包，用处两个</p><ul><li>创建并立刻调用函数</li><li>实现私有变量</li></ul><p>BOM</p><p>window对象：</p><ul><li>top指向最外围的框架，parent指向上一级</li><li>window可以指定窗口大小和位置</li><li>导航和打开窗口</li></ul><p>location对象：</p><ul><li>通过编程访问浏览器导航，逐段修改浏览器url</li><li>使用replace（）方法可以不能返回</li></ul><p>navigator对象：</p><ul><li>检测插件</li><li>与浏览器有关</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1NF，2NF，3NF，BCNF（3NF和BCNF的区别）</title>
      <link href="/2020/10/21/1nf%EF%BC%8C2nf%EF%BC%8C3nf%EF%BC%8Cbcnf%EF%BC%883nf%E5%92%8Cbcnf%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%89/"/>
      <url>/2020/10/21/1nf%EF%BC%8C2nf%EF%BC%8C3nf%EF%BC%8Cbcnf%EF%BC%883nf%E5%92%8Cbcnf%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<ul><li><p><strong><em><strong>候选码：若关系中的某一组属性的值能唯一地标识一个元组，而其子集不能，则称该属性组为候选码；</strong></em></strong></p></li><li><p><strong><em><strong>主码：若一个关系有多个候选码，则选定其中一个为主码；</strong></em></strong></p></li><li><p><strong><em><strong>主属性&amp;&amp;非主属性：候选码的诸属性都称为主属性，不包含在任何候选码中的属性称为非主属性；</strong></em></strong></p><span id="more"></span></li><li><p>1NF</p></li></ul><p>       满足最低要求的叫第一范式。</p><ul><li>2NF</li></ul><p>     若R属于第一范式，且每一个非主属性完全函数依赖于任何一个候选码，则R属于2NF</p><ul><li>3NF</li></ul><p>     若R中的每一个非主属性既不传递依赖于码，也不部分依赖于码，则R属于第三范式</p><ul><li>BCNF</li></ul><ol type="1"><li>所有非主属性对每一个码都是完全函数依赖；</li><li>所有的主属性对每一个不包含它的码，也是完全函数依赖；</li><li>没有任何属性完全函数依赖于非码的任何一组属性。</li></ol><ul><li>栗子1</li></ul><p>关系模式SJP(S,J,P)中，S是学生，J表示课程，P表示名次，每一个学生选修每门课程的成绩都会有一定的名次，每门课程中每一个名次只有一个学生(即没有并列名次）。</p><p>函数依赖（S,J）决定P，（J,P）决定S;</p><p>所以（S,J）与（J,P）都可以作为候选码，这两个码由两个属性组成，不存在非主属性，显然没有非主属性对码的传递和部分函数依赖，所以SJP属于第三范式；而且满足上面1,2,3三条，所以SJP属于BCNF；</p><ul><li>栗子2</li></ul><p>关系模式STJ（S,T,J）中，S是学生，T是教师，J是课程。每一教师只教一门课，每门课有若干教师，某一学生选定某课程，就得到一个固定的教师。</p><p>函数依赖：（S,J）决定T;（S,T）决定J;T决定J;</p><p>这里候选码（S,J），（S,T）；</p><p>不存在非主属性对码的部分或传递函数依赖，所以STJ属于第三范式；</p><p>但是J部分函数依赖于码（T,S），不满足第2条，所以STJ不属于BCNF；</p>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模式分解是否为无损链接的算法分析</title>
      <link href="/2020/10/21/%E6%A8%A1%E5%BC%8F%E5%88%86%E8%A7%A3%E6%98%AF%E5%90%A6%E4%B8%BA%E6%97%A0%E6%8D%9F%E9%93%BE%E6%8E%A5%E7%9A%84%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90/"/>
      <url>/2020/10/21/%E6%A8%A1%E5%BC%8F%E5%88%86%E8%A7%A3%E6%98%AF%E5%90%A6%E4%B8%BA%E6%97%A0%E6%8D%9F%E9%93%BE%E6%8E%A5%E7%9A%84%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>方法一：无损连接定理</p><p>关系模式R(U，F)的一个分解，ρ={R1&lt;U1,F1&gt;,R2&lt;U2,F2&gt;}具有无损连接的充分必要条件是：</p><p>U1∩U2→U1-U2 €F+ 或U1∩U2→U2 -U1€F+</p><span id="more"></span><p>方法二：算法</p><p>ρ={R1&lt;U1,F1&gt;,R2&lt;U2,F2&gt;,...,Rk&lt;Uk,Fk&gt;}是关系模式R&lt;U,F&gt;的一个分解，U={A1,A2,...,An}，F={FD1,FD2,...,FDp}，并设F是一个最小依赖集，记FDi为Xi→Alj，其步骤如下：</p><p>①建立一张n列k行的表，每一列对应一个属性，每一行对应分解中的一个关系模式。若属性Aj Ui，则在j列i行上真上aj，否则填上bij；</p><p>②对于每一个FDi做如下操作：找到Xi所对应的列中具有相同符号的那些行。考察这些行中li列的元素，若其中有aj，则全部改为aj，否则全部改为bmli，m是这些行的行号最小值。</p><p><strong>如果在某次更改后，有一行成为：a1,a2,...,an，则算法终止。且分解ρ具有无损连接性</strong>，否则不具有无损连接性。</p><p>对F中p个FD逐一进行一次这样的处理，称为对F的一次扫描。</p><p>③比较扫描前后，表有无变化，如有变化，则返回第② 步，否则算法终止。如果发生循环，那么前次扫描至少应使该表减少一个符号，表中符号有限，因此，循环必然终止。</p><p>举例1：已知R&lt;U,F&gt;，U={A,B,C}，F={A→B}，如下的两个分解：</p><p>① ρ1={AB,BC}</p><p>② ρ2={AB,AC}</p><p>判断这两个分解是否具有无损连接性。</p><p>①因为AB∩BC=B，AB-BC=A，BC-AB=C</p><p>所以B→A ¢F+，B→C ¢ F+</p><p>故ρ1是有损连接。</p><p>② 因为AB∩AC=A，AB-AC=B，AC-AB=C</p><p>所以A→B €F+，A→C ¢F+</p><p>故ρ2是无损连接。</p><p>举例2：已知R&lt;U,F&gt;，U={A,B,C,D,E}，F={A→C,B→C,C→D,DE→C,CE→A}，R的一个分解为R1(AD)，R2(AB)，R3(BE)，R4(CDE)，R5(AE)，判断这个分解是否具有无损连接性。</p><p> ①构造一个初始的二维表，若“属性”属于“模式”中的属性，则填aj，否则填bij</p><p><imgsrc="https://images0.cnblogs.com/blog2015/652582/201504/211054351402115.png" /></p><p>②根据A→C，对上表进行处理，由于属性列A上第1、2、5行相同均为a1，所以将属性列C上的b13、b23、b53改为同一个符号b13（取行号最小值）。</p><p><imgsrc="https://images0.cnblogs.com/blog2015/652582/201504/211056092031146.png" /></p><p>③根据B→C，对上表进行处理，由于属性列B上第2、3行相同均为a2，所以将属性列C上的b13、b33改为同一个符号b13（取行号最小值）。</p><p><imgsrc="https://images0.cnblogs.com/blog2015/652582/201504/211056516099856.png" /></p><p>④根据C→D，对上表进行处理，由于属性列C上第1、2、3、5行相同均为b13，所以将属性列D上的值均改为同一个符号a4。</p><p><imgsrc="https://images0.cnblogs.com/blog2015/652582/201504/211057216409447.png" /></p><p>⑤根据DE→C，对上表进行处理，由于属性列DE上第3、4、5行相同均为a4a5，所以将属性列C上的值均改为同一个符号a3。</p><p><imgsrc="https://images0.cnblogs.com/blog2015/652582/201504/211057502961728.png" /></p><p>⑥根据CE→A，对上表进行处理，由于属性列CE上第3、4、5行相同均为a3a5，所以将属性列A上的值均改为同一个符号a1。</p><p><imgsrc="https://images0.cnblogs.com/blog2015/652582/201504/211058348282823.png" /></p><p>⑦通过上述的修改，使第三行成为a1a2a3a4a5，则算法终止。且分解具有无损连接性。</p>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>网站开发日志</title>
      <link href="/2020/08/06/%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/"/>
      <url>/2020/08/06/%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<p>2020-08-06</p><ul><li>新增左侧菜单栏功能</li><li>新增菜单栏对比色功能</li></ul><p>菜单栏实现：内侧标题position使用relative可自动上下移动，想打开和关闭的组件使用display:block和none控制显示与隐藏，在标题栏div添加onclick事件更改display参数即可实现</p><p>对比色实现：使用getelementsbyclassname获得一样classname的一个列表，for循环让列表[i]项的style.backgroundColor（注意这里和css不一样）变成不一样的颜色（加余数判定）</p><p>注意：for循环内如果设置多个表的颜色，表内元素必须相同，不然进行时报错回中止for循环！！！</p><p>2020-08-07</p><ul><li>去除左右滚动条</li><li>调整左侧菜单布局样式</li></ul><p>滚动条：overflow:scroll;overflow-x:hidden</p><p>2020-08-10</p><ul><li>顶部菜单和右侧菜单添加一些内容</li><li>更改整体配色</li><li>更改整体布局，大小</li></ul><p>右侧菜单设置有问题待修复，下拉菜单：<select><option></p><p><imgsrc="https://img.jbzj.com/file_images/article/201212/20121213112015996.png" /></p><p>若要弄这样的表，灰色部分使用th白色部分用td就可以分开设置，td内部加input就可以输入值</p><p>2020-08-12</p><ul><li>添加鼠标悬浮气泡功能</li><li>样式小调整</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">static showdiv()&#123;</span><br><span class="line">        var tool = document.getElementsByClassName(&#x27;geSidebarTooltip&#x27;)[0];</span><br><span class="line">        //图片更改</span><br><span class="line">        var locate = this.firstElementChild.src;</span><br><span class="line">        var cimg = tool.firstElementChild;</span><br><span class="line">        cimg.src = locate;</span><br><span class="line">        //文字更改</span><br><span class="line">        var words =this.id.charAt(4).toUpperCase() + this.id.substr(5);</span><br><span class="line">        tool.children[1].innerText=words;</span><br><span class="line">        //位置更改</span><br><span class="line">        var t = this.offsetTop;</span><br><span class="line">        tool.style.top=t-10+&#x27;px&#x27;;</span><br><span class="line">        tool.style.display=&#x27;block&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">    static hidediv()&#123;</span><br><span class="line">        var tool = document.getElementsByClassName(&#x27;geSidebarTooltip&#x27;)[0];</span><br><span class="line">        tool.style.display=&#x27;none&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">var cpnt_btn_list = document.querySelectorAll(&#x27;.component_btn&#x27;);</span><br><span class="line">cpnt_btn_list.forEach(btn =&gt;&#123;</span><br><span class="line">    // formed as btn_ + component name</span><br><span class="line">    var cpnt_str = btn.id.charAt(4).toUpperCase() + btn.id.substr(5);</span><br><span class="line">    btn.component_type = eval(cpnt_str);</span><br><span class="line">    btn.addEventListener(&quot;click&quot;, Component_btn.attachComponent);</span><br><span class="line">    btn.addEventListener(&#x27;mouseover&#x27;,Component_btn.showdiv);</span><br><span class="line">    btn.addEventListener(&#x27;mouseout&#x27;,Component_btn.hidediv);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>以上为气泡核心代码，思路为先获得目标位置，图片src和文字描述，再通过js代码换进去，添加mouseover和mouseout就可以添加鼠标悬浮和移出功能</p><p>只需要在html文件中添加一个div即可，div中添加主图img，下方文字div和左侧小箭头img。</p><p>2020-08-13</p><ul><li>添加checkbox函数，可以控制输入框disable值</li><li>右侧菜单新增奇偶颜色效果</li><li>新增dragging bar箭头效果</li><li>修复bug</li></ul><p>checkbox首先需要定义函数，添加onclick函数，定义两个变量分别选择box和需要更改的inputlist，第一个可以直接用id，第二个建议先选出父元素再用tagname选出input。添加判断条件q.checked，内部两个for循环就可解决，注意disabled是attrabute，需要用set和remove，set要传入两个参数</p><p>箭头效果用css就可以，用js不知道为什么会出错</p><p>2020-08-19</p><ul><li>新增顶部工具栏标签</li><li>新增标签换颜色函数</li><li>将函数运用到左侧和顶部标签</li></ul><p>button标签的border是没按下时的边框，outline是按下之后的边框，建议颜色都是inherit</p><p>h换色函数需要首先把所有标签都编号，判断当下颜色是否改变，没改变就变，然后把所有其他的都变成初始值</p><p>应用的时候使用箭头函数btn=&gt;{}此时btn就是每次点击的this，使用匿名函数可以实现有参数的函数</p><p>2020-08-21</p><ul><li>尝试svg</li><li>增加顶部工具栏标签个数</li></ul><p>js中数字直接相加有可能是首尾相连，所以需要用parseInt转换！！</p><p>2020-08-31</p><ul><li>完成批量增加html元素功能</li></ul><p>添加时需要先选中要添加的位置，最好做一个空的div，然后使用innerHTML的方式直接添加，需注意的是换行和"都需要用\转义</p><p>删除时只需要将其innerHTML变成""就可以</p><p>2020-10-26</p><p>人工alert函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    &lt;div id=&quot;light&quot; class=&quot;white_content&quot;&gt;</span><br><span class="line">    &lt;/div&gt; </span><br><span class="line">    &lt;div id=&quot;fade&quot; class=&quot;black_overlay&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.black_overlay&#123; </span><br><span class="line">    display: none; </span><br><span class="line">    position: absolute; </span><br><span class="line">    top: 0%; </span><br><span class="line">    left: 0%; </span><br><span class="line">    width: 100%; </span><br><span class="line">    height: 100%; </span><br><span class="line">    background-color: black; </span><br><span class="line">    z-index:1001; </span><br><span class="line">    -moz-opacity: 0.8; </span><br><span class="line">    opacity:.80; </span><br><span class="line">    filter: alpha(opacity=88); </span><br><span class="line">&#125; </span><br><span class="line">.white_content &#123; </span><br><span class="line">    display: none; </span><br><span class="line">    position: absolute; </span><br><span class="line">    top: 35%;</span><br><span class="line">    left: 45%;</span><br><span class="line">    width: 10%;</span><br><span class="line">    height: 15%;</span><br><span class="line">    padding: 20px; </span><br><span class="line">    background-color: white; </span><br><span class="line">    z-index:1002; </span><br><span class="line">    overflow: auto; </span><br><span class="line">    border: 5px solid black;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function artificial_alert(text)&#123;</span><br><span class="line">    document.getElementById(&#x27;light&#x27;).innerHTML=&quot;&lt;p&gt;&quot;+text+&quot;&lt;/p&gt;&lt;button type=\&quot;button\&quot; onclick=\&quot;closeDialog()\&quot;&gt;关闭&lt;/button&gt;&quot;</span><br><span class="line">    if(document.getElementById(&#x27;light&#x27;).style.display== &#x27;block&#x27;)&#123;</span><br><span class="line">        document.getElementById(&#x27;light&#x27;).style.display = &#x27;none&#x27;;</span><br><span class="line">        document.getElementById(&#x27;fade&#x27;).style.display = &#x27;none&#x27;;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        document.getElementById(&#x27;light&#x27;).style.display = &#x27;block&#x27;;</span><br><span class="line">        document.getElementById(&#x27;fade&#x27;).style.display = &#x27;block&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>原理就是动态添加需要alert的文字进去</p><p>2020-11-04</p><p>最近在搞bootstrap</p><p>导入时只需要</p><p><code>&lt;link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css"&gt;</code></p><p><code>&lt;script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;</code></p><p><code>&lt;script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"&gt;&lt;/script&gt;</code></p><p>就可以，但是在npm下运行时需要把jq下载到本地，同时引入在线jq和本地jq才可以</p><p>输入框默认值，点击清除，不点击恢复：</p><p><code>onfocus="if(this.value=='test')&#123;this.value=''&#125;" onblur="if(this.value=='')&#123;this.value='test'&#125;" value="test"</code></p><p>用for循环appendChild时不能只靠innerHTML修改元素，必须重新声明才可以</p><p>列表可以使用push 和pop</p><p>2020/11/23</p><p>实现长宽比：</p><p>垂直方向的padding</p><p>这是最早提出的一种实现方案，主要借助的原理是利用<code>padding-top</code>或者<code>padding-bottom</code>的百分比值，实现容器长宽比。在CSS中<code>padding-top</code>或<code>padding-bottom</code>的百分比值是根据容器的<code>width</code>来计算的。如此一来就很好的实现了容器的长宽比。采用这种方法，需要把容器的<code>height</code>设置为<code>0</code>。而容器内容的所有元素都需要采用<code>position:absolute</code>，不然子元素内容都将被<code>padding</code>挤出容器（造成内容溢出）。</p><p>比如我们容器的长宽比是<code>16:9</code>，那么根据计算：<code>100% * 9 / 16</code>可以得到<code>56.25%</code>。如果你希望的是<code>4:3</code>，那么对应的就是<code>100% * 3 / 4</code>。</p><p>具体的CSS代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.aspectration &#123;</span><br><span class="line">    position: relative; /*因为容器所有子元素需要绝对定位*/</span><br><span class="line">    height: 0; /*容器高度是由padding来控制，盒模型原理告诉你一切*/</span><br><span class="line">    width: 100%; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.aspectration[data-ratio=&quot;16:9&quot;] &#123;</span><br><span class="line">    padding-top: 56.25%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.aspectration[data-ratio=&quot;4:3&quot;]&#123;</span><br><span class="line">    padding-top: 75%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过通配符<code>*</code>选择器，让其子元素的宽高和容器<code>.aspectration</code>一样大小：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.aspectration &gt; * &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Git学习笔记</title>
      <link href="/2020/07/28/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/07/28/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>下载安装</p><ul><li><p>到目标文件夹中git init初始化</p></li><li><p>把文件添加到git仓库使用命令<code>git add &lt;file&gt;</code></p></li><li><p>使用命令 <code>git commit -m &lt;message&gt;</code></p></li><li><p>要随时掌握工作区的状态，使用<code>git status</code>命令。</p></li><li><p>如果<code>git status</code>告诉你有文件被修改过，用<code>git diff</code>可以查看修改内容。</p></li><li><p><code>HEAD</code>指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令<code>git reset --hard commit_id</code>。（上一个是HEAD^,上100个是HEAD~100）</p></li><li><p>穿梭前，用<code>git log</code>可以查看提交历史，以便确定要回退到哪个版本。</p></li><li><p>要重返未来，用<code>git reflog</code>查看命令历史，以便确定要回到未来的哪个版本。</p></li></ul><p>场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code>。</p><p>场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD &lt;file&gt;</code>，就回到了场景1，第二步按场景1操作。</p><p>命令<code>git rm</code>用于删除一个文件</p><p>要关联一个远程库，使用命令<code>git remote add origin git@server-name:path/repo-name.git</code>；</p><p>关联后，使用命令<code>git push -u origin master</code>第一次推送master分支的所有内容；</p><p>此后，每次本地提交后，只要有必要，就可以使用命令<code>git push origin master</code>推送最新修改；.</p><p>要克隆一个仓库，首先必须知道仓库的地址，然后使用<code>git clone</code>命令克隆。</p><p>$ git clone git@github.com:1982606762/worked1</p><p>Git鼓励大量使用分支：</p><p>查看分支：<code>git branch</code></p><p>创建分支：<code>git branch &lt;name&gt;</code></p><p>切换分支：<code>git checkout &lt;name&gt;</code>或者<code>git switch &lt;name&gt;</code></p><p>创建+切换分支：<code>git checkout -b &lt;name&gt;</code>或者<code>git switch -c &lt;name&gt;</code></p><p>合并某分支到当前分支：<code>git merge &lt;name&gt;</code></p><p>删除分支：<code>git branch -d &lt;name&gt;</code></p><p>远程连接github：</p><h2 id="检查ssh-keys是否存在">1. 检查SSH keys是否存在</h2><p>输入下面的命令，如果有文件<code>id_rsa.pub</code> 或<code>id_dsa.pub</code>，则直接进入步骤3将SSHkey添加到GitHub中，否则进入第二步生成SSH key</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -al ~/.ssh</span><br><span class="line"># Lists the files in your .ssh directory, if they exist</span><br></pre></td></tr></table></figure><h2 id="生成新的ssh-key">2. 生成新的ssh key</h2><p><strong>第一步：生成public/private rsa key pair</strong><br />在命令行中输入<code>ssh-keygen -t rsa -C "your_email@example.com"</code></p><p>默认会在相应路径下（/your_home_path）生成<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件，如下面代码所示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span><br><span class="line"># Creates a new ssh key using the provided email</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/your_home_path/.ssh/id_rsa):</span><br></pre></td></tr></table></figure><p><strong>第二步：输入passphrase（本步骤可以跳过）</strong></p><p>设置passphrase后，进行版本控制时，每次与GitHub通信都会要求输入passphrase，以避免某些“失误”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty for no passphrase): [Type a passphrase]</span><br><span class="line">Enter same passphrase again: [Type passphrase again]</span><br></pre></td></tr></table></figure><p>sample result:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved in /your_home_path/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /your_home_path/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">#01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</span><br></pre></td></tr></table></figure><p><strong>第三步：将新生成的key添加到ssh-agent中:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># start the ssh-agent in the background</span><br><span class="line">eval &quot;$(ssh-agent -s)&quot;</span><br><span class="line">Agent pid 59566</span><br><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><h2 id="将ssh-key添加到github中">3. 将ssh key添加到GitHub中</h2><p>用自己喜欢的文本编辑器打开<code>id_rsa.pub</code>文件，里面的信息即为SSHkey，将这些信息复制到GitHub的<code>Add SSH key</code>页面即可</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Git教程</title>
      <link href="/2020/07/28/git%E6%95%99%E7%A8%8B/"/>
      <url>/2020/07/28/git%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><strong>目录</strong></p><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label0">一、版本控制概要工作区 暂存区 本地仓库 远程仓库</a><ul><li><p><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_0_0">1.1、什么是版本控制</a></p></li><li><p><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_0_1">1.2、常用术语</a></p></li><li><p><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_0_2">1.3、常见的版本控制器</a></p></li><li><p><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_0_3">1.4、版本控制分类</a></p><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_0_3_0">1.4.1、本地版本控制</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_0_3_1">1.4.2、集中版本控制</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_0_3_2">1.4.3、分布式版本控制</a></li></ul></li><li><p><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_0_4">1.5、Git与SVN最主要区别</a></p><span id="more"></span></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label1">二、Git安装与配置</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_1_0">2.1、什么是Git</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_1_1">2.2、搭建Git工作环境</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_1_0">2.2.1、下载Git</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_1_1">2.2.2、安装Git</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_1_2">2.2.3、启动Git</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_1_3">2.2.4、Linux与MacOS安装Git</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_1_4">2.2.5、Bash基本操作命令</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_1_2">2.3、Git配置- git config</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_2_0">2.3.1、查看配置- git config -l</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_2_1">2.3.2、Git配置文件分类</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_2_2">2.3.3、设置用户名与邮箱（用户标识，必要）</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_2_3">2.3.4、添加或删除配置项</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_1_2_4">2.3.5、更多配置项</a></li></ul></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label2">三、Git理论基础</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_2_0">3.1、工作区域</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_2_1">3.2、工作流程</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_2_2">3.3、图解教程</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3">四、Git操作</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_0">4.1、创建工作目录与常用指令</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_1">4.2、获得GIT仓库</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_1_0">4.2.1、创建全新仓库</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_1_1">4.2.2、克隆远程仓库</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_2">4.3、GIT文件操作</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_0">4.3.1、文件4种状态</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_1">4.3.2、查看文件状态</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_2">4.3.3、添加文件与目录</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_3">4.3.4、移除文件与目录（撤销add）</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_4">4.3.5、查看文件修改后的差异</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_5">4.3.6、签出</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_6">4.3.6、忽略文件</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_7">4.3.7、提交</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_8">4.3.8、日志与历史</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_9">4.3.9、查看文件列表</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_10">4.3.10、撤销更新</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_11">4.3.11、删除文件</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_2_12">4.3.12、文件操作小结</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_3">4.4、GIT分支</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_3_0">4.4.1、新建分支与切换分支</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_3_1">4.4.2、查看分支</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_3_2">4.4.3、分支合并</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_3_3">4.4.4、解决冲突</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_3_4">4.4.5、删除分支</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_4">4.5、GitGUI 操作</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_4_0">4.5.1、GitHubfor Desktop</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_4_1">4.5.2、SourceTree</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_4_2">4.5.3、TortoiseGit</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_4_3">4.5.4、Git集成Gui工具</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_5">4.6、IDE集成的Git客户端</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_5_0">4.6.1、Eclipse– Egit</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_5_1">4.6.2、VisualStudio – Git Integration &amp; GitHub Extension</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_3_5_2">4.6.3、IntelliJIDEA</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_3_6">4.7、帮助与代码统计</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label4">五、远程仓库</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_4_0">5.1、托管平台</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_0_0">5.1.1、GitHub</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_0_1">5.1.2、Gitlab</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_0_2">5.1.3、Bitbucket</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_0_3">5.1.4、开源中国代码托管</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_0_4">5.1.5、(推荐)coding.net</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_4_1">5.2、申请帐号与设置</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_1_0">5.2.1、申请帐号</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_1_1">5.2.2、创建项目</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_1_2">5.2.3、提交源代码到远程仓库</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_1_3">5.2.4、Markdown文件（.md文件）</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_4_2">5.3、远程仓库操作</a><ul><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_2_0">5.3.1、常用操作指令</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_2_1">5.3.2、gitclone 克隆</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_2_2">5.3.3、gitremote</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_2_3">5.3.4、gitfetch</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_2_4">5.3.5、gitpull</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label3_4_2_5">5.3.6、gitpush</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_4_3">5.4、在命令行中同步本地仓库示例</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_lab2_4_4">5.5、IDEA中Git的使用</a></li></ul></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label5">六、作业与评分标准</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label6">七、资源与资料下载</a></li><li><ahref="https://www.cnblogs.com/best/p/7474442.html#_label7">八、视频</a></li></ul><h1 id="一版本控制概要-工作区-暂存区-本地仓库-远程仓库">一、版本控制概要工作区 暂存区 本地仓库 远程仓库</h1><h2 id="什么是版本控制">1.1、什么是版本控制</h2><p>版本控制（Revisioncontrol）是一种在开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看更改历史记录，备份以便恢复以前的版本的软件工程技术。</p><ul><li>实现跨区域多人协同开发</li><li>追踪和记载一个或者多个文件的历史记录</li><li>组织和保护你的源代码和文档</li><li>统计工作量</li><li>并行开发、提高开发效率</li><li>跟踪记录整个软件的开发过程</li><li>减轻开发人员的负担，节省时间，同时降低人为错误</li></ul><p>简单说就是用于管理多人协同开发项目的技术。</p><p>没有进行版本控制或者版本控制本身缺乏正确的流程管理，在软件开发过程中将会引入很多问题，如软件代码的一致性、软件内容的冗余、软件过程的事物性、软件开发过程中的并发性、软件源代码的安全性，以及软件的整合等问题。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180916182707546-1204473891.png" /></p><h2 id="常用术语">1.2、常用术语</h2><p><strong>1)、仓库（Repository）</strong><br />受版本控制的所有文件修订历史的共享数据库</p><p><strong>2)、工作空间（Workspace)</strong><br />本地硬盘或Unix 用户帐户上编辑的文件副本</p><p><strong>3)、工作树/区（Working tree）</strong><br />工作区中包含了仓库的工作文件。您可以修改的内容和提交更改作为新的提交到仓库。</p><p><strong>4)、暂存区（Staging area）</strong><br />暂存区是工作区用来提交更改（commit）前可以暂存工作区的变化。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904202237913-177051853.png" /></p><p><strong>5)、索引（Index）</strong><br />索引是暂存区的另一种术语。</p><p><strong>6)、签入（Checkin）</strong><br />将新版本复制回仓库</p><p><strong>7)、签出（Checkout）</strong><br />从仓库中将文件的最新修订版本复制到工作空间</p><p><strong>8)、提交（Commit）</strong><br />对各自文件的工作副本做了更改，并将这些更改提交到仓库</p><p><strong>9)、冲突（Conflict）</strong><br />多人对同一文件的工作副本进行更改，并将这些更改提交到仓库</p><p><strong>10)、合并（Merge）</strong><br />将某分支上的更改联接到此主干或同为主干的另一个分支</p><p><strong>11)、分支（Branch）</strong><br />从主线上分离开的副本，默认分支叫master</p><p><strong>12)、锁（Lock）</strong><br />获得修改文件的专有权限。</p><p><strong>13)、头（HEAD）</strong><br />头是一个象征性的参考，最常用以指向当前选择的分支。</p><p><strong>14)、修订（Revision）</strong><br />表示代码的一个版本状态。Git通过用SHA1hash算法表示的ID来标识不同的版本。</p><p><strong>15)、标记（Tags）</strong><br />标记指的是某个分支某个特定时间点的状态。通过标记，可以很方便的切换到标记时的状态。</p><h2 id="常见的版本控制器">1.3、常见的版本控制器</h2><p>主流的版本控制器有如下这些：</p><ul><li><strong>Git</strong></li><li><strong>SVN</strong>（Subversion）</li><li><strong>CVS</strong>（Concurrent Versions System）</li><li><strong>VSS</strong>（Micorosoft Visual SourceSafe）</li><li><strong>TFS</strong>（Team Foundation Server）</li><li>Visual Studio Online</li></ul><p>版本控制产品非常的多（Perforce、Rational ClearCase、RCS（GNU RevisionControl System）、SerenaDimention、SVK、BitKeeper、Monotone、Bazaar、Mercurial、SourceGearVault），现在影响力最大且使用最广泛的是Git与SVN</p><h2 id="版本控制分类">1.4、版本控制分类</h2><h3 id="本地版本控制"><strong>1.4.1、本地版本控制</strong></h3><p>记录文件每次的更新，可以对每个版本做一个快照，或是记录补丁文件，适合个人用，如RCS。</p><p><imgsrc="https://images0.cnblogs.com/blog/168097/201308/05163110-c8a48b29015245b78dc0127429ef5213.png" /></p><h3 id="集中版本控制"><strong>1.4.2、集中版本控制</strong></h3><p>所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904213634085-673206677.png" /></p><p>所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不连网的话，用户就看不到历史版本，也无法切换版本验证问题，或在不同分支工作。而且，所有数据都保存在单一的服务器上，有很大的风险这个服务器会损坏，这样就会丢失所有的数据，当然可以定期备份。代表产品：SVN、CVS、VSS</p><h3 id="分布式版本控制">1.4.3、分布式版本控制</h3><p>所有版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有版本历史，可以离线在本地提交，只需在连网时push到相应的服务器或其他用户那里。由于每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904214244944-1222535795.png" /></p><h2 id="git与svn最主要区别">1.5、Git与SVN最主要区别</h2><p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而工作的时候，用的都是自己的电脑，所以首先要从中央服务器得到最新的版本，然后工作，完成工作后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，对网络带宽要求较高。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904215630788-377479009.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904215806085-1977930707.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904215943554-1806020988.png" /></p><p>Git是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网了，因为版本都在自己电脑上。协同的方法是这样的：比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。</p><h1 id="二git安装与配置">二、Git安装与配置</h1><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904222351757-505218464.png" /></p><h2 id="什么是git">2.1、什么是Git</h2><p>Git是目前世界上最先进的分布式版本控制系统。</p><p>Git是免费、开源的</p><p>最初Git是为辅助 Linux 内核开发的，来替代 BitKeeper</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904223054569-1226906652.png" /></p><p><strong>作者</strong>：Linux和Git之父李纳斯·托沃兹（Linus BenedicTorvalds）1969、芬兰</p><p><strong>优点：</strong></p><ul><li>适合分布式开发，强调个体。</li><li>公共服务器压力和数据量都不会太大。</li><li>速度快、灵活。</li><li>任意两个开发者之间可以很容易的解决冲突。</li><li>离线工作。</li></ul><p><strong>缺点：</strong></p><ul><li>模式上比SVN更加复杂。</li><li>不符合常规思维。</li><li>代码保密性差，一旦开发者把整个库克隆下来就可以完全公开所有代码和版本信息。</li></ul><p><strong>官网</strong>： <ahref="https://git-scm.com/">https://git-scm.com/</a></p><p><strong>源码：</strong> <ahref="https://github.com/git/git/">https://github.com/git/git/</a></p><h2 id="搭建git工作环境">2.2、搭建Git工作环境</h2><h3 id="下载git">2.2.1、下载Git</h3><p>打开 <ahref="https://git-scm.com/">git官网</a>，下载git对应操作系统的版本。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904224935226-646404598.png" /></p><p>选择版本：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904225056351-1443818096.png" /></p><p>这里我选择下载<strong><ahref="https://github.com/git-for-windows/git/releases/download/v2.14.1.windows.1/Git-2.14.1-64-bit.exe">64-bitGit for Windows Setup</a></strong></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904225407569-334038713.png" /></p><h3 id="安装git"><strong>2.2.2、安装Git</strong></h3><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904225914054-2025747538.png" /></p><p>选择安装配置信息</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904225939491-904441630.png" /></p><p>一直Next默认就好了，如果需要设置就要仔细读一下安装界面上的选项。</p><h3 id="启动git">2.2.3、启动Git</h3><p>安装成功后在开始菜单中会有Git项，菜单下有3个程序：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904230524616-939776409.png" /></p><p><strong>GitBash：</strong>Unix与Linux风格的命令行，使用最多，推荐最多</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904230713476-944403758.png" /></p><p>与DOS风格的命令有些区别，不习惯可以选择Git CMD</p><p><strong>Git CMD：</strong>Windows风格的命令行</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904230927897-26895067.png" /></p><p><strong>GitGUI</strong>：图形界面的Git，不建议初学者使用，尽量先熟悉常用命令</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170904231104460-2046803495.png" /></p><p>点击Create New Repository可以直接创建一个新的仓库。</p><h3 id="linux与mac-os安装git">2.2.4、Linux与Mac OS安装Git</h3><p>Linux安装Git：sudo apt-get install git 命令行就可以安装了。</p><p>Mac OS安装Git： <ahref="https://git-scm.com/download/mac">https://git-scm.com/download/mac</a>，下载双击.pkg安装</p><h3 id="bash基本操作命令">2.2.5、Bash基本操作命令</h3><p>~就是home</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154202435-52586183.png" /></p><p>进入Bash默认位置，注意标题栏</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154225870-1917375331.png" /></p><p>1）、cd : 改变目录。</p><p>　　cd ~ 回Home（windows是当前用户所在目录）</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154324409-306328267.png" /></p><p>2）、cd . . 回退到上一个目录，直接cd进入默认目录</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919160233082-1412129938.png" /></p><p>3）、pwd : 显示当前所在的目录路径。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154416679-1310518200.png" /></p><p>4）、ls(ll):都是列出当前目录中的所有文件，只不过ll(两个ll)列出的内容更为详细。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919160328270-648989596.png" /></p><p>5）、touch : 新建一个文件 如 touch index.js就会在当前目录下新建一个index.js文件。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919155055507-12757213.png" /></p><p>6）、rm: 删除一个文件, rm index.js 就会把index.js文件删除。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919155231636-215916688.png" /></p><p>7）、mkdir: 新建一个目录,就是新建一个文件夹。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154553575-134187339.png" /></p><p>8）、rm -r : 删除一个文件夹, rm -r src 删除src目录，好像不能用通配符。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919160430268-551577385.png" /></p><p>9）、mv 移动文件, mv index.html src index.html 是我们要移动的文件,src 是目标文件夹,当然, 这样写,必须保证文件和目标文件夹在同一目录下。</p><p>10）、reset 重新初始化终端/清屏。</p><p>11）、clear 清屏。</p><p>12）、history 查看命令历史。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919155347185-500520690.png" /></p><p>13）、help 帮助。</p><p>14）、exit 退出。</p><p>15）、#表示注释</p><p>16）、输出与注释</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154720082-675925069.png" /></p><p>17）、创建文件</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>小于号：命令默认从键盘获得的输入，改成从文件，或者其它打开文件以及设备输入</p><blockquote><blockquote><p>是追加内容</p></blockquote></blockquote><blockquote><p>是覆盖原有内容</p></blockquote><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919154949137-950612185.png" /></p><p> 18、显示文件内容 cat</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180919160635784-744444602.png" /></p><h2 id="git配置---git-config">2.3、Git配置 - git config</h2><h3 id="查看配置---git-config--l">2.3.1、查看配置 - git config -l</h3><p>使用git config -l 可以查看现在的git环境详细配置</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905111941679-369062685.png" /></p><p>查看不同级别的配置文件：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#查看系统config git config --system --list 　　#查看当前用户（global）配置 git config --global --list</p><p>#查看当前仓库配置信息 git config --local --list</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><h3 id="git配置文件分类">2.3.2、Git配置文件分类</h3><p>在Windows系统中，Git在<spanclass="math inline">\(HOME目录中查找.gitconfig文件（一般位于C:\\Documentsand Settings\)</span>USER下）</p><p><strong>Git相关的配置文件有三个：</strong></p><p>1）、/etc/gitconfig：包含了适用于系统所有用户和所有项目的值。(Win：C:\ProgramFiles\Git\mingw64\etc\gitconfig) --system 系统级</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905155620835-541203307.png" /></p><p>2）、~/.gitconfig：只适用于当前登录用户的配置。(Win：C:\Users\Administrator\.gitconfig) --global 全局</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905112611116-974195699.png" /></p><p>3）、位于git项目目录中的.git/config：适用于特定git项目的配置。(Win：C:\gitProject) --local当前项目</p><p>注意：对于同一配置项，三个配置文件的优先级是1&lt;2&lt;3</p><p>这里可以直接编辑配置文件，通过命令设置后会响应到这里。</p><h3id="设置用户名与邮箱用户标识必要">2.3.3、设置用户名与邮箱（用户标识，必要）</h3><p>当你安装Git后首先要做的事情是设置你的用户名称和e-mail地址。这是非常重要的，因为每次Git提交都会使用该信息。它被永远的嵌入到了你的提交中：</p><p>　　$ git config --global user.name <strong>"zhangguo"</strong> #名称　　$ git config --global user.email zhangguo@qq.com #邮箱</p><p>只需要做一次这个设置，如果你传递了--global 选项，因为Git将总是会使用该信息来处理你在系统中所做的一切操作。如果你希望在一个特定的项目中使用不同的名称或e-mail地址，你可以在该项目中运行该命令而不要--global选项。 总之--global为全局配置，不加为某个项目的特定配置。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905135629991-890437951.png" /></p><h3 id="添加或删除配置项">2.3.4、添加或删除配置项</h3><p><strong>1）、添加配置项</strong></p><p>git config [--local--global--system] section.key value[--local--global--system]#可选的，对应本地，全局，系统不同级别的设置，请看2.3.2 section.key#区域下的键 value #对应的值</p><p>--local 项目级</p><p>--global 当前用户级</p><p>--system 系统级 </p><p>例如我们要在student区域下添加一个名称为height值为198的配置项，执行结果如下：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905160142351-561831872.png" /></p><p><strong>2）、删除配置项</strong></p><p>git config [--local--global--system] --unset section.key</p><p> 将系统级的height配置项移除</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905161225726-295254907.png" /></p><h3 id="更多配置项">2.3.5、更多配置项</h3><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>git config --global color.ui true #打开所有的默认终端着色 git config--global alias.ci commit #别名 ci 是commit的别名 [alias]<br />co = checkout<br />ci = commit<br />st = status<br />pl = pull<br />ps = push<br />dt = difftool<br />l = log --stat<br />cp = cherry-pick<br />ca = commit -a<br />b = branch</p><p>user.name #用户名 user.email #邮箱 core.editor #文本编辑器<br />merge.tool #差异分析工具<br />core.paper <strong>"less -N"</strong> #配置显示方式<br />color.diff true #diff颜色配置<br />alias.co checkout #设置别名 git config user.name #获得用户名 git configcore.filemode false #忽略修改权限的文件</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>所有config命令参数</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>语法: git config [<options>]</p><p>文件位置<br />--global #use global config file 使用全局配置文件 --system #use systemconfig file 使用系统配置文件 --local #use repository config file使用存储库配置文件 -f, --file <file> #use given config file使用给定的配置文件 --blob <blob-id> #read config from given blob object从给定的对象中读取配置</p><p>动作<br />--get #get value: name [value-regex] 获得值：[值]名[正则表达式]--get-all #get all values: key [value-regex]获得所有值：[值]名[正则表达式] --get-regexp #get values for regexp:name-regex [value-regex] 得到的值根据正则 --get-urlmatch #get valuespecific for the URL: section[.var] URL 为URL获取特定的值 --replace-all#replace all matching variables: name value [value_regex]替换所有匹配的变量：名称值[ value_regex ] --add #add a new variable:name value 添加一个新变量：name值 --unset #remove a variable: name[value-regex] 删除一个变量名[值]：正则表达式 --unset-all #remove allmatches: name [value-regex] 删除所有匹配的正则表达式：名称[值]--rename-section #rename section: old-name new-name 重命名部分：旧名称新名称 --remove-section #remove a section: name 删除部分：名称 -l,--list #list all 列出所有 -e, --edit #open an editor 打开一个编辑器--get-color #find the color configured: slot [default]找到配置的颜色：插槽[默认] --get-colorbool #find the color setting: slot[stdout-is-tty] 发现颜色设置：槽[ stdout是TTY ]</p><p>类型<br />--bool #value is "true" or "false" 值是“真”或“假”。 --int #value isdecimal number 值是十进制数。 --bool-or-int #value is --bool or --int值--布尔或int --path #value is a path (file or directory name)值是路径（文件或目录名）</p><p>其它<br />-z, --null #terminate values with NUL byte 终止值与null字节 --name-only#show variable names only 只显示变量名 --includes #respect includedirectives on lookup 尊重包括查找指令 --show-origin #show origin ofconfig (file, standard input, blob, command line)显示配置（文件、标准输入、数据块、命令行）的来源</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><h1 id="三git理论基础">三、Git理论基础</h1><h2 id="工作区域">3.1、工作区域</h2><p>Git本地有三个工作区域：工作目录（WorkingDirectory）、暂存区(Stage/Index)、资源库(Repository或GitDirectory)。如果在加上远程的git仓库(RemoteDirectory)就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905201017069-171460014.png" /></p><ul><li>Workspace：工作区，就是你平时存放项目代码的地方</li><li>Index /Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息</li><li>Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本</li><li>Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换</li></ul><p>本地的三个区域确切的说应该是git仓库中HEAD指向的版本</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906230652788-1835188684.png" /></p><ul><li>Directory：使用Git管理的一个目录，也就是一个仓库，包含我们的工作空间和Git的管理空间。</li><li>WorkSpace：需要通过Git进行版本控制的目录和文件，这些目录和文件组成了工作空间。</li><li>.git：存放Git管理信息的目录，初始化仓库的时候自动创建。</li><li>Index/Stage：暂存区，或者叫待提交更新区，在提交进入repo之前，我们可以把所有的更新放在暂存区。</li><li>LocalRepo：本地仓库，一个存放在本地的版本库；HEAD会只是当前的开发分支（branch）。</li><li>Stash：隐藏，是一个工作状态保存栈，用于保存/恢复WorkSpace中的临时状态。</li></ul><h2 id="工作流程">3.2、工作流程</h2><p>git的工作流程一般是这样的：</p><p>１、在工作目录中添加、修改文件；</p><p>２、将需要进行版本管理的文件放入暂存区域；</p><p>３、将暂存区域的文件提交到git仓库。</p><p>因此，git管理的文件有三种状态：已修改（modified）,已暂存（staged）,已提交(committed)</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905201033647-1915833066.png" /></p><h2 id="图解教程">3.3、图解教程</h2><p>个人认为Git的原理相比别的版本控制器还是复杂一些的，有一份图解教程比较直观：</p><p><ahref="https://github.com/MarkLodato/visual-git-guide">图解教程英文原版</a></p><p><ahref="http://www.cnblogs.com/yaozhongxiao/p/3811130.html">图解教程中文版</a></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170914100820891-2098204183.png" /></p><h1 id="四git操作">四、Git操作</h1><h2 id="创建工作目录与常用指令">4.1、创建工作目录与常用指令</h2><p>工作目录（WorkSpace)一般就是你希望Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，建议不要有中文。</p><p>日常使用只要记住下图6个命令：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905212837976-775285128.png" /></p><h2 id="获得git仓库">4.2、获得GIT仓库</h2><p>创建本地仓库的方法有两种：一种是创建全新的仓库，另一种是克隆远程仓库。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905214339226-738603749.png" /></p><h3 id="创建全新仓库">4.2.1、创建全新仓库</h3><p>需要用GIT管理的项目的根目录执行：</p><p># 在当前目录新建一个Git代码库 $ git init</p><p><strong>执行：</strong></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905215656866-1398401674.png" /></p><p><strong>结果：</strong></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905215735366-1289732483.png" /></p><p>执行后可以看到，仅仅在项目目录多出了一个.git目录，关于版本等的所有信息都在这个目录里面。</p><p>当然如果使用如下命令，可以把创建目录与仓库一起完成：</p><p># 新建一个目录，将其初始化为Git代码库 $ git init [project-name]</p><p> 执行命令与运行结果：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905220337507-804117637.png" /></p><h3 id="克隆远程仓库">4.2.2、克隆远程仓库</h3><p> 另一种方式是克隆远程目录，由于是将远程服务器上的仓库完全镜像一份至本地，而不是取某一个特定版本，所以用clone而不是checkout，语法格式如下：</p><p># 克隆一个项目和它的整个代码历史(版本信息) $ git clone [url]</p><p><strong>执行：</strong></p><p>比如我们要从克隆的远程仓库托管在github上，地址为：https://github.com/zhangguo5/SuperPlus.git，这是一个公开的项目</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905221014272-913470815.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905221312116-63802822.png" /></p><p><strong>结果：</strong></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905221458694-121760087.png" /></p><h2 id="git文件操作">4.3、GIT文件操作</h2><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。GIT不关心文件两个版本之间的具体差别，而是关心文件的整体是否有改变，若文件被改变，在添加提交时就生成文件新版本的快照，而判断文件整体是否改变的方法就是用SHA-1算法计算文件的校验和。</p><h3 id="文件4种状态">4.3.1、文件4种状态</h3><p><imgsrc="https://git-scm.com/book/en/v2/book/02-git-basics/images/lifecycle.png" /></p><ul><li><strong>Untracked</strong>: 未跟踪, 此文件在文件夹中,但并没有加入到git库,不参与版本控制. 通过<code>git add</code> 状态变为<code>Staged</code>.</li><li><strong>Unmodify</strong>: 文件已经入库, 未修改,即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处,如果它被修改, 而变为<code>Modified</code>.如果使用<code>git rm</code>移出版本库,则成为<code>Untracked</code>文件</li><li><strong>Modified</strong>: 文件已修改, 仅仅是修改,并没有进行其他的操作.这个文件也有两个去处, 通过<code>git add</code>可进入暂存<code>staged</code>状态,使用<code>git checkout</code> 则丢弃修改过,返回到<code>unmodify</code>状态,这个<code>git checkout</code>即从库中取出文件, 覆盖当前修改</li><li><strong>Staged</strong>:暂存状态. 执行<code>git commit</code>则将修改同步到库中,这时库中的文件和本地文件又变为一致, 文件为<code>Unmodify</code>状态.执行<code>git reset HEAD filename</code>取消暂存,文件状态为<code>Modified</code></li></ul><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170909091456335-1787774607.jpg" /></p><h3 id="查看文件状态">4.3.2、查看文件状态</h3><p>上面说文件有4种状态，通过如下命令可以查看到文件的状态：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#查看指定文件状态 git status [filename]</p><p>#查看所有文件状态 git status</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>命令：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905225929726-953984446.png" /></p><p>结果：</p><p>foo.htm文件的状态为untracked（未跟踪），提示通过git add可以暂存</p><p>GIT在这一点做得很好，在输出每个文件状态的同时还说明了怎么操作，像上图就有怎么暂存、怎么跟踪文件、怎么取消暂存的说明。</p><h3 id="添加文件与目录">4.3.3、添加文件与目录</h3><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905231716304-244902919.png" /></p><p>工作区（Working Directory）就是你在电脑里能看到的目录。</p><p>版本库（Repository）工作区有一个隐藏目录<code>.git</code>，这个不算工作区，而是Git的版本库。</p><p>Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支<code>master</code>，以及指向<code>master</code>的一个指针叫<code>HEAD</code>。</p><p>将untracked状态的文件添加到暂存区，语法格式如下：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p># 添加指定文件到暂存区 $ git add [file1] [file2] ...</p><h1id="添加指定目录到暂存区包括子目录">添加指定目录到暂存区，包括子目录</h1><p>$ git add [dir]</p><h1id="添加当前目录的所有文件到暂存区">添加当前目录的所有文件到暂存区</h1><p>$ git add .</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>执行：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905230902819-1267851128.png" /></p><h3 id="移除文件与目录撤销add">4.3.4、移除文件与目录（撤销add）</h3><p><imgsrc="https://images0.cnblogs.com/blog/99928/201411/201751509379751.png" /></p><p>当执行如下命令时，会直接从暂存区删除文件，工作区则不做出改变</p><p>#直接从暂存区删除文件，工作区则不做出改变 git rm --cached <file></p><p>执行命令</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905234240804-1332106185.png" /></p><p>通过重写目录树移除add文件：</p><p>#如果已经用add 命令把文件加入stage了，就先需要从stage中撤销 git resetHEAD <file>...</p><p>当执行 “git reset HEAD” 命令时，暂存区的目录树会被重写，被 master分支指向的目录树所替换，但是工作区不受影响。</p><p>示例：把f1.txt文件从暂存区撤回工作区</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906214833804-177821547.png" /></p><p>移除所有未跟踪文件</p><p>#移除所有未跟踪文件#一般会加上参数-df，-d表示包含目录，-f表示强制清除。 git clean[options]</p><p>示例：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906151958444-1958472278.png" /></p><p>移除前：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906152037054-939716292.png" /></p><p>执行移除：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906152107147-393725026.png" /></p><p>移除后：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906152135616-1007222940.png" /></p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#只从stage中删除，保留物理文件 git rm --cached readme.txt</p><p>#不但从stage中删除，同时删除物理文件 git rm readme.txt</p><p>#把a.txt改名为b.txt git mv a.txt b.txt</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>当执行提交操作（gitcommit）时，暂存区的目录树写到版本库（对象库）中，master分支会做相应的更新。即 master 指向的目录树就是提交时暂存区的目录树。</p><p>当执行 “git reset HEAD” 命令时，暂存区的目录树会被重写，被 master分支指向的目录树所替换，但是工作区不受影响。</p><p>当执行 “git rm –cached <file>”命令时，会直接从暂存区删除文件，工作区则不做出改变。</p><p>当执行 “git checkout .” 或者 “git checkout — <file>”命令时，会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动。</p><p>当执行 “git checkout HEAD .” 或者 “git checkout HEAD <file>”命令时，会用 HEAD 指向的 master分支中的全部或者部分文件替换暂存区和以及工作区中的文件。这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。</p><h3 id="查看文件修改后的差异">4.3.5、查看文件修改后的差异</h3><p>git diff用于显示WorkSpace中的文件和暂存区文件的差异</p><p>用"gitstatus"只能查看对哪些文件做了改动，如果要看改动了什么，可以用：</p><p>#查看文件修改后的差异 git diff [files]</p><p>命令：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906141531554-463319760.png" /></p><p> ---a表示修改之前的文件，+++b表示修改后的文件</p><p>#比较暂存区的文件与之前已经提交过的文件 git diff --cached</p><p>也可以把WorkSpace中的状态和repo中的状态进行diff，命令如下:</p><p>#比较repo与工作空间中的文件差异 git diff HEAD~n</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170914095506203-2063795525.png" /></p><h3 id="签出"><strong>4.3.6、签出</strong></h3><p>如果仓库中已经存在文件f4.txt，在工作区中对f4修改了，如果想撤销可以使用checkout，签出覆盖</p><p>检出命令gitcheckout是git最常用的命令之一，同时也是一个很危险的命令，因为这条命令会重写工作区</p><p>语法：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#用法一 git checkout [-q] [<commit>] [--] <paths>... #用法二 gitcheckout [<branch>] #用法三 git checkout [-m] [[-b]--orphan]&lt;new_branch&gt;] [&lt;start_point&gt;]</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p><commit>是可选项，如果省略则相当于从暂存区（index）进行检出</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906224842804-513302659.png" /></p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>$ git checkout branch#检出branch分支。要完成图中的三个步骤，更新HEAD以指向branch分支，以及用branch指向的树更新暂存区和工作区。</p><p>$ git checkout #汇总显示工作区、暂存区与HEAD的差异。</p><p>$ git checkout HEAD #同上</p><p>$ git checkout -- filename#用暂存区中filename文件来覆盖工作区中的filename文件。相当于取消自上次执行gitadd filename以来（如果执行过）的本地修改。</p><p>$ git checkout branch -- filename#维持HEAD的指向不变。用branch所指向的提交中filename替换暂存区和工作区中相应的文件。注意会将暂存区和工作区中的filename文件直接覆盖。</p><p>$ git checkout -- . 或写作 git checkout . #注意git checkout命令后的参数为一个点（“.”）。这条命令最危险！会取消所有本地的#修改（相对于暂存区）。相当于用暂存区的所有文件直接覆盖本地文件，不给用户任何确认的机会！</p><p>$ git checkout commit_id -- file_name #如果不加commit_id，那么gitcheckout -- file_name 表示恢复文件到本地版本库中最新的状态。</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>示例： </p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906223105851-2141952910.png" /></p><h3 id="忽略文件">4.3.6、忽略文件</h3><p>有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p><p>在主目录下建立".gitignore"文件，此文件有如下规则：</p><ol type="1"><li>忽略文件中的空行或以井号（#）开始的行将会被忽略。</li><li>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,...}）代表可选的字符串等。</li><li>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</li><li>如果名称的最前面是一个路径分隔符（/），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</li><li>如果名称的最后面是一个路径分隔符（/），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</li></ol><p>如：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#为注释 *.txt #忽略所有 .txt结尾的文件 !lib.txt #但lib.txt除外 /temp#仅忽略项目根目录下的TODO文件,不包括其它目录temp build/#忽略build/目录下的所有文件 doc/*.txt #会忽略 doc/notes.txt 但不包括doc/server/arch.txt</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p><ahref="http://www.cnblogs.com/kevingrace/p/5690241.html">更多规则请点这里</a></p><p>示例：</p><p>创建一个.gitignore文件忽视所有的日志文件</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906150554460-1028534587.png" /></p><p>查看状态：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906150711069-480648048.png" /></p><p>从上图中可以看出2个日志文件并没有添加到暂存区，直接被忽视了。</p><p>针对各种语言与项目的Git忽视文件： <ahref="https://github.com/kaedei/gitignore">https://github.com/kaedei/gitignore</a>   <ahref="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p><p>通用的java忽视文件：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p># Compiled class file *.class</p><h1 id="log-file">Log file</h1><p>*.log</p><h1 id="bluej-files">BlueJ files</h1><p>*.ctxt</p><h1 id="mobile-tools-for-java-j2me">Mobile Tools for Java (J2ME)</h1><p>.mtj.tmp/</p><h1 id="package-files">Package Files</h1><p>*.jar *.war *.ear *.zip *.tar.gz *.rar</p><h1id="virtual-machine-crash-logs-see-httpwww.java.comendownloadhelperror_hotspot.xml">virtualmachine crash logs, seehttp://www.java.com/en/download/help/error_hotspot.xml</h1><p>hs_err_pid*</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>通用的Visual Studio开发项目忽视文件：<imgsrc="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /> ViewCode</p><p>idea忽视文件：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>.idea/ *.iml out/ gen/ idea-gitignore.jar resources/templates.listresources/gitignore/* build/ build.properties junit*.propertiesIgnoreLexer.java~ .gradle</p><p>/verification</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><h3 id="提交">4.3.7、提交</h3><p>通过add只是将文件或目录添加到了index暂存区，使用commit可以实现将暂存区的文件提交到本地仓库。</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p># 提交暂存区到仓库区 $ git commit -m [message]</p><h1 id="提交暂存区的指定文件到仓库区">提交暂存区的指定文件到仓库区</h1><p>$ git commit [file1] [file2] ... -m [message]</p><h1id="提交工作区自上次commit之后的变化直接到仓库区跳过了add对新文件无效">提交工作区自上次commit之后的变化，直接到仓库区，跳过了add,对新文件无效</h1><p>$ git commit -a</p><h1 id="提交时显示所有diff信息">提交时显示所有diff信息</h1><p>$ git commit -v</p><h1id="使用一次新的commit替代上一次提交">使用一次新的commit，替代上一次提交</h1><h1id="如果代码没有任何新变化则用来改写上一次commit的提交信息">如果代码没有任何新变化，则用来改写上一次commit的提交信息</h1><p>$ git commit --amend -m [message]</p><h1id="重做上一次commit并包括指定文件的新变化">重做上一次commit，并包括指定文件的新变化</h1><p>$ git commit --amend [file1] [file2] ...</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>示例：</p><p>提交前的状态</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906153238929-20184387.png" /></p><p>提交：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906153319819-191287492.png" /></p><p>提交后的状态：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906153352694-1534298704.png" /></p><p>从上图中可以看出暂存区中没有了bar.htm</p><p><strong>修订提交</strong></p><p>如果我们提交过后发现有个文件改错了，或者只是想修改提交说明，这时可以对相应文件做出修改，将修改过的文件通过"gitadd"添加到暂存区，然后执行以下命令：</p><p>#修订提交 git commit --amend</p><p><strong>撤销提交（commit）</strong></p><p>原理就是放弃工作区和index的改动，同时HEAD指针指向前一个commit对象</p><p>#撤销上一次的提交 git reset --hard HEAD~1</p><p> 要通过git log查看提交日志，也可直接指定提交编号或序号</p><p>示例：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906215817304-744932869.png" /></p><p>撤销提交<br />git revert <commit-id><br />这条命令会把指定的提交的所有修改回滚，并同时生成一个新的提交。</p><h3 id="日志与历史">4.3.8、日志与历史</h3><p>查看提交日志可以使用git log指令，语法格式如下：</p><p>#查看提交日志 git log [<options>] [<revision range>] [[\--]<path>…?]</p><p>示例：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906162101757-272912226.png" /></p><p>"git log--graph"以图形化的方式显示提交历史的关系，这就可以方便地查看提交历史的分支信息，当然是控制台用字符画出来的图形。</p><p>"git log -1"则表示显示1行。</p><p>使用history可以查看您在bash下输入过的指令：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906162304663-1459403979.png" /></p><p>几乎所有输入过的都被记录下来的，不愧是做版本控制的。</p><p><strong>查看所有分支日志</strong></p><p>"gitreflog"中会记录这个仓库中所有的分支的所有更新记录，包括已经撤销的更新。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907101206757-412323808.png" /></p><h3 id="查看文件列表">4.3.9、查看文件列表</h3><p>使用git ls-files指令可以查看指定状态的文件列表，格式如下：</p><p>#查看指定状态的文件 git ls-files [-z] [-t] [-v](--[cacheddeletedothersignoredstageunmergedkilledmodified])*(-[cdoisukm])*</p><p>示例：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906213836397-1160093052.png" /></p><h3 id="撤销更新">4.3.10、撤销更新</h3><p><strong>1）、撤销暂存区更新</strong></p><p>使用"git add"把更新提交到了暂存区。这时"gitstatus"的输出中提示我们可以通过"git reset HEAD<file>..."把暂存区的更新移出到WorkSpace中</p><p>示例：f6已经提交，工作区修改，暂存区修改，撤销</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906233841179-595609603.png" /></p><p><strong>2)、撤销本地仓库更新</strong></p><p>使用git log查看提交日志</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906234944507-1852886113.png" /></p><p>撤销提交有两种方式：<strong>使用HEAD指针</strong>和<strong>使用commitid</strong></p><p>在Git中，有一个HEAD指针指向当前分支中最新的提交。当前版本，我们使用"HEAD<sup>"，那么再钱一个版本可以使用"HEAD"，如果想回退到更早的提交，可以使用"HEAD<sub>n"。（也就是，HEAD^=HEAD</sub>1，HEAD</sup>^=HEAD~2）</p><p>git reset --hard HEAD^ git reset --hard HEAD~1 git reset--59cf9334cf957535cb328f22a1579b84db0911e5</p><p>示例：回退到添加f6</p><p>回退前：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906235156351-597175458.png" /></p><p>回退后：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170906235057710-1820019779.png" /></p><p>现在又想恢复被撤销的提交可用"gitreflog"查看仓库中所有的分支的所有更新记录，包括已经撤销的更新，撤销方法与前面一样。</p><p>git reset --hard HEAD@{7} git reset --hard e0e79d7</p><p>--hard：撤销并删除相应的更新</p><p>--soft：撤销相应的更新，把这些更新的内容放到Stage中</p><h3 id="删除文件">4.3.11、删除文件</h3><p><strong>1）、删除未跟踪文件</strong></p><p>如果文件还是未跟踪状态，直接删除文件就可了，bash中使用rm可以删除文件，示例如下：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907105943507-935637930.png" /></p><p><strong>2）、删除已提交文件</strong></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907110401929-1828626391.png" /></p><p>-f 强制删除，物理删除了，同时删除工作区和暂存区中的文件</p><p><strong>撤销删除：</strong></p><p>#to discard changes in working directory git checkout --<file>...</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907111343257-1372946435.png" /></p><p><strong>3）、删除暂存区的文件，不删除工作区的文件</strong></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907111546679-1645938864.png" /></p><p>使用git reset HEAD <file>...同样可以实现上面的功能</p><h3 id="文件操作小结">4.3.12、文件操作小结</h3><p><imgsrc="https://images0.cnblogs.com/blog/221923/201501/061510341401056.png" /></p><p> Git很强大，很灵活，这是毋庸置疑的。但也正因为它的强大造成了它的复杂，因此会有很多奇奇怪怪的问题出现，多用就好了。</p><h2 id="git分支">4.4、GIT分支</h2><p>分支在GIT中相对较难</p><p>分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习Git的时候，另一个你正在另一个平行宇宙里努力学习SVN。</p><p>如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，结果，你既学会了Git又学会了SVN！</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920210529631-1549374224.png" /></p><p>分支在实际中有什么用呢？假设你准备开发一个新功能，但是需要两周才能完成，第一周你写了50%的代码，如果立刻提交，由于代码还没写完，不完整的代码库会导致别人不能干活了。如果等代码全部写完再一次提交，又存在丢失每天进度的巨大风险。</p><p>现在有了分支，就不用怕了。你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作。</p><p>Git分支的速度非常快。</p><p>截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即master分支。HEAD严格来说不是指向提交，而是指向master，master才是指向提交的，所以，HEAD指向的就是当前分支。</p><p><imgsrc="https://images0.cnblogs.com/blog/168097/201308/20194528-f5bf7e93960148a782f9d72f93a134bc.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170905212648335-1801547172.gif" /></p><figure><imgsrc="https://images0.cnblogs.com/blog/554581/201505/231044049057798.png"alt="特性分支的图示" /><figcaption aria-hidden="true">特性分支的图示</figcaption></figure><p>git分支中常用指令：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p># 列出所有本地分支 $ git branch</p><h1 id="列出所有远程分支">列出所有远程分支</h1><p>$ git branch -r</p><h1 id="列出所有本地分支和远程分支">列出所有本地分支和远程分支</h1><p>$ git branch -a</p><h1id="新建一个分支但依然停留在当前分支">新建一个分支，但依然停留在当前分支</h1><p>$ git branch [branch-name]</p><h1 id="新建一个分支并切换到该分支">新建一个分支，并切换到该分支</h1><p>$ git checkout -b [branch]</p><h1 id="新建一个分支指向指定commit">新建一个分支，指向指定commit</h1><p>$ git branch [branch] [commit]</p><h1id="新建一个分支与指定的远程分支建立追踪关系">新建一个分支，与指定的远程分支建立追踪关系</h1><p>$ git branch --track [branch] [remote-branch]</p><h1 id="切换到指定分支并更新工作区">切换到指定分支，并更新工作区</h1><p>$ git checkout [branch-name]</p><h1 id="切换到上一个分支">切换到上一个分支</h1><p>$ git checkout -</p><h1id="建立追踪关系在现有分支与指定的远程分支之间">建立追踪关系，在现有分支与指定的远程分支之间</h1><p>$ git branch --set-upstream [branch] [remote-branch]</p><h1 id="合并指定分支到当前分支">合并指定分支到当前分支</h1><p>$ git merge [branch]</p><h1id="选择一个commit合并进当前分支">选择一个commit，合并进当前分支</h1><p>$ git cherry-pick [commit]</p><h1 id="删除分支">删除分支</h1><p>$ git branch -d [branch-name]</p><h1 id="删除远程分支">删除远程分支</h1><p>$ git push origin --delete [branch-name] $ git branch -dr[remote/branch]</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><h3 id="新建分支与切换分支">4.4.1、新建分支与切换分支</h3><p>每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即master分支。HEAD严格来说不是指向提交，而是指向master，master才是指向提交的，所以，HEAD指向的就是当前分支。<br />一开始的时候，master分支是一条线，Git用master指向最新的提交，再用HEAD指向master，就能确定当前分支，以及当前分支的提交点：<br /><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920210647291-1528543055.png" /></p><p>每次提交，master分支都会向前移动一步，这样，随着你不断提交，master分支的线也越来越长：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920210256578-751843766.gif" /></p><p>默认分支是这样的，master是主分支</p><figure><imgsrc="https://www.liaoxuefeng.com/files/attachments/0013849087937492135fbf4bbd24dfcbc18349a8a59d36d000/0"alt="git-br-initial" /><figcaption aria-hidden="true">git-br-initial</figcaption></figure><p>1）、新建一个分支，但依然停留在当前分支，使用：$ git branch[branch-name]</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908102319366-860612118.png" /></p><p>切换分支到dev1后的结果：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908110413257-321369438.png" /></p><p><ahref="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000">关于分支廖雪峰解释的比较清楚，我们引用一下</a>。</p><p>当我们创建新的分支，例如<code>dev</code>时，Git新建了一个指针叫<code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上：</p><figure><imgsrc="https://www.liaoxuefeng.com/files/attachments/001384908811773187a597e2d844eefb11f5cf5d56135ca000/0"alt="git-br-create" /><figcaption aria-hidden="true">git-br-create</figcaption></figure><p>你看，Git创建一个分支很快，因为除了增加一个<code>dev</code>指针，改改<code>HEAD</code>的指向，工作区的文件都没有任何变化！</p><p>不过，从现在开始，对工作区的修改和提交就是针对<code>dev</code>分支了，比如新提交一次后，<code>dev</code>指针往前移动一步，而<code>master</code>指针不变：</p><figure><imgsrc="https://www.liaoxuefeng.com/files/attachments/0013849088235627813efe7649b4f008900e5365bb72323000/0"alt="git-br-dev-fd" /><figcaption aria-hidden="true">git-br-dev-fd</figcaption></figure><p>假如我们在<code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。Git怎么合并呢？最简单的方法，就是直接把<code>master</code>指向<code>dev</code>的当前提交，就完成了合并：</p><figure><imgsrc="https://www.liaoxuefeng.com/files/attachments/00138490883510324231a837e5d4aee844d3e4692ba50f5000/0"alt="git-br-ff-merge" /><figcaption aria-hidden="true">git-br-ff-merge</figcaption></figure><p>所以Git合并分支也很快！就改改指针，工作区内容也不变！</p><p>合并完分支后，甚至可以删除<code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，我们就剩下了一条<code>master</code>分支：</p><figure><imgsrc="https://www.liaoxuefeng.com/files/attachments/001384908867187c83ca970bf0f46efa19badad99c40235000/0"alt="git-br-rm" /><figcaption aria-hidden="true">git-br-rm</figcaption></figure><p>动画演示：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920210908347-486995158.gif" /></p><p>2）、切换分支，git branch <name>，如果name为-则为上一个分支</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908132937991-1683911580.png" /></p><p>切换为上一个分支</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908133024413-690367079.png" /></p><p>3）、新建一个分支，并切换到该分支，$ git checkout -b [branch]</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908111024772-643503878.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908111155288-294742108.png" /></p><p>4）、新建一个分支，指向指定commit使用命令：$ git branch [branch][commit]</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908134134241-2117296784.png" /></p><p>上面创建了dev3分支且指向了master中首次提交的位置，切换到dev3查看日志如下：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908134438476-888421004.png" /></p><p>master上本来有两个提交记录的，此时的dev3指向的是第1次提交的位置</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908134547913-960980351.png" /></p><p> 5）、新建一个分支，与指定的远程分支建立追踪关系使用命令：$ gitbranch --track [branch] [remote-branch]</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908160347741-1146762696.png" /></p><h3 id="查看分支">4.4.2、查看分支</h3><p>1）、列出所有本地分支使用$ git branch</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908160532413-665563097.png" /></p><p>2）、列表所有远程分支使用$ git branch -r</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908160625554-32272071.png" /></p><p>3)、列出所有本地分支和远程分支使用$ git branch -a</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908160704413-490309889.png" /></p><h3 id="分支合并">4.4.3、分支合并</h3><p>合并指定分支到当前分支使用指令$ git merge [branch]</p><p>这里的合并分支就是对分支的指针操作，我们先创建一个分支再合并到主分支：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908200941007-525713587.png" /></p><p>这里的file11.txt主分支与dev6的内容现在是不同的，因为在dev6中已被修改过，我们可以使用指令查看：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908201243038-1579475148.png" /></p><p>现在我们将dev6合并到主分支中去，从下图中可以看出dev6中有一次提交，而master并没有</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908201946241-1502411831.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908202307929-640297009.png" /></p><p>合并后在master上查看file11.txt文件内容与dev6上的内容就一样了，合并后dev6中多出的提交在master也拥有了。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908202408257-864175348.png" /></p><h3 id="解决冲突">4.4.4、解决冲突</h3><p>如果同一个文件在合并分支时都被修改了则会引起冲突，如下所示：</p><p>提交前两个分支的状态</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908210135757-25776448.png" /></p><p>在dev6分支中同样修改file11.txt</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908210227741-1265576286.png" /></p><p>dev6与master分支中file11.txt文件都被修改且提交了，现在合并分支</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908210610835-267872418.png" /></p><p>提示冲突，现在我们看看file11.txt在master分支中的状态</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908210749319-1779643226.png" /></p><p>Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容，其中&lt;&lt;&lt;HEAD是指主分支修改的内容，&gt;&gt;&gt;&gt;&gt;dev6是指dev6上修改的内容</p><p>解决的办法是我们可以修改冲突文件后重新提交，请注意当前的状态产masterMERGING：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908211751257-770094797.png" /></p><p>重新提交后冲突解决：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908212011241-1014866334.png" /></p><p>手动解决完冲突后就可以把此文件添 加到索引(index)中去，用gitcommit命令来提交，就像平时修改了一个文件 一样。</p><p>用_git log --graph_命令可以看到分支合并图。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908212534382-1166076106.png" /></p><p><strong>分支策略</strong></p><p>master主分支应该非常稳定，用来发布新版本，一般情况下不允许在上面工作，工作一般情况下在新建的dev分支上工作，工作完后，比如上要发布，或者说dev分支代码稳定后可以合并到主分支master上来。</p><h3 id="删除分支-1">4.4.5、删除分支</h3><p>删除本地分支可以使用命令：$ git branch -d[branch-name]，-D（大写）强制删除</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908213554257-570203049.png" /></p><p>删除远程分支可以使用如下指令：</p><p>$ git push origin --delete [branch-name]</p><p>$ git branch -dr [remote/branch]</p><p>-d表示删除分支。分支必须完全合并在其上游分支，或者在HEAD上没有设置上游</p><p>-r表示远程的意思remotes，如果-dr则表示删除远程分支</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908215310460-364059006.png" /></p><h2 id="git-gui-操作">4.5、Git GUI 操作</h2><p>通过命令行可以深刻的理解Git，GitGUI或IDE插件却可以更加直观操作Git，常用的Git GUI有如下这些：</p><h3 id="github-for-desktop">4.5.1、GitHub for Desktop</h3><p>全球开发人员交友俱乐部提供的强大工具，功能完善，使用方便。对于使用GitHub的开发人员来说是非常便捷的工具。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907140035413-1131037433.png" /></p><p>GitHub forDesktop不带三方合并工具，你必须自己手动解决冲突才可以。</p><p>– 免费<br />– 同时支持 Windows 和Mac：对于需要经常在不同的操作系统间切换的开发人员来说非常方便。<br />– 漂亮的界面：作为每天盯着看的工具，颜值是非常重要的<br />– 支持Pull Request：直接从客户端提交PR，很方便<br />– Timeline 支持：直接在时间线上显示每次提交的时间点和大小<br />– 支持git LFS：存储大文件更加节省空间和高效<br />– 不支持三方合并：需要借助第三方工具才行</p><h3 id="source-tree">4.5.2、Source Tree</h3><p>SourceTree是老牌的Git GUI管理工具了，也号称是最好用的GitGUI工具。强大，功能丰富，基本操作和高级操作都设计得非常流畅，适合初学者上手，支持GitFlow。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907140158757-544911682.png" /></p><p>– 免费<br />– 功能强大：无论你是新手还是重度用户，SourceTree都会让你觉得很顺手。对于非常重度用户，SourceTree还支持自定义脚本的执行。<br />– 同时支持 Windows 和 Mac 操作系统<br />– 同时支持 Git 和 Mercurial 两种 VCS<br />– 内置GitHub, BitBucket 和 Stash的支持：直接绑定帐号即可操作远程repo</p><h3 id="tortoisegit">4.5.3、TortoiseGit</h3><p>小乌龟，SVN的超广泛使用也使得这个超好用的Svn客户端成了几乎每个开发人员的桌面必备软件。小乌龟只提供Windows版本，提供中文版支持的。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907140326304-1891514624.png" /></p><p>– 免费<br />– 只支持Windows操作系统：与文件管理器的良好集成<br />– 中文界面<br />– 与TortoiseSVN一脉相承的操作体验</p><h3 id="git集成gui工具">4.5.4、Git集成Gui工具</h3><p>安装Git时会集成安装Gui工具，在Git菜单下可以找到，特点是：免费、简单、不需要额外安装</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907140832085-1204207971.png" /></p><h2 id="ide集成的git客户端">4.6、IDE集成的Git客户端</h2><p>对于使用IDE进行开发的程序员来说，可以不离开常用的IDE就直接操作源代码管理系统是最好的选择，以下是我对几个常见的IDE集成的git客户端：</p><h3 id="eclipse-egit">4.6.1、Eclipse – Egit</h3><p>作为Java集成开发环境的代表，Eclipse内置了egit这个插件来提供git的集成支持。实话实说，这个插件的功能非常丰富，无论是普通的clone,commit, pull/push操作；还是复杂一些的git flow都有支持。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907160153538-341592917.png" /></p><h3 id="visual-studio-git-integration-github-extension">4.6.2、VisualStudio – Git Integration &amp; GitHub Extension</h3><p>VS里面的Git支持已经相当的完善。直接克隆github上的repo</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907175457757-369811937.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907160233319-365419113.png" /></p><h3 id="intellij-idea">4.6.3、IntelliJ IDEA</h3><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907160932882-1312828188.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907161123257-1702754976.png" /></p><h2 id="帮助与代码统计">4.7、帮助与代码统计</h2><p><strong>1）、帮助文档</strong></p><p>完整的安装了Git后有一个官方帮助，这是最权威的资料，方法如下：</p><p>比如我们要查看git commit的使用</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908220526257-321639384.png" /></p><p>执行时会打开对应的git帮助文档，其实就在本地，当然您也可以去官网在线搜索，地址是： <ahref="https://git-scm.com/docs">https://git-scm.com/docs</a>。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908220755226-1752282117.png" /></p><p><strong>2）、信息查看与统计命令</strong></p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#统计某人的代码提交量，包括增加，删除： git log--author=<strong>"$(git config --get user.name)"</strong>--pretty=tformat: --numstat gawk <strong>'{ add += $1 ; subs += $2 ; loc+= $1 - $2 } END { printf "added lines: %s removed lines : %s totallines: %s\n",add,subs,loc }'</strong> -</p><p>#仓库提交者排名前 5（如果看全部，去掉 head 管道即可）： git log--pretty=<strong>'%aN'</strong> sort uniq -c sort -k1 -n -r head -n5</p><p>#仓库提交者（邮箱）排名前5：这个统计可能不会太准，因为很多人有不同的邮箱，但会使用相同的名字 gitlog --pretty=format:%ae gawk -- <strong>'{ ++c[$0]; } END { for(cc in c)printf "%5d %s\n",c[cc],cc; }'</strong> sort -u -n -r head -n 5</p><p>#贡献者统计： git log --pretty=<strong>'%aN'</strong> sort -u wc-l</p><p>#提交数统计： git log --oneline wc -l</p><h1 id="显示有变更的文件">显示有变更的文件</h1><p>$ git status</p><h1 id="显示当前分支的版本历史">显示当前分支的版本历史</h1><p>$ git log</p><h1id="显示commit历史以及每次commit发生变更的文件">显示commit历史，以及每次commit发生变更的文件</h1><p>$ git log --stat</p><h1 id="搜索提交历史根据关键词">搜索提交历史，根据关键词</h1><p>$ git log -S [keyword]</p><h1id="显示某个commit之后的所有变动每个commit占据一行">显示某个commit之后的所有变动，每个commit占据一行</h1><p>$ git log [tag] HEAD --pretty=format:%s</p><h1id="显示某个commit之后的所有变动其提交说明必须符合搜索条件">显示某个commit之后的所有变动，其"提交说明"必须符合搜索条件</h1><p>$ git log [tag] HEAD --grep feature</p><h1id="显示某个文件的版本历史包括文件改名">显示某个文件的版本历史，包括文件改名</h1><p>$ git log --follow [file] $ git whatchanged [file]</p><h1 id="显示指定文件相关的每一次diff">显示指定文件相关的每一次diff</h1><p>$ git log -p [file]</p><h1 id="显示过去5次提交">显示过去5次提交</h1><p>$ git log -5 --pretty --oneline</p><h1id="显示所有提交过的用户按提交次数排序">显示所有提交过的用户，按提交次数排序</h1><p>$ git shortlog -sn</p><h1id="显示指定文件是什么人在什么时间修改过">显示指定文件是什么人在什么时间修改过</h1><p>$ git blame [file]</p><h1 id="显示暂存区和工作区的差异">显示暂存区和工作区的差异</h1><p>$ git diff</p><h1id="显示暂存区和上一个commit的差异">显示暂存区和上一个commit的差异</h1><p>$ git diff --cached [file]</p><h1id="显示工作区与当前分支最新commit之间的差异">显示工作区与当前分支最新commit之间的差异</h1><p>$ git diff HEAD</p><h1 id="显示两次提交之间的差异">显示两次提交之间的差异</h1><p>$ git diff [first-branch]...[second-branch]</p><h1 id="显示今天你写了多少行代码">显示今天你写了多少行代码</h1><p>$ git diff --shortstat <strong>"@{0 day ago}"</strong></p><h1id="显示某次提交的元数据和内容变化">显示某次提交的元数据和内容变化</h1><p>$ git show [commit]</p><h1 id="显示某次提交发生变化的文件">显示某次提交发生变化的文件</h1><p>$ git show --name-only [commit]</p><h1id="显示某次提交时某个文件的内容">显示某次提交时，某个文件的内容</h1><p>$ git show [commit]:[filename]</p><h1 id="显示当前分支的最近几次提交">显示当前分支的最近几次提交</h1><p>$ git reflog</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>示例：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908221829116-134750466.png" /></p><h1 id="五远程仓库">五、远程仓库</h1><p>Git是分布式版本控制系统，同一个Git仓库，可以分布到不同的机器上，但开发参与者必须在同一个网络中，且必须有一个项目的原始版本，通常的办法是让一台电脑充当服务器的角色，每天24小时开机，其他每个人都从这个“服务器”仓库克隆一份到自己的电脑上，并且各自把各自的提交推送到服务器仓库里，也从服务器仓库中拉取别人的提交。完全可以自己搭建一台运行Git的服务器但现在更适合的做法是使用免费的托管平台。</p><p>同时相较于传统的代码都是管理到本机或者内网。一旦本机或者内网机器出问题，代码可能会丢失，使用远端代码仓库将永远存在一个备份。同时也免去了搭建本地代码版本控制服务的繁琐。云计算时代 Git 以其强大的分支和克隆功能，更加方便了开发者远程协作。</p><h2 id="托管平台">5.1、托管平台</h2><p>Git代码托管平台，首先推荐的是GitHub，好多好的开源项目都来自GitHub，但是GitHub只能新建公开的Git仓库，私有仓库要收费，有时候访问比较卡，如果你做的是一个开源项目，可以首选GitHub。下面推荐几个比较好的Git代码托管平台：</p><h3 id="github"><strong>5.1.1、GitHub</strong></h3><p>关于GItHub相信大家都有耳闻，我就不详细介绍了。GitHub地址： <ahref="https://github.com/">https://github.com/</a>，其首页如图：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907163230647-1553459974.png" /></p><h3 id="gitlab"><strong>5.1.2、Gitlab</strong></h3><p>对于有些人，提到GitHub就会自然的想到Gitlab,Gitlab支持无限的公有项目和私有项目。Gitlab地址： <ahref="https://about.gitlab.com/">https://about.gitlab.com/</a>，其首页截图如图：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908232416038-78562400.png" /></p><h3 id="bitbucket"><strong>5.1.3、Bitbucket</strong></h3><p>bitbucket<strong>免费支持5个开发成员的团队创建无限私有代码托管库</strong>。bitbucket地址：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908232541022-628927929.png" /></p><h3 id="开源中国代码托管"><strong>5.1.4、开源中国代码托管</strong></h3><p>开源中国一个账号最多可以创建1000个项目，包含公有和私有，开源中国代码托管地址： <ahref="https://bitbucket.org/">http://git.oschina.net/</a>，其首页如图：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908231825210-161687220.png" /></p><h3 id="推荐coding.net">5.1.5、(推荐)coding.net</h3><p>谈到coding.net,首先必须提的是速度快，功能与开源中国相似，同样一个账号最多可以创建1000个项目(5个私有)，也支持任务的创建等。coding.net地址： <ahref="https://coding.net/">https://coding.net/</a>：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907163009335-1747153204.png" /></p><p>我个人比较推荐Coding.net、GItHub。</p><p>当然还有许多，如CSDN，百度，阿里等，欢迎大家比较后推荐。</p><p>选择国外的主机请考虑网速，选择国内的主机请考虑稳定与安全性。</p><h2 id="申请帐号与设置">5.2、申请帐号与设置</h2><p>因为coding.net免费，可以创建私有项目，且速度不错，这里我们以coding.net为托管平台完成远程仓库的帐号申请与操作。</p><h3 id="申请帐号">5.2.1、申请帐号</h3><p>1）、打开 <ahref="https://coding.net/">https://coding.net/</a>，点击右上角的注册按钮：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907181140835-1585524305.png" /></p><p> 2)、填写好注册信息通过邮箱或手机验证后注册就成功了。登录到个人首页。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907195449147-1451952853.png" /></p><p>如果是QQ邮箱请注意激活邮件可能会被当着垃圾邮件，到垃圾箱中可以找到。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907195931444-1942096571.png" /></p><h3 id="创建项目">5.2.2、创建项目</h3><p>登录成功后，点击左侧菜单项目，点击加号新建项目，这里创建的是一个公开项目，没有Readme.md、许可证与忽视文件，原因是如果你本地已经有一个项目了，想提交到远程仓库而新创建的3个文件本地没有，当然有办法但初学避免麻烦这里我就不添加这三个文件了，输入相关信息后点击创建就成功了。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907200515007-1400118509.png" /></p><h3 id="提交源代码到远程仓库">5.2.3、提交源代码到远程仓库</h3><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907201134616-522881160.png" /></p><p>从上图可以看出创建地址有两种：</p><p>https 类型的：https://git.coding.net/zhangguoGit/project7.git</p><p>SSH类型的：git@git.coding.net:zhangguoGit/project7.git</p><h4 id="https推荐轻量级用户使用">HTTPS（推荐轻量级用户使用）</h4><p>使用加密的网页访问通道读写仓库，使用用户名及密码进行鉴权。避免重复输入密码，查看 <ahref="https://coding.net/help/faq/git/git.html#push-">怎样在每次 Push时不用重复输入密码</a>？</p><blockquote><p>提示：Git 用户名为 Coding 的账户邮箱或者个性后缀，密码为 Coding的账户密码。<br />注意：HTTPS 方式 push 大文件可能引发错误，查看  <ahref="https://coding.net/help/faq/git/git.html">Push出错怎么办</a>？</p></blockquote><h4id="ssh推荐资深用户或经常推送大型文件用户使用">SSH（推荐资深用户或经常推送大型文件用户使用）</h4><p>SSH全称(SecureSHell)是一种网络协议，顾名思义就是非常安全的shell，主要用于计算机间加密传输。<br />使用加密通道读写仓库，无单次上传限制，需先设置 <ahref="https://coding.net/help/doc/git/ssh-key.html#ssh-">“账户 SSH公钥”</a>，完成配对验证。</p><p>导入仓库可以将已存在的Git项目或SVN项目直接导入。</p><p>在命令行创建项目：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#1、创建目录 mkdir project7</p><p>#2、进入目录 cd project7</p><p>#3、初始化目录为git项目 git init</p><p>#4、创建md文件追加内容# project7(一级标题) echo <strong>"#project7"</strong> &gt;&gt; README.md</p><p>#5、添加说明文件到暂存区 git add README.md</p><p>#6、提交到本地仓库并写日志 git commit -m <strong>"firstcommit"</strong></p><p>#7、添加远程主机，主机名为origin地址为https://git.coding.net/zhangguoGit/project7.git git remote addorigin https://git.coding.net/zhangguoGit/project7.git</p><p>#8、本地的master分支推送到origin主机，同时指定origin为默认主机，后面就可以不加任何参数使用gitpush了，-u 参数指定一个默认主机 git push -u origin master</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>如果创建已经创建则只需要第7步与第8步就好了。</p><h3 id="markdown文件.md文件">5.2.4、Markdown文件（.md文件）</h3><p>Markdown是一种轻量级标记语言,它允许人们“使用易读易写的纯文本格式编写文档,然后转换成有效的XHTML(或者HTML)文档。</p><p>Markdown 语法的目标是：成为一种适用于网络的书写语言。</p><h4 id="标题">1.标题</h4><p><code># 一级标题</code><br /><code>## 二级标题</code><br /><code>### 三级标题</code><br /><code>#### 四级标题</code><br /><code>##### 五级标题</code><br /><code>###### 六级标题</code></p><p class="heading" id="七级标题">七级标题</p><p>效果：</p><p><imgsrc="https://images2015.cnblogs.com/blog/600165/201701/600165-20170121165419890-1445220158.png" /></p><h4 id="列表">2.列表</h4><p>分为有序列表和无序列表。</p><p><strong>有序列表</strong></p><p><code>1. 1</code><br /><code>2. 2</code><br /><code>3. 3</code></p><p><strong>无序列表</strong></p><p><code>* 1</code><br /><code>* 2</code><br /><code>* 3</code></p><h4 id="引用">3.引用</h4><p><code>&gt; 这是引用</code></p><h4 id="图片和链接">4.图片和链接</h4><p>两者格式区别在于“ ! ”。</p><p><code>![图片描述](图片链接)</code></p><p><code>[链接描述](链接地址)</code></p><h4 id="粗体和斜体">5.粗体和斜体</h4><p><code>**这是粗体**</code></p><p><code>*这是斜体*</code></p><h4 id="表格">6.表格</h4><p><code>Tables Are Cool</code><br /><code>------------ :------------: -----:</code><br /><code>col 3 is right-aligned $1600</code><br /><code>col 2 is centered $12</code><br /><code>zebra stripes are neat &amp;1</code></p><h4 id="代码框">7.代码框</h4><p><code>用``这个把代码包裹起来</code></p><h4 id="分割线">8.分割线</h4><p>输入<code>***</code>即可。</p><p>示例：<imgsrc="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /> ViewCode</p><p>对应的HTML:<imgsrc="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /> ViewCode</p><p>结果：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907210054679-1023512249.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907210200163-1550642136.png" /></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907210125585-383098544.png" /></p><p><a href="http://tool.oschina.net/markdown/">在线实时预览</a>工具</p><p><img data-src="https://segmentfault.com/img/bVdcyw" /></p><h2 id="远程仓库操作">5.3、远程仓库操作</h2><p>申请到了Git远程仓库的帐号并创建了一个空的远程仓库现在我们就可以结合本地的仓库与远程仓库一起协同工作了，模拟多人协同开发，这里我们全部使用命令完成。</p><h3 id="常用操作指令">5.3.1、常用操作指令</h3><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p># 下载远程仓库的所有变动 $ git fetch [remote]</p><h1 id="显示所有远程仓库">显示所有远程仓库</h1><p>$ git remote -v</p><h1 id="显示某个远程仓库的信息">显示某个远程仓库的信息</h1><p>$ git remote show [remote]</p><h1 id="增加一个新的远程仓库并命名">增加一个新的远程仓库，并命名</h1><p>$ git remote add [shortname] [url]</p><h1id="取回远程仓库的变化并与本地分支合并">取回远程仓库的变化，并与本地分支合并</h1><p>$ git pull [remote] [branch]</p><h1 id="上传本地指定分支到远程仓库">上传本地指定分支到远程仓库</h1><p>$ git push [remote] [branch]</p><h1id="强行推送当前分支到远程仓库即使有冲突">强行推送当前分支到远程仓库，即使有冲突</h1><p>$ git push [remote] --force</p><h1 id="推送所有分支到远程仓库">推送所有分支到远程仓库</h1><p>$ git push [remote] --all</p><p>#简单查看远程---所有仓库 git remote （只能查看远程仓库的名字）<br />#查看单个仓库 git remote show [remote-branch-name]</p><p>#新建远程仓库 git remote add [branchname] [url]</p><p>#修改远程仓库 git remote rename [oldname] [newname]</p><p>#删除远程仓库 git remote rm [remote-name]</p><p>#获取远程仓库数据 git fetch [remote-name](获取仓库所有更新，但不自动合并当前分支) git pull(获取仓库所有更新，并自动合并到当前分支)</p><p>#上传数据，如git push origin master git push [remote-name][branch]</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><h3 id="git-clone-克隆">5.3.2、git clone 克隆</h3><p>远程操作的第一步，通常是从远程主机克隆一个版本库，这时就要用到<code>git clone</code>命令。</p><p>$ git clone <版本库的网址></p><p>比如，克隆一个上课示例的版本库。</p><p>$ git clonehttps://github.com/zhangguo5/AngularJS04_BookStore.git</p><p>该命令会在本地主机生成一个目录，与远程主机的版本库同名。如果要指定不同的目录名，可以将目录名作为<code>git clone</code>命令的第二个参数。</p><p>$ git clone <版本库的网址> <本地目录名></p><p><code>git clone</code>支持多种协议，除了HTTP(s)以外，还支持SSH、Git、本地文件协议等，下面是一些例子。</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>$ git clone http[s]://example.com/path/to/repo.git/ $ git clonessh://example.com/path/to/repo.git/ $ git clonegit://example.com/path/to/repo.git/ $ git clone /opt/git/project.git $git clone file:///opt/git/project.git $ git cloneftp[s]://example.com/path/to/repo.git/ $ git clonersync://example.com/path/to/repo.git/</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>SSH协议还有另一种写法。</p><p>$ git clone [user@]example.com:path/to/repo.git/</p><p>通常来说，Git协议下载速度最快，SSH协议用于需要用户认证的场合。各种协议优劣的详细讨论请参考 <ahref="http://git-scm.com/book/en/Git-on-the-Server-The-Protocols">官方文档</a>。</p><p>示例：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908222646397-430894497.png" /></p><p>结果：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908222707960-282622883.png" /></p><h3 id="git-remote">5.3.3、git remote</h3><p>为了便于管理，Git要求每个远程主机都必须指定一个主机名。<code>git remote</code>命令就用于管理主机名。</p><p>不带选项的时候，<code>git remote</code>命令列出所有远程主机。</p><p>$ git remote</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908222818397-722213136.png" /></p><p>使用<code>-v</code>选项，可以参看远程主机的网址。</p><p>$ git remote -v</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908222926897-216628652.png" /></p><p>上面命令表示，当前只有一台远程主机，叫做origin，以及它的网址。</p><p>克隆版本库的时候，所使用的远程主机自动被Git命名为<code>origin</code>。如果想用其他的主机名，需要用<code>git clone</code>命令的<code>-o</code>选项指定。</p><p>$ git clone -o WeUI https://github.com/Tencent/weui.git $ gitremote</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908223611616-773447420.png" /></p><p>上面命令表示，克隆的时候，指定远程主机叫做WeUI。</p><p><code>git remote show</code>命令加上主机名，可以查看该主机的详细信息。</p><p>$ git remote show <主机名></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908223918257-1858209596.png" /></p><p><code>git remote add</code>命令用于添加远程主机。</p><p>$ git remote add <主机名> <网址></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908224213663-945242668.png" /></p><p><code>git remote rm</code>命令用于删除远程主机。</p><p>$ git remote rm <主机名></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908224407179-621857253.png" /></p><p><code>git remote rename</code>命令用于远程主机的改名。</p><p>$ git remote rename <原主机名> <新主机名></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908224328835-2011669932.png" /></p><h3 id="git-fetch">5.3.4、git fetch</h3><p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到<code>git fetch</code>命令。</p><p>$ git fetch <远程主机名></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908224517710-282516709.png" /></p><p>上面命令将某个远程主机的更新，全部取回本地。</p><p><code>git fetch</code>命令通常用来查看其他人的进程，因为它取回的代码对你本地的开发代码没有影响。</p><p>默认情况下，<code>git fetch</code>取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。</p><p>$ git fetch <远程主机名> <分支名></p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908224858882-553214269.png" /></p><p>比如，取回<code>origin</code>主机的<code>master</code>分支。</p><p>$ git fetch origin master</p><p>所取回的更新，在本地主机上要用"远程主机名/分支名"的形式读取。比如<code>origin</code>主机的<code>master</code>，就要用<code>origin/master</code>读取。</p><p><code>git branch</code>命令的<code>-r</code>选项，可以用来查看远程分支，<code>-a</code>选项查看所有分支。</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>$ git branch -r origin/master</p><p>$ git branch -a * master remotes/origin/master</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>上面命令表示，本地主机的当前分支是<code>master</code>，远程分支是<code>origin/master</code>。</p><p>取回远程主机的更新以后，可以在它的基础上，使用<code>git checkout</code>命令创建一个新的分支。</p><p>$ git checkout -b newBrach origin/master</p><p>上面命令表示，在<code>origin/master</code>的基础上，创建一个新分支。</p><p>此外，也可以使用<code>git merge</code>命令或者<code>git rebase</code>命令，在本地分支上合并远程分支。</p><p>$ git merge origin/master # 或者 $ git rebase origin/master</p><p>上面命令表示在当前分支上，合并<code>origin/master</code>。</p><h3 id="git-pull">5.3.5、git pull</h3><p><code>git pull</code>命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并。它的完整格式稍稍有点复杂。</p><p>$ git pull <远程主机名> <远程分支名>:<本地分支名></p><p>比如，取回<code>origin</code>主机的<code>next</code>分支，与本地的<code>master</code>分支合并，需要写成下面这样。</p><p>$ git pull origin next:master</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908225306444-501626163.png" /></p><p>如果远程分支是与当前分支合并，则冒号后面的部分可以省略。</p><p>$ git pull origin next</p><p>上面命令表示，取回<code>origin/next</code>分支，再与当前分支合并。实质上，这等同于先做<code>git fetch</code>，再做<code>git merge</code>。</p><p>$ git fetch origin $ git merge origin/next</p><p>在某些场合，Git会自动在本地分支与远程分支之间，建立一种追踪关系（tracking）。比如，在<code>git clone</code>的时候，所有本地分支默认与远程主机的同名分支，建立追踪关系，也就是说，本地的<code>master</code>分支自动"追踪"<code>origin/master</code>分支。</p><p>Git也允许手动建立追踪关系。</p><p>git branch --set-upstream master origin/next</p><p>上面命令指定<code>master</code>分支追踪<code>origin/next</code>分支。</p><p>如果当前分支与远程分支存在追踪关系，<code>git pull</code>就可以省略远程分支名。</p><p>$ git pull origin</p><p>上面命令表示，本地的当前分支自动与对应的<code>origin</code>主机"追踪分支"（remote-trackingbranch）进行合并。</p><p>如果当前分支只有一个追踪分支，连远程主机名都可以省略。</p><p>$ git pull</p><p>上面命令表示，当前分支自动与唯一一个追踪分支进行合并。</p><p>如果合并需要采用rebase模式，可以使用<code>--rebase</code>选项。</p><p>$ git pull --rebase <远程主机名> <远程分支名>:<本地分支名></p><p>如果远程主机删除了某个分支，默认情况下，<code>git pull</code> 不会在拉取远程分支的时候，删除对应的本地分支。这是为了防止，由于其他人操作了远程主机，导致<code>git pull</code>不知不觉删除了本地分支。</p><p>但是，你可以改变这个行为，加上参数 <code>-p</code> 就会在本地删除远程已经删除的分支。</p><p>$ git pull -p # 等同于下面的命令 $ git fetch --prune origin $ gitfetch -p</p><h3 id="git-push">5.3.6、git push</h3><p><code>git push</code>命令用于将本地分支的更新，推送到远程主机。它的格式与<code>git pull</code>命令相仿。</p><p>$ git push <远程主机名> <本地分支名>:<远程分支名></p><p>注意，分支推送顺序的写法是<来源地>:<目的地>，所以<code>git pull</code>是<远程分支>:<本地分支>，而<code>git push</code>是<本地分支>:<远程分支>。</p><p>如果省略远程分支名，则表示将本地分支推送与之存在"追踪关系"的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p><p>$ git push origin master</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908225504819-2024610007.png" /></p><p>上面命令表示，将本地的<code>master</code>分支推送到<code>origin</code>主机的<code>master</code>分支。如果后者不存在，则会被新建。</p><p>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</p><p>$ git push origin :master # 等同于 $ git push origin --deletemaster</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908225743272-1924279457.png" /></p><p>上面命令表示删除<code>origin</code>主机的<code>master</code>分支。</p><p>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</p><p>$ git push origin</p><p>上面命令表示，将当前分支推送到<code>origin</code>主机的对应分支。</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170908230824710-1381765944.png" /></p><p>如果是新建分支第一次push，会提示：<br />　　fatal: The current branch dev1 has no upstream branch.<br />　　To push the current branch and set the remote as upstream, use<br />　　git push --set-upstream origin dev1<br />　　输入这行命令，然后输入用户名和密码，就push成功了。</p><p>　　以后的push就只需要输入git push origin</p><p>原因是：</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>#因为在git的全局配置中，有一个push.default属性，其决定了gitpush操作的默认行为。在Git2.0之前，这个属性的默认被设为'matching'，2.0之后则被更改为了'simple'。</p><p>#我们可以通过gitversion确定当前的git版本（如果小于2.0，更新是个更好的选择），通过gitconfig --global push.default'option'改变push.default的默认行为（或者也可直接编辑~/.gitconfig文件）。</p><p>push.default 有以下几个可选值： nothing, current, upstream, simple,matching</p><p>其用途分别为： nothing - push操作无效，除非显式指定远程分支，例如gitpush origin develop（我觉得。。。可以给那些不愿学git的同事配上此项）。current -push当前分支到远程同名分支，如果远程同名分支不存在则自动创建同名分支。upstream -push当前分支到它的upstream分支上（这一项其实用于经常从本地分支push/pull到同一远程仓库的情景，这种模式叫做centralworkflow）。 simple -simple和upstream是相似的，只有一点不同，simple必须保证本地分支和它的远程upstream分支同名，否则会拒绝push操作。 matching -push所有本地和远程两端都存在的同名分支。<br />因此如果我们使用了git2.0之前的版本，push.default = matching，gitpush后则会推送当前分支代码到远程分支，而2.0之后，push.default =simple，如果没有指定当前分支的upstream分支，就会收到上文的fatal提示。</p><p><a href="javascript:void(0);"><imgsrc="https://common.cnblogs.com/images/copycode.gif"alt="复制代码" /></a></p><p>如果当前分支只有一个追踪分支，那么主机名都可以省略。</p><p>$ git push</p><p>如果当前分支与多个主机存在追踪关系，则可以使用<code>-u</code>选项指定一个默认主机，这样后面就可以不加任何参数使用<code>git push</code>。</p><p>$ git push -u origin master</p><p>上面命令将本地的<code>master</code>分支推送到<code>origin</code>主机，同时指定<code>origin</code>为默认主机，后面就可以不加任何参数使用<code>git push</code>了。</p><p>不带任何参数的<code>git push</code>，默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。Git2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。如果要修改这个设置，可以采用<code>git config</code>命令。</p><p>$ git config --global push.default matching # 或者 $ git config--global push.default simple</p><p>还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<code>--all</code>选项。</p><p>$ git push --all origin</p><p>上面命令表示，将所有本地分支都推送到<code>origin</code>主机。</p><p>如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做<code>git pull</code>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<code>--force</code>选项。</p><p>$ git push --force origin</p><p>上面命令使用<code>--force</code>选项，结果导致远程主机上更新的版本被覆盖。除非你很确定要这样做，否则应该尽量避免使用<code>--force</code>选项。</p><p>最后，<code>git push</code>不会推送标签（tag），除非使用<code>--tags</code>选项。</p><p>$ git push origin --tags</p><h2 id="在命令行中同步本地仓库示例">5.4、在命令行中同步本地仓库示例</h2><p>假定我们创建好了一个远程仓库地址为：https://coding.net/u/zhangguo5/p/project7/git，现在我们在本地创建一个项目并同步到远程仓库中。</p><p>1）、创建文件添加到暂存区</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907221032944-2131239213.png" /></p><p>2）、提交到本地仓库</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907233021210-1805159090.png" /></p><p>3）、提交到远程仓库</p><p>添加远程主机地址：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907233146726-618960592.png" /></p><p>推送文件：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907233217163-1083264263.png" /></p><p>结果：</p><p><imgsrc="https://images2017.cnblogs.com/blog/63651/201709/63651-20170907233514601-722647890.png" /></p><p>说明：这里我使用的是SSH方式提交的，所有并没有让我输入用户名与密码，如果你使用https方式提交则要配置用户名与邮箱，还要输入密码。</p><h2 id="idea中git的使用">5.5、IDEA中Git的使用</h2><p>工作中多人使用版本控制软件协作开发，常见的应用场景归纳如下：</p><p>假设小组中有两个人，组长盖茨，组员艾伦</p><p>场景一：盖茨创建项目并提交到远程Git仓库</p><p>场景二：艾伦从远程Git仓库上获取项目源码</p><p>场景三：艾伦修改了部分源码，提交到远程仓库</p><p>场景四：盖茨从远程仓库获取艾伦的提交</p><p>场景五：艾伦接受了一个新功能的任务，创建了一个分支并在分支上开发</p><p>场景六：艾伦把分支提交到远程Git仓库</p><p>场景七：盖茨获取艾伦提交的分支</p><p>场景八：盖茨把分支合并到主干</p><p>下面来看以上各场景在IDEA中对应的操作。</p><h3id="场景一盖茨创建项目并提交到远程git仓库">场景一：盖茨创建项目并提交到远程Git仓库</h3><p>在IDEA中配置Git</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920141427767-901140053.png" /></p><p>测试环境是否正常</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920141409311-586608847.png" /></p><p>创建好项目，这里创建了一个Maven项目，结构如下，当然可以是任意项目：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920143021934-620435706.png" /></p><p>选择VCS - &gt; Enable Version ControlIntegration，允许将项目集成到版本控制器中</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920143127862-875826995.png" /></p><p>选择版本控制器类型</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920143252849-358884850.png" /></p><p>完成后当前项目就变成一个Git项目，是工作空间</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920143444863-1229632962.png" /></p><p>点击OK后创建完成本地仓库，注意，这里仅仅是本地的。下面把项目源码添加到本地仓库。</p><p>下图是Git与提交有关的三个命令对应的操作，Add命令是把文件从IDE的工作目录添加到本地仓库的stage区，Commit命令把stage区的暂存文件提交到当前分支的仓库，并清空stage区。Push命令把本地仓库的提交同步到远程仓库。</p><p><img data-src="http://img.blog.csdn.net/20160912164147415" /></p><p>IDEA中对操作做了一定的简化，Commit和Push可以在一步中完成。</p><p>具体操作，在项目上点击右键，选择Git菜单，如果使用Add则将文件从工作空间提交到暂存库，CommitDirectory则是同时完成提交到暂存与本地仓库。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920143700375-806004833.png" /></p><p> 选择要提交的文件，填写消息</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920143830555-392877031.png" /></p><p>将本地仓库的内容提交到远程仓库</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920144004253-519745931.png" /></p><p> 定义远程地址的别名</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920144050315-1166288414.png" /></p><p> 输入名称与URL</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920144129834-1942009089.png" /></p><p> 点击push将本地仓库的内容推送到远程服务器</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920144159428-1481782478.png" /></p><p> 提示Push Successful就成功了</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920144245875-982615328.png" /></p><p> 提交后的远程库</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180920152326515-1222065389.png" /></p><h3id="场景二艾伦从远程git仓库上获取项目源码">场景二：艾伦从远程Git仓库上获取项目源码</h3><p>即克隆项目，操作如下：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921090308063-894175099.png" /></p><p>输入盖茨Push时填写的远程仓库地址</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921090539618-574071207.png" /></p><p>填写仓库地址、要克隆到的父目录与项目目录</p><p>接下来按向导操作，即可把项目从远程仓艾伦隆到本地仓库和IDE工作区。</p><p>当提示签出成功点击打开就可以看到项目了</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921091133126-1795267174.png" /></p><p>下载到本地的文件</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921091153215-1596000519.png" /></p><p>其它方法</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921092509906-1699848482.png" /></p><h3id="场景三艾伦修改了部分源码提交到远程仓库">场景三：艾伦修改了部分源码，提交到远程仓库</h3><p>这个操作和首次提交的流程基本一致，分别是 Add -&gt; Commit -&gt;Push。请参考场景一</p><p> 添加一个类，并提交</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921092810217-620233879.png" /></p><p>提交到本地仓库</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921092952435-275640137.png" /></p><p>提交到远程仓库</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921093048080-1290516284.png" /></p><h3id="场景四盖茨从远程仓库获取艾伦的提交">场景四：盖茨从远程仓库获取艾伦的提交</h3><p>获取更新有两个命令：Fetch和Pull，Fetch是从远程仓库下载文件到本地的origin/master，然后可以手动对比修改决定是否合并到本地的master库。Pull则是直接下载并合并。如果各成员在工作中都执行修改前先更新的规范，则可以直接使用Pull方式以简化操作。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921093340336-15924408.png" /></p><p>选择分支</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921093502048-1763009179.png" /></p><h3id="场景五艾伦接受了一个新功能的任务创建了一个分支并在分支上开发">场景五：艾伦接受了一个新功能的任务，创建了一个分支并在分支上开发</h3><p>建分支也是一个常用的操作，例如临时修改bug、开发不确定是否加入的功能等，都可以创建一个分支，再等待合适的时机合并到主干。</p><p>创建流程如下：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921103220405-236249664.png" /></p><p>选择New Branch并输入一个分支的名称</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921103304779-1296696768.png" /></p><p>创建完成后注意IDEA的右下角，如下图，Git:dev表示已经自动切换到dev分支，当前工作在这个分支上。</p><p>点击后弹出一个小窗口，在LocalBranches中有其他可用的本地分支选项，点击后选择Checkout即可切换当前工作的分支(见场景7操作切换其他分支)。</p><p>如下图，点击Checkout</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921103657862-71867930.png" /></p><p>注意，这里创建的分支仅仅在本地仓库，如果想让组长盖茨获取到这个分支，还需要提交到远程仓库。</p><h3id="场景六艾伦把分支提交到远程git仓库">场景六：艾伦把分支提交到远程Git仓库</h3><p>切换到新建的分支，使用Push功能</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921110324518-1638272727.png" /></p><p>提交到远程</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921103840955-1507128951.png" /></p><p>艾伦将新开发的功能提交到远程</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921105157137-1125324175.png" /></p><p>提交到远程</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921105256157-172806174.png" /></p><h3id="场景七盖茨获取艾伦提交的分支">场景七：盖茨获取艾伦提交的分支</h3><p>使用Pull功能打开更新窗口，点击Remote栏后面的刷新按钮，会在Branches tomerge栏中刷新出新的分支。这里并不想做合并，所以不要选中任何分支，直接点击Pull按钮完成操作。</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921110528560-1474239907.png" /></p><p>更新后，再点击右下角，可以看到在RemoteBranches区已经有了新的分支，点击后在弹出的子菜单中选择Checkout as newlocal branch，在本地仓库中创建该分支。完成后在LocalBranches区也会出现该分支的选项，可以按上面的方法，点击后选择Checkout切换。</p><p>切换远程分支：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921110644482-1912206515.png" /></p><p>切换本地分支：</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921111021875-866209849.png" /></p><h3 id="场景八盖茨把分支合并到主干">场景八：盖茨把分支合并到主干</h3><p>新功能开发完成，体验很好，项目组决定把该功能合并到主干上。</p><p>切换到master分支，选择Merge Changes</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921111129568-2139545429.png" /></p><p>选择要合并的分支，点击Merge完成</p><p><imgsrc="https://img2018.cnblogs.com/blog/63651/201809/63651-20180921111235450-1637014827.png" /></p><p><ahref="https://pan.baidu.com/s/1qYlw2YS">Git教程下载_王亮（大神）</a></p><p>示例1：<imgsrc="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /> ViewCode</p><p>示例2：<imgsrc="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /> ViewCode</p><p>示例3：<imgsrc="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /> ViewCode</p><p>Copyright © 2020 张果<br />Powered by .NET Core on Kubernetes</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>使用MYSQL QUERY browser时出现error1251的解决方案</title>
      <link href="/2020/07/15/%E4%BD%BF%E7%94%A8mysql-query-browser%E6%97%B6%E5%87%BA%E7%8E%B0error1251%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2020/07/15/%E4%BD%BF%E7%94%A8mysql-query-browser%E6%97%B6%E5%87%BA%E7%8E%B0error1251%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>出现1251一般是密码问题</p><p>首先使用cmd 输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>登录后输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user root@localhost identified by &#x27;newpassword&#x27; password expire never;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter user root@localhost identified with mysql_native_password by &#x27;newpassword&#x27;;</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;　　　　# 刷新权限</span><br></pre></td></tr></table></figure><p>newpassword是新密码</p><p>之后就可以正常链接了</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Windows10 MYSQL Installer 安装（mysql-installer-community-5.7.19.0.msi）</title>
      <link href="/2020/07/15/windows10-mysql-installer-%E5%AE%89%E8%A3%85%EF%BC%88mysql-installer-community-5-7-19-0-msi%EF%BC%89/"/>
      <url>/2020/07/15/windows10-mysql-installer-%E5%AE%89%E8%A3%85%EF%BC%88mysql-installer-community-5-7-19-0-msi%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>1.进入官网找到自己所需的安装包：https://dev.mysql.com/ ，路径：DOWNLOAD--&gt;MYSQL Community Edition(GRL)--&gt;MYSQL onWindows (Installer &amp; Tool)</p><p>或直接点击 <ahref="https://dev.mysql.com/downloads/windows/installer/">https://dev.mysql.com/downloads/windows/installer/</a> 查看最新版本。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1202941-20170722225513168-99169810.png" /></p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1202941-20170722225525340-1635922988.png" /></p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831313-3095-20170722225535090-1925937407.png" /></p><p>2.找到所需的安装包,</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831313-8105-20170722225609184-438065502.png" /></p><p>3.点击download。这里选择的是安装版（mysql -install-community）</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831313-8141-1-20170722225738356-88388521.png" /></p><p>4.选择不登陆下载。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831313-7844-20170722225950840-2044210671.png" /></p><p>5.双击运行下载好的mysql-installer-community-5.7.19.0.msi，程序运行需要一些时间，请等待一下。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831314-6138-20170722230026215-1797155710.png" /></p><p>6.运行成功之后，进入欢迎的界面.选择我同意协议，不然无法进行下一步。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831314-1312-20170722230046043-978659071.png" /></p><p>7. 进入类型选择页面，本人需要mysql云服务就选择了developerdefault（7.1是默认安装的步骤），如果只想安装mysqlserver的就选择custom模式（7.2步骤是选择自己需要的服务器类型，所选择的用于做一些数据分析）</p><ul><li>developer default（开发者默认）：安装mysql开发所需的所有产品</li><li>server only（服务器）：只安装mysql服务器产品</li><li>client only（客户端）：只安装没有服务器的mysql客户端产品</li><li>full（完全）：安装所有包含的mysql产品和功能</li><li>custom（手动）：手动选择系统上应安装的产品</li></ul><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831314-6490-20170722230201246-220989429.png" /></p><p>7.1开发者默认模式检测以下程序会安装不成功，点击下一步进入下一个安装流程—&gt;跳到第八步。</p><p>checkrequirements：以下产品的请求失败，安装程序将自动尝试解决其中一些问题。标记为手动的要求无法自动解决。单击这些项目以尝试手动恢复。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831314-6339-20170722230232793-1759462371.png" /></p><p>检测到不可安装的程序说明：</p><p>Visual Studio：是一款代码编辑工具（可编写C#、VisualBasic、C++、TypeScript、F# ），如果你安装的话就安装要求去安装VisualStudio version：2012.2013.2015.2017其中一个版本</p><p>Connector/pyton3.4：电脑有python3.6了就没选择3.4版本的。如果你没安装有python可按要求去安装一些内容。</p><p>7.2选择mysql server（服务） 5.7.19 x64</p><p>选择mysql workbench(mysql 的工作薄) 6.3.9 x64</p><p>选择mysql notiyier(通知) 1.1.7x86(因为这里只有一个选择所以选择了86)点击下一步进入下一个安装流程—&gt;跳到第九步。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831314-7923-20170722230314340-1501335191.png" /></p><p>8.当我们点击下一步的时候安装程序出现了提示：（一个或者移动产品要求没有得到满足，那些符合要求的产品将不会安装/升级。你想要继续吗），这里我选择的是：YES</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831315-4997-1-20170722230439528-92431868.png" /></p><p>9.在安装所选界面能看到我们接下来所需要安装的程序，点击execute</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831315-6544-20170722230506262-176699446.png" /></p><p>10安装程序进度界面，安装需要一些时间。点击didetails能看到安装日志</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831315-4350-20170722230524700-2060141633.png" /></p><p>11.程序安装完成之后，点击next</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831315-5686-20170722230808200-494027333.png" /></p><p>12.在productconfigutration（产品配置）页面能看到需要配置的程序，点击next（页面英语介绍：现在我们将逐一介绍以下产品的配置向导。您可以随时取消，如果您希望离开此向导，而不必配置所有产品）</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831316-1727-20170722230838934-1132653366.png" /></p><p>13.先配置mysql server的类型以及网络：type andnetworking（类型和网络），这里有两种mysqlserver类型，选择第一种类型点击next。</p><p>有两种类型简单介绍</p><ul><li>1.standalone mysql server/classic mysqlreplication：独立的mysql服务器/经典的mysql复制。choose this option ifyou want to run the mysql server either standalone with the opportunityto later configure classic mysqlreplication：选择这个选项，如果你想运行mysql服务器是独立的，有机会以后配置经典的mysql复制</li><li>2. innodb cluster sandbox thst setup(for testing only)：</li></ul><p>innodb集群沙箱thst设置（仅用于测试）</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831316-4284-20170722230918575-127114164.png" /></p><p>14.设置服务器配置类型以及连接端口：继续next</p><p>Config Type:选择Development Machine，用于小型以及学习所用足够了。</p><p>Port number：输入3306，也可以输入其他最好是3306-3309之间。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831316-1042-20170722231058356-1269244144.png" /></p><p>15.配置root的密码（该密码要记住），系统提示这密码虚弱</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831317-1713-20170722231209903-956653442.png" /></p><p>16. 添加其他管理员，点击add user输入账号密码点击ok（如果添加的管理员只允许在本地登录就将host改成local），回到界面之后点击next</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831317-3908-20170722231228387-1590560639.png" /></p><p>17.配置mysql在windows系统中的名字，是否选择开机启动mysql服务，其它的没进行修改，点击"Next"。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831317-1586-20170722231608825-2099636815.png" /></p><p>18.配置插件和扩展页面没进行修改直接下一步：</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831317-4097-20170722231638887-180558399.png" /></p><p>19.Mysql server :applyconfiguration（应用配置页面），选择execute进行安装配置</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831318-8984-20170722231654278-649027984.png" /></p><p>20. mysql server应用配置的log，选择finish</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831318-9740-20170722231714809-1553936235.png" /></p><p>21.安装程序又回到了productconfigutration（产品配置）页面，此时我们看到mysqlserver安装成功的显示，继续下一步：</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831318-2164-20170722231738825-1692782858.png" /></p><p>22. 配置mysql router：勾选configure mysql route for innoDBcluster之后输入密码。（如果不想输入密码可直接点击点一下）点击下一步</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831318-2952-20170722231755762-1299837152.png" /></p><p>23.Mysql router :apply configuration（应用配置页面）点击execute,</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831319-7917-20170722231811528-357673493.png" /></p><p>24.安装完成之后点击选择finish</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831319-7786-20170722231826746-634086390.png" /></p><p>25.检测root密码</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831319-2072-20170722231844528-1242732523.png" /></p><p>26.安装一些server，老规矩点击execute，完成之后点击finish</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831319-9386-20170722231902950-256599456.png" /></p><p>27. 程序回到产品配置页面。继续下一步：</p><p>28.安装程序完成界面。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831319-1406-20170722231933637-179722774.png" /></p><p>29. 双击运行之前下载的安装包，能看到我们所安装的产品。</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831320-7960-20170722232012418-1876643408.png" /></p><p>30. 配置mysql环境变量</p><p>上面安装的是时候我们看到mysql默认安装路径是：C:\ProgramFiles\MySQL\MySQL Server 5.7</p><p>我的电脑右键—&gt;属性à高级系统设置à环境变量à新建MYSQL_HOME,将安装目录输入：</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831320-7374-41-20170722232031684-1843508.png" /></p><p>找到path编辑：输入%MYSQL_HOME%\bin</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831320-5015-20170722232044090-1304683536.png" /></p><p>打开cmd输入mysql –u root –p</p><p>输入root的密码</p><p><imgsrc="https://www.runoob.com/wp-content/uploads/2019/10/1571831320-6727-20170722232055731-2127042770.png" /></p>]]></content>
      
      
      <categories>
          
          <category> 其他笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>稳定排序和不稳定排序</title>
      <link href="/2020/06/10/%E7%A8%B3%E5%AE%9A%E6%8E%92%E5%BA%8F%E5%92%8C%E4%B8%8D%E7%A8%B3%E5%AE%9A%E6%8E%92%E5%BA%8F/"/>
      <url>/2020/06/10/%E7%A8%B3%E5%AE%9A%E6%8E%92%E5%BA%8F%E5%92%8C%E4%B8%8D%E7%A8%B3%E5%AE%9A%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>首先，排序算法的稳定性大家应该都知道，通俗地讲就是能保证排序前2个相等的数其在序列的前后位置顺序和排序后它们两个的前后位置顺序相同。在简单形式化一下，如果Ai= Aj，Ai原来在位置前，排序后Ai还是要在Aj位置前。</p><p>     其次，说一下稳定性的好处。排序算法如果是稳定的，那么从一个键上排序，然后再从另一个键上排序，第一个键排序的结果可以为第二个键排序所用。基数排序就是这样，先按低位排序，逐次按高位排序，低位相同的元素其顺序再高位也相同时是不会改变的。另外，如果排序算法稳定，对基于比较的排序算法而言，元素交换的次数可能会少一些（个人感觉，没有证实）。</p><p>回到主题，现在分析一下常见的排序算法的稳定性，每个都给出简单的理由。</p><p>(1)冒泡排序</p><p>冒泡排序就是把小的元素往前调或者把大的元素往后调。比较是相邻的两个元素比较，交换也发生在这两个元素之间。所以，如果两个元素相等，我想你是不会再无聊地把他们俩交换一下的；如果两个相等的元素没有相邻，那么即使通过前面的两两交换把两个相邻起来，这时候也不会交换，所以相同元素的前后顺序并没有改变，所以冒泡排序是一种稳定排序算法。</p><p>(2)选择排序</p><p>选择排序是给每个位置选择当前元素最小的，比如给第一个位置选择最小的，在剩余元素里面给第二个元素选择第二小的，依次类推，直到第n-1个元素，第n个元素不用选择了，因为只剩下它一个最大的元素了。那么，在一趟选择，如果当前元素比一个元素小，而该小的元素又出现在一个和当前元素相等的元素后面，那么交换后稳定性就被破坏了。比较拗口，举个例子，序列58 5 29，我们知道第一遍选择第1个元素5会和2交换，那么原序列中2个5的相对前后顺序就被破坏了，所以选择排序不是一个稳定的排序算法。</p><p>(3)插入排序<br />插入排序是在一个已经有序的小序列的基础上，一次插入一个元素。当然，刚开始这个有序的小序列只有1个元素，就是第一个元素。比较是从有序序列的末尾开始，也就是想要插入的元素和已经有序的最大者开始比起，如果比它大则直接插入在其后面，否则一直往前找直到找到它该插入的位置。如果碰见一个和插入元素相等的，那么插入元素把想插入的元素放在相等元素的后面。所以，相等元素的前后顺序没有改变，从原无序序列出去的顺序就是排好序后的顺序，所以插入排序是稳定的。</p><p>(4)快速排序<br />快速排序有两个方向，左边的i下标一直往右走，当a[i] &lt;=a[center_index]，其中center_index是中枢元素的数组下标，一般取为数组第0个元素。而右边的j下标一直往左走，当a[j]&gt; a[center_index]。如果i和j都走不动了，i &lt;=j，交换a[i]和a[j],重复上面的过程，直到i &gt; j。交换a[j]和a[center_index]，完成一趟快速排序。在中枢元素和a[j]交换的时候，很有可能把前面的元素的稳定性打乱，比如序列为53 3 4 3 8 9 1011，现在中枢元素5和3（第5个元素，下标从1开始计）交换就会把元素3的稳定性打乱，所以快速排序是一个不稳定的排序算法，不稳定发生在中枢元素和a[j]交换的时刻。</p><p>(5)归并排序<br />归并排序是把序列递归地分成短序列，递归出口是短序列只有1个元素（认为直接有序）或者2个序列（1次比较和交换），然后把各个有序的段序列合并成一个有序的长序列，不断合并直到原序列全部排好序。可以发现，在1个或2个元素时，1个元素不会交换，2个元素如果大小相等也没有人故意交换，这不会破坏稳定性。那么，在短的有序序列合并的过程中，稳定是是否受到破坏？没有，合并过程中我们可以保证如果两个当前元素相等时，我们把处在前面的序列的元素保存在结果序列的前面，这样就保证了稳定性。所以，归并排序也是稳定的排序算法。</p><p>(6)基数排序<br />基数排序是按照低位先排序，然后收集；再按照高位排序，然后再收集；依次类推，直到最高位。有时候有些属性是有优先级顺序的，先按低优先级排序，再按高优先级排序，最后的次序就是高优先级高的在前，高优先级相同的低优先级高的在前。基数排序基于分别排序，分别收集，所以其是稳定的排序算法。</p><p>(7)希尔排序(shell)<br />希尔排序是按照不同步长对元素进行插入排序，当刚开始元素很无序的时候，步长最大，所以插入排序的元素个数很少，速度很快；当元素基本有序了，步长很小，插入排序对于有序的序列效率很高。所以，希尔排序的时间复杂度会比O(n^2)好一些。由于多次插入排序，我们知道一次插入排序是稳定的，不会改变相同元素的相对顺序，但在不同的插入排序过程中，相同的元素可能在各自的插入排序中移动，最后其稳定性就会被打乱，所以shell排序是不稳定的。</p><p>(8)堆排序<br />我们知道堆的结构是节点i的孩子为2 * i和2 * i +1节点，大顶堆要求父节点大于等于其2个子节点，小顶堆要求父节点小于等于其2个子节点。在一个长为n的序列，堆排序的过程是从第n /2开始和其子节点共3个值选择最大（大顶堆）或者最小（小顶堆），这3个元素之间的选择当然不会破坏稳定性。但当为n/ 2 - 1， n / 2 - 2， ...1这些个父节点选择元素时，就会破坏稳定性。有可能第n /2个父节点交换把后面一个元素交换过去了，而第n / 2 -1个父节点把后面一个相同的元素没有交换，那么这2个相同的元素之间的稳定性就被破坏了。所以，堆排序不是稳定的排序算法。</p><p>综上，得出结论: <strong>选择排序、快速排序、希尔排序、堆排序不是稳定的排序算法，而冒泡排序、插入排序、归并排序和基数排序是稳定的排序算法</strong></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>折半查找/二分查找判定树及平均查找长度</title>
      <link href="/2020/05/22/%E6%8A%98%E5%8D%8A%E6%9F%A5%E6%89%BE-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E5%88%A4%E5%AE%9A%E6%A0%91%E5%8F%8A%E5%B9%B3%E5%9D%87%E6%9F%A5%E6%89%BE%E9%95%BF%E5%BA%A6/"/>
      <url>/2020/05/22/%E6%8A%98%E5%8D%8A%E6%9F%A5%E6%89%BE-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E5%88%A4%E5%AE%9A%E6%A0%91%E5%8F%8A%E5%B9%B3%E5%9D%87%E6%9F%A5%E6%89%BE%E9%95%BF%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>长度为n的折半查找判定树的构造方法为：</p><p>⑴ 当n=0时，折半查找判定树为空；</p><p>⑵当n＞0时，折半查找判定树的根结点是有序表中序号为mid=(n+1)/2的记录，根结点的左子树是与有序表r[1]~ r[mid-1]相对应的折半查找判定树，根结点的右子树是与r[mid+1] ~r[n]相对应的折半查找判定树。</p><p>例如，长度为10的折半查找判定树的具体生成过程为：</p><p>⑴在长度为10的有序表中进行折半查找，不论查找哪个记录，都必须先和中间记录进行比较，而中间记录的序号为(1+10)/2=5（注意是整除即向下取整），即判定树的根结点是5，如图7-2(a)所示；</p><p>⑵ 考虑判定树的左子树，即将查找区间调整到左半区，此时的查找区间是</p><p>[1，4]，也就是说，左分支上为根结点的值减1，代表查找区间的高端high，此时，根结点的左孩子是(1+4)/2=2，如图7-2(b)所示；</p><p>⑶ 考虑判定树的右子树，即将查找区间调整到右半区，此时的查找区间是</p><p>[6，10]，也就是说，右分支上为根结点的值加1，代表查找区间的低端low，此时，根结点的右孩子是(6+10)/2=8，如图7-2(c)所示；</p><p>⑷ 重复⑵⑶步，依次确定每个结点的左右孩子，如图7-2(d)所示。</p><p><imgsrc="https://img-blog.csdn.net/20160108180718291?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" /></p><p><imgsrc="https://img-blog.csdn.net/20160108181550336?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" /></p><p>对于折半查找判定树，需要补充以下两点： <br />⑴折半查找判定树是一棵二叉排序树，即每个结点的值均大于其左子树上所有结点的值，小于其右子树上所有结点的值； <br />⑵折半查找判定树中的结点都是查找成功的情况，将每个结点的空指针指向一个实际上并不存在的结点——称为外结点，所有外结点即是查找不成功的情况，如图7-2(e)所示。如果有序表的长度为n，则外结点一定有n+1个。在折半查找判定树中，某结点所在的层数即是查找该结点的比较次数，整个判定树代表的有序表的平均查找长度即为查找每个结点的比较次数之和除以有序表的长度。例如，长度为10的有序表的平均查找长度为： <br />ASL=(1×1+2×2+3×4+4×3)/10=29/10 <br />在折半查找判定树中，查找不成功时的比较次数即是查找相应外结点时与内结点的比较次数。整个判定树代表的有序表在查找失败时的平均查找长度即为查找每个外结点的比较次数之和除以外结点的个数。例如，长度为10的有序表在查找失败时的平均查找长度为： <br />ASL=(3×5+4×6)/11=39/11</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-3 求二叉树的叶子结点个数 (20分)</title>
      <link href="/2020/05/10/7-3-%E6%B1%82%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%8F%B6%E5%AD%90%E7%BB%93%E7%82%B9%E4%B8%AA%E6%95%B0-20%E5%88%86/"/>
      <url>/2020/05/10/7-3-%E6%B1%82%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%8F%B6%E5%AD%90%E7%BB%93%E7%82%B9%E4%B8%AA%E6%95%B0-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>以二叉链表作为二叉树的存储结构，求二叉树的叶子结点个数。</p><h3 id="输入格式">输入格式:</h3><p>输入二叉树的先序序列。</p><p>提示：一棵二叉树的先序序列是一个字符串，若字符是‘#’,表示该二叉树是空树，否则该字符是相应结点的数据元素。</p><h3 id="输出格式">输出格式:</h3><p>输出有两行：</p><p>第一行是二叉树的中序遍历序列；</p><p>第二行是二叉树的叶子结点个数。</p><h3 id="输入样例">输入样例:</h3><p>ABC##DE#G##F###</p><h3 id="输出样例">输出样例:</h3><p>CBEGDFA</p><p>3</p><p>需要三个函数：前序建立树，中序输出，计算叶子结点</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//根据有#的前序遍历生成树</span><br><span class="line">tree fcreate()</span><br><span class="line">&#123;</span><br><span class="line">    tree t;</span><br><span class="line">    char s;</span><br><span class="line">    //按每个字符输入</span><br><span class="line">    scanf(&quot;%c&quot;,&amp;s);</span><br><span class="line">    if(s==&#x27;#&#x27;)return nullptr;</span><br><span class="line">    else &#123;</span><br><span class="line">        t=(tree)malloc(sizeof(struct treenode));</span><br><span class="line">        t-&gt;data = s;</span><br><span class="line">        t-&gt;lchild = fcreate();</span><br><span class="line">        t-&gt;rchild = fcreate();</span><br><span class="line">        return t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//中序输出</span><br><span class="line">void Inordertranverse(tree t)</span><br><span class="line">&#123;</span><br><span class="line">    if(!t)return;</span><br><span class="line">    Inordertranverse(t-&gt;lchild);</span><br><span class="line">    cout&lt;&lt;t-&gt;data;</span><br><span class="line">    Inordertranverse(t-&gt;rchild);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//计数树的根结点数</span><br><span class="line">int count(tree t,int c)</span><br><span class="line">&#123;</span><br><span class="line">    if(t) &#123;</span><br><span class="line">        if (t-&gt;lchild == nullptr &amp;&amp; t-&gt;rchild == nullptr)c++;</span><br><span class="line">        c=count(t-&gt;lchild, c);</span><br><span class="line">        c=count(t-&gt;rchild, c);</span><br><span class="line">    &#125;</span><br><span class="line">    return c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-4 交换二叉树中每个结点的左孩子和右孩子 (20分)</title>
      <link href="/2020/05/10/7-4-%E4%BA%A4%E6%8D%A2%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E6%AF%8F%E4%B8%AA%E7%BB%93%E7%82%B9%E7%9A%84%E5%B7%A6%E5%AD%A9%E5%AD%90%E5%92%8C%E5%8F%B3%E5%AD%A9%E5%AD%90-20%E5%88%86/"/>
      <url>/2020/05/10/7-4-%E4%BA%A4%E6%8D%A2%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E6%AF%8F%E4%B8%AA%E7%BB%93%E7%82%B9%E7%9A%84%E5%B7%A6%E5%AD%A9%E5%AD%90%E5%92%8C%E5%8F%B3%E5%AD%A9%E5%AD%90-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>以二叉链表作为二叉树的存储结构，交换二叉树中每个结点的左孩子和右孩子。</p><h3 id="输入格式">输入格式:</h3><p>输入二叉树的先序序列。</p><p>提示：一棵二叉树的先序序列是一个字符串，若字符是‘#’,表示该二叉树是空树，否则该字符是相应结点的数据元素。</p><h3 id="输出格式">输出格式:</h3><p>输出有两行：</p><p>第一行是原二叉树的中序遍历序列；</p><p>第二行是交换后的二叉树的中序遍历序列。</p><h3 id="输入样例">输入样例:</h3><p>ABC##DE#G##F###</p><h3 id="输出样例">输出样例:</h3><p>CBEGDFA</p><p>AFDGEBC</p><p>需要三个函数：根据前序输入生成树，交换，中序输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//根据有#的前序遍历生成树</span><br><span class="line">tree fcreate()</span><br><span class="line">&#123;</span><br><span class="line">    tree t;</span><br><span class="line">    char s;</span><br><span class="line">    //按每个字符输入</span><br><span class="line">    scanf(&quot;%c&quot;,&amp;s);</span><br><span class="line">    if(s==&#x27;#&#x27;)return nullptr;</span><br><span class="line">    else &#123;</span><br><span class="line">        t=(tree)malloc(sizeof(struct treenode));</span><br><span class="line">        t-&gt;data = s;</span><br><span class="line">        t-&gt;lchild = fcreate();</span><br><span class="line">        t-&gt;rchild = fcreate();</span><br><span class="line">        return t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">void Inordertranverse(tree t)</span><br><span class="line">&#123;</span><br><span class="line">    if(!t)return;</span><br><span class="line">    Inordertranverse(t-&gt;lchild);</span><br><span class="line">    cout&lt;&lt;t-&gt;data;</span><br><span class="line">    Inordertranverse(t-&gt;rchild);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//交换每个结点左右子树</span><br><span class="line">void Exchange(tree &amp;bt)</span><br><span class="line">&#123;</span><br><span class="line">    tree temp;</span><br><span class="line">    if(bt)&#123;</span><br><span class="line">        temp = bt -&gt; lchild;</span><br><span class="line">        bt -&gt; lchild = bt -&gt; rchild;</span><br><span class="line">        bt -&gt; rchild = temp;</span><br><span class="line">        Exchange(bt -&gt; lchild);</span><br><span class="line">        Exchange(bt -&gt; rchild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    tree t;</span><br><span class="line">    t=fcreate();</span><br><span class="line">    Inordertranverse(t);</span><br><span class="line">    Exchange(t);</span><br><span class="line">    Inordertranverse(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-1 三元组顺序表表示的稀疏矩阵转置Ⅱ (10分)</title>
      <link href="/2020/04/24/7-1-%E4%B8%89%E5%85%83%E7%BB%84%E9%A1%BA%E5%BA%8F%E8%A1%A8%E8%A1%A8%E7%A4%BA%E7%9A%84%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5%E8%BD%AC%E7%BD%AE%E2%85%B1-10%E5%88%86/"/>
      <url>/2020/04/24/7-1-%E4%B8%89%E5%85%83%E7%BB%84%E9%A1%BA%E5%BA%8F%E8%A1%A8%E8%A1%A8%E7%A4%BA%E7%9A%84%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5%E8%BD%AC%E7%BD%AE%E2%85%B1-10%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>三元组顺序表表示的稀疏矩阵转置Ⅱ。设a和b为三元组顺序表变量，分别表示矩阵M和T。要求按照a中三元组的次序进行转置，并将转置后的三元组置入b中恰当的位置。</p><h3 id="输入格式">输入格式:</h3><p>输入第1行为矩阵行数m、列数n及非零元素个数t。按行优先顺序依次输入t行，每行3个数，分别表示非零元素的行标、列标和值。</p><h3 id="输出格式">输出格式:</h3><p>按置入b中的顺序输出置入的位置下标，转置后的三元组行标、列标和值，数据之间用空格分隔，共t行。</p><h3 id="输入样例1">输入样例1:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 4 3</span><br><span class="line">0 1 -5</span><br><span class="line">1 0 1</span><br><span class="line">2 2 2</span><br></pre></td></tr></table></figure><h3 id="输出样例1">输出样例1:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 1 0 -5</span><br><span class="line">0 0 1 1</span><br><span class="line">2 2 2 2</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef struct</span><br><span class="line">&#123;</span><br><span class="line">    int x,y;</span><br><span class="line">    int data;</span><br><span class="line">&#125;triple;</span><br><span class="line"></span><br><span class="line">typedef struct</span><br><span class="line">&#123;</span><br><span class="line">    triple data[1001];</span><br><span class="line">    int mu,nu,tu;</span><br><span class="line">&#125;TSMatrix;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    TSMatrix m1,m2;</span><br><span class="line">    int m,n,t;</span><br><span class="line">    cin&gt;&gt;m&gt;&gt;n&gt;&gt;t;</span><br><span class="line">    m1.mu=m;m1.nu=n;m1.tu=t;</span><br><span class="line">    for (int i = 0; i &lt; t; ++i) &#123;</span><br><span class="line">        cin&gt;&gt;m1.data[i].x&gt;&gt;m1.data[i].y&gt;&gt;m1.data[i].data;</span><br><span class="line">    &#125;</span><br><span class="line">    m2.mu=m1.nu;m2.nu=m1.mu;m2.tu=m1.tu;</span><br><span class="line">    if(m2.tu)</span><br><span class="line">    &#123;</span><br><span class="line">        int q=0;</span><br><span class="line">        for (int i = 0; i &lt; m1.nu; ++i) &#123;</span><br><span class="line">            for (int j = 0; j &lt; m1.tu; ++j) &#123;</span><br><span class="line">                if (m1.data[j].y==i)</span><br><span class="line">                &#123;</span><br><span class="line">                    m2.data[q].x=m1.data[j].y;</span><br><span class="line">                    m2.data[q].y=m1.data[j].x;</span><br><span class="line">                    m2.data[q].data=m1.data[j].data;</span><br><span class="line">                    q++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int k = 0; k &lt; m1.nu; ++k) &#123;</span><br><span class="line">            for (int i = 0; i &lt; m1.tu; ++i) &#123;</span><br><span class="line">                if(m2.data[i].y==k)</span><br><span class="line">                &#123;</span><br><span class="line">                    cout&lt;&lt;i&lt;&lt;&quot; &quot;&lt;&lt;m2.data[i].x&lt;&lt;&quot; &quot;&lt;&lt;m2.data[i].y&lt;&lt;&quot; &quot;&lt;&lt;m2.data[i].data&lt;&lt;endl;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>对称矩阵压缩存储的地址计算</title>
      <link href="/2020/04/20/%E5%AF%B9%E7%A7%B0%E7%9F%A9%E9%98%B5%E5%8E%8B%E7%BC%A9%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E8%AE%A1%E7%AE%97/"/>
      <url>/2020/04/20/%E5%AF%B9%E7%A7%B0%E7%9F%A9%E9%98%B5%E5%8E%8B%E7%BC%A9%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E8%AE%A1%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<p>设有一个10对称矩阵A，采用压缩存储，a[0][0]地址为1000，每个元素占两个字节，则a[3][6]地址为多少？</p><p>对对称阵进行压缩存取是将对称元素只存一个，并将<ahref="https://www.baidu.com/s?wd=%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao">数据存储</a>在一维数组中<br />首先来确定a[i][j]在b[k]中的i，j与k的关系<br />首先是判定i与j的关系， 如果是下三角存储，则分一下两种情况<br />1、如果i&lt;j,则交换i与j的值，将上copy三角的位置值变换到下三角位置<br />2、如果i&gt;=j，则不用执行操作直接走下面的流程</p><p>此时，i表示行坐标，j表示了坐标i之前有i行，即有1+2+...+i =(i+1)*i/2，在i标识的第i+1行有j+1个元素，由此zd可以确定k的值为(i+1)*i/2+j+1= k+1 由此可得k = (i+1)*i/2+j</p><p>由此可以的，a[3][6], i=3, j=6, 由于i&lt;j, 交换得i=6， j=3<br />由此 k = (6+1)*6/2+3 = 24<br />又由于&amp;b[0] = 1000 每个元素占两个字节, 则b[24] = 1000+2*24 =1048<br />由此便得到a[3][6]的地址为1048</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>串编程题</title>
      <link href="/2020/04/12/%E4%B8%B2%E7%BC%96%E7%A8%8B%E9%A2%98/"/>
      <url>/2020/04/12/%E4%B8%B2%E7%BC%96%E7%A8%8B%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>7-1 串的模式匹配 (30分)</p><p>给定一个主串S（长度&lt;=10<sup>6）和一个模式T（长度&lt;=10</sup>5），要求在主串S中找出与模式T相匹配的子串，返回相匹配的子串中的第一个字符在主串S中出现的位置。</p><h3 id="输入格式">输入格式:</h3><p>输入有两行： 第一行是主串S； 第二行是模式T.</p><h3 id="输出格式">输出格式:</h3><p>输出相匹配的子串中的第一个字符在主串S中出现的位置。若匹配失败，输出0.</p><h3 id="输入样例">输入样例:</h3><p>在这里给出一组输入。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aaaaaba</span><br><span class="line">ba</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><p>在这里给出相应的输出。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><p>首先有kmp算法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">typedef int Status;</span><br><span class="line">typedef struct</span><br><span class="line">&#123;</span><br><span class="line">    char *ch;</span><br><span class="line">    int length;</span><br><span class="line">&#125;HString;</span><br><span class="line"></span><br><span class="line">//把string类型变成char*类型</span><br><span class="line">char* trans(string s)</span><br><span class="line">&#123;</span><br><span class="line">    int size = s.length();</span><br><span class="line">    char* s1=new char[size];</span><br><span class="line">    strcpy(s1,s.c_str());</span><br><span class="line">    return s1;</span><br><span class="line">&#125;</span><br><span class="line">//生成串s1</span><br><span class="line">Status Strassign(HString &amp;s1,char *char1)</span><br><span class="line">&#123;</span><br><span class="line">    int i;</span><br><span class="line">    char *c;</span><br><span class="line">    //if(s1.ch)free(s1.ch);</span><br><span class="line">    //i为char1长度</span><br><span class="line">    for (i = 0,c=char1; *c ; ++c,++i) ;</span><br><span class="line">    //如果char1为空返回空指针</span><br><span class="line">    if(!i)&#123;s1.ch=nullptr;return 0;&#125;</span><br><span class="line">    s1.ch=(char*)malloc(i* sizeof(char));</span><br><span class="line">    for (int j = 0; j &lt;i ; ++j) &#123;</span><br><span class="line">        s1.ch[j]=char1[j];</span><br><span class="line">    &#125;</span><br><span class="line">    s1.length=i;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//把s2和s3链接到s1中</span><br><span class="line">Status Concat(HString &amp;s1,HString s2,HString s3)</span><br><span class="line">&#123;</span><br><span class="line">    //if(s1.ch)free(s1.ch);</span><br><span class="line">    if(s2.length+s3.length&lt;=0)&#123;s1.ch= nullptr;return 0;&#125;</span><br><span class="line">    s1.ch=(char*)malloc((s2.length+s3.length)* sizeof(char));</span><br><span class="line">    for (int i = 0; i &lt; s2.length; ++i) &#123;</span><br><span class="line">        s1.ch[i]=s2.ch[i];</span><br><span class="line">    &#125;</span><br><span class="line">    for (int j = 0; j &lt; s3.length; ++j) &#123;</span><br><span class="line">        s1.ch[j+s2.length]=s3.ch[j];</span><br><span class="line">    &#125;</span><br><span class="line">    s1.length=s2.length+s3.length;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//输出串</span><br><span class="line">Status Printstr(HString &amp;s1)</span><br><span class="line">&#123;</span><br><span class="line">    if(!s1.ch)&#123; return 0;&#125;</span><br><span class="line">    for (int i = 0; i &lt; s1.length; ++i) &#123;</span><br><span class="line">        cout&lt;&lt;s1.ch[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//模式匹配</span><br><span class="line">int Index(string S,string T,int pos)</span><br><span class="line">&#123;</span><br><span class="line">    int i=pos,j=0;</span><br><span class="line">    while (i&lt;S.length()&amp;&amp;j&lt;=T.length())</span><br><span class="line">    &#123;</span><br><span class="line">        if(S[i]==T[j])&#123;++i;++j;&#125;</span><br><span class="line">        else&#123;i=i-j+1;j=0;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(j&gt;=T.length())return i-j+1;</span><br><span class="line">    else return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    string s1,s2;</span><br><span class="line">    HString S1,S2,S3;</span><br><span class="line">    cin&gt;&gt;s1;</span><br><span class="line">    cin&gt;&gt;s2;</span><br><span class="line">    char*s=trans(s1);</span><br><span class="line">    char*m=trans(s2);</span><br><span class="line">    Strassign(S1,s);</span><br><span class="line">    Strassign(S2,m);</span><br><span class="line">    int i=Index(s1,s2,0);</span><br><span class="line">    cout&lt;&lt;i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还有一种bf算法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//BF算法模式匹配</span><br><span class="line">int Index(string S,string T,int pos)</span><br><span class="line">&#123;</span><br><span class="line">    int i=pos,j=0;</span><br><span class="line">    while (i&lt;S.length()&amp;&amp;j&lt;=T.length())</span><br><span class="line">    &#123;</span><br><span class="line">        if(S[i]==T[j])&#123;++i;++j;&#125;</span><br><span class="line">        else&#123;i=i-j+1;j=0;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(j&gt;=T.length())return i-j+1;</span><br><span class="line">    else return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>剩余时间:4天<ahref="https://pintia.cn/problem-sets/1243874236683579392/problems/type/7">返回</a>7-2 jmu-ds-栈与队列-stack、queue与string小综合 (5分)</p><p><strong>使用栈与队列逐个处理字符串中的每个字符</strong></p><p>将line中的字符依次入栈，然后输出栈中元素个数与栈顶元素。<br />然后将栈中元素依次出栈并输出，出栈时将不等于x的字符依次入队列，以空格分隔。<br />输出队列元素个数，队头与队尾，以空格分隔。<br />最后输出队列中所有元素。</p><h3 id="输入格式-1">输入格式:</h3><p>输入一个个字符串 输入一个字符</p><h3 id="输出格式-1">输出格式:</h3><p>栈中元素个数 栈顶元素 栈中符合条件的元素(以空格分隔) 队列中元素个数队头元素 队尾元素 队列中所有元素(以空格分隔)</p><h3 id="输入样例-1">输入样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThisIsATest s</span><br></pre></td></tr></table></figure><h3 id="输出样例-1">输出样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">11 t</span><br><span class="line">tseTAsIsihT</span><br><span class="line">8 t T</span><br><span class="line">teTAIihT</span><br></pre></td></tr></table></figure><p>可以用c++自带的stack和queue库来实现，省去自己写的麻烦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    stack&lt;char&gt;s;</span><br><span class="line">    string str;</span><br><span class="line">    queue&lt;char&gt;Q;</span><br><span class="line">    char x;</span><br><span class="line">    cin&gt;&gt;str;</span><br><span class="line">    for (int i = 0; str[i]!=&#x27;\0&#x27;; ++i) &#123;</span><br><span class="line">        s.push(str[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cin&gt;&gt;x;</span><br><span class="line">    cout&lt;&lt;s.size()&lt;&lt;&quot; &quot;&lt;&lt;s.top()&lt;&lt;endl;</span><br><span class="line">    while(!s.empty()) &#123;</span><br><span class="line">        cout&lt;&lt;s.top();</span><br><span class="line">        if(s.top()!=x)</span><br><span class="line">        &#123;</span><br><span class="line">            Q.push(s.top());</span><br><span class="line">        &#125;</span><br><span class="line">        s.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;Q.size()&lt;&lt;&quot; &quot;&lt;&lt;Q.front()&lt;&lt;&quot; &quot;&lt;&lt;Q.back()&lt;&lt;endl;</span><br><span class="line">    while (!Q.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;Q.front();</span><br><span class="line">        Q.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-2 队列操作 (10分)</title>
      <link href="/2020/04/05/7-2-%E9%98%9F%E5%88%97%E6%93%8D%E4%BD%9C-10%E5%88%86/"/>
      <url>/2020/04/05/7-2-%E9%98%9F%E5%88%97%E6%93%8D%E4%BD%9C-10%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>请实现一个MyQueue类，实现出队，入队，求队列长度.</p><p>实现入队函数 void push(int x); 实现出队函数 int pop();实现求队列长度函数 int size();</p><h3 id="输入格式">输入格式:</h3><p>每个输入包含1个测试用例。每个测试用例第一行给出一个正整数 n (n &lt;=10^6) ，接下去n行每行一个数字，表示一种操作： 1 x ：表示从队尾插入x，0&lt;=x&lt;=2^31-1。 2 ： 表示队首元素出队。 3 ：表示求队列长度。</p><h3 id="输出格式">输出格式:</h3><p>对于操作2,若队列为空，则输出 “Invalid”,否则请输出队首元素。对于操作3，请输出队列长度。 每个输出项最后换行。</p><h3 id="输入样例">输入样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1 100</span><br><span class="line">3</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">Invalid</span><br><span class="line">1</span><br><span class="line">100</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MAXQSIZE 100</span><br><span class="line">#define OK 1</span><br><span class="line">#define ERROR 0</span><br><span class="line">#define OVERFLOW -2</span><br><span class="line">typedef int QElemType;</span><br><span class="line">typedef char SElemType;</span><br><span class="line">typedef int Status;</span><br><span class="line"></span><br><span class="line">    typedef struct &#123;</span><br><span class="line">        QElemType *base;</span><br><span class="line">        int front;</span><br><span class="line">        int rear;</span><br><span class="line">    &#125; SqQueue;</span><br><span class="line"></span><br><span class="line">class MyQueue &#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    Status EnQueue(SqQueue &amp;Q, QElemType e) &#123;</span><br><span class="line">        if (</span><br><span class="line">                Q.front == (Q.rear + 1) % MAXQSIZE</span><br><span class="line">                )</span><br><span class="line">            return ERROR;</span><br><span class="line">        Q.base[Q.rear] = e;</span><br><span class="line"></span><br><span class="line">        Q.rear = (Q.rear + 1) % MAXQSIZE;</span><br><span class="line">        return OK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Status DeQueue(SqQueue &amp;Q) &#123;</span><br><span class="line">        if (</span><br><span class="line">                Q.front == Q.rear</span><br><span class="line">                ) &#123;</span><br><span class="line">            cout &lt;&lt; &quot;Invalid&quot; &lt;&lt; endl;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        int e = Q.base[Q.front];</span><br><span class="line"></span><br><span class="line">        Q.front = (Q.front + 1) % MAXQSIZE;</span><br><span class="line">        cout&lt;&lt;e&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    Status size(SqQueue &amp;Q)</span><br><span class="line">    &#123;</span><br><span class="line">        return(Q.rear-Q.front+MAXQSIZE)%MAXQSIZE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Status InitQueue(SqQueue &amp;Q) &#123;</span><br><span class="line"></span><br><span class="line">        Q.base = new QElemType[MAXQSIZE];</span><br><span class="line">        if (!Q.base)</span><br><span class="line">            exit(OVERFLOW);</span><br><span class="line"></span><br><span class="line">        Q.rear = Q.front = 0;</span><br><span class="line">        return OK;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    SqQueue q;</span><br><span class="line">    MyQueue q1;</span><br><span class="line">    q1.InitQueue(q);</span><br><span class="line">    int n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    for (int i = 0; i &lt; n; ++i) &#123;</span><br><span class="line">        int t;</span><br><span class="line">        cin&gt;&gt;t;</span><br><span class="line">        switch(t) &#123;</span><br><span class="line">            case 1:</span><br><span class="line">                int temp;</span><br><span class="line">                cin&gt;&gt;temp;</span><br><span class="line">                q1.EnQueue(q,temp);</span><br><span class="line">                continue;</span><br><span class="line">            case 2:</span><br><span class="line">                q1.DeQueue(q);</span><br><span class="line">                continue;</span><br><span class="line">            case 3:</span><br><span class="line">                cout&lt;&lt;q1.size(q)&lt;&lt;endl;</span><br><span class="line">                continue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意switch语句需要有continue</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-1 银行业务队列简单模拟 (25分)</title>
      <link href="/2020/04/05/7-1-%E9%93%B6%E8%A1%8C%E4%B8%9A%E5%8A%A1%E9%98%9F%E5%88%97%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F-25%E5%88%86/"/>
      <url>/2020/04/05/7-1-%E9%93%B6%E8%A1%8C%E4%B8%9A%E5%8A%A1%E9%98%9F%E5%88%97%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F-25%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>设某银行有A、B两个业务窗口，且处理业务的速度不一样，其中A窗口处理速度是B窗口的2倍——即当A窗口每处理完2个顾客时，B窗口处理完1个顾客。给定到达银行的顾客序列，请按业务完成的顺序输出顾客序列。假定不考虑顾客先后到达的时间间隔，并且当不同窗口同时处理完2个顾客时，A窗口顾客优先输出。</p><h3 id="输入格式">输入格式:</h3><p>输入为一行正整数，其中第1个数字N(≤1000)为顾客总数，后面跟着N位顾客的编号。编号为奇数的顾客需要到A窗口办理业务，为偶数的顾客则去B窗口。数字间以空格分隔。</p><h3 id="输出格式">输出格式:</h3><p>按业务处理完成的顺序输出顾客的编号。数字间以空格分隔，但最后一个编号后不能有多余的空格。</p><h3 id="输入样例">输入样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8 2 1 3 9 4 11 13 15</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 3 2 9 11 4 13 15</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#define MAXSIZE 1000</span><br><span class="line">#define OVERFLOW -2</span><br><span class="line">#define OK 1</span><br><span class="line">#define ERROR -1</span><br><span class="line">using namespace std;</span><br><span class="line">typedef struct</span><br><span class="line">&#123;</span><br><span class="line">    int *base;</span><br><span class="line">    int front;</span><br><span class="line">    int rear;</span><br><span class="line">&#125; SqQueue;</span><br><span class="line">int InitQueue(SqQueue &amp;Q)</span><br><span class="line">&#123;</span><br><span class="line">    Q.base=new int[MAXSIZE];</span><br><span class="line">    if(!Q.base)</span><br><span class="line">        return OVERFLOW;</span><br><span class="line">    Q.front=Q.rear=0;</span><br><span class="line">    return OK;</span><br><span class="line">&#125;</span><br><span class="line">int DeQueue(SqQueue &amp;Q,int &amp;e)</span><br><span class="line">&#123;</span><br><span class="line">    if(Q.front==Q.rear)</span><br><span class="line">        return ERROR;</span><br><span class="line">    e=Q.base[Q.front];</span><br><span class="line">    Q.front=(Q.front+1)%MAXSIZE;</span><br><span class="line">    return OK;</span><br><span class="line">&#125;</span><br><span class="line">void Print(int *arr,int n)</span><br><span class="line">&#123;</span><br><span class="line">    cout&lt;&lt;arr[0];</span><br><span class="line">    for(int i=1;i&lt;n;i++)</span><br><span class="line">        cout&lt;&lt;&quot; &quot;&lt;&lt;arr[i];</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    SqQueue A,B;</span><br><span class="line">    InitQueue(A);</span><br><span class="line">    InitQueue(B);</span><br><span class="line">    int N,data,tmp,i=0;</span><br><span class="line">    cin&gt;&gt;N;</span><br><span class="line">    int result[N];</span><br><span class="line">    for(int i=0; i&lt;N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;data;</span><br><span class="line">        if(data%2!=0)</span><br><span class="line">        &#123;</span><br><span class="line">            if((A.rear+1)%MAXSIZE==A.front)</span><br><span class="line">                return ERROR;</span><br><span class="line">            A.base[A.rear]=data;</span><br><span class="line">            A.rear=(A.rear+1)%MAXSIZE;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            if((B.rear+1)%MAXSIZE==B.front)</span><br><span class="line">                return ERROR;</span><br><span class="line">            B.base[B.rear]=data;</span><br><span class="line">            B.rear=(B.rear+1)%MAXSIZE;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    while((A.front!=A.rear)&amp;&amp;(B.front!=B.rear))</span><br><span class="line">    &#123;</span><br><span class="line">        DeQueue(A,tmp);</span><br><span class="line">        result[i++]=tmp;</span><br><span class="line">        DeQueue(A,tmp);</span><br><span class="line">        result[i++]=tmp;</span><br><span class="line">        DeQueue(B,tmp);</span><br><span class="line">        result[i++]=tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    while(A.front!=A.rear)</span><br><span class="line">    &#123;</span><br><span class="line">        DeQueue(A,tmp);</span><br><span class="line">        result[i++]=tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    while(B.front!=B.rear)</span><br><span class="line">    &#123;</span><br><span class="line">        DeQueue(B,tmp);</span><br><span class="line">        result[i++]=tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    Print(result,N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-5 括号匹配 (18分)</title>
      <link href="/2020/04/01/7-5-%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D-18%E5%88%86/"/>
      <url>/2020/04/01/7-5-%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D-18%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>检查一段C语言代码的小括号<code>( )</code>、中括号 <code>[ ]</code> 和大括号<code>&#123; &#125;</code> 是否匹配。</p><h3 id="输入格式">输入格式:</h3><p>在一行中输入一段C语言代码，长度不超过1000个字符（行末以换行符结束）。</p><h3 id="输出格式">输出格式:</h3><p>第一行输出左括号的数量和右括号的数量，中间以一个空格间隔。<br />若括号是匹配的，在第二行打印<code>YES</code>，否则打印<code>NO</code>。</p><h3 id="输入样例1">输入样例1:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for(int i=0; i&lt;v; i++)&#123; visited[i] = 0; for(int j=0; j&lt;v; j++) scanf(&quot;%d&quot;,&amp;(g-&gt;Adj[i][j])); &#125;</span><br></pre></td></tr></table></figure><h3 id="输出样例1">输出样例1:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8 8</span><br><span class="line">YES</span><br></pre></td></tr></table></figure><h3 id="输入样例2">输入样例2:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for(int i=0; i&lt;v; i++) a(i]=0;</span><br></pre></td></tr></table></figure><h3 id="输出样例2">输出样例2:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">NO</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">bool is_left_kuohao(char ch)</span><br><span class="line">&#123;</span><br><span class="line">return ch == &#x27;(&#x27;  ch == &#x27;[&#x27;  ch == &#x27;&#123;&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool is_right_kuohao(char ch)</span><br><span class="line">&#123;</span><br><span class="line">return ch == &#x27;)&#x27;  ch == &#x27;]&#x27;  ch == &#x27;&#125;&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool match(char left, char right)</span><br><span class="line">&#123;</span><br><span class="line">return (left == &#x27;(&#x27; &amp;&amp; right == &#x27;)&#x27;) </span><br><span class="line">   (left == &#x27;[&#x27; &amp;&amp; right == &#x27;]&#x27;) </span><br><span class="line">   (left == &#x27;&#123;&#x27; &amp;&amp; right == &#x27;&#125;&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">string line;</span><br><span class="line">getline(cin, line);</span><br><span class="line"></span><br><span class="line">int left_kuohao_count = 0;</span><br><span class="line">int right_kuohao_count = 0;</span><br><span class="line"></span><br><span class="line">for (int i = 0; i &lt; line.length(); i++)</span><br><span class="line">&#123;</span><br><span class="line">if (is_left_kuohao(line[i]))</span><br><span class="line">left_kuohao_count += 1;</span><br><span class="line">if (is_right_kuohao(line[i]))</span><br><span class="line">right_kuohao_count += 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; left_kuohao_count &lt;&lt; &quot; &quot; </span><br><span class="line">     &lt;&lt; right_kuohao_count &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">stack&lt;char&gt; left_kuohaos;</span><br><span class="line"></span><br><span class="line">for (int i = 0; i &lt; line.length(); i++)</span><br><span class="line">&#123;</span><br><span class="line">if (is_left_kuohao(line[i]))</span><br><span class="line">left_kuohaos.push(line[i]);</span><br><span class="line">if (is_right_kuohao(line[i]))</span><br><span class="line">&#123;</span><br><span class="line">if (!left_kuohaos.empty() &amp;&amp; match(left_kuohaos.top(), line[i]))</span><br><span class="line">left_kuohaos.pop();</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; &quot;NO&quot; &lt;&lt; endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if (left_kuohaos.empty())</span><br><span class="line">cout &lt;&lt; &quot;YES&quot; &lt;&lt; endl;</span><br><span class="line">else</span><br><span class="line">cout &lt;&lt; &quot;NO&quot; &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-2 堆栈操作合法性 (20分)</title>
      <link href="/2020/03/31/7-2-%E5%A0%86%E6%A0%88%E6%93%8D%E4%BD%9C%E5%90%88%E6%B3%95%E6%80%A7-20%E5%88%86/"/>
      <url>/2020/03/31/7-2-%E5%A0%86%E6%A0%88%E6%93%8D%E4%BD%9C%E5%90%88%E6%B3%95%E6%80%A7-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>假设以<code>S</code>和<code>X</code>分别表示入栈和出栈操作。如果根据一个仅由<code>S</code>和<code>X</code>构成的序列，对一个空堆栈进行操作，相应操作均可行（如没有出现删除时栈空）且最后状态也是栈空，则称该序列是合法的堆栈操作序列。请编写程序，输入<code>S</code>和<code>X</code>序列，判断该序列是否合法。</p><h3 id="输入格式">输入格式:</h3><p>输入第一行给出两个正整数N和M，其中N是待测序列的个数，M（≤50）是堆栈的最大容量。随后N行，每行中给出一个仅由<code>S</code>和<code>X</code>构成的序列。序列保证不为空，且长度不超过100。</p><h3 id="输出格式">输出格式:</h3><p>对每个序列，在一行中输出<code>YES</code>如果该序列是合法的堆栈操作序列，或<code>NO</code>如果不是。</p><h3 id="输入样例">输入样例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 10</span><br><span class="line">SSSXXSXXSX</span><br><span class="line">SSSXXSXXS</span><br><span class="line">SSSSSSSSSSXSSXXXXXXXXXXX</span><br><span class="line">SSSXXSXXX</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br><span class="line">NO</span><br><span class="line">NO</span><br><span class="line">NO</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MAXSIZE  100</span><br><span class="line">#define ADDSIZE  10</span><br><span class="line">typedef int Status;</span><br><span class="line">typedef char SElemType;</span><br><span class="line"></span><br><span class="line">typedef struct &#123;</span><br><span class="line">    SElemType *base;</span><br><span class="line">    SElemType *top;</span><br><span class="line">    int stacksize;</span><br><span class="line">&#125; SqStack;</span><br><span class="line"></span><br><span class="line">Status Initstack(SqStack &amp;s,int e=MAXSIZE)</span><br><span class="line">&#123;</span><br><span class="line">    s.base=new SElemType[e];</span><br><span class="line">    s.top=s.base;</span><br><span class="line">    s.stacksize=e;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Status push(SElemType e,SqStack &amp;s)</span><br><span class="line">&#123;</span><br><span class="line">    if(s.top-s.base&gt;=s.stacksize)</span><br><span class="line">    &#123;</span><br><span class="line">        /*s.base=(SElemType*)realloc(s.base,(s.stacksize+ADDSIZE)* sizeof(SElemType));</span><br><span class="line">        if(!s.base)</span><br><span class="line">            exit(EOVERFLOW);</span><br><span class="line">        s.top=s.base+s.stacksize;</span><br><span class="line">        s.stacksize+=ADDSIZE;*/</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    *s.top++=e;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Status pop(SElemType &amp;e,SqStack &amp;s)</span><br><span class="line">&#123;</span><br><span class="line">    if(s.top==s.base)return 0;</span><br><span class="line">    e=*--s.top;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Status GetTop(SElemType &amp;e,SqStack &amp;s)</span><br><span class="line">&#123;</span><br><span class="line">    if(s.top==s.base)return 0;</span><br><span class="line">    e=*(s.top-1);</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool Isright(string s,int e)</span><br><span class="line">&#123;</span><br><span class="line">    int i=0,f=1;</span><br><span class="line">    SqStack sq;</span><br><span class="line">    Initstack(sq,e);</span><br><span class="line">    while (s[i] != &#x27;\0&#x27;)</span><br><span class="line">    &#123;</span><br><span class="line">        if(s[i]==&#x27;S&#x27;) &#123;</span><br><span class="line">            if (push(s[i],sq) == 1)</span><br><span class="line">                i++;</span><br><span class="line">            else</span><br><span class="line">                &#123;</span><br><span class="line">                f = 0;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            if (pop(s[i],sq) == 1)</span><br><span class="line">                i++;</span><br><span class="line">            else &#123;</span><br><span class="line">                f = 0;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(sq.top==sq.base&amp;&amp;s[i]==&#x27;\0&#x27;)</span><br><span class="line">        f=1;</span><br><span class="line">    else</span><br><span class="line">        f=0;</span><br><span class="line">    return f == 1;</span><br><span class="line">&#125;</span><br><span class="line">bool IsRight(string s,int L)</span><br><span class="line">&#123;</span><br><span class="line">    int i=0,flag=1;</span><br><span class="line">    SqStack sq;</span><br><span class="line">    Initstack(sq,L);</span><br><span class="line">    while(s[i]!=&#x27;\0&#x27;)</span><br><span class="line">    &#123;</span><br><span class="line">        if(s[i]==&#x27;S&#x27;)</span><br><span class="line">        &#123;</span><br><span class="line">            if(push(s[i],sq)==1)</span><br><span class="line">                i++;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                flag=0;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            if(pop(s[i],sq)==1)</span><br><span class="line">                i++;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                flag=0;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if((sq.top==sq.base) &amp;&amp; s[i]==&#x27;\0&#x27;)</span><br><span class="line">        flag=1;</span><br><span class="line">    else</span><br><span class="line">        flag=0;</span><br><span class="line">    return flag == 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int m,n;</span><br><span class="line">    string ss;</span><br><span class="line">    cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">    for (int u = 0; u &lt; m; ++u) &#123;</span><br><span class="line">        cin&gt;&gt;ss;</span><br><span class="line">        if (IsRight(ss,n)== true)</span><br><span class="line">            cout&lt;&lt;&quot;YES&quot;&lt;&lt;endl;</span><br><span class="line">        else</span><br><span class="line">            cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>逆波兰式/后缀表达式</title>
      <link href="/2020/03/24/%E9%80%86%E6%B3%A2%E5%85%B0%E5%BC%8F-%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2020/03/24/%E9%80%86%E6%B3%A2%E5%85%B0%E5%BC%8F-%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/03/image-5.png" /></p><p>下面以(a+b)*c为例子进行说明：(a+b)*c的逆波兰式为ab+c*，假设计算机把ab+c*按从左到右的顺序压入栈中，并且按照遇到<ahref="https://baike.baidu.com/item/%E8%BF%90%E7%AE%97%E7%AC%A6">运算符</a>就把栈顶两个元素<ahref="https://baike.baidu.com/item/%E5%87%BA%E6%A0%88">出栈</a>，执行运算，得到的结果再入栈的原则来进行处理，那么ab+c*的执行结果如下：1）a入栈（0位置）2）b入栈（1位置）3）遇到运算符“+”，将a和b出栈，执行a+b的操作，得到结果d=a+b，再将d入栈（0位置）4）c入栈（1位置）5）遇到运算符“*”，将d和c出栈，执行d*c的操作，得到结果e，再将e入栈（0位置）经过以上运算，计算机就可以得到(a+b)*c的运算结果e了。逆波兰式除了可以实现上述类型的运算，它还可以派生出许多新的算法，数据结构，这就需要灵活运用了。逆波兰式只是一种序列体现形式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">int precede(char op)</span><br><span class="line">&#123; int x;</span><br><span class="line">switch(op)</span><br><span class="line">&#123;</span><br><span class="line">case &#x27;*&#x27;: x=2; break;</span><br><span class="line">case &#x27;/&#x27;: x=2; break;</span><br><span class="line">case &#x27;+&#x27;: x=1; break;</span><br><span class="line">case &#x27;-&#x27;: x=1; break;</span><br><span class="line">default : x=0;</span><br><span class="line">&#125;</span><br><span class="line">return x;</span><br><span class="line">&#125;</span><br><span class="line">char *RPExpression(char *e)</span><br><span class="line">&#123;/* 返回表达式e的逆波兰式 */</span><br><span class="line">char *c;</span><br><span class="line">c=(char*)malloc(sizeof(char)*20); //不能用char c[]</span><br><span class="line">Stack s1;</span><br><span class="line">InitStack(s1);</span><br><span class="line">int i=0,j=0;</span><br><span class="line">char ch;</span><br><span class="line">Push(s1,&#x27;@&#x27;);</span><br><span class="line">ch=e[i++];</span><br><span class="line">while(ch!= 0)</span><br><span class="line">&#123;</span><br><span class="line">if(ch==&#x27;(&#x27;)</span><br><span class="line">&#123;</span><br><span class="line">Push(s1,ch);</span><br><span class="line">ch=e[i++];</span><br><span class="line">&#125;</span><br><span class="line">else if(ch==&#x27;)&#x27;)</span><br><span class="line">&#123;</span><br><span class="line">while(Top(s1)!=&#x27;(&#x27;)</span><br><span class="line">&#123;</span><br><span class="line">Pop(s1,c[j++]);</span><br><span class="line">&#125;</span><br><span class="line">/* to[j++]=pop(&amp;s1);*/</span><br><span class="line">Pop(s1,ch);</span><br><span class="line">ch=e[i++];</span><br><span class="line">&#125;</span><br><span class="line">else if(ch==&#x27;+&#x27;ch==&#x27;-&#x27;ch==&#x27;*&#x27;ch==&#x27;/&#x27;)</span><br><span class="line">&#123;</span><br><span class="line">char w;</span><br><span class="line">w=Top(s1);</span><br><span class="line">while(precede(w)&gt;=precede(ch))</span><br><span class="line">&#123;</span><br><span class="line">Pop(s1,c[j++]);</span><br><span class="line">w=Top(s1);</span><br><span class="line">&#125;</span><br><span class="line">Push(s1,ch);</span><br><span class="line">ch=e[i++];</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">//while((ch&lt;=&#x27;z&#x27;&amp;&amp;ch&gt;=&#x27;a&#x27;)(ch&lt;=&#x27;Z&#x27; &amp;&amp; ch&gt;=&#x27;A&#x27;))&#123;</span><br><span class="line">c[j++]=ch;</span><br><span class="line">ch=e[i++];</span><br><span class="line">//&#125;</span><br><span class="line">//c[j++]=&#x27; &#x27;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">Pop(s1,ch);</span><br><span class="line">while(ch!=&#x27;@&#x27;)</span><br><span class="line">&#123;</span><br><span class="line">c[j++]=ch;</span><br><span class="line">Pop(s1,ch);</span><br><span class="line">&#125;</span><br><span class="line">//c[j++]=;</span><br><span class="line">c[j++]=0;</span><br><span class="line">return c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-2 两个有序链表序列的合并 (20分)</title>
      <link href="/2020/03/09/7-2-%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8%E5%BA%8F%E5%88%97%E7%9A%84%E5%90%88%E5%B9%B6-20%E5%88%86/"/>
      <url>/2020/03/09/7-2-%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8%E5%BA%8F%E5%88%97%E7%9A%84%E5%90%88%E5%B9%B6-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>已知两个非降序链表序列S1与S2，设计函数构造出S1与S2合并后的新的非降序链表S3。</p><h3 id="输入格式">输入格式:</h3><p>输入分两行，分别在每行给出由若干个正整数构成的非降序序列，用−1表示序列的结尾（−1不属于这个序列）。数字用空格间隔。</p><h3 id="输出格式">输出格式:</h3><p>在一行中输出合并后新的非降序链表，数字间用空格分开，结尾不能有多余空格；若新链表为空，输出<code>NULL</code>。</p><h3 id="输入样例">输入样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 3 5 -1</span><br><span class="line">2 4 6 8 10 -1</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5 6 8 10</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;malloc.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef int Status;</span><br><span class="line">typedef int Elemtype;</span><br><span class="line">typedef struct LNode</span><br><span class="line">&#123;</span><br><span class="line">    Elemtype data;</span><br><span class="line">    LNode *next;</span><br><span class="line">&#125;LNode,*LinkList;</span><br><span class="line"></span><br><span class="line">LinkList endCreate()</span><br><span class="line">&#123;</span><br><span class="line">    LinkList L,p,s;</span><br><span class="line">    Elemtype e;</span><br><span class="line">    L=(LinkList)malloc(sizeof(LNode));</span><br><span class="line">    L-&gt;next=NULL;</span><br><span class="line">    p=L;</span><br><span class="line">    cin&gt;&gt;e;</span><br><span class="line">    while (e!=-1)</span><br><span class="line">    &#123;</span><br><span class="line">        s=(LinkList)malloc(sizeof(LNode));</span><br><span class="line">        s-&gt;data=e;</span><br><span class="line">        p-&gt;next=s;</span><br><span class="line">        p=s;</span><br><span class="line">        cin&gt;&gt;e;</span><br><span class="line">    &#125;</span><br><span class="line">    p-&gt;next=NULL;</span><br><span class="line">    return L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkList headCreate()</span><br><span class="line">&#123;</span><br><span class="line">    LinkList L,s;</span><br><span class="line">    Elemtype e;</span><br><span class="line">    L=(LinkList)malloc(sizeof(LNode));</span><br><span class="line">    L-&gt;next=NULL;</span><br><span class="line">    cin&gt;&gt;e;</span><br><span class="line">    while (e!=-1)</span><br><span class="line">    &#123;</span><br><span class="line">        s=(LinkList)malloc(sizeof(LNode));</span><br><span class="line">        s-&gt;data=e;</span><br><span class="line">        s-&gt;next=L-&gt;next;</span><br><span class="line">        L-&gt;next=s;</span><br><span class="line">        cin&gt;&gt;e;</span><br><span class="line">    &#125;</span><br><span class="line">    return L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void print(LinkList list)</span><br><span class="line">&#123;</span><br><span class="line">    LinkList e;</span><br><span class="line">    e=list-&gt;next;</span><br><span class="line">    if(!e)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;&quot;NULL&quot;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        while (e-&gt;next) &#123;</span><br><span class="line">            cout &lt;&lt; e-&gt;data &lt;&lt; &quot; &quot;;</span><br><span class="line">            e = e-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; e-&gt;data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">void merge(LinkList L1,LinkList L2,LinkList &amp;L3)</span><br><span class="line">&#123;</span><br><span class="line">    LinkList l1=L1-&gt;next,l2=L2-&gt;next,l3;</span><br><span class="line">    l3=L3=L1;</span><br><span class="line">    while (l1&amp;&amp;l2)</span><br><span class="line">    &#123;</span><br><span class="line">        if (l1-&gt;data&lt;=l2-&gt;data)</span><br><span class="line">        &#123;</span><br><span class="line">            l3-&gt;next=l1;</span><br><span class="line">            l3=l1;</span><br><span class="line">            l1=l1-&gt;next;</span><br><span class="line">        &#125; else</span><br><span class="line">        &#123;</span><br><span class="line">            l3-&gt;next=l2;</span><br><span class="line">            l3=l2;</span><br><span class="line">            l2=l2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    l3-&gt;next=l1?l1:l2;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    LinkList L1,L2,L3;</span><br><span class="line">    L1=endCreate();</span><br><span class="line">    L2=endCreate();</span><br><span class="line">    merge(L1,L2,L3);</span><br><span class="line">    print(L3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这道题两点重点，第一是实现merge操作。传进去两个链表和第三个的引用，然后一直判断直到某一个结束，如果L3后边是L1说明L1还有剩下的，如果不是说明剩下的都是L2后边；</p><p>第二个是输出，需要注意如果是空就输出NULL，他是让打印出NULL而不是return。。。</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-1 求链式线性表的倒数第K项 (20分)</title>
      <link href="/2020/03/08/7-1-%E6%B1%82%E9%93%BE%E5%BC%8F%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACk%E9%A1%B9-20%E5%88%86/"/>
      <url>/2020/03/08/7-1-%E6%B1%82%E9%93%BE%E5%BC%8F%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACk%E9%A1%B9-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>给定一系列正整数，请设计一个尽可能高效的算法，查找倒数第K个位置上的数字。</p><span id="more"></span><h3 id="输入格式">输入格式:</h3><p>输入首先给出一个正整数K，随后是若干正整数，最后以一个负整数表示结尾（该负数不算在序列内，不要处理）。</p><h3 id="输出格式">输出格式:</h3><p>输出倒数第K个位置上的数据。如果这个位置不存在，输出错误信息<code>NULL</code>。</p><h3 id="输入样例">输入样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4 1 2 3 4 5 6 7 8 9 0 -1</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int  k , cnt=0,tmp,flag=0,found = 0;</span><br><span class="line">    cin&gt;&gt;k;</span><br><span class="line">    int* num=(int*)malloc(sizeof(int)*k); //只存k个正整数</span><br><span class="line">    while(1)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;tmp);</span><br><span class="line">        if(tmp&lt;0)                         //tmp为-1退出循环</span><br><span class="line">            break;</span><br><span class="line">        num[cnt++]=tmp;</span><br><span class="line">        if(!found&amp;&amp;cnt&gt;=k)</span><br><span class="line">            found=1;</span><br><span class="line">        cnt%=k;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    if(found==0)</span><br><span class="line">        printf(&quot;NULL&quot;);</span><br><span class="line">    else</span><br><span class="line">        printf(&quot;%d&quot;,num[cnt]);//输出位于最后输入的元素的下一个元素，因为最后输入的元素就是倒数第一个元素，cnt++后指向它的下一个元素，只存了k个，所以它的下一个就是倒数第k个了</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这里只要cnt大于k则一定会找到，found就会变成1不会变回去</p><p>关键在于只分配k个大小xxx-10kk+1xxxx</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>单链表</title>
      <link href="/2020/03/07/%E5%8D%95%E9%93%BE%E8%A1%A8/"/>
      <url>/2020/03/07/%E5%8D%95%E9%93%BE%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>2-3某线性表中最常用的操作是在最后一个元素之后插入一个元素和删除第一个元素，则采用什么存储方式最节省运算时间？ (2分)b</p><ol type="1"><li>单链表</li><li>仅有尾指针的单循环链表</li><li>仅有头指针的单循环链表</li><li>双链表</li></ol><p>c虽然可以直接获得第一个元素，但是想要获得最后一个元素却需要遍历整个链表。而b给出的是带有尾结点的单循环链表，这样就可以直接得到最后一个元素，想要得到第一个元素只需要再遍历一个元素就可以，所以选择b</p><p>1-22下列函数试图求链式存储的线性表的表长，是否正确？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int  Length ( List  *PtrL )</span><br><span class="line">&#123;    List  *p = PtrL;      </span><br><span class="line">     int  j = 0;</span><br><span class="line">     while ( p ) &#123; </span><br><span class="line">           p++; </span><br><span class="line">           j++;                 </span><br><span class="line">     &#125;   </span><br><span class="line">     return  j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>F p++不能指向后一个元素</p><p>2-4</p><p>若某表最常用的操作是在最后一个结点之后插入一个结点或删除最后一个结点。则采用哪种存储方式最节省运算时间？ (2分)</p><ol type="1"><li>单链表</li><li>双链表</li><li>单循环链表</li><li>带头结点的双循环链表</li></ol><p>D 头结点上一个就是最后一个节点</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/03/image-1024x454.png" /></p><p>这道题的逻辑，简单来说，就是地址存放你当前元素的地址，链接地址是指向当前元素的下一个元素的地址。因此，我们来看没插入f之前时，链表的顺序，由于头元素是c（地址1008H），由C开始，C的链接地址是1000H，也就是指向元素a（地址1000H），之后a的链接地址是1010H，也就是指向元素e。。。按照上面这个思路遍历，我们可以得到链表的遍历顺序c（1008H）-&gt;a（1000H）-&gt;e（1010H）-&gt;b（1004H）-&gt;d（100CH）-&gt;null。由于f逻辑上位于a和e之间，因此也就是说将f插入到ae之间，因此只需要修改a的链接地址（也就是指向下一个元素的地址）为f的地址（1014H），然后将f的链接地址修改为e的地址。<br />链表插入不影响其他元素，所以其他元素链接地址不变。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/03/image-1.png" /></p><p>不带表头结点，头指针直接指向数据</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/03/image-2.png" /></p><p>在m之后</p><p>在一个长度为 n （ n&gt;1 ）的单链表上，设有头和尾两个指针，执行操作与链表的长度有关。</p><ul><li>删除单链表中的第一个元素</li><li>删除单链表中的最后一个元素</li><li>在单链表第一个元素前插入一个新元素</li><li>在单链表最后一个元素后插入一个新元素</li></ul><p>A<br />头指针是指向第一个元素（结点）的指针。当<strong>删除单链表中的第一个元素</strong>时只需要将头指针指向第二个元素，然后释放第一个元素储存空间申请的内存。与链表长度无关。</p><p>123</p><p><code>ListNode *temp = head-&gt;next;``head-&gt;next = temp-&gt;next;``free``(temp);</code></p><p>B<br />尾指针是指向最后一个元素（结点）的指针，与头指针类似。当<strong>删除单链表中的最后一个元素</strong>时由于不是双向链表，所以要从头指针开始，一直遍历直到倒数第二个元素，将倒数第二个元素（结点）指向NULL，释放原末端元素（结点）空间后，将尾指针等于新的末端元素（结点）。所以与链表长度有关。</p><p>12345</p><p><code>ListNode *p = head;``while``(p-&gt;next != rear) p = p-&gt;next;``p-&gt;next = NULL;``free``(r);``r = p;</code></p><p>C<strong>在单链表第一个元素前插入一个新元素</strong>时，只需要把新的元素（结点）指向原来的第一个元素（结点），然后使头指针指向新的元素（结点）。与链表长度无关。</p><p>12</p><p><code>new_point-&gt;next = head-&gt;next;``head-&gt;next = new_point;</code></p><p>D<strong>在单链表最后一个元素后插入一个新元素</strong>时，只需先将新结点指向NULL，然后将尾指针指向的原末端结点指向新的元素（结点），最后将尾指针指向新的元素（结点）。与链表长度无关。</p><p>123</p><p><code>new_point-&gt;next = NULL;``rear-&gt;next = new_point;``rear = new_point;</code></p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/03/image-3.png" /></p><p>静态链表:数组的每一个下标都对应一个data和一个cur。数据域data用来存放数据元素，；而游标cur相当于单链表中的next指针，</p><p>存放该元素的后继在数组中的下标。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/03/image-4.png" /></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>clion的安装和配置</title>
      <link href="/2020/03/05/clion%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/03/05/clion%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>写代码时一个易用的编译器是很重要的，若想写c/c++我推荐jetbrain家的clion，真的很方便</p><p>首先去官网下载<ahref="https://www.jetbrains.com/clion/">官网页面</a>并安装</p><p>在这不提供破解方法，建议支持正版，破解方法可以在百度上搜索到</p><p>之后需要下载一个c/c++的译码器，我在这用的是MingW.不建议去官网下载，因为即使科学上网速度也还是很慢而且容易出错</p><p>在这提供我的百度网盘收藏链接，直接下载安装即可</p><p>链接：https://pan.baidu.com/s/1xYOb-eYFKSfJgwFxG9fZWw<br />提取码：kiec</p><p><strong>（2）配置CLion</strong><br />打开CLion，左上角File-Settings-Build-Toolchains，然后点击<strong>+</strong> 号</p><p><imgsrc="//upload-images.jianshu.io/upload_images/13625730-59b19c35c9589ad0.png?imageMogr2/auto-orient/stripimageView2/2/w/908/format/webp" /></p><p>settings</p><p><imgsrc="//upload-images.jianshu.io/upload_images/13625730-9c1c7b4ac50f2320.png?imageMogr2/auto-orient/stripimageView2/2/w/624/format/webp" /></p><p>toolchains</p><p>Environment选择MinGW，然后填入刚刚解压的MinGW64的路径（这是我的路径）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\71022\Documents\mingw64</span><br></pre></td></tr></table></figure><p><imgsrc="//upload-images.jianshu.io/upload_images/13625730-c97f11fcde1a679f.png?imageMogr2/auto-orient/stripimageView2/2/w/780/format/webp" /></p><p>image.png</p><p>然后CLion会自动帮你填上所有你该填的东西，点击OK，等调试的小虫子变绿就可以了。</p><p><imgsrc="//upload-images.jianshu.io/upload_images/13625730-9f5aa1e8408cef27.png?imageMogr2/auto-orient/stripimageView2/2/w/781/format/webp" /></p><p>image.png</p><p><strong>当然，也会出现无法检测成功的情况，这时候就需要手动填写啦。</strong><br />CMake一般会自动选择。<br />Make填入路径：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\71022\Documents\mingw64\bin\mingw32-make.exe</span><br></pre></td></tr></table></figure><p>C Compiler填入路径：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\71022\Documents\mingw64\bin\gcc.exe</span><br></pre></td></tr></table></figure><p>C++ Compiler填入路径：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\71022\Documents\mingw64\bin\g++.exe</span><br></pre></td></tr></table></figure><p>Debugger一般会自己填入，如果没有可以手动填：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\71022\Documents\mingw64\bin\gdb.exe</span><br></pre></td></tr></table></figure><p>然后OK，等一段时间就可以了。</p>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-3 学生顺序表的建立 (10分)</title>
      <link href="/2020/03/05/7-3-%E5%AD%A6%E7%94%9F%E9%A1%BA%E5%BA%8F%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B-10%E5%88%86/"/>
      <url>/2020/03/05/7-3-%E5%AD%A6%E7%94%9F%E9%A1%BA%E5%BA%8F%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B-10%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>完成对一个顺序表的建立，表中的每个元素是同学们的学号、姓名和三门课程的成绩，输入5个同学的信息，然后显示在屏幕上。（要求利用顺序表的基本操作）</p><h3 id="输入格式">输入格式:</h3><p>首先收入学生人数5，然后依次输入5个学生的学号、姓名和三门课的成绩</p><h3 id="输出格式">输出格式:</h3><p>输入5个学生的学号、姓名和三门课的成绩</p><h3 id="输入样例">输入样例:</h3><p>5 01 张三 89 89 89 02 李四 90 90 90 03 王五 89 89 89 04 钱六 97 97 9705 赵倩 90 90 90</p><h3 id="输出样例">输出样例:</h3><p>1 张三 89.0 89.0 89.0 2 李四 90.0 90.0 90.0 3 王五 89.0 89.0 89.0 4钱六 97.0 97.0 97.0 5 赵倩 90.0 90.0 90.0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">struct STU</span><br><span class="line">&#123;</span><br><span class="line">    int id;</span><br><span class="line">    char name[20];</span><br><span class="line">    float score1;</span><br><span class="line">    float score2;</span><br><span class="line">    float score3;</span><br><span class="line">&#125;stu[20];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int m;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;m);</span><br><span class="line">    for (int i = 0; i &lt;m ; ++i) &#123;</span><br><span class="line">        scanf(&quot;%d%s%f%f%f&quot;,&amp;stu[i].id,&amp;stu[i].name,&amp;stu[i].score1,&amp;stu[i].score2,&amp;stu[i].score3);</span><br><span class="line">    &#125;</span><br><span class="line">    for (int j = 0; j &lt; m-1; ++j) &#123;</span><br><span class="line">        printf(&quot;%d %s %.1f %.1f %.1f\n&quot;,j+1,stu[j].name,stu[j].score1,stu[j].score2,stu[j].score3);</span><br><span class="line">    &#125;</span><br><span class="line">    int j=m-1;</span><br><span class="line">    printf(&quot;%d %s %.1f %.1f %.1f&quot;,j+1,stu[j].name,stu[j].score1,stu[j].score2,stu[j].score3);</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-4 顺序表的建立及遍历 (30分)</title>
      <link href="/2020/02/28/7-4-%E9%A1%BA%E5%BA%8F%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B%E5%8F%8A%E9%81%8D%E5%8E%86-30%E5%88%86/"/>
      <url>/2020/02/28/7-4-%E9%A1%BA%E5%BA%8F%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B%E5%8F%8A%E9%81%8D%E5%8E%86-30%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>读入n值及n个整数，建立顺序表并遍历输出。</p><h3 id="输入格式">输入格式:</h3><p>读入n及n个整数</p><h3 id="输出格式">输出格式:</h3><p>输出n个整数，以空格分隔（最后一个数的后面没有空格）。</p><h3 id="输入样例">输入样例:</h3><p>在这里给出一组输入。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">-3 10 20 78</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><p>在这里给出相应的输出。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-3 10 20 78</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;malloc.h&gt;</span><br><span class="line">#define list 10</span><br><span class="line">#define max 10</span><br><span class="line"> </span><br><span class="line">typedef int Elemtype;</span><br><span class="line">typedef struct sqlist *List;</span><br><span class="line">struct sqlist&#123;</span><br><span class="line">Elemtype *elem;</span><br><span class="line">int length;</span><br><span class="line">int listsize;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">void initlist(List L)&#123;</span><br><span class="line">L-&gt;elem=(Elemtype *)malloc(list*sizeof(Elemtype));</span><br><span class="line">L-&gt;length=0;</span><br><span class="line">L-&gt;listsize=max;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void creat(List L)&#123;</span><br><span class="line">initlist(L);</span><br><span class="line">int i,n;</span><br><span class="line">scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">for(i=0;i&lt;n;i++) &#123;</span><br><span class="line">   scanf(&quot;%d&quot;,&amp;L-&gt;elem[i]);</span><br><span class="line">   L-&gt;length++;</span><br><span class="line">   if(L-&gt;length==L-&gt;listsize) &#123;</span><br><span class="line">int *new_elem = (Elemtype *)malloc((L-&gt;listsize+list)*sizeof(Elemtype));</span><br><span class="line">memcpy(new_elem,L-&gt;elem,L-&gt;length);</span><br><span class="line">L-&gt;elem = new_elem;</span><br><span class="line">L-&gt;listsize+=list;</span><br><span class="line">   &#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void print(List L) &#123;</span><br><span class="line">for(int i=0; i&lt;L-&gt;length;i++) &#123;</span><br><span class="line">if(i==L-&gt;length-1)</span><br><span class="line">printf(&quot;%d&quot;,L-&gt;elem[i]);</span><br><span class="line">else</span><br><span class="line">printf(&quot;%d &quot;,L-&gt;elem[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int main()&#123;</span><br><span class="line">List L = (List)malloc(sizeof(struct sqlist));</span><br><span class="line">initlist(L);</span><br><span class="line">creat(L);</span><br><span class="line">print(L);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-5 求集合交集 (20分)</title>
      <link href="/2020/02/28/7-5-%E6%B1%82%E9%9B%86%E5%90%88%E4%BA%A4%E9%9B%86-20%E5%88%86/"/>
      <url>/2020/02/28/7-5-%E6%B1%82%E9%9B%86%E5%90%88%E4%BA%A4%E9%9B%86-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>求整数集合A与整数集合B的交集。</p><h3 id="输入格式">输入格式:</h3><p>输入有三行： 第一行是A和B的元素个数m和n； 第二行是集合A的m个元素；第三行是集合A的n个元素。</p><h3 id="输出格式">输出格式:</h3><p>输出交集的所有元素（按照在A集合出现的顺序输出，最后一个输出后面没有空格）。</p><h3 id="输入样例">输入样例:</h3><p>在这里给出一组输入。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 4</span><br><span class="line">10 9 2</span><br><span class="line">9 10 8 0</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例:</h3><p>在这里给出相应的输出。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 9</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a,b,alist[999],blist[999];</span><br><span class="line">    scanf(&quot;%d%d&quot;,&amp;a,&amp;b);</span><br><span class="line">    for(int i=0;i&lt;a;i++)&#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;alist[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    for(int j=0;j&lt;b;j++)&#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;blist[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    int clist[999]=&#123;0&#125;;</span><br><span class="line">    int q=0;</span><br><span class="line">    for(int k=0;k&lt;a;k++)&#123;</span><br><span class="line">        int temp=alist[k];</span><br><span class="line">        for(int p=0;p&lt;b;p++)&#123;</span><br><span class="line">            if(temp==blist[p])&#123;</span><br><span class="line">                clist[q]=temp;</span><br><span class="line">                q++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (q&gt;0)&#123;</span><br><span class="line">    for(int u=0;u&lt;q-1;u++)&#123;</span><br><span class="line">        printf(&quot;%d &quot;,clist[u]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%d&quot;,clist[q-1]);</span><br><span class="line">    return 0;&#125; else&#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-2 jmu-ds-顺序表区间元素删除 (15分)</title>
      <link href="/2020/02/28/7-2-jmu-ds-%E9%A1%BA%E5%BA%8F%E8%A1%A8%E5%8C%BA%E9%97%B4%E5%85%83%E7%B4%A0%E5%88%A0%E9%99%A4-15%E5%88%86/"/>
      <url>/2020/02/28/7-2-jmu-ds-%E9%A1%BA%E5%BA%8F%E8%A1%A8%E5%8C%BA%E9%97%B4%E5%85%83%E7%B4%A0%E5%88%A0%E9%99%A4-15%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>若一个线性表L采用顺序存储结构存储，其中所有的元素为整数。设计一个算法，删除元素值在[x,y]之间的所有元素，要求算法的时间复杂度为O(n)，空间复杂度为O(1)。</p><h3 id="输入格式">输入格式:</h3><p>三行数据，第一行是顺序表的元素个数，第二行是顺序表的元素，第三行是x和y。</p><h3 id="输出格式">输出格式:</h3><p>删除元素值在[x,y]之间的所有元素后的顺序表。</p><h3 id="输入样例">输入样例:</h3><p>10<br />5 1 9 10 67 12 8 33 6 2<br />3 10</p><h3 id="输出样例">输出样例:</h3><p>1 67 12 33 2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int m;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;m );</span><br><span class="line"></span><br><span class="line">    int list[999];</span><br><span class="line">    for (int i = 0; i &lt; m; ++i) &#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;list[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int x,y;</span><br><span class="line">    scanf(&quot;%d%d&quot;,&amp;x,&amp;y);</span><br><span class="line"></span><br><span class="line">    int list2[999],q=0;</span><br><span class="line"></span><br><span class="line">    for (int j = 0; j &lt; m; ++j) &#123;</span><br><span class="line">        if (x&gt;list[j]y&lt;list[j])</span><br><span class="line">        &#123;</span><br><span class="line">            list2[q]=list[j];</span><br><span class="line">            q++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; q-1; ++i) &#123;</span><br><span class="line">        printf(&quot;%d &quot;,list2[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%d&quot;,list2[q-1]);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>7-1 数组循环左移 (20分)</title>
      <link href="/2020/02/28/7-1-%E6%95%B0%E7%BB%84%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB-20%E5%88%86/"/>
      <url>/2020/02/28/7-1-%E6%95%B0%E7%BB%84%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB-20%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>本题要求实现一个对数组进行循环左移的简单函数：一个数组_a_中存有_n_（&gt;0）个整数，在不允许使用另外数组的前提下，将每个整数循环向左移_m_（≥0）个位置，即将_a_中的数据由（<em>a</em>​0​​<em>a</em>​1​​⋯<em>a</em>​<em>n</em>−1​​）变换为（<em>a</em>​<em>m</em>​​⋯<em>a</em>​<em>n</em>−1​​<em>a</em>​0​​<em>a</em>​1​​⋯<em>a</em>​<em>m</em>−1​​）（最前面的_m_个数循环移至最后面的_m_个位置）。如果还需要考虑程序移动数据的次数尽量少，要如何设计移动的方法？</p><h3 id="输入格式">输入格式:</h3><p>输入第1行给出正整数_n_（≤100）和整数_m_（≥0）；第2行给出_n_个整数，其间以空格分隔。</p><h3 id="输出格式">输出格式:</h3><p>在一行中输出循环左移_m_位以后的整数序列，之间用空格分隔，序列结尾不能有多余空格。</p><h3 id="输入样例">输入样例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8 3</span><br><span class="line">1 2 3 4 5 6 7 8</span><br></pre></td></tr></table></figure><h3 id="输出样例">输出样例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4 5 6 7 8 1 2 3</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int m,n;</span><br><span class="line">    scanf(&quot;%d%d&quot;,&amp;m,&amp;n );</span><br><span class="line">    </span><br><span class="line">    int list[999];</span><br><span class="line">    for (int i = 0; i &lt; m; ++i) &#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;list[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    for (int j = 0; j &lt; n; ++j) &#123;</span><br><span class="line">        int temp = list[0];</span><br><span class="line">        for (int i = 1; i &lt;m ; ++i) &#123;</span><br><span class="line">            list[i-1]=list[i];</span><br><span class="line">        &#125;</span><br><span class="line">        list[m-1]=temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; m-1; ++i) &#123;</span><br><span class="line">        printf(&quot;%d &quot;,list[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%d&quot;,list[m-1]);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>C语言数组操作</title>
      <link href="/2020/02/28/c%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/"/>
      <url>/2020/02/28/c%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>1.数组定义</p><p>int a[5]</p><p>int a[5] = {1,2,3}</p><p>int a[]={1,2,3,4,5}</p><p>int a[5]={1,2,3,4,5}</p><p>例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># include &lt;stdio.h&gt;</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int a[5] = &#123;0&#125;;  //数组清零初始化</span><br><span class="line">    int i;</span><br><span class="line">    printf(&quot;请输入5个数:&quot;);</span><br><span class="line">    for (i=0; i&lt;5; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(&quot;%d&quot;, &amp;a[i] );</span><br><span class="line">    &#125;</span><br><span class="line">    for (i=0; i&lt;5; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;%d\x20&quot;, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C/C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第二章 链式表</title>
      <link href="/2020/02/28/%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E9%93%BE%E5%BC%8F%E8%A1%A8/"/>
      <url>/2020/02/28/%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E9%93%BE%E5%BC%8F%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>顺序表中增加一个数据平均n/2，删除一个平均(n-1)/2</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/02/image-2.png" /></p><p>计算方法位100+（5-1）*2</p><p>线性表的顺序存储结构和线性表的链式存储结构分别是(B )。</p><p>A．顺序存取的存储结构、顺序存取的存储结构<br />B．随机存取的存储结构、顺序存取的存储结构<br />C．随机存取的存储结构、随机存取的存储结构<br />D．任意存取的存储结构、任意存取的存储结构</p><h3 id="答案解析"><strong>答案解析</strong></h3><p>顺序存储结构中，数据元素存放在一组地址连续的存储单元中，每个数据元素地址可通过公式LOC(ai)=LOC(a1)+(i-1)L计算得到，从而实现了随机存取。对于链式存储结构，要对某结点进行存取，都得从链的头指针指向的结点开始，这是一种顺序存取的存储结构。</p><p>顺序表是线性表的（ ）存储表示。 (2分)</p><ol type="1"><li>有序</li><li>连续</li><li>数组</li><li>顺序存取</li></ol><p>若长度为n的非空线性表采用顺序存储结构，在表的第i个位置插入一个数据元素的合法值应该是（）。 (2分)</p><ol type="1"><li>1≤i≤n</li><li>1≤i≤n+1</li><li>0≤i≤n-1</li><li>0≤i≤n</li></ol><p>若线性表最常用的操作是存取第i个元素及其前驱的值，则采用()存储方式节省时间。 (2分)</p><ol type="1"><li>单链表</li><li>双向链表</li><li>单循环链表</li><li>顺序表</li></ol>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据、数据元素、数据项、数据对象的介绍和理解</title>
      <link href="/2020/02/23/%E6%95%B0%E6%8D%AE%E3%80%81%E6%95%B0%E6%8D%AE%E5%85%83%E7%B4%A0%E3%80%81%E6%95%B0%E6%8D%AE%E9%A1%B9%E3%80%81%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E7%90%86%E8%A7%A3/"/>
      <url>/2020/02/23/%E6%95%B0%E6%8D%AE%E3%80%81%E6%95%B0%E6%8D%AE%E5%85%83%E7%B4%A0%E3%80%81%E6%95%B0%E6%8D%AE%E9%A1%B9%E3%80%81%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<figure><imgsrc="https://img-blog.csdnimg.cn/20190618173532304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzMxNjU3ODg5,size_16,color_FFFFFF,t_70"alt="在这里插入图片描述" /><figcaption aria-hidden="true">在这里插入图片描述</figcaption></figure><p>数据结构是相互之间存在一种或多种特定关系的数据元素的集合。</p><p>数据：是描述客观事物的符号，是计算机中可以操作的对象，是能被计算机识别，并输入给计算机处理的符号集合。数据不仅仅包括整形、实型等数值类型，还包括字符及声音、图像、视频等非数值类型。<br />数据，也就是符号，必须具备两个前提：<br />a.可以输入到计算机中<br />b.能被计算机程序处理<br />对于整型、实型等数值类型，可以进行数值计算。<br />对于字符数据类型，就需要非数值的处理。而声音、图像、视频等其实是可以通过编码的手段变成字符数据来处理的</p><p>数据元素：是组成数据的、有一定意义的基本单位，在计算机中通常作为整体处理。也被称为记录。<br />比如 畜类 牛、马、羊、鸡、猪、狗等动物当然就是畜类的数据元素。</p><p>数据项：一个数据元素可以由若干个数据项组成。<br />比如人这样的元素，可以有眼、耳、鼻、嘴等数据项，也可以有姓名、年龄、性别等数据项。<br />数据项是数据不可分割的最小单位。</p><p>数据对象**：是性质相同的数据元素的集合，是数据的子集。<br />什么叫性质相同呢？是指数据元素具有相同数量和类型的数据项，比如人这个例子，都有姓名、生日、性别等相同的数据项。<br />既然数据对象是数据的子集，在实际应用中，处理的数据元素通常具有相同性质，在不产生混淆的情况下，我们将数据对象简称为数据。</p><p>数据结构<br />结构，简单的理解就是关系，比如分子结构，就是组成分子的原子之间的排列方式。严格带你说，结构是指各个组成部分相互搭配的排列的方式。在现实世界中，不同数据元素之间不是独立的，而是存在特定的关系，我们将这些关系成为结构。<br />数据结构：是相互之间存在一种或者多种特定关系的数据元素的集合。</p><p>根据网上大佬的理解 可能会更直观一些：<br />假设有两张表，A表为人员表，B表为课程表， 表的格式如下：</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/02/image-1-1024x316.png" /></p><p>重点：</p><p>这两张表就是数据<br />而单独的一张表就称为数据对象，即人员表是一个数据对象，课程表也是一个数据对象<br />而每张表中的每一行就称为数据元素<br />而姓名，性别，身高，课程代号，课程名就称为数据项</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构与算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Install Goolge BBR on CentOS</title>
      <link href="/2019/10/31/install-goolge-bbr-on-centos/"/>
      <url>/2019/10/31/install-goolge-bbr-on-centos/</url>
      
        <content type="html"><![CDATA[<h2 id="centos安装谷歌bbr加速插件">CentOS安装谷歌BBR加速插件</h2><p>BBR (Bottleneck Bandwidth and RTT) is a new congestion controlalgorithm which is contributed to the Linux kernel TCP stack by Google.With BBR in place, a Linux server can get significantly increasedthroughput and reduced latency for connections. Besides, it's easy todeploy BBR because this algorithm requires only updates on the senderside, not in the network or on the receiver side.</p><p>In this article, I will show you how to deploy BBR on a Vultr CentOS7 KVM server instance.</p><h3 id="prerequisites">Prerequisites</h3><ul><li>A Vultr CentOS 7 x64 server instance.</li><li>A <ahref="https://www.vultr.com/docs/how-to-use-sudo-on-debian-centos-and-freebsd">sudouser</a>.</li></ul><h3 id="step-1-upgrade-the-kernel-using-the-elrepo-rpm-repository">Step1: Upgrade the kernel using the ELRepo RPM repository</h3><p>In order to use BBR, you need to upgrade the kernel of your CentOS 7machine to 4.9.0. You can easily get that done using the ELRepo RPMrepository.</p><p>Before the upgrade, you can take a look at the current kernel:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p>This command should output a string which resembles:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.10.0-514.2.2.el7.x86_64</span><br></pre></td></tr></table></figure><p>As you see, the current kernel is 3.10.0.</p><p>Install the ELRepo repo:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br><span class="line">sudo rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure><p>Install the 4.9.0 kernel using the ELRepo repo:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum --enablerepo=elrepo-kernel install kernel-ml -y</span><br></pre></td></tr></table></figure><p>Confirm the result:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa  grep kernel</span><br></pre></td></tr></table></figure><p>If the installation is successful, you shouldsee <code>kernel-ml-4.9.0-1.el7.elrepo.x86_64</code> among the outputlist:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kernel-ml-4.9.0-1.el7.elrepo.x86_64</span><br><span class="line">kernel-3.10.0-514.el7.x86_64</span><br><span class="line">kernel-tools-libs-3.10.0-514.2.2.el7.x86_64</span><br><span class="line">kernel-tools-3.10.0-514.2.2.el7.x86_64</span><br><span class="line">kernel-3.10.0-514.2.2.el7.x86_64</span><br></pre></td></tr></table></figure><p>Now, you need to enable the 4.9.0 kernel by setting up the defaultgrub2 boot entry.</p><p>Show all entries in the grub2 menu:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo egrep ^menuentry /etc/grub2.cfg  cut -f 2 -d \&#x27;</span><br></pre></td></tr></table></figure><p>The result should resemble:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CentOS Linux 7 Rescue a0cbf86a6ef1416a8812657bb4f2b860 (4.9.0-1.el7.elrepo.x86_64)</span><br><span class="line">CentOS Linux (4.9.0-1.el7.elrepo.x86_64) 7 (Core)</span><br><span class="line">CentOS Linux (3.10.0-514.2.2.el7.x86_64) 7 (Core)</span><br><span class="line">CentOS Linux (3.10.0-514.el7.x86_64) 7 (Core)</span><br><span class="line">CentOS Linux (0-rescue-bf94f46c6bd04792a6a42c91bae645f7) 7 (Core)</span><br></pre></td></tr></table></figure><p>Indexing starts at <code>0</code>. This means that the 4.9.0 kernelis located at <code>1</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grub2-set-default `</span><br></pre></td></tr></table></figure><p>Reboot the system:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -r now</span><br></pre></td></tr></table></figure><p>When the server is back online, log back in and rerun the unamecommand to confirm that you are using the correct Kernel:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p>You should see the result as below:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.9.0-1.el7.elrepo.x86_64</span><br></pre></td></tr></table></figure><h3 id="step-2-enable-bbr">Step 2: Enable BBR</h3><p>In order to enable the BBR algorithm, you need to modifythe <code>sysctl</code> configuration as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;net.core.default_qdisc=fq&#x27;  sudo tee -a /etc/sysctl.conf</span><br><span class="line">echo &#x27;net.ipv4.tcp_congestion_control=bbr&#x27;  sudo tee -a /etc/sysctl.conf</span><br><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure><p>Now, you can use the following commands to confirm that BBR isenabled:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure><p>The output should resemble:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_available_congestion_control = bbr cubic reno</span><br></pre></td></tr></table></figure><p>Next, verify with:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -n net.ipv4.tcp_congestion_control</span><br></pre></td></tr></table></figure><p>The output should be:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bbr</span><br></pre></td></tr></table></figure><p>Finally, check that the kernel module was loaded:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod  grep bbr</span><br></pre></td></tr></table></figure><p>The output will be similar to:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp_bbr                16384  0</span><br></pre></td></tr></table></figure><h3 id="step-3-optional-test-the-network-performance-enhancement">Step 3(optional): Test the network performance enhancement</h3><p>In order to test BBR's network performance enhancement, you cancreate a file in the web server directory for download, and then testthe download speed from a web browser on your desktop machine.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install httpd -y</span><br><span class="line">sudo systemctl start httpd.service</span><br><span class="line">sudo firewall-cmd --zone=public --permanent --add-service=http</span><br><span class="line">sudo firewall-cmd --reload</span><br><span class="line">cd /var/www/html</span><br><span class="line">sudo dd if=/dev/zero of=500mb.zip bs=1024k count=500</span><br></pre></td></tr></table></figure><p>Finally, visit theURL <code>http://[your-server-IP]/500mb.zip</code> from a web browser onyour desktop computer, and then evaluate download speed.</p><p>That's all. Thank you for reading.</p><p>copyright Vultr.com</p><p>版权归Vultr.com所有</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>搭建脚本</title>
      <link href="/2019/10/31/%E6%90%AD%E5%BB%BA%E8%84%9A%E6%9C%AC/"/>
      <url>/2019/10/31/%E6%90%AD%E5%BB%BA%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<p>一键搭建 VPNshadowsocks/搭建shadowsocksR的shell脚本，一键脚本适用Vultr上的和搬瓦工所有机型（CentOS、Ubuntu、Debian），搭建ss服务器支持所有客户端类型，本机你是iOS，Android，Windows，Mac，或者是Linux。一键脚本内容包括一键搭建shadowsocks/一键搭建shadowsocksR+一键开启bbr加速。</p><h2 id="什么是shadowsocks">什么是shadowsocks</h2><p>shadowsocks可以指一种SOCKS5的加密传输协议，也可以指基于这种加密协议的各种数据传输包。shadowsocks正常工作需要服务器端和客户端两端合作实现，首先，客户端（本机）通过ss（shadowsocks）对正常的访问请求进行SOCK5加密，将加密后的访问请求传输给ss服务器端，服务器端接收到客户端的加密请求后，解密得到原始的访问请求，根据请求内容访问指定的网站（例如Google，YouTube，Facebook，instagram等），得到网站的返回结果后，再利用SOCKS5加密并返回给客户端，客户端通过ss解密后得到正常的访问结果，于是就可以实现你直接访问该网站的“假象”。</p><p>为什么选择shadowsocks？不限终端（安卓，苹果，Windows，Mac都可用），流量便宜（服务器500G只要15元），方便（一键脚本，不需要专业知识）。</p><p>为什么要自己搭建ss/ssr？你也许会觉得买ss服务也很方便，但是你得要考虑以下几个问题。首先，买的ss服务，限制很多，终端可能只能同时在线2个，每个月就一点点流量可能价格却不便宜，有时候还被别人做手脚，流量跑的贼快；其次，别人收钱跑路怎么办？很多这种情况的；更重要的是，如第一个问题中描述的shadowsocks原理，如果有心人做了一点手脚，是可以得到你的访问记录的；而自己搭建ss/ssr服务，一键脚本也就10来分钟就可以搞定。</p><h2id="一键脚本搭建ssssr支持系统版本">一键脚本搭建ss/ssr支持系统版本</h2><p>脚本系统支持：CentOS 6+，Debian 7+，Ubuntu 12+</p><p>注：这个脚本支持的系统版本是指ss服务器的版本（都没看过也没关系，不影响搭建），你本机是Windows、Mac、Linux，或者你想用手机端搭建ss/ssr服务器，安卓和苹果，都是可以的。</p><h2 id="服务器购买">服务器购买</h2><p>服务器推荐Vultr和搬瓦工，一是因为本脚本在这两家的所有VPS都做了测试，二是因为都是老牌VPS服务商，不怕跑路。</p><p><strong>Vultr：</strong><ahref="https://www.vultr.com/promo25b/?ref=7371675">https://www.vultr.com</a>，最低月付2.5刀/500GB流量每月，推荐使用PayPal绑定Visa/Master信用卡，支持支付宝付款<br /><strong>更新注意:</strong> Vultr服务器2.5美元/月的不提供ipv4地址，不能正常使用，所以只能购买5美元/月的了</p><p><strong>搬瓦工：</strong><ahref="https://bwh1.net/aff.php?aff=32798">https://bwh1.net</a>，可以访问登录，但是注册账号的时候需要全局才能成功<br />新用户注册链接：<ahref="https://bwh1.net/aff.php?aff=32798">https://bwh1.net/aff.php?aff=32798</a>，支持PayPal/支付宝/Visa/Master付款，最低年付19.99刀/500GB流量每月(已补货，之前售空了)</p><p><strong>Vultr 官方发布新活动了，新用户激活账户就送 25美元！参与推特活动可再获得 3 美元！</strong><br />1、送 25 美元注册地址：<ahref="https://www.vultr.com/promo25b/?ref=8290178">https://www.vultr.com/promo25b/?ref=7371675</a><br />需要外币信用卡（Visa 卡等）或 Paypal账户（可绑定银联卡）才可参与活动，赠送部分有效期一年<br />2、无 25 美元注册地址：<ahref="https://www.vultr.com/promo25b/?ref=8290178">https://www.vultr.com/?ref=8290178</a><br />支付宝充值是没有优惠的，想使用 vultr 的请从上面地址注册<br />3、推特送 3 美元活动地址：<ahref="https://my.vultr.com/promo/">https://my.vultr.com/promo/</a><br />充值账户后才可以参与这个推特活动<br /><strong>注意：</strong>此活动仅限从未注册过 Vultr的参加，个人注册多个账户可能会被没收赠送金额！<br />如果自己从未注册过这一家，但是还是没有赠送，可以登录后点击左侧 Support联系客服进行处理！</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0lq2qaw5j211y0hlad4.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0lri8uh4j211t0hkdjo.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><h2 id="一键搭建ss搭建ssr服务">一键搭建SS/搭建SSR服务</h2><p>注意，shadowsocks/shadowsocksR这两个只需要搭建一个就可以了！！！！SS与SSR之间的比较一直是各有各的说法，王婆卖瓜自卖自夸。</p><h3 id="一键搭建shadowsocks">一键搭建shadowsocks</h3><p>在购买VPS并用PuTTY连接上你刚购买的VPS后，你将看到如下图所示的界面：</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0jnt59zlj20id0ciaao.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>1.下载一键搭建ss脚本文件，只需要执行一次，卸载ss后也不需要重新下载</p><p>git clone https://github.com/flyzy2005/ss-fly</p><p>如果提示bash: git: command not found，则先安装git：</p><p>Centos执行这个：</p><p>yum -y install git</p><p>Ubuntu/Debian执行这个：</p><p>apt-get -y install git</p><p>2.运行搭建ss脚本代码</p><p>ss-fly/ss-fly.sh -i password 1024</p><p>其中password换成你要设置的shadowsocks的密码即可，最好只包含字母+数字，一些特殊字符可能会导致冲突。而第二个参数1024是端口号，也可以不加，不加默认是1024。</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0jrpq7vuj20id0cijs9.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>界面如下就表示一键搭建ss成功了：</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0juvuqu5j20id08iwf0.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>注：如果需要改密码或者改端口，只需要重新再执行一次搭建ss脚本代码就可以了，或者修改/etc/shadowsocks.json这个配置文件。</p><p>3.相关ss操作</p><p>修改配置文件：vim /etc/shadowsocks.json 停止ss服务：ssserver -c/etc/shadowsocks.json -d stop 启动ss服务：ssserver -c/etc/shadowsocks.json -d start 重启ss服务：ssserver -c/etc/shadowsocks.json -d restart</p><p>4.卸载ss服务</p><p>ss-fly/ss-fly.sh -uninstall</p><h3 id="一键搭建shadowsocksr">一键搭建shadowsocksR</h3><p>再次提醒，如果安装了SS，就不需要再安装SSR了，如果要改装SSR，请按照上一部分内容的教程先卸载SS！！！</p><p>1.下载一键搭建ssr脚本(只需要执行一次，卸载ssr后也不需要重新执行)，此步骤与一键搭建ss一致</p><p>git clone https://github.com/flyzy2005/ss-fly</p><p>2.运行搭建ssr脚本代码</p><p>ss-fly/ss-fly.sh -ssr</p><p>3.输入对应的参数</p><p>执行完上述的脚本代码后，会进入到输入参数的界面，包括服务器端口，密码，加密方式，协议，混淆。可以直接输入回车选择默认值，也可以输入相应的值选择对应的选项：</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0k8so58bj20ll0ipjre.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>全部选择结束后，会看到如下界面，就说明搭建ssr成功了：</p><p>Congratulations, ShadowsocksR server install completed! Your ServerIP        :你的服务器ip Your Server Port      :你的端口 YourPassword         :你的密码 Your Protocol         :你的协议 Yourobfs             :你的混淆 Your Encryption Method:your_encryption_methodWelcome to visit:https://shadowsocks.be/9.html Enjoy it!</p><p>4.相关操作ssr命令</p><p>启动：/etc/init.d/shadowsocks start 停止：/etc/init.d/shadowsocksstop 重启：/etc/init.d/shadowsocks restart 状态：/etc/init.d/shadowsocksstatus 配置文件路径：/etc/shadowsocks.json日志文件路径：/var/log/shadowsocks.log代码安装目录：/usr/local/shadowsocks</p><p>5.卸载ssr服务</p><p>./shadowsocksR.sh uninstall</p><p>文件配置方法：</p><p>{ "server":"0.0.0.0", "server_port":4431, "local_port":1080,"password":"密码", "timeout":600, "method":"aes-256-cfb" }</p><p>多端口密码配置如下</p><p>{ "server":"0.0.0.0", "local_port":1080, "port_password": { "端口1":"密码1", "端口2": "密码2" }, "timeout":600, "method":"aes-256-cfb" }</p><h2 id="一键开启bbr加速">一键开启BBR加速</h2><p>BBR是Google开源的一套内核加速算法，可以让你搭建的shadowsocks/shadowsocksR速度上一个台阶，本一键搭建ss/ssr脚本支持一键升级最新版本的内核并开启BBR加速。</p><p>BBR支持4.9以上的，如果低于这个版本则会自动下载最新内容版本的内核后开启BBR加速并重启，如果高于4.9以上则自动开启BBR加速，执行如下脚本命令即可自动开启BBR加速：</p><p>ss-fly/ss-fly.sh -bbr</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0kbjmcz5j20pf07ma9y.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>装完后需要重启系统，输入y即可立即重启，或者之后输入reboot命令重启。</p><p>判断BBR加速有没有开启成功。输入以下命令：</p><p>sysctl net.ipv4.tcp_available_congestion_control</p><p>如果返回值为：</p><p>net.ipv4.tcp_available_congestion_control = bbr cubic reno</p><p>后面有bbr，则说明已经开启成功了。</p><h2id="客户端shadowsocksshadowsockr登录使用">客户端shadowsocks/shadowsockR登录使用</h2><p><strong>shadowsocks客户端下载地址：</strong><br /><strong>Windows客户端:</strong> <ahref="https://github.com/shadowsocks/shadowsocks-windows/releases">https://github.com/shadowsocks/shadowsocks-windows/releases</a><br /><strong>Mac客户端:</strong> <ahref="https://github.com/shadowsocks/ShadowsocksX-NG/releases">https://github.com/shadowsocks/ShadowsocksX-NG/releases</a><br /><strong>Linux客户端:</strong> <ahref="https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation">https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation</a><br /><strong>Android/安卓客户端：</strong><ahref="https://github.com/shadowsocks/shadowsocks-android/releases">https://github.com/shadowsocks/shadowsocks-android/releases</a><br /><strong>iOS客户端：</strong>商店搜索Wingy/shadowsocks(美国地区)下载</p><p>以Windows为例，依次填入服务器IP，服务器端口，密码，保存配置</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0jj5rdzij20ct0cet8z.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>在状态栏右击shadowsocks，勾选开机启动和启动系统代理，在系统代理模式中选择PAC模式，服务器-&gt;编辑服务器，一键安装shadowsocks的脚本默认服务器端口是1024，加密方式是aes-256-cfb，密码是你设置的密码，ip是你自己的VPSip，保存即可。</p><p><strong>shadowsockR客户端下载地址：<br />Windows客户端:</strong> <ahref="https://github.com/shadowsocksrr/shadowsocksr-csharp/releases">https://github.com/shadowsocksrr/shadowsocksr-csharp/releases</a><strong>Mac客户端:</strong><ahref="https://github.com/flyzy2005/ss-ssr-clients/raw/master/ssr/SS-X-R.zip">https://github.com/flyzy2005/ss-ssr-clients/raw/master/ssr/SS-X-R.zip</a><strong>Linux客户端:</strong><ahref="https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation">https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation</a>**<br />Android/安卓客户端：<strong><ahref="https://github.com/shadowsocksrr/shadowsocksr-android/releases">https://github.com/shadowsocksrr/shadowsocksr-android/releases</a></strong><br />iOS客户端：**商店搜索Wingy/shadowsocks(美国地区)下载</p><p>以Windows为例：</p><figure><imgsrc="http://www.yehes.com/wp-content/uploads/2018/09/77c76f11gy1fs0kfp1oulj20ie0dyglr.jpg"alt="一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网" /><figcaptionaria-hidden="true">一键脚本轻松搭建SS教程/搭建SSR并开启BBR加速-夜河资源网</figcaption></figure><p>在状态栏右击shadowsocksR，在系统代理模式中选择PAC模式，再左击两次状态栏的图标打开编辑服务器界面，如上图所示，按照自己的服务器配置填充内容，保存即可。</p><p>一键脚本GitHub地址：<ahref="https://github.com/flyzy2005/ss-fly">https://github.com/flyzy2005/ss-fly</a><br />shadowsocks项目GitHub：<ahref="https://github.com/shadowsocks">https://github.com/shadowsocks</a><br />shadowsocksR项目GitHub：<ahref="https://github.com/shadowsocksrr">https://github.com/shadowsocksrr</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Kexue上网查资料</title>
      <link href="/2019/10/10/kexue%E4%B8%8A%E7%BD%91%E6%9F%A5%E8%B5%84%E6%96%99/"/>
      <url>/2019/10/10/kexue%E4%B8%8A%E7%BD%91%E6%9F%A5%E8%B5%84%E6%96%99/</url>
      
        <content type="html"><![CDATA[<p>在管控越来越严的形势下，以前的很多软件都不能再用了，所以自己动手丰衣足食才是最好的方法。</p><p>所需软件：1.<ahref="http://链接：https://pan.baidu.com/s/1dNTBc5rHUXoVC9F5Hh3ttA">Xshell</a>提取码opph 2.<ahref="http://链接：https://pan.baidu.com/s/1NJmhSbLI3SIjRJVgvxKQlg">shadowsocksr</a>2o4c</p><h2 id="一购买服务器">一：购买服务器</h2><p>首先我们需要一个jingwai服务器，我是在 <ahref="https://www.vultr.com/?ref=7743951">vultr</a>购买的。注册账号后首先选择自己需要的服务器。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/10/image-1024x441.png" /></p><p>选择第一个</p><p>下边的地区根据自己的需求选择即可。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/10/image-1-1024x641.png" /></p><p>下边的大小选最小的就可以满足需求</p><p>之后部署即可。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/10/image-2-1024x368.png" /></p><h2 id="二连接到服务器">二：连接到服务器</h2><p>打开xshell，输入刚刚部署的服务器ip后他会自动连接。现在会有两种可能的结果</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/10/image-3.png" /></p><p>一直显示连接中</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/10/image-4.png" /></p><p>瞬间连接上</p><p>若是2，那么恭喜你，你的服务器可以用。若是1，现在就需要再去刚刚那个网站，把刚买的fwq销毁掉再买一个，知道出现2即可</p><h2 id="三配置">三：配置</h2><p>这一步很简单，首先使用<code>wget --no-check-certificate https://freed.ga/github/shadowsocksR.sh; bash shadowsocksR.sh</code>自动安装</p><p>然后安装加速插件，先使用wget -N --no-check-certificatehttps://freed.ga/kernel/ruisu.sh &amp;&amp; bashruisu.sh更换ubantu版本</p><p>再使用wget -N --no-check-certificatehttps://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.sh&amp;&amp; bash serverspeeder-all.sh安装加速</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2020/02/image.png" /></p><p>四：使用</p><p>使用刚刚下载的第二个软件输入内容即可</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>简易建站教程</title>
      <link href="/2019/09/05/%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BD%91%E9%A1%B5/"/>
      <url>/2019/09/05/%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BD%91%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<p>放完暑假开学后回到班里，偶然看到同学在搞个人网页。由于我之前在Wix上有过一个个人主页，但是那个属于利用他网站给的现成的资源，只需要自己写文章即可。做为一个学计算机的学生，我当然不仅仅满足于写文章，所以我打算搭建一个属于自己的网页</p><h3 id="第一步购买所需原料">第一步：购买所需原料</h3><p>想要自己的网页24小时可用，靠自己的电脑肯定是不够的，所以就需要一个云主机。我这里购买的是腾讯云的主机，因为他有学生优惠，一年的主机只要120，加16元就可以买一年的域名，简直完美符合我的需求。买服务器时我建议买三个月以上时长的，原因后边会讲。</p><p><ahref="https://sp0.baidu.com/9q9JcDHa2gU2pMbgoY3K/adrc.php?t=06KL00c00fALeK30dWk-0awHAsKpIgKI00000ryI5NC00000vOPxvZ.THLnvVAvdnm0UWdBmy-bIfK15yuWuAc4uj9-nj0snAnvPWc0IHdKrHnzP17jrj0YnRDzPWRkfRFanj6znYc1PDcvnWc3f6K95gTqFhdWpyfqn1c3PHRsPHRkrausThqbpyfqnHm0uHdCIZwsT1CEQvP_ULNbQMw-UhP-UMf8mvqVQv7WIaqWmydsIgnOuMFEUNPEIgFWuHdMILGWIz3zPHD4PHb3QWcdnHbdrH68nWRkrHR4raudIAdxUyNbpgNV5yPsuaudIAdxpyfquLIlmLT8nWRkrHR4ra3zPHD4PHb3QWcdnHbdrH60mLFW5HR3rjRv&amp;tpl=tpl_11534_19968_16032&amp;l=1513987557&amp;attach=location%3D%26linkName%3D%25E6%2596%2587%25E5%25AD%2597%25E5%2588%2597%25E8%25A1%25A8-%25E7%25AC%25AC1%25E8%25A1%258C%25E6%2596%2587%25E6%259C%25AC%26linkText%3D%255B%25E4%25BA%2591%252B%25E6%25A0%25A1%25E5%259B%25AD%255D%25E5%25AD%25A6%25E7%2594%259F%25E4%25BA%2591%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E4%25BD%2593%25E9%25AA%258C%25E5%25A5%2597%25E9%25A4%259010%25E5%2585%2583%252F%25E6%259C%2588%26xp%3Did(%2522m3285505518_canvas%2522)%252FDIV%255B1%255D%252FDIV%255B2%255D%252FDIV%255B1%255D%252FUL%255B1%255D%252FLI%255B1%255D%252FA%255B1%255D%26linkType%3D%26checksum%3D84&amp;ie=utf-8&amp;f=8&amp;tn=baidu&amp;wd=%E8%85%BE%E8%AE%AF%E4%BA%91&amp;rqlang=cn&amp;inputT=1812">学生优惠页面</a></p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/image-1024x401.png" /></p><p>在买域名之前需要先去看看自己想要注册的域名是否被注册了，这一步我们可以在很多网站完成，但是为了方便我还是选择<ahref="https://dnspod.cloud.tencent.com/">腾讯云</a>。其实阿里云的域名会稍微便宜一点，如果想省钱可以买阿里云的。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/image-1-1024x679.png" /></p><p>可以看到有的已经被注册了，这时就需要换一个名字搜索...</p><p>域名后的这个.xxx不一样，价格也不太一样。.com是国际的域名后缀，其他的就是各国分配的后缀。有的很便宜的是某些小国家的域名，我还是建议买咱们中国的.cn，比.com便宜一些还很靠谱，知名度也高。</p><h2 id="第二步域名备案-服务器的准备工作">第二步：域名备案，服务器的准备工作</h2><p>在完成第一步后我们应该现在有一个云服务器和一个域名了。首先我们要域名备案，由于管局要求，国内的服务器搭建的网址都需要备案。在备案时需要一个备案授权码，但是这个授权码腾讯云只给三个月以上时长的服务器生成，所以是之前建议买超过三个月的服务器。我当时就是因为买了一个月的，这时还得再去续费才能用。</p><p>备案我建议用腾讯云的微信小程序，流程非常快，只需要跟着要求走就可以，我是不到一周就通过了，他官方给的时间是20天以内。不备案你的网页就不能上线，所以我还是推荐尽早完成。</p><p>备案后还需要进行域名解析，填完保存就可以。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/image-3-1024x538.png" /></p><p>记录值填你买的服务器的公网IP</p><p>接下来我们需要进行服务器准备，进入控制台会看到这个页面,点登录进入控制台。我在这用的是宝塔的面板，安装教程可以去他<ahref="https://www.bt.cn/">官网</a>找到<imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/PTQ8FE273SESX26I.png" /></p><p>安装完成宝塔后在服务器后台页面会有一个网址，用户名和密码。在浏览器打开网址并用用户名密码登录后进入宝塔的控制台。第一次登录他会让你安装框架，安装推荐的就可以，然后等他安装好。</p><p>这时我们需要配置自己网页，在宝塔面板左边找到网站,选择添加站点，像图中这样配置，用户名和密码都可以自己写，只要能记住就行。</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/image-2-1024x566.png" /></p><p>等待的时候我们还需要去网上下载一个工具Xshell和Xftp。可以自行百度也可以用我这个<ahref="https://pan.baidu.com/s/1Tu8UMCjk2_cH114imOxbRQ">版本</a><br />提取码：gwej，无需安装，只要解压出来就可以。这两个工具可以让你连接到服务器和上传文件更加方便。</p><h2 id="第三步网站建设">第三步：网站建设</h2><p>现在你应该已经能通过www.你的域名.xx进入你的网页了，它会提示你当前页是宝塔自动生成的，这时我们需要上传自己的网页。用之前下载的Xftp或宝塔面板的文件页面都可以</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/image-4-832x1024.png" /></p><p>Xftp设置页面</p><p>在Xftp中Host填服务器公网IP，下边username和password都填服务器管理员的账号密码</p><p><imgsrc="http://www.zhaoxuanlang.cn/wp-content/uploads/2019/09/image-5-1024x627.png" /></p><p>进www文件夹里wwwroot里你域名那个文件夹</p><p>现在你的文件夹里应该只有两个html，我们需要把这两个文件都删了，把你想上传的网页放到这个文件夹里就可以，但记得把网页名字改成index</p><p>到此，我们网站的建设就完成了。下边我还要介绍一下worldpress的安装。</p><h2 id="第四步worldpress的安装">第四步：worldpress的安装</h2><p>首先需要去worldpress官网<ahref="https://cn.wordpress.org/download/">下载</a>组件，下载后解压到刚刚的域名文件夹里。</p><p>现在如果打开网页，如果发现他提示php版本过低，就去宝塔面板里的软件商店安装最新php并禁用你当前版本的php即可</p><p>现在你应该进入了worldpress的设置界面，按着他说的进行就可以，只有一步，你需要在数据库的地方填入刚刚宝塔设置网页时的用户名和密码。</p><p>现在你有了一个属于自己的world press网页！</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
